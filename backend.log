2025-05-22 13:14:44,748 - INFO - Application startup event triggered.
2025-05-22 13:14:44,748 - INFO - Initializing all queues...
2025-05-22 13:14:44,749 - INFO - All queues initialized on loop 29787952
2025-05-22 13:14:44,749 - INFO - Shared queues initialized.
2025-05-22 13:14:44,749 - INFO - Retrieved queue instances. Event loop ID: 29787952
2025-05-22 13:14:44,749 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 13:14:44,749 - INFO - MessageProcessor task started.
2025-05-22 13:14:44,749 - INFO - QueueForwarder task started.
2025-05-22 13:14:44,749 - INFO - Application startup complete. All core services initialized.
2025-05-22 13:14:44,749 - INFO - Starting message processor
2025-05-22 13:14:44,750 - INFO - Starting queue forwarder
2025-05-22 13:14:47,546 - INFO - Simulation task starting
2025-05-22 13:14:47,546 - INFO - System message enqueued to backend queue
2025-05-22 13:14:47,548 - INFO - Successfully forwarded message sys_init to frontend
2025-05-22 13:15:06,565 - INFO - Simulation stopped
2025-05-22 13:15:08,026 - ERROR - Receive error: 1012
2025-05-22 13:15:08,026 - INFO - Connection closed for 127.0.0.1:58294
2025-05-22 13:15:08,126 - INFO - Application shutdown event triggered.
2025-05-22 13:15:08,126 - INFO - MessageProcessor task cancelled.
2025-05-22 13:15:08,126 - INFO - QueueForwarder task cancelled.
2025-05-22 13:15:08,127 - INFO - All WebSocket connections attempted to close.
2025-05-22 13:15:08,127 - INFO - Application shutdown complete.
2025-05-22 13:24:37,306 - INFO - Application startup event triggered.
2025-05-22 13:24:37,306 - INFO - Initializing all queues...
2025-05-22 13:24:37,306 - INFO - All queues initialized on loop 270280496
2025-05-22 13:24:37,306 - INFO - Shared queues initialized.
2025-05-22 13:24:37,307 - INFO - Retrieved queue instances. Event loop ID: 270280496
2025-05-22 13:24:37,307 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 13:24:37,307 - INFO - MessageProcessor task started.
2025-05-22 13:24:37,307 - INFO - QueueForwarder task started.
2025-05-22 13:24:37,307 - INFO - Application startup complete. All core services initialized.
2025-05-22 13:24:37,307 - INFO - Starting message processor
2025-05-22 13:24:37,307 - INFO - Starting queue forwarder
2025-05-22 13:24:40,972 - INFO - Simulation task starting
2025-05-22 13:24:40,972 - INFO - System message enqueued to backend queue
2025-05-22 13:24:40,973 - INFO - Successfully forwarded message sys_init to frontend
2025-05-22 13:24:48,013 - INFO - Simulation stopped
2025-05-22 13:24:48,751 - ERROR - Receive error: 1012
2025-05-22 13:24:48,751 - INFO - Connection closed for 127.0.0.1:46096
2025-05-22 13:24:48,850 - INFO - Application shutdown event triggered.
2025-05-22 13:24:48,850 - INFO - MessageProcessor task cancelled.
2025-05-22 13:24:48,851 - INFO - QueueForwarder task cancelled.
2025-05-22 13:24:48,851 - INFO - All WebSocket connections attempted to close.
2025-05-22 13:24:48,851 - INFO - Application shutdown complete.
2025-05-22 13:45:33,075 - INFO - Application startup event triggered.
2025-05-22 13:45:33,075 - INFO - Initializing all queues...
2025-05-22 13:45:33,075 - INFO - All queues initialized on loop 353412912
2025-05-22 13:45:33,075 - INFO - Shared queues initialized.
2025-05-22 13:45:33,076 - INFO - Retrieved queue instances. Event loop ID: 353412912
2025-05-22 13:45:33,076 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 13:51:07,801 - INFO - Application startup event triggered.
2025-05-22 13:51:07,801 - INFO - Initializing all queues...
2025-05-22 13:51:07,801 - INFO - All queues initialized on loop 792147760
2025-05-22 13:51:07,801 - INFO - Shared queues initialized.
2025-05-22 13:51:07,801 - INFO - Retrieved queue instances. Event loop ID: 792147760
2025-05-22 13:51:07,801 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 13:51:07,802 - INFO - MessageProcessor queues verified
2025-05-22 13:51:07,802 - INFO - MessageProcessor task started.
2025-05-22 13:51:07,802 - INFO - QueueForwarder queues verified
2025-05-22 13:51:07,802 - INFO - QueueForwarder task started.
2025-05-22 13:51:07,802 - INFO - Application startup complete. All core services initialized.
2025-05-22 13:51:07,802 - INFO - Starting MessageProcessor
2025-05-22 13:51:07,802 - INFO - Starting QueueForwarder
2025-05-22 13:51:10,804 - INFO - Simulation task starting
2025-05-22 13:51:10,804 - INFO - System message enqueued to backend queue
2025-05-22 13:51:17,600 - INFO - Simulation stopped
2025-05-22 13:52:02,744 - ERROR - Receive error: 1001
2025-05-22 13:52:02,744 - INFO - Connection closed for 127.0.0.1:43510
2025-05-22 13:55:57,660 - INFO - Application shutdown event triggered.
2025-05-22 13:55:57,660 - INFO - MessageProcessor task cancelled.
2025-05-22 13:55:57,660 - INFO - QueueForwarder task cancelled.
2025-05-22 13:55:57,660 - INFO - All WebSocket connections attempted to close.
2025-05-22 13:55:57,660 - INFO - Application shutdown complete.
2025-05-22 15:56:58,825 - INFO - Application startup event triggered.
2025-05-22 15:56:58,825 - INFO - Initializing all queues...
2025-05-22 15:56:58,826 - INFO - All queues initialized on loop 614646368
2025-05-22 15:56:58,826 - INFO - Shared queues initialized.
2025-05-22 15:56:58,826 - INFO - Retrieved queue instances. Event loop ID: 614646368
2025-05-22 15:56:58,826 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 15:56:58,826 - INFO - MessageProcessor queues verified
2025-05-22 15:56:58,826 - INFO - MessageProcessor task started.
2025-05-22 15:56:58,826 - INFO - QueueForwarder queues verified
2025-05-22 15:56:58,826 - INFO - QueueForwarder task started.
2025-05-22 15:56:58,826 - INFO - Application startup complete. All core services initialized.
2025-05-22 15:56:58,826 - INFO - Starting MessageProcessor
2025-05-22 15:56:58,827 - INFO - Starting QueueForwarder
2025-05-22 15:57:12,377 - INFO - Application shutdown event triggered.
2025-05-22 15:57:12,377 - INFO - Stopping MessageProcessor...
2025-05-22 15:57:12,377 - WARNING - MessageProcessor didn't stop cleanly
2025-05-22 15:57:12,377 - INFO - QueueForwarder task cancelled.
2025-05-22 15:57:12,377 - INFO - All WebSocket connections attempted to close.
2025-05-22 15:57:12,378 - INFO - Application shutdown complete.
2025-05-22 15:57:24,549 - INFO - Application startup event triggered.
2025-05-22 15:57:24,549 - INFO - Initializing all queues...
2025-05-22 15:57:24,549 - INFO - All queues initialized on loop 387778688
2025-05-22 15:57:24,549 - INFO - Shared queues initialized.
2025-05-22 15:57:24,549 - INFO - Retrieved queue instances. Event loop ID: 387778688
2025-05-22 15:57:24,549 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 15:57:24,549 - INFO - MessageProcessor queues verified
2025-05-22 15:57:24,549 - INFO - MessageProcessor task started.
2025-05-22 15:57:24,549 - INFO - QueueForwarder queues verified
2025-05-22 15:57:24,549 - INFO - QueueForwarder task started.
2025-05-22 15:57:24,549 - INFO - Application startup complete. All core services initialized.
2025-05-22 15:57:24,550 - INFO - Starting MessageProcessor
2025-05-22 15:57:24,550 - INFO - Starting QueueForwarder
2025-05-22 15:57:25,863 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37246)
2025-05-22 15:57:25,863 - ERROR - Connection error for 127.0.0.1:37246: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-22 15:57:25,868 - INFO - Connection closed for 127.0.0.1:37246
2025-05-22 15:57:25,869 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 15:57:25,869 - ERROR - Error closing WebSocket for Address(host='127.0.0.1', port=37246): Cannot call "send" once a close message has been sent.
2025-05-22 15:57:25,870 - INFO - Connection closed for Address(host='127.0.0.1', port=37246)
2025-05-22 15:57:25,870 - INFO - WebSocket connection closed cleanly
2025-05-22 15:57:25,877 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37260)
2025-05-22 15:57:25,877 - ERROR - Connection error for 127.0.0.1:37260: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-22 15:57:25,889 - INFO - Connection closed for 127.0.0.1:37260
2025-05-22 15:57:25,889 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 15:57:25,889 - ERROR - Error closing WebSocket for Address(host='127.0.0.1', port=37260): Cannot call "send" once a close message has been sent.
2025-05-22 15:57:25,890 - INFO - Connection closed for Address(host='127.0.0.1', port=37260)
2025-05-22 15:57:25,890 - INFO - WebSocket connection closed cleanly
2025-05-22 15:57:39,293 - INFO - Application shutdown event triggered.
2025-05-22 15:57:39,293 - INFO - Stopping MessageProcessor...
2025-05-22 15:57:39,294 - WARNING - MessageProcessor didn't stop cleanly
2025-05-22 15:57:39,294 - INFO - QueueForwarder task cancelled.
2025-05-22 15:57:39,294 - INFO - All WebSocket connections attempted to close.
2025-05-22 15:57:39,294 - INFO - Application shutdown complete.
2025-05-22 16:00:00,584 - INFO - Application startup event triggered.
2025-05-22 16:00:00,585 - INFO - Initializing all queues...
2025-05-22 16:00:00,585 - INFO - All queues initialized on loop 808941696
2025-05-22 16:00:00,585 - INFO - Shared queues initialized.
2025-05-22 16:00:00,585 - INFO - Retrieved queue instances. Event loop ID: 808941696
2025-05-22 16:00:00,585 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:00:00,585 - INFO - MessageProcessor queues verified
2025-05-22 16:00:00,585 - INFO - MessageProcessor task started.
2025-05-22 16:00:00,585 - INFO - QueueForwarder queues verified
2025-05-22 16:00:00,585 - INFO - QueueForwarder task started.
2025-05-22 16:00:00,585 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:00:00,586 - INFO - Starting MessageProcessor
2025-05-22 16:00:00,586 - INFO - Starting QueueForwarder
2025-05-22 16:00:01,880 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=52928)
2025-05-22 16:00:01,881 - ERROR - Connection error for 127.0.0.1:52928: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-22 16:00:01,885 - INFO - Connection closed for 127.0.0.1:52928
2025-05-22 16:00:01,885 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 16:00:01,885 - ERROR - Error closing WebSocket for Address(host='127.0.0.1', port=52928): Cannot call "send" once a close message has been sent.
2025-05-22 16:00:01,885 - INFO - Connection closed for Address(host='127.0.0.1', port=52928)
2025-05-22 16:00:01,885 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
2025-05-22 16:00:01,893 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=52934)
2025-05-22 16:00:01,894 - ERROR - Connection error for 127.0.0.1:52934: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-22 16:00:01,904 - INFO - Connection closed for 127.0.0.1:52934
2025-05-22 16:00:01,905 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 16:00:01,905 - ERROR - Error closing WebSocket for Address(host='127.0.0.1', port=52934): Cannot call "send" once a close message has been sent.
2025-05-22 16:00:01,905 - INFO - Connection closed for Address(host='127.0.0.1', port=52934)
2025-05-22 16:00:01,905 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
2025-05-22 16:00:03,328 - INFO - Simulation task starting
2025-05-22 16:00:03,329 - INFO - System message enqueued to backend queue
2025-05-22 16:00:21,953 - INFO - Application shutdown event triggered.
2025-05-22 16:00:21,953 - INFO - SimulationManager stopped.
2025-05-22 16:00:21,953 - INFO - Stopping MessageProcessor...
2025-05-22 16:00:21,953 - WARNING - MessageProcessor didn't stop cleanly
2025-05-22 16:00:21,954 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 16:00:21,954 - INFO - All WebSocket connections attempted to close.
2025-05-22 16:00:21,954 - INFO - Application shutdown complete.
2025-05-22 16:03:08,875 - INFO - Application startup event triggered.
2025-05-22 16:03:08,875 - INFO - Initializing all queues...
2025-05-22 16:03:08,875 - INFO - All queues initialized on loop 795453568
2025-05-22 16:03:08,875 - INFO - Shared queues initialized.
2025-05-22 16:03:08,875 - INFO - Retrieved queue instances. Event loop ID: 795453568
2025-05-22 16:03:08,875 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:03:08,876 - INFO - MessageProcessor queues verified
2025-05-22 16:03:08,876 - INFO - MessageProcessor task started.
2025-05-22 16:03:08,876 - INFO - QueueForwarder queues verified
2025-05-22 16:03:08,876 - INFO - QueueForwarder task started.
2025-05-22 16:03:08,876 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:03:08,876 - INFO - Starting MessageProcessor
2025-05-22 16:03:08,877 - INFO - Starting QueueForwarder
2025-05-22 16:03:10,201 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=45202)
2025-05-22 16:03:10,205 - ERROR - Receive error: 1001
2025-05-22 16:03:10,206 - ERROR - Error closing WebSocket for 127.0.0.1:45202: Unexpected ASGI message 'websocket.close', after sending 'websocket.close'.
2025-05-22 16:03:10,206 - INFO - Connection closed for 127.0.0.1:45202
2025-05-22 16:03:10,206 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 16:03:10,206 - ERROR - Error closing WebSocket for Address(host='127.0.0.1', port=45202): Cannot call "send" once a close message has been sent.
2025-05-22 16:03:10,206 - INFO - Connection closed for Address(host='127.0.0.1', port=45202)
2025-05-22 16:03:10,206 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=45202)
2025-05-22 16:03:10,214 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=45214)
2025-05-22 16:03:17,886 - INFO - Simulation task starting
2025-05-22 16:03:17,886 - INFO - System message enqueued to backend queue
2025-05-22 16:03:17,887 - ERROR - Send error: Cannot call "send" once a close message has been sent.
2025-05-22 16:03:26,029 - ERROR - Receive error: 1012
2025-05-22 16:03:26,030 - ERROR - Error closing WebSocket for 127.0.0.1:45214: Unexpected ASGI message 'websocket.close', after sending 'websocket.close'.
2025-05-22 16:03:26,030 - INFO - Connection closed for 127.0.0.1:45214
2025-05-22 16:03:26,030 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 16:03:26,030 - ERROR - Error closing WebSocket for Address(host='127.0.0.1', port=45214): Cannot call "send" once a close message has been sent.
2025-05-22 16:03:26,030 - INFO - Connection closed for Address(host='127.0.0.1', port=45214)
2025-05-22 16:03:26,030 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=45214)
2025-05-22 16:03:26,233 - INFO - Application shutdown event triggered.
2025-05-22 16:03:26,233 - INFO - SimulationManager stopped.
2025-05-22 16:03:26,233 - INFO - Stopping MessageProcessor...
2025-05-22 16:03:26,233 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 16:03:26,233 - INFO - All WebSocket connections attempted to close.
2025-05-22 16:03:26,233 - INFO - Application shutdown complete.
2025-05-22 16:05:54,855 - INFO - Application startup event triggered.
2025-05-22 16:05:54,855 - INFO - Initializing all queues...
2025-05-22 16:05:54,856 - INFO - All queues initialized on loop 776222848
2025-05-22 16:05:54,856 - INFO - Shared queues initialized.
2025-05-22 16:05:54,856 - INFO - Retrieved queue instances. Event loop ID: 776222848
2025-05-22 16:05:54,856 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:05:54,856 - INFO - MessageProcessor queues verified
2025-05-22 16:05:54,856 - INFO - MessageProcessor task started.
2025-05-22 16:05:54,856 - INFO - QueueForwarder queues verified
2025-05-22 16:05:54,856 - INFO - QueueForwarder task started.
2025-05-22 16:05:54,856 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:05:54,856 - INFO - Starting MessageProcessor
2025-05-22 16:05:54,856 - INFO - Starting QueueForwarder
2025-05-22 16:05:56,160 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=35564)
2025-05-22 16:05:56,163 - ERROR - Receive error: 1001
2025-05-22 16:05:56,163 - ERROR - Error closing WebSocket for 127.0.0.1:35564: Unexpected ASGI message 'websocket.close', after sending 'websocket.close'.
2025-05-22 16:05:56,163 - INFO - Connection closed for 127.0.0.1:35564
2025-05-22 16:05:56,164 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 16:05:56,164 - ERROR - Error closing WebSocket for Address(host='127.0.0.1', port=35564): Cannot call "send" once a close message has been sent.
2025-05-22 16:05:56,164 - INFO - Connection closed for Address(host='127.0.0.1', port=35564)
2025-05-22 16:05:56,164 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=35564)
2025-05-22 16:05:56,173 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=35574)
2025-05-22 16:05:58,354 - INFO - Simulation task starting
2025-05-22 16:05:58,355 - INFO - System message enqueued to backend queue
2025-05-22 16:05:58,355 - ERROR - Send error: Cannot call "send" once a close message has been sent.
2025-05-22 16:06:12,907 - ERROR - Receive error: 1012
2025-05-22 16:06:12,907 - ERROR - Error closing WebSocket for 127.0.0.1:35574: Unexpected ASGI message 'websocket.close', after sending 'websocket.close'.
2025-05-22 16:06:12,907 - INFO - Connection closed for 127.0.0.1:35574
2025-05-22 16:06:12,908 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 16:06:12,908 - ERROR - Error closing WebSocket for Address(host='127.0.0.1', port=35574): Cannot call "send" once a close message has been sent.
2025-05-22 16:06:12,908 - INFO - Connection closed for Address(host='127.0.0.1', port=35574)
2025-05-22 16:06:12,908 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=35574)
2025-05-22 16:06:13,010 - INFO - Application shutdown event triggered.
2025-05-22 16:06:13,010 - INFO - SimulationManager stopped.
2025-05-22 16:06:13,010 - INFO - Stopping MessageProcessor...
2025-05-22 16:06:13,010 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 16:06:13,011 - INFO - All WebSocket connections attempted to close.
2025-05-22 16:06:13,011 - INFO - Application shutdown complete.
2025-05-22 16:08:45,244 - INFO - Application startup event triggered.
2025-05-22 16:08:45,244 - INFO - Initializing all queues...
2025-05-22 16:08:45,244 - INFO - All queues initialized on loop 836790672
2025-05-22 16:08:45,244 - INFO - Shared queues initialized.
2025-05-22 16:08:45,244 - INFO - Retrieved queue instances. Event loop ID: 836790672
2025-05-22 16:08:45,245 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:08:45,245 - INFO - MessageProcessor queues verified
2025-05-22 16:08:45,245 - INFO - MessageProcessor task started.
2025-05-22 16:08:45,245 - INFO - QueueForwarder queues verified
2025-05-22 16:08:45,245 - INFO - QueueForwarder task started.
2025-05-22 16:08:45,245 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:08:45,245 - INFO - Starting MessageProcessor
2025-05-22 16:08:45,245 - INFO - Starting QueueForwarder
2025-05-22 16:09:06,509 - INFO - Application shutdown event triggered.
2025-05-22 16:09:06,510 - INFO - Stopping MessageProcessor...
2025-05-22 16:09:06,510 - WARNING - MessageProcessor didn't stop cleanly
2025-05-22 16:09:06,510 - INFO - QueueForwarder task cancelled.
2025-05-22 16:09:06,510 - INFO - All WebSocket connections attempted to close.
2025-05-22 16:09:06,510 - INFO - Application shutdown complete.
2025-05-22 16:09:21,271 - INFO - Application startup event triggered.
2025-05-22 16:09:21,271 - INFO - Initializing all queues...
2025-05-22 16:09:21,271 - INFO - All queues initialized on loop 1078958208
2025-05-22 16:09:21,271 - INFO - Shared queues initialized.
2025-05-22 16:09:21,271 - INFO - Retrieved queue instances. Event loop ID: 1078958208
2025-05-22 16:09:21,271 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:09:21,271 - INFO - MessageProcessor queues verified
2025-05-22 16:09:21,271 - INFO - MessageProcessor task started.
2025-05-22 16:09:21,271 - INFO - QueueForwarder queues verified
2025-05-22 16:09:21,272 - INFO - QueueForwarder task started.
2025-05-22 16:09:21,272 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:09:21,272 - INFO - Starting MessageProcessor
2025-05-22 16:09:21,272 - INFO - Starting QueueForwarder
2025-05-22 16:09:22,558 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54618)
2025-05-22 16:09:22,565 - ERROR - Receive error: 1001
2025-05-22 16:09:22,565 - INFO - Connection cleanup completed for 127.0.0.1:54618
2025-05-22 16:09:22,565 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 16:09:22,565 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=54618)
2025-05-22 16:09:22,566 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=54618)
2025-05-22 16:09:22,573 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54628)
2025-05-22 16:09:24,783 - INFO - Simulation task starting
2025-05-22 16:09:24,784 - INFO - System message enqueued to backend queue
2025-05-22 16:09:24,784 - ERROR - Send error: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-22 16:09:31,809 - ERROR - Receive error: 1012
2025-05-22 16:09:31,810 - INFO - Connection cleanup completed for 127.0.0.1:54628
2025-05-22 16:09:31,810 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 16:09:31,810 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=54628)
2025-05-22 16:09:31,810 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=54628)
2025-05-22 16:09:32,014 - INFO - Application shutdown event triggered.
2025-05-22 16:09:32,014 - INFO - SimulationManager stopped.
2025-05-22 16:09:32,014 - INFO - Stopping MessageProcessor...
2025-05-22 16:09:32,014 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 16:09:32,014 - INFO - All WebSocket connections attempted to close.
2025-05-22 16:09:32,014 - INFO - Application shutdown complete.
2025-05-22 16:10:51,412 - INFO - Application startup event triggered.
2025-05-22 16:10:51,412 - INFO - Initializing all queues...
2025-05-22 16:10:51,412 - INFO - All queues initialized on loop 457562240
2025-05-22 16:10:51,413 - INFO - Shared queues initialized.
2025-05-22 16:10:51,413 - INFO - Retrieved queue instances. Event loop ID: 457562240
2025-05-22 16:10:51,413 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:10:51,413 - INFO - MessageProcessor queues verified
2025-05-22 16:10:51,413 - INFO - MessageProcessor task started.
2025-05-22 16:10:51,413 - INFO - QueueForwarder queues verified
2025-05-22 16:10:51,414 - INFO - QueueForwarder task started.
2025-05-22 16:10:51,414 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:10:51,414 - INFO - Starting MessageProcessor
2025-05-22 16:10:51,414 - INFO - Starting QueueForwarder
2025-05-22 16:10:52,724 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=57560)
2025-05-22 16:10:52,728 - ERROR - Receive error: 1001
2025-05-22 16:10:52,728 - INFO - Connection cleanup completed for 127.0.0.1:57560
2025-05-22 16:10:52,728 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 16:10:52,729 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=57560)
2025-05-22 16:10:52,729 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=57560)
2025-05-22 16:10:52,737 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=57568)
2025-05-22 16:13:51,621 - ERROR - Receive error: 1012
2025-05-22 16:13:51,621 - INFO - Connection cleanup completed for 127.0.0.1:57568
2025-05-22 16:13:51,621 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 16:13:51,621 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=57568)
2025-05-22 16:13:51,621 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=57568)
2025-05-22 16:13:51,720 - INFO - Application shutdown event triggered.
2025-05-22 16:13:51,720 - INFO - Stopping MessageProcessor...
2025-05-22 16:13:51,721 - WARNING - MessageProcessor didn't stop cleanly
2025-05-22 16:13:51,721 - INFO - QueueForwarder task cancelled.
2025-05-22 16:13:51,721 - INFO - All WebSocket connections attempted to close.
2025-05-22 16:13:51,721 - INFO - Application shutdown complete.
2025-05-22 16:19:30,169 - INFO - Application startup event triggered.
2025-05-22 16:19:30,169 - INFO - Initializing all queues...
2025-05-22 16:19:30,170 - INFO - All queues initialized on loop 820889728
2025-05-22 16:19:30,170 - INFO - Shared queues initialized.
2025-05-22 16:19:30,170 - INFO - Retrieved queue instances. Event loop ID: 820889728
2025-05-22 16:19:30,170 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:19:30,170 - INFO - MessageProcessor queues verified
2025-05-22 16:19:30,170 - INFO - MessageProcessor task started.
2025-05-22 16:19:30,170 - INFO - QueueForwarder queues verified
2025-05-22 16:19:30,170 - INFO - QueueForwarder task started.
2025-05-22 16:19:30,170 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:19:30,171 - INFO - Starting MessageProcessor
2025-05-22 16:19:30,171 - INFO - Starting QueueForwarder
2025-05-22 16:19:31,492 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37550)
2025-05-22 16:19:31,506 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37566)
2025-05-22 16:19:31,517 - ERROR - Receive error: 1001
2025-05-22 16:19:31,518 - INFO - Connection cleanup completed for 127.0.0.1:37550
2025-05-22 16:19:31,518 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 16:19:31,518 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=37550)
2025-05-22 16:19:31,518 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=37550)
2025-05-22 16:19:33,053 - INFO - Simulation task starting
2025-05-22 16:19:33,053 - INFO - System message enqueued to backend queue
2025-05-22 16:19:33,053 - ERROR - Send error: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-22 16:20:01,523 - INFO - Enqueuing valid message of type 'ping'
2025-05-22 16:20:01,523 - ERROR - Receive error: Invalid message format for queue from_frontend
2025-05-22 16:20:01,524 - INFO - Closed WebSocket connection for 127.0.0.1:37566
2025-05-22 16:20:01,525 - INFO - Connection cleanup completed for 127.0.0.1:37566
2025-05-22 16:20:01,525 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 16:20:01,525 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=37566)
2025-05-22 16:20:01,525 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
2025-05-22 16:22:52,149 - INFO - Application shutdown event triggered.
2025-05-22 16:22:52,149 - INFO - SimulationManager stopped.
2025-05-22 16:22:52,149 - INFO - Stopping MessageProcessor...
2025-05-22 16:22:52,149 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 16:22:52,150 - INFO - All WebSocket connections attempted to close.
2025-05-22 16:22:52,150 - INFO - Application shutdown complete.
2025-05-22 16:24:08,339 - INFO - Application startup event triggered.
2025-05-22 16:24:08,339 - INFO - Initializing all queues...
2025-05-22 16:24:08,339 - INFO - All queues initialized on loop 74520704
2025-05-22 16:24:08,339 - INFO - Shared queues initialized.
2025-05-22 16:24:08,340 - INFO - Retrieved queue instances. Event loop ID: 74520704
2025-05-22 16:24:08,340 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:24:08,340 - INFO - MessageProcessor queues verified
2025-05-22 16:24:08,340 - INFO - MessageProcessor task started.
2025-05-22 16:24:08,340 - INFO - QueueForwarder queues verified
2025-05-22 16:24:08,340 - INFO - QueueForwarder task started.
2025-05-22 16:24:08,340 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:24:08,340 - INFO - Starting MessageProcessor
2025-05-22 16:24:08,340 - INFO - Starting QueueForwarder
2025-05-22 16:24:09,710 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=55562)
2025-05-22 16:24:12,198 - INFO - Simulation task starting
2025-05-22 16:24:12,198 - INFO - System message enqueued to backend queue
2025-05-22 16:24:39,717 - INFO - Enqueuing valid message of type 'ping'
2025-05-22 16:24:39,717 - ERROR - Receive error: Invalid message format for queue from_frontend
2025-05-22 16:24:39,719 - INFO - Closed WebSocket connection for 127.0.0.1:55562
2025-05-22 16:24:39,719 - INFO - Connection cleanup completed for 127.0.0.1:55562
2025-05-22 16:24:39,719 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 16:24:39,719 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=55562)
2025-05-22 16:24:39,719 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
2025-05-22 16:24:45,050 - INFO - Application shutdown event triggered.
2025-05-22 16:24:45,051 - INFO - SimulationManager stopped.
2025-05-22 16:24:45,051 - INFO - Stopping MessageProcessor...
2025-05-22 16:24:45,051 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 16:24:45,051 - INFO - All WebSocket connections attempted to close.
2025-05-22 16:24:45,051 - INFO - Application shutdown complete.
2025-05-22 16:25:59,235 - INFO - Application startup event triggered.
2025-05-22 16:25:59,235 - INFO - Initializing all queues...
2025-05-22 16:25:59,236 - INFO - All queues initialized on loop 435837056
2025-05-22 16:25:59,236 - INFO - Shared queues initialized.
2025-05-22 16:25:59,236 - INFO - Retrieved queue instances. Event loop ID: 435837056
2025-05-22 16:25:59,236 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:25:59,236 - INFO - MessageProcessor queues verified
2025-05-22 16:25:59,236 - INFO - MessageProcessor task started.
2025-05-22 16:25:59,236 - INFO - QueueForwarder queues verified
2025-05-22 16:25:59,236 - INFO - QueueForwarder task started.
2025-05-22 16:25:59,236 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:25:59,236 - INFO - Starting MessageProcessor
2025-05-22 16:25:59,237 - INFO - Starting QueueForwarder
2025-05-22 16:26:00,547 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=40200)
2025-05-22 16:26:09,104 - INFO - Simulation task starting
2025-05-22 16:26:09,104 - INFO - System message enqueued to backend queue
2025-05-22 16:26:23,289 - ERROR - Receive error: 1001
2025-05-22 16:26:23,289 - INFO - Connection cleanup completed for 127.0.0.1:40200
2025-05-22 16:26:23,290 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 16:26:23,290 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=40200)
2025-05-22 16:26:23,290 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=40200)
2025-05-22 16:27:30,300 - INFO - Application shutdown event triggered.
2025-05-22 16:27:30,300 - INFO - SimulationManager stopped.
2025-05-22 16:27:30,300 - INFO - Stopping MessageProcessor...
2025-05-22 16:27:30,300 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 16:27:30,300 - INFO - All WebSocket connections attempted to close.
2025-05-22 16:27:30,300 - INFO - Application shutdown complete.
2025-05-22 16:28:20,364 - INFO - Application startup event triggered.
2025-05-22 16:28:20,364 - INFO - Initializing all queues...
2025-05-22 16:28:20,364 - INFO - All queues initialized on loop 926341248
2025-05-22 16:28:20,364 - INFO - Shared queues initialized.
2025-05-22 16:28:20,364 - INFO - Retrieved queue instances. Event loop ID: 926341248
2025-05-22 16:28:20,364 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:28:20,364 - INFO - MessageProcessor queues verified
2025-05-22 16:28:20,364 - INFO - MessageProcessor task started.
2025-05-22 16:28:20,365 - INFO - QueueForwarder queues verified
2025-05-22 16:28:20,365 - INFO - QueueForwarder task started.
2025-05-22 16:28:20,365 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:28:20,365 - INFO - Starting MessageProcessor
2025-05-22 16:28:20,365 - INFO - Starting QueueForwarder
2025-05-22 16:28:21,686 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=44362)
2025-05-22 16:28:23,122 - INFO - Simulation task starting
2025-05-22 16:28:23,123 - INFO - System message enqueued to backend queue
2025-05-22 16:28:43,612 - ERROR - Receive error: 1001
2025-05-22 16:28:43,612 - INFO - Connection cleanup completed for 127.0.0.1:44362
2025-05-22 16:28:43,612 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 16:28:43,612 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=44362)
2025-05-22 16:28:43,613 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=44362)
2025-05-22 16:29:39,101 - INFO - Application shutdown event triggered.
2025-05-22 16:29:39,101 - INFO - SimulationManager stopped.
2025-05-22 16:29:39,101 - INFO - Stopping MessageProcessor...
2025-05-22 16:29:39,101 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 16:29:39,101 - INFO - All WebSocket connections attempted to close.
2025-05-22 16:29:39,102 - INFO - Application shutdown complete.
2025-05-22 16:33:19,092 - INFO - Application startup event triggered.
2025-05-22 16:33:19,092 - INFO - Initializing all queues...
2025-05-22 16:33:19,092 - INFO - All queues initialized on loop 400025728
2025-05-22 16:33:19,092 - INFO - Shared queues initialized.
2025-05-22 16:33:19,092 - INFO - Retrieved queue instances. Event loop ID: 400025728
2025-05-22 16:33:19,092 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:33:19,092 - INFO - MessageProcessor queues verified
2025-05-22 16:33:19,093 - INFO - MessageProcessor task started.
2025-05-22 16:33:19,093 - INFO - QueueForwarder queues verified
2025-05-22 16:33:19,093 - INFO - QueueForwarder task started.
2025-05-22 16:33:19,093 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:33:19,093 - INFO - Starting MessageProcessor
2025-05-22 16:33:19,093 - INFO - Starting QueueForwarder
2025-05-22 16:33:20,396 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=46572)
2025-05-22 16:33:22,371 - INFO - Simulation task starting
2025-05-22 16:33:22,371 - INFO - System message enqueued to backend queue
2025-05-22 16:33:50,418 - INFO - Enqueuing valid message of type 'ping'
2025-05-22 16:33:50,418 - ERROR - Receive error: Invalid message format for queue from_frontend
2025-05-22 16:33:50,420 - INFO - Closed WebSocket connection for 127.0.0.1:46572
2025-05-22 16:33:50,420 - INFO - Connection cleanup completed for 127.0.0.1:46572
2025-05-22 16:33:50,420 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 16:33:50,420 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=46572)
2025-05-22 16:33:50,420 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
2025-05-22 16:34:15,258 - INFO - Application shutdown event triggered.
2025-05-22 16:34:15,258 - INFO - SimulationManager stopped.
2025-05-22 16:34:15,258 - INFO - Stopping MessageProcessor...
2025-05-22 16:34:15,258 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 16:34:15,258 - INFO - All WebSocket connections attempted to close.
2025-05-22 16:34:15,258 - INFO - Application shutdown complete.
2025-05-22 16:35:33,702 - INFO - Application startup event triggered.
2025-05-22 16:35:33,702 - INFO - Initializing all queues...
2025-05-22 16:35:33,702 - INFO - All queues initialized on loop 628861056
2025-05-22 16:35:33,703 - INFO - Shared queues initialized.
2025-05-22 16:35:33,703 - INFO - Retrieved queue instances. Event loop ID: 628861056
2025-05-22 16:35:33,703 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:35:33,703 - INFO - MessageProcessor queues verified
2025-05-22 16:35:33,703 - INFO - MessageProcessor task started.
2025-05-22 16:35:33,703 - INFO - QueueForwarder queues verified
2025-05-22 16:35:33,703 - INFO - QueueForwarder task started.
2025-05-22 16:35:33,703 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:35:33,703 - INFO - Starting MessageProcessor
2025-05-22 16:35:33,704 - INFO - Starting QueueForwarder
2025-05-22 16:35:35,013 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=48280)
2025-05-22 16:35:36,836 - INFO - Simulation task starting
2025-05-22 16:35:36,836 - INFO - System message enqueued to backend queue
2025-05-22 16:36:01,583 - ERROR - Receive error: 1012
2025-05-22 16:36:01,584 - INFO - Connection cleanup completed for 127.0.0.1:48280
2025-05-22 16:36:01,584 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 16:36:01,584 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=48280)
2025-05-22 16:36:01,585 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=48280)
2025-05-22 16:36:03,090 - INFO - Application shutdown event triggered.
2025-05-22 16:36:03,090 - INFO - SimulationManager stopped.
2025-05-22 16:36:03,090 - INFO - Stopping MessageProcessor...
2025-05-22 16:36:03,090 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 16:36:03,091 - INFO - All WebSocket connections attempted to close.
2025-05-22 16:36:03,091 - INFO - Application shutdown complete.
2025-05-22 16:40:35,873 - INFO - Application startup event triggered.
2025-05-22 16:40:35,873 - INFO - Initializing all queues...
2025-05-22 16:40:35,873 - INFO - All queues initialized on loop 927676544
2025-05-22 16:40:35,873 - INFO - Shared queues initialized.
2025-05-22 16:40:35,873 - INFO - Retrieved queue instances. Event loop ID: 927676544
2025-05-22 16:40:35,873 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:40:35,874 - INFO - MessageProcessor queues verified
2025-05-22 16:40:35,874 - INFO - MessageProcessor task started.
2025-05-22 16:40:35,874 - INFO - QueueForwarder queues verified
2025-05-22 16:40:35,874 - INFO - QueueForwarder task started.
2025-05-22 16:40:35,874 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:40:35,874 - INFO - Starting MessageProcessor
2025-05-22 16:40:35,874 - INFO - Starting QueueForwarder
2025-05-22 16:40:37,156 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=35618)
2025-05-22 16:40:38,528 - INFO - Simulation task starting
2025-05-22 16:40:38,528 - INFO - System message enqueued to backend queue
2025-05-22 16:40:54,828 - ERROR - Receive error: 1012
2025-05-22 16:40:54,829 - INFO - Connection cleanup completed for 127.0.0.1:35618
2025-05-22 16:40:54,829 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 16:40:54,829 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=35618)
2025-05-22 16:40:54,829 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=35618)
2025-05-22 16:40:55,032 - INFO - Application shutdown event triggered.
2025-05-22 16:40:55,032 - INFO - SimulationManager stopped.
2025-05-22 16:40:55,032 - INFO - Stopping MessageProcessor...
2025-05-22 16:40:55,032 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 16:40:55,033 - INFO - All WebSocket connections attempted to close.
2025-05-22 16:40:55,033 - INFO - Application shutdown complete.
2025-05-22 16:43:30,992 - INFO - Application startup event triggered.
2025-05-22 16:43:30,993 - INFO - Initializing all queues...
2025-05-22 16:43:30,993 - INFO - All queues initialized on loop 84994176
2025-05-22 16:43:30,993 - INFO - Shared queues initialized.
2025-05-22 16:43:30,993 - INFO - Retrieved queue instances. Event loop ID: 84994176
2025-05-22 16:43:30,993 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:43:30,993 - INFO - MessageProcessor queues verified
2025-05-22 16:43:30,993 - INFO - MessageProcessor task started.
2025-05-22 16:43:30,993 - INFO - QueueForwarder queues verified
2025-05-22 16:43:30,993 - INFO - QueueForwarder task started.
2025-05-22 16:43:30,993 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:43:30,994 - INFO - Starting MessageProcessor
2025-05-22 16:43:30,994 - INFO - Starting QueueForwarder
2025-05-22 16:43:32,270 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=59444)
2025-05-22 16:43:34,707 - INFO - Simulation task starting
2025-05-22 16:43:34,708 - INFO - System message enqueued to backend queue
2025-05-22 16:44:00,407 - ERROR - Receive error: 1001
2025-05-22 16:44:00,407 - INFO - Connection cleanup completed for 127.0.0.1:59444
2025-05-22 16:44:00,408 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 16:44:00,408 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=59444)
2025-05-22 16:44:00,408 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=59444)
2025-05-22 16:44:02,496 - INFO - Application shutdown event triggered.
2025-05-22 16:44:02,496 - INFO - SimulationManager stopped.
2025-05-22 16:44:02,496 - INFO - Stopping MessageProcessor...
2025-05-22 16:44:02,496 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 16:44:02,496 - INFO - All WebSocket connections attempted to close.
2025-05-22 16:44:02,496 - INFO - Application shutdown complete.
2025-05-22 16:59:30,177 - INFO - Application startup event triggered.
2025-05-22 16:59:30,178 - INFO - Initializing all queues...
2025-05-22 16:59:30,178 - INFO - All queues initialized on loop 700074112
2025-05-22 16:59:30,178 - INFO - Shared queues initialized.
2025-05-22 16:59:30,178 - INFO - Retrieved queue instances. Event loop ID: 700074112
2025-05-22 16:59:30,178 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 16:59:30,178 - INFO - MessageProcessor queues verified
2025-05-22 16:59:30,178 - INFO - MessageProcessor task started.
2025-05-22 16:59:30,178 - INFO - QueueForwarder queues verified
2025-05-22 16:59:30,178 - INFO - QueueForwarder task started.
2025-05-22 16:59:30,178 - INFO - Application startup complete. All core services initialized.
2025-05-22 16:59:30,178 - INFO - Starting MessageProcessor
2025-05-22 16:59:30,178 - INFO - Starting QueueForwarder
2025-05-22 16:59:31,886 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=47660)
2025-05-22 16:59:33,069 - INFO - Simulation task starting
2025-05-22 16:59:33,070 - INFO - System message enqueued to backend queue
2025-05-22 17:00:02,827 - INFO - Enqueuing valid message of type 'ping'
2025-05-22 17:00:02,827 - ERROR - Receive error: Invalid message format for queue from_frontend
2025-05-22 17:00:02,828 - INFO - Closed WebSocket connection for 127.0.0.1:47660
2025-05-22 17:00:02,828 - INFO - Connection cleanup completed for 127.0.0.1:47660
2025-05-22 17:00:02,828 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 17:00:02,828 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=47660)
2025-05-22 17:00:02,828 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
2025-05-22 17:00:41,664 - INFO - Application shutdown event triggered.
2025-05-22 17:00:41,664 - INFO - SimulationManager stopped.
2025-05-22 17:00:41,664 - INFO - Stopping MessageProcessor...
2025-05-22 17:00:41,664 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 17:00:41,664 - INFO - All WebSocket connections attempted to close.
2025-05-22 17:00:41,664 - INFO - Application shutdown complete.
2025-05-22 17:01:49,102 - INFO - Application startup event triggered.
2025-05-22 17:01:49,102 - INFO - Initializing all queues...
2025-05-22 17:01:49,102 - INFO - All queues initialized on loop 472103040
2025-05-22 17:01:49,102 - INFO - Shared queues initialized.
2025-05-22 17:01:49,102 - INFO - Retrieved queue instances. Event loop ID: 472103040
2025-05-22 17:01:49,102 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 17:01:49,102 - INFO - MessageProcessor queues verified
2025-05-22 17:01:49,102 - INFO - MessageProcessor task started.
2025-05-22 17:01:49,102 - INFO - QueueForwarder queues verified
2025-05-22 17:01:49,102 - INFO - QueueForwarder task started.
2025-05-22 17:01:49,102 - INFO - Application startup complete. All core services initialized.
2025-05-22 17:01:49,103 - INFO - Starting MessageProcessor
2025-05-22 17:01:49,103 - INFO - Starting QueueForwarder
2025-05-22 17:01:50,829 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50690)
2025-05-22 17:01:51,951 - INFO - Simulation task starting
2025-05-22 17:01:51,951 - INFO - System message enqueued to backend queue
2025-05-22 17:02:09,373 - ERROR - Receive error: 1001
2025-05-22 17:02:09,373 - INFO - Connection cleanup completed for 127.0.0.1:50690
2025-05-22 17:02:09,373 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 17:02:09,374 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=50690)
2025-05-22 17:02:09,374 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=50690)
2025-05-22 17:02:34,725 - INFO - Application shutdown event triggered.
2025-05-22 17:02:34,725 - INFO - SimulationManager stopped.
2025-05-22 17:02:34,725 - INFO - Stopping MessageProcessor...
2025-05-22 17:02:34,725 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 17:02:34,725 - INFO - All WebSocket connections attempted to close.
2025-05-22 17:02:34,725 - INFO - Application shutdown complete.
2025-05-22 17:05:01,103 - INFO - Application startup event triggered.
2025-05-22 17:05:01,104 - INFO - Initializing all queues...
2025-05-22 17:05:01,104 - INFO - All queues initialized on loop 331233408
2025-05-22 17:05:01,104 - INFO - Shared queues initialized.
2025-05-22 17:05:01,104 - INFO - Retrieved queue instances. Event loop ID: 331233408
2025-05-22 17:05:01,104 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 17:05:01,104 - INFO - MessageProcessor queues verified
2025-05-22 17:05:01,104 - INFO - MessageProcessor task started.
2025-05-22 17:05:01,104 - INFO - QueueForwarder queues verified
2025-05-22 17:05:01,104 - INFO - QueueForwarder task started.
2025-05-22 17:05:01,104 - INFO - Application startup complete. All core services initialized.
2025-05-22 17:05:01,104 - INFO - Starting MessageProcessor
2025-05-22 17:05:01,104 - INFO - Starting QueueForwarder
2025-05-22 17:05:02,774 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=46742)
2025-05-22 17:05:03,871 - INFO - Simulation task starting
2025-05-22 17:05:03,871 - INFO - System message enqueued to backend queue
2025-05-22 17:05:17,390 - ERROR - Receive error: 1001
2025-05-22 17:05:17,391 - INFO - Connection cleanup completed for 127.0.0.1:46742
2025-05-22 17:05:17,391 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 17:05:17,391 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=46742)
2025-05-22 17:05:17,391 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=46742)
2025-05-22 17:05:19,055 - INFO - Application shutdown event triggered.
2025-05-22 17:05:19,056 - INFO - SimulationManager stopped.
2025-05-22 17:05:19,056 - INFO - Stopping MessageProcessor...
2025-05-22 17:05:19,058 - WARNING - MessageProcessor didn't stop cleanly
2025-05-22 17:05:19,058 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 17:05:19,058 - INFO - All WebSocket connections attempted to close.
2025-05-22 17:05:19,059 - INFO - Application shutdown complete.
2025-05-22 17:12:45,192 - INFO - Application startup event triggered.
2025-05-22 17:12:45,192 - INFO - Initializing all queues...
2025-05-22 17:12:45,192 - INFO - All queues initialized on loop 998127744
2025-05-22 17:12:45,192 - INFO - Shared queues initialized.
2025-05-22 17:12:45,192 - INFO - Retrieved queue instances. Event loop ID: 998127744
2025-05-22 17:12:45,192 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 17:12:45,193 - INFO - MessageProcessor queues verified
2025-05-22 17:12:45,193 - INFO - MessageProcessor task started.
2025-05-22 17:12:45,193 - INFO - QueueForwarder queues verified
2025-05-22 17:12:45,193 - INFO - QueueForwarder task started.
2025-05-22 17:12:45,193 - INFO - Application startup complete. All core services initialized.
2025-05-22 17:12:45,193 - INFO - Starting MessageProcessor
2025-05-22 17:12:45,193 - INFO - Starting QueueForwarder
2025-05-22 17:12:46,908 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=52376)
2025-05-22 17:13:03,804 - ERROR - Receive error: 1001
2025-05-22 17:13:03,804 - INFO - Connection cleanup completed for 127.0.0.1:52376
2025-05-22 17:13:03,804 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 17:13:03,804 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=52376)
2025-05-22 17:13:03,804 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=52376)
2025-05-22 17:13:07,658 - INFO - Application shutdown event triggered.
2025-05-22 17:13:07,658 - INFO - Stopping MessageProcessor...
2025-05-22 17:13:07,658 - WARNING - MessageProcessor didn't stop cleanly
2025-05-22 17:13:07,659 - INFO - QueueForwarder task cancelled.
2025-05-22 17:13:07,659 - INFO - All WebSocket connections attempted to close.
2025-05-22 17:13:07,659 - INFO - Application shutdown complete.
2025-05-22 17:15:58,980 - INFO - Application startup event triggered.
2025-05-22 17:15:58,980 - INFO - Initializing all queues...
2025-05-22 17:15:58,980 - INFO - All queues initialized on loop 419276928
2025-05-22 17:15:58,980 - INFO - Shared queues initialized.
2025-05-22 17:15:58,980 - INFO - Retrieved queue instances. Event loop ID: 419276928
2025-05-22 17:15:58,980 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 17:15:58,980 - INFO - MessageProcessor queues verified
2025-05-22 17:15:58,980 - INFO - MessageProcessor task started.
2025-05-22 17:15:58,980 - INFO - QueueForwarder queues verified
2025-05-22 17:15:58,981 - INFO - QueueForwarder task started.
2025-05-22 17:15:58,981 - INFO - Application startup complete. All core services initialized.
2025-05-22 17:15:58,981 - INFO - Starting MessageProcessor
2025-05-22 17:15:58,981 - INFO - Starting QueueForwarder
2025-05-22 17:16:00,696 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=41692)
2025-05-22 17:16:06,141 - INFO - Simulation task starting
2025-05-22 17:16:06,141 - INFO - System message enqueued to backend queue
2025-05-22 17:16:09,557 - ERROR - Receive error: 1001
2025-05-22 17:16:09,558 - INFO - Connection cleanup completed for 127.0.0.1:41692
2025-05-22 17:16:09,558 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 17:16:09,558 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=41692)
2025-05-22 17:16:09,558 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=41692)
2025-05-22 17:17:07,986 - INFO - Application shutdown event triggered.
2025-05-22 17:17:07,986 - INFO - SimulationManager stopped.
2025-05-22 17:17:07,986 - INFO - Stopping MessageProcessor...
2025-05-22 17:17:07,989 - WARNING - MessageProcessor didn't stop cleanly
2025-05-22 17:17:07,989 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 17:17:07,989 - INFO - All WebSocket connections attempted to close.
2025-05-22 17:17:07,989 - INFO - Application shutdown complete.
2025-05-22 17:18:10,545 - INFO - Application startup event triggered.
2025-05-22 17:18:10,545 - INFO - Initializing all queues...
2025-05-22 17:18:10,545 - INFO - All queues initialized on loop 564185216
2025-05-22 17:18:10,545 - INFO - Shared queues initialized.
2025-05-22 17:18:10,545 - INFO - Retrieved queue instances. Event loop ID: 564185216
2025-05-22 17:18:10,545 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 17:18:10,545 - INFO - MessageProcessor queues verified
2025-05-22 17:18:10,545 - INFO - MessageProcessor task started.
2025-05-22 17:18:10,545 - INFO - QueueForwarder queues verified
2025-05-22 17:18:10,545 - INFO - QueueForwarder task started.
2025-05-22 17:18:10,545 - INFO - Application startup complete. All core services initialized.
2025-05-22 17:18:10,545 - INFO - Starting MessageProcessor
2025-05-22 17:18:10,545 - INFO - Starting QueueForwarder
2025-05-22 17:18:12,271 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=41110)
2025-05-22 17:18:15,802 - INFO - Simulation task starting
2025-05-22 17:18:15,802 - INFO - System message enqueued to backend queue
2025-05-22 17:18:27,532 - ERROR - Receive error: 1001
2025-05-22 17:18:27,532 - INFO - Connection cleanup completed for 127.0.0.1:41110
2025-05-22 17:18:27,532 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 17:18:27,532 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=41110)
2025-05-22 17:18:27,532 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=41110)
2025-05-22 17:18:31,100 - INFO - Application shutdown event triggered.
2025-05-22 17:18:31,100 - INFO - SimulationManager stopped.
2025-05-22 17:18:31,101 - INFO - Stopping MessageProcessor...
2025-05-22 17:18:31,103 - WARNING - MessageProcessor didn't stop cleanly
2025-05-22 17:18:31,103 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 17:18:31,103 - INFO - All WebSocket connections attempted to close.
2025-05-22 17:18:31,103 - INFO - Application shutdown complete.
2025-05-22 17:19:46,868 - INFO - Application startup event triggered.
2025-05-22 17:19:46,868 - INFO - Initializing all queues...
2025-05-22 17:19:46,868 - INFO - All queues initialized on loop 139960834888464
2025-05-22 17:19:46,869 - INFO - Shared queues initialized.
2025-05-22 17:19:46,869 - INFO - Retrieved queue instances. Event loop ID: 139960834888464
2025-05-22 17:19:46,869 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 17:19:46,869 - INFO - MessageProcessor queues verified
2025-05-22 17:19:46,869 - INFO - MessageProcessor task started.
2025-05-22 17:19:46,869 - INFO - QueueForwarder queues verified
2025-05-22 17:19:46,869 - INFO - QueueForwarder task started.
2025-05-22 17:19:46,869 - INFO - Application startup complete. All core services initialized.
2025-05-22 17:19:46,869 - INFO - Starting MessageProcessor
2025-05-22 17:19:46,869 - INFO - Starting QueueForwarder
2025-05-22 17:19:48,403 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37004)
2025-05-22 17:19:52,906 - INFO - Simulation task starting
2025-05-22 17:19:52,906 - INFO - System message enqueued to backend queue
2025-05-22 17:20:05,933 - INFO - Simulation stopped
2025-05-22 17:20:08,693 - ERROR - Receive error: (1001, '')
2025-05-22 17:20:08,693 - INFO - Connection cleanup completed for 127.0.0.1:37004
2025-05-22 17:20:08,693 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-22 17:20:08,693 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=37004)
2025-05-22 17:20:08,693 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=37004)
2025-05-22 18:17:40,258 - INFO - Application startup event triggered.
2025-05-22 18:17:40,258 - INFO - Initializing all queues...
2025-05-22 18:17:40,258 - INFO - All queues initialized on loop 476424320
2025-05-22 18:17:40,258 - INFO - Shared queues initialized.
2025-05-22 18:17:40,258 - INFO - Retrieved queue instances. Event loop ID: 476424320
2025-05-22 18:17:40,258 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 18:17:40,258 - INFO - MessageProcessor queues verified
2025-05-22 18:17:40,258 - INFO - MessageProcessor task started.
2025-05-22 18:17:40,258 - INFO - QueueForwarder queues verified
2025-05-22 18:17:40,258 - INFO - QueueForwarder task started.
2025-05-22 18:17:40,258 - INFO - Application startup complete. All core services initialized.
2025-05-22 18:17:40,258 - INFO - Starting MessageProcessor
2025-05-22 18:17:40,258 - INFO - Starting QueueForwarder
2025-05-22 18:17:41,929 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=36604)
2025-05-22 18:17:43,581 - INFO - Simulation task starting
2025-05-22 18:17:43,581 - INFO - System message enqueued to backend queue
2025-05-22 18:18:11,940 - INFO - Enqueuing valid message of type 'ping'
2025-05-22 18:18:11,940 - ERROR - Receive error: Invalid message format for queue from_frontend
2025-05-22 18:18:11,941 - INFO - Closed WebSocket connection for 127.0.0.1:36604
2025-05-22 18:18:11,941 - INFO - Connection cleanup completed for 127.0.0.1:36604
2025-05-22 18:18:11,941 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 18:18:11,941 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=36604)
2025-05-22 18:18:11,941 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
2025-05-22 18:18:33,380 - INFO - Application shutdown event triggered.
2025-05-22 18:18:33,380 - INFO - SimulationManager stopped.
2025-05-22 18:18:33,380 - INFO - Stopping MessageProcessor...
2025-05-22 18:18:33,380 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 18:18:33,380 - INFO - All WebSocket connections attempted to close.
2025-05-22 18:18:33,380 - INFO - Application shutdown complete.
2025-05-22 18:29:12,764 - INFO - Application startup event triggered.
2025-05-22 18:29:12,764 - INFO - Initializing all queues...
2025-05-22 18:29:12,764 - INFO - All queues initialized on loop 303675520
2025-05-22 18:29:12,765 - INFO - Shared queues initialized.
2025-05-22 18:29:12,765 - INFO - Retrieved queue instances. Event loop ID: 303675520
2025-05-22 18:29:12,765 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 18:29:12,765 - INFO - MessageProcessor queues verified
2025-05-22 18:29:12,765 - INFO - MessageProcessor task started.
2025-05-22 18:29:12,765 - INFO - QueueForwarder queues verified
2025-05-22 18:29:12,765 - INFO - QueueForwarder task started.
2025-05-22 18:29:12,765 - INFO - Application startup complete. All core services initialized.
2025-05-22 18:29:12,765 - INFO - Starting MessageProcessor
2025-05-22 18:29:12,765 - INFO - Starting QueueForwarder
2025-05-22 18:29:14,304 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=42396)
2025-05-22 18:29:44,315 - INFO - Enqueuing valid message of type 'ping'
2025-05-22 18:29:44,315 - ERROR - Receive error: Invalid message format for queue from_frontend
2025-05-22 18:29:44,315 - INFO - Closed WebSocket connection for 127.0.0.1:42396
2025-05-22 18:29:44,316 - INFO - Connection cleanup completed for 127.0.0.1:42396
2025-05-22 18:29:44,316 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 18:29:44,316 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=42396)
2025-05-22 18:29:44,316 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
2025-05-22 18:54:49,199 - INFO - Application shutdown event triggered.
2025-05-22 18:54:49,199 - INFO - Stopping MessageProcessor...
2025-05-22 18:54:49,200 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-22 18:54:49,200 - INFO - All WebSocket connections attempted to close.
2025-05-22 18:54:49,200 - INFO - Application shutdown complete.
2025-05-22 18:54:51,510 - INFO - Application startup event triggered.
2025-05-22 18:54:51,510 - INFO - Initializing all queues...
2025-05-22 18:54:51,510 - INFO - All queues initialized on loop 604801152
2025-05-22 18:54:51,510 - INFO - Shared queues initialized.
2025-05-22 18:54:51,510 - INFO - Retrieved queue instances. Event loop ID: 604801152
2025-05-22 18:54:51,510 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 18:54:51,510 - INFO - MessageProcessor queues verified
2025-05-22 18:54:51,510 - INFO - MessageProcessor task started.
2025-05-22 18:54:51,510 - INFO - QueueForwarder queues verified
2025-05-22 18:54:51,510 - INFO - QueueForwarder task started.
2025-05-22 18:54:51,510 - INFO - Application startup complete. All core services initialized.
2025-05-22 18:54:51,510 - INFO - Starting MessageProcessor
2025-05-22 18:54:51,510 - INFO - Starting QueueForwarder
2025-05-22 18:54:53,076 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37088)
2025-05-22 18:55:23,090 - INFO - Enqueuing valid message of type 'ping'
2025-05-22 18:55:23,090 - ERROR - Receive error: Invalid message format for queue from_frontend
2025-05-22 18:55:23,090 - INFO - Closed WebSocket connection for 127.0.0.1:37088
2025-05-22 18:55:23,091 - INFO - Connection cleanup completed for 127.0.0.1:37088
2025-05-22 18:55:23,091 - ERROR - WebSocket error: WebSocket is not connected. Need to call "accept" first.
2025-05-22 18:55:23,091 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=37088)
2025-05-22 18:55:23,091 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
2025-05-22 20:19:52,338 - INFO - Application shutdown event triggered.
2025-05-22 20:19:52,338 - INFO - Stopping MessageProcessor...
2025-05-22 20:19:52,339 - WARNING - MessageProcessor didn't stop cleanly
2025-05-22 20:19:52,339 - INFO - QueueForwarder task cancelled.
2025-05-22 20:19:52,339 - INFO - All WebSocket connections attempted to close.
2025-05-22 20:19:52,339 - INFO - Application shutdown complete.
2025-05-22 20:19:53,272 - INFO - Application startup event triggered.
2025-05-22 20:19:53,272 - INFO - Initializing all queues...
2025-05-22 20:19:53,272 - INFO - All queues initialized on loop 955973840
2025-05-22 20:19:53,272 - INFO - Shared queues initialized.
2025-05-22 20:19:53,272 - INFO - Retrieved queue instances. Event loop ID: 955973840
2025-05-22 20:19:53,272 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 20:19:53,272 - INFO - MessageProcessor queues verified
2025-05-22 20:19:53,272 - INFO - MessageProcessor task started.
2025-05-22 20:19:53,272 - INFO - QueueForwarder queues verified
2025-05-22 20:19:53,273 - INFO - QueueForwarder task started.
2025-05-22 20:19:53,273 - INFO - Application startup complete. All core services initialized.
2025-05-22 20:19:53,273 - INFO - Starting MessageProcessor
2025-05-22 20:19:53,273 - INFO - Starting QueueForwarder
2025-05-22 20:20:05,118 - INFO - Application startup event triggered.
2025-05-22 20:20:05,119 - INFO - Initializing all queues...
2025-05-22 20:20:05,119 - INFO - All queues initialized on loop 139979166509120
2025-05-22 20:20:05,119 - INFO - Shared queues initialized.
2025-05-22 20:20:05,119 - INFO - Retrieved queue instances. Event loop ID: 139979166509120
2025-05-22 20:20:05,120 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-22 20:20:05,120 - INFO - MessageProcessor queues verified
2025-05-22 20:20:05,120 - INFO - MessageProcessor task started.
2025-05-22 20:20:05,120 - INFO - QueueForwarder queues verified
2025-05-22 20:20:05,120 - INFO - QueueForwarder task started.
2025-05-22 20:20:05,120 - INFO - Application startup complete. All core services initialized.
2025-05-22 20:20:05,121 - INFO - Starting MessageProcessor
2025-05-22 20:20:05,121 - INFO - Starting QueueForwarder
2025-05-23 11:14:53,838 - INFO - Application startup event triggered.
2025-05-23 11:14:53,838 - INFO - Initializing all queues...
2025-05-23 11:14:53,838 - INFO - All queues initialized on loop 598440064
2025-05-23 11:14:53,838 - INFO - Shared queues initialized.
2025-05-23 11:14:53,838 - INFO - Retrieved queue instances. Event loop ID: 598440064
2025-05-23 11:14:53,838 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 11:14:53,839 - INFO - MessageProcessor queues verified
2025-05-23 11:14:53,839 - INFO - MessageProcessor task started.
2025-05-23 11:14:53,839 - INFO - QueueForwarder queues verified
2025-05-23 11:14:53,839 - INFO - QueueForwarder task started.
2025-05-23 11:14:53,839 - INFO - Application startup complete. All core services initialized.
2025-05-23 11:14:53,839 - INFO - Starting MessageProcessor
2025-05-23 11:14:53,839 - INFO - Starting QueueForwarder
2025-05-23 11:15:40,116 - INFO - Application shutdown event triggered.
2025-05-23 11:15:40,116 - INFO - Stopping MessageProcessor...
2025-05-23 11:15:40,117 - WARNING - MessageProcessor didn't stop cleanly
2025-05-23 11:15:40,117 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 11:15:40,117 - INFO - All WebSocket connections attempted to close.
2025-05-23 11:15:40,117 - INFO - Application shutdown complete.
2025-05-23 11:17:43,523 - INFO - Application startup event triggered.
2025-05-23 11:17:43,523 - INFO - Initializing all queues...
2025-05-23 11:17:43,524 - INFO - All queues initialized on loop 400427136
2025-05-23 11:17:43,524 - INFO - Shared queues initialized.
2025-05-23 11:17:43,524 - INFO - Retrieved queue instances. Event loop ID: 400427136
2025-05-23 11:17:43,524 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 11:17:43,524 - INFO - MessageProcessor queues verified
2025-05-23 11:17:43,524 - INFO - MessageProcessor task started.
2025-05-23 11:17:43,524 - INFO - QueueForwarder queues verified
2025-05-23 11:17:43,524 - INFO - QueueForwarder task started.
2025-05-23 11:17:43,524 - INFO - Application startup complete. All core services initialized.
2025-05-23 11:17:43,524 - INFO - Starting MessageProcessor
2025-05-23 11:17:43,525 - INFO - Starting QueueForwarder
2025-05-23 13:36:57,488 - INFO - Application startup event triggered.
2025-05-23 13:36:57,488 - INFO - Initializing all queues...
2025-05-23 13:36:57,488 - INFO - All queues initialized on loop 1058880656
2025-05-23 13:36:57,488 - INFO - Shared queues initialized.
2025-05-23 13:36:57,488 - INFO - Retrieved queue instances. Event loop ID: 1058880656
2025-05-23 13:36:57,488 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 13:36:57,488 - INFO - MessageProcessor queues verified
2025-05-23 13:36:57,488 - INFO - MessageProcessor task started.
2025-05-23 13:36:57,488 - INFO - QueueForwarder queues verified
2025-05-23 13:36:57,488 - INFO - QueueForwarder task started.
2025-05-23 13:36:57,488 - INFO - Application startup complete. All core services initialized.
2025-05-23 13:36:57,488 - INFO - Starting MessageProcessor
2025-05-23 13:36:57,489 - INFO - Starting QueueForwarder
2025-05-23 13:42:48,299 - INFO - Application shutdown event triggered.
2025-05-23 13:42:48,299 - INFO - Stopping MessageProcessor...
2025-05-23 13:42:48,299 - WARNING - MessageProcessor didn't stop cleanly
2025-05-23 13:42:48,299 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 13:42:48,299 - INFO - All WebSocket connections attempted to close.
2025-05-23 13:42:48,300 - INFO - Application shutdown complete.
2025-05-23 13:42:55,521 - INFO - Application startup event triggered.
2025-05-23 13:42:55,521 - INFO - Initializing all queues...
2025-05-23 13:42:55,522 - INFO - All queues initialized on loop 666324112
2025-05-23 13:42:55,522 - INFO - Shared queues initialized.
2025-05-23 13:42:55,522 - INFO - Retrieved queue instances. Event loop ID: 666324112
2025-05-23 13:42:55,522 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 13:42:55,522 - INFO - MessageProcessor queues verified
2025-05-23 13:42:55,522 - INFO - MessageProcessor task started.
2025-05-23 13:42:55,522 - INFO - QueueForwarder queues verified
2025-05-23 13:42:55,522 - INFO - QueueForwarder task started.
2025-05-23 13:42:55,522 - INFO - Application startup complete. All core services initialized.
2025-05-23 13:42:55,522 - INFO - Starting MessageProcessor
2025-05-23 13:42:55,522 - INFO - Starting QueueForwarder
2025-05-23 13:43:33,819 - INFO - Application shutdown event triggered.
2025-05-23 13:43:33,819 - INFO - Stopping MessageProcessor...
2025-05-23 13:43:33,820 - WARNING - MessageProcessor didn't stop cleanly
2025-05-23 13:43:33,820 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 13:43:33,820 - INFO - All WebSocket connections attempted to close.
2025-05-23 13:43:33,820 - INFO - Application shutdown complete.
2025-05-23 13:57:05,452 - INFO - Application startup event triggered.
2025-05-23 13:57:05,452 - INFO - Initializing all queues...
2025-05-23 13:57:05,452 - INFO - All queues initialized on loop 941566080
2025-05-23 13:57:05,452 - INFO - Shared queues initialized.
2025-05-23 13:57:05,452 - INFO - Retrieved queue instances. Event loop ID: 941566080
2025-05-23 13:57:05,452 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 13:57:05,452 - INFO - MessageProcessor queues verified
2025-05-23 13:57:05,453 - INFO - MessageProcessor task started.
2025-05-23 13:57:05,453 - INFO - QueueForwarder queues verified
2025-05-23 13:57:05,453 - INFO - QueueForwarder task started.
2025-05-23 13:57:05,453 - INFO - Application startup complete. All core services initialized.
2025-05-23 13:57:05,453 - INFO - Starting MessageProcessor
2025-05-23 13:57:05,453 - INFO - Starting QueueForwarder
2025-05-23 13:59:14,550 - INFO - Application shutdown event triggered.
2025-05-23 13:59:14,550 - INFO - Stopping MessageProcessor...
2025-05-23 13:59:14,550 - WARNING - MessageProcessor didn't stop cleanly
2025-05-23 13:59:14,550 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 13:59:14,550 - INFO - All WebSocket connections attempted to close.
2025-05-23 13:59:14,550 - INFO - Application shutdown complete.
2025-05-23 13:59:17,443 - INFO - Application startup event triggered.
2025-05-23 13:59:17,444 - INFO - Initializing all queues...
2025-05-23 13:59:17,444 - INFO - All queues initialized on loop 59963520
2025-05-23 13:59:17,444 - INFO - Shared queues initialized.
2025-05-23 13:59:17,444 - INFO - Retrieved queue instances. Event loop ID: 59963520
2025-05-23 13:59:17,444 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 13:59:17,444 - INFO - MessageProcessor queues verified
2025-05-23 13:59:17,444 - INFO - MessageProcessor task started.
2025-05-23 13:59:17,444 - INFO - QueueForwarder queues verified
2025-05-23 13:59:17,444 - INFO - QueueForwarder task started.
2025-05-23 13:59:17,444 - INFO - Application startup complete. All core services initialized.
2025-05-23 13:59:17,444 - INFO - Starting MessageProcessor
2025-05-23 13:59:17,444 - INFO - Starting QueueForwarder
2025-05-23 13:59:42,220 - INFO - Application shutdown event triggered.
2025-05-23 13:59:42,220 - INFO - Stopping MessageProcessor...
2025-05-23 13:59:42,221 - WARNING - MessageProcessor didn't stop cleanly
2025-05-23 13:59:42,221 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 13:59:42,221 - INFO - All WebSocket connections attempted to close.
2025-05-23 13:59:42,221 - INFO - Application shutdown complete.
2025-05-23 14:02:39,910 - INFO - Application startup event triggered.
2025-05-23 14:02:39,910 - INFO - Initializing all queues...
2025-05-23 14:02:39,910 - INFO - All queues initialized on loop 566999168
2025-05-23 14:02:39,910 - INFO - Shared queues initialized.
2025-05-23 14:02:39,910 - INFO - Retrieved queue instances. Event loop ID: 566999168
2025-05-23 14:02:39,910 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 14:02:39,910 - INFO - MessageProcessor queues verified
2025-05-23 14:02:39,910 - INFO - MessageProcessor task started.
2025-05-23 14:02:39,910 - INFO - QueueForwarder queues verified
2025-05-23 14:02:39,910 - INFO - QueueForwarder task started.
2025-05-23 14:02:39,910 - INFO - Application startup complete. All core services initialized.
2025-05-23 14:02:39,910 - INFO - Starting MessageProcessor
2025-05-23 14:02:39,910 - INFO - Starting QueueForwarder
2025-05-23 14:02:57,557 - INFO - Application shutdown event triggered.
2025-05-23 14:02:57,557 - INFO - Stopping MessageProcessor...
2025-05-23 14:02:57,558 - WARNING - MessageProcessor didn't stop cleanly
2025-05-23 14:02:57,558 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 14:02:57,558 - INFO - All WebSocket connections attempted to close.
2025-05-23 14:02:57,558 - INFO - Application shutdown complete.
2025-05-23 18:44:05,690 - INFO - Application startup event triggered.
2025-05-23 18:44:05,691 - INFO - Initializing all queues...
2025-05-23 18:44:05,691 - INFO - All queues initialized on loop 555288704
2025-05-23 18:44:05,691 - INFO - Shared queues initialized.
2025-05-23 18:44:05,691 - INFO - Retrieved queue instances. Event loop ID: 555288704
2025-05-23 18:44:05,691 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 18:44:05,691 - INFO - MessageProcessor queues verified
2025-05-23 18:44:05,691 - INFO - MessageProcessor task started.
2025-05-23 18:44:05,692 - INFO - QueueForwarder queues verified
2025-05-23 18:44:05,692 - INFO - QueueForwarder task started.
2025-05-23 18:44:05,692 - INFO - Application startup complete. All core services initialized.
2025-05-23 18:44:05,692 - INFO - Starting MessageProcessor
2025-05-23 18:44:05,692 - INFO - Starting QueueForwarder
2025-05-23 18:44:07,022 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=39752)
2025-05-23 18:44:09,311 - INFO - Simulation task starting
2025-05-23 18:44:09,311 - INFO - System message enqueued to backend queue
2025-05-23 18:51:17,775 - ERROR - Receive error: 1012
2025-05-23 18:51:17,777 - INFO - Connection cleanup completed for 127.0.0.1:39752
2025-05-23 18:51:17,777 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 18:51:17,777 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=39752)
2025-05-23 18:51:17,777 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=39752)
2025-05-23 18:51:20,791 - INFO - Application shutdown event triggered.
2025-05-23 18:51:20,791 - INFO - SimulationManager stopped.
2025-05-23 18:51:20,791 - INFO - Stopping MessageProcessor...
2025-05-23 18:51:20,791 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 18:51:20,791 - INFO - All WebSocket connections attempted to close.
2025-05-23 18:51:20,791 - INFO - Application shutdown complete.
2025-05-23 18:51:25,291 - INFO - Application startup event triggered.
2025-05-23 18:51:25,291 - INFO - Initializing all queues...
2025-05-23 18:51:25,291 - INFO - All queues initialized on loop 240478336
2025-05-23 18:51:25,291 - INFO - Shared queues initialized.
2025-05-23 18:51:25,291 - INFO - Retrieved queue instances. Event loop ID: 240478336
2025-05-23 18:51:25,291 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 18:51:25,292 - INFO - MessageProcessor queues verified
2025-05-23 18:51:25,292 - INFO - MessageProcessor task started.
2025-05-23 18:51:25,292 - INFO - QueueForwarder queues verified
2025-05-23 18:51:25,292 - INFO - QueueForwarder task started.
2025-05-23 18:51:25,292 - INFO - Application startup complete. All core services initialized.
2025-05-23 18:51:25,292 - INFO - Starting MessageProcessor
2025-05-23 18:51:25,292 - INFO - Starting QueueForwarder
2025-05-23 18:51:25,668 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54114)
2025-05-23 18:51:26,668 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54126)
2025-05-23 18:51:27,997 - INFO - Simulation task starting
2025-05-23 18:51:27,997 - INFO - System message enqueued to backend queue
2025-05-23 18:51:47,573 - ERROR - Receive error: 1012
2025-05-23 18:51:47,573 - ERROR - Receive error: 1012
2025-05-23 18:51:47,574 - INFO - Connection cleanup completed for 127.0.0.1:54126
2025-05-23 18:51:47,574 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 18:51:47,574 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=54126)
2025-05-23 18:51:47,575 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=54126)
2025-05-23 18:51:47,575 - INFO - Connection cleanup completed for 127.0.0.1:54114
2025-05-23 18:51:47,575 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 18:51:47,575 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=54114)
2025-05-23 18:51:47,575 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=54114)
2025-05-23 18:51:54,595 - INFO - Application shutdown event triggered.
2025-05-23 18:51:54,595 - INFO - SimulationManager stopped.
2025-05-23 18:51:54,595 - INFO - Stopping MessageProcessor...
2025-05-23 18:51:54,595 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 18:51:54,595 - INFO - All WebSocket connections attempted to close.
2025-05-23 18:51:54,595 - INFO - Application shutdown complete.
2025-05-23 18:52:09,556 - INFO - Application startup event triggered.
2025-05-23 18:52:09,556 - INFO - Initializing all queues...
2025-05-23 18:52:09,557 - INFO - All queues initialized on loop 447133824
2025-05-23 18:52:09,557 - INFO - Shared queues initialized.
2025-05-23 18:52:09,557 - INFO - Retrieved queue instances. Event loop ID: 447133824
2025-05-23 18:52:09,557 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 18:52:09,557 - INFO - MessageProcessor queues verified
2025-05-23 18:52:09,557 - INFO - MessageProcessor task started.
2025-05-23 18:52:09,557 - INFO - QueueForwarder queues verified
2025-05-23 18:52:09,557 - INFO - QueueForwarder task started.
2025-05-23 18:52:09,557 - INFO - Application startup complete. All core services initialized.
2025-05-23 18:52:09,557 - INFO - Starting MessageProcessor
2025-05-23 18:52:09,557 - INFO - Starting QueueForwarder
2025-05-23 18:52:10,929 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54846)
2025-05-23 18:52:13,425 - INFO - Simulation task starting
2025-05-23 18:52:13,426 - INFO - System message enqueued to backend queue
2025-05-23 18:52:18,276 - ERROR - Receive error: 1001
2025-05-23 18:52:18,277 - INFO - Connection cleanup completed for 127.0.0.1:54846
2025-05-23 18:52:18,277 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 18:52:18,277 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=54846)
2025-05-23 18:52:18,277 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=54846)
2025-05-23 18:52:25,318 - INFO - Application shutdown event triggered.
2025-05-23 18:52:25,319 - INFO - SimulationManager stopped.
2025-05-23 18:52:25,319 - INFO - Stopping MessageProcessor...
2025-05-23 18:52:25,319 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 18:52:25,319 - INFO - All WebSocket connections attempted to close.
2025-05-23 18:52:25,319 - INFO - Application shutdown complete.
2025-05-23 18:52:29,757 - INFO - Application startup event triggered.
2025-05-23 18:52:29,758 - INFO - Initializing all queues...
2025-05-23 18:52:29,758 - INFO - All queues initialized on loop 597260416
2025-05-23 18:52:29,758 - INFO - Shared queues initialized.
2025-05-23 18:52:29,758 - INFO - Retrieved queue instances. Event loop ID: 597260416
2025-05-23 18:52:29,758 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 18:52:29,758 - INFO - MessageProcessor queues verified
2025-05-23 18:52:29,758 - INFO - MessageProcessor task started.
2025-05-23 18:52:29,758 - INFO - QueueForwarder queues verified
2025-05-23 18:52:29,759 - INFO - QueueForwarder task started.
2025-05-23 18:52:29,759 - INFO - Application startup complete. All core services initialized.
2025-05-23 18:52:29,759 - INFO - Starting MessageProcessor
2025-05-23 18:52:29,759 - INFO - Starting QueueForwarder
2025-05-23 18:52:31,175 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=58942)
2025-05-23 18:52:33,526 - INFO - Simulation task starting
2025-05-23 18:52:33,527 - INFO - System message enqueued to backend queue
2025-05-23 18:53:27,582 - ERROR - Receive error: 1001
2025-05-23 18:53:27,583 - INFO - Connection cleanup completed for 127.0.0.1:58942
2025-05-23 18:53:27,583 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 18:53:27,583 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=58942)
2025-05-23 18:53:27,583 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=58942)
2025-05-23 18:53:27,648 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=40254)
2025-05-23 18:53:45,710 - ERROR - Receive error: 1012
2025-05-23 18:53:45,711 - INFO - Connection cleanup completed for 127.0.0.1:40254
2025-05-23 18:53:45,711 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 18:53:45,711 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=40254)
2025-05-23 18:53:45,711 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=40254)
2025-05-23 18:53:45,814 - INFO - Application shutdown event triggered.
2025-05-23 18:53:45,814 - INFO - SimulationManager stopped.
2025-05-23 18:53:45,814 - INFO - Stopping MessageProcessor...
2025-05-23 18:53:45,814 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 18:53:45,815 - INFO - All WebSocket connections attempted to close.
2025-05-23 18:53:45,815 - INFO - Application shutdown complete.
2025-05-23 18:56:46,345 - INFO - Application startup event triggered.
2025-05-23 18:56:46,346 - INFO - Initializing all queues...
2025-05-23 18:56:46,346 - INFO - All queues initialized on loop 503027840
2025-05-23 18:56:46,346 - INFO - Shared queues initialized.
2025-05-23 18:56:46,346 - INFO - Retrieved queue instances. Event loop ID: 503027840
2025-05-23 18:56:46,346 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 18:56:46,346 - INFO - MessageProcessor queues verified
2025-05-23 18:56:46,346 - INFO - MessageProcessor task started.
2025-05-23 18:56:46,346 - INFO - QueueForwarder queues verified
2025-05-23 18:56:46,346 - INFO - QueueForwarder task started.
2025-05-23 18:56:46,346 - INFO - Application startup complete. All core services initialized.
2025-05-23 18:56:46,347 - INFO - Starting MessageProcessor
2025-05-23 18:56:46,347 - INFO - Starting QueueForwarder
2025-05-23 18:56:47,743 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37762)
2025-05-23 18:56:49,098 - INFO - Backend: Received POST request to /simulation/start
2025-05-23 18:56:49,099 - INFO - Simulation task starting
2025-05-23 18:56:49,099 - INFO - System message enqueued to backend queue
2025-05-23 18:56:53,669 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=34362)
2025-05-23 18:57:20,853 - ERROR - Receive error: 1001
2025-05-23 18:57:20,853 - INFO - Connection cleanup completed for 127.0.0.1:34362
2025-05-23 18:57:20,853 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 18:57:20,854 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=34362)
2025-05-23 18:57:20,854 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=34362)
2025-05-23 18:57:23,489 - ERROR - Receive error: 1001
2025-05-23 18:57:23,490 - INFO - Connection cleanup completed for 127.0.0.1:37762
2025-05-23 18:57:23,490 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 18:57:23,490 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=37762)
2025-05-23 18:57:23,491 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=37762)
2025-05-23 18:57:28,308 - INFO - Application shutdown event triggered.
2025-05-23 18:57:28,308 - INFO - SimulationManager stopped.
2025-05-23 18:57:28,308 - INFO - Stopping MessageProcessor...
2025-05-23 18:57:28,311 - WARNING - MessageProcessor didn't stop cleanly
2025-05-23 18:57:28,311 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 18:57:28,311 - INFO - All WebSocket connections attempted to close.
2025-05-23 18:57:28,311 - INFO - Application shutdown complete.
2025-05-23 19:00:07,764 - INFO - Application startup event triggered.
2025-05-23 19:00:07,764 - INFO - Initializing all queues...
2025-05-23 19:00:07,764 - INFO - All queues initialized on loop 1089448064
2025-05-23 19:00:07,764 - INFO - Shared queues initialized.
2025-05-23 19:00:07,764 - INFO - Retrieved queue instances. Event loop ID: 1089448064
2025-05-23 19:00:07,765 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 19:00:07,765 - INFO - MessageProcessor queues verified
2025-05-23 19:00:07,765 - INFO - MessageProcessor task started.
2025-05-23 19:00:07,765 - INFO - QueueForwarder queues verified
2025-05-23 19:00:07,765 - INFO - QueueForwarder task started.
2025-05-23 19:00:07,765 - INFO - Application startup complete. All core services initialized.
2025-05-23 19:00:07,765 - INFO - Starting MessageProcessor
2025-05-23 19:00:07,765 - INFO - Starting QueueForwarder
2025-05-23 19:00:09,087 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=59016)
2025-05-23 19:00:10,679 - ERROR - Receive error: 1001
2025-05-23 19:00:10,679 - INFO - Connection cleanup completed for 127.0.0.1:59016
2025-05-23 19:00:10,680 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 19:00:10,680 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=59016)
2025-05-23 19:00:10,680 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=59016)
2025-05-23 19:00:10,743 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=59022)
2025-05-23 19:00:14,166 - INFO - Backend: Received POST request to /simulation/start
2025-05-23 19:00:14,167 - INFO - Simulation task starting
2025-05-23 19:00:14,168 - INFO - System message enqueued to backend queue
2025-05-23 19:00:14,168 - ERROR - Send error: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-23 19:00:26,638 - ERROR - Receive error: 1012
2025-05-23 19:00:26,639 - INFO - Connection cleanup completed for 127.0.0.1:59022
2025-05-23 19:00:26,639 - ERROR - WebSocket error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 19:00:26,639 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=59022)
2025-05-23 19:00:26,639 - INFO - WebSocket connection closed for Address(host='127.0.0.1', port=59022)
2025-05-23 19:00:26,840 - INFO - Application shutdown event triggered.
2025-05-23 19:00:26,841 - INFO - SimulationManager stopped.
2025-05-23 19:00:26,841 - INFO - Stopping MessageProcessor...
2025-05-23 19:00:26,844 - WARNING - MessageProcessor didn't stop cleanly
2025-05-23 19:00:26,844 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 19:00:26,844 - INFO - All WebSocket connections attempted to close.
2025-05-23 19:00:26,844 - INFO - Application shutdown complete.
2025-05-23 19:02:59,071 - INFO - Application startup event triggered.
2025-05-23 19:02:59,071 - INFO - Initializing all queues...
2025-05-23 19:02:59,072 - INFO - All queues initialized on loop 131262592
2025-05-23 19:02:59,072 - INFO - Shared queues initialized.
2025-05-23 19:02:59,072 - INFO - Retrieved queue instances. Event loop ID: 131262592
2025-05-23 19:02:59,072 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 19:02:59,072 - INFO - MessageProcessor queues verified
2025-05-23 19:02:59,072 - INFO - MessageProcessor task started.
2025-05-23 19:02:59,072 - INFO - QueueForwarder queues verified
2025-05-23 19:02:59,073 - INFO - QueueForwarder task started.
2025-05-23 19:02:59,073 - INFO - Application startup complete. All core services initialized.
2025-05-23 19:02:59,073 - INFO - Starting MessageProcessor
2025-05-23 19:02:59,073 - INFO - Starting QueueForwarder
2025-05-23 19:04:28,075 - INFO - Application shutdown event triggered.
2025-05-23 19:04:28,075 - INFO - Stopping MessageProcessor...
2025-05-23 19:04:28,076 - WARNING - MessageProcessor didn't stop cleanly
2025-05-23 19:04:28,076 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 19:04:28,076 - INFO - All WebSocket connections attempted to close.
2025-05-23 19:04:28,076 - INFO - Application shutdown complete.
2025-05-23 19:04:31,064 - INFO - Application startup event triggered.
2025-05-23 19:04:31,064 - INFO - Initializing all queues...
2025-05-23 19:04:31,065 - INFO - All queues initialized on loop 985098368
2025-05-23 19:04:31,065 - INFO - Shared queues initialized.
2025-05-23 19:04:31,065 - INFO - Retrieved queue instances. Event loop ID: 985098368
2025-05-23 19:04:31,065 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 19:04:31,065 - INFO - MessageProcessor queues verified
2025-05-23 19:04:31,065 - INFO - MessageProcessor task started.
2025-05-23 19:04:31,065 - INFO - QueueForwarder queues verified
2025-05-23 19:04:31,065 - INFO - QueueForwarder task started.
2025-05-23 19:04:31,065 - INFO - Application startup complete. All core services initialized.
2025-05-23 19:04:31,066 - INFO - Starting MessageProcessor
2025-05-23 19:04:31,066 - INFO - Starting QueueForwarder
2025-05-23 19:04:32,441 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=43040)
2025-05-23 19:04:38,139 - INFO - Backend: Received POST request to /simulation/start
2025-05-23 19:04:38,140 - INFO - Simulation task starting
2025-05-23 19:04:38,140 - INFO - System message enqueued to backend queue
2025-05-23 19:05:39,327 - ERROR - Receive error: 1012
2025-05-23 19:05:39,327 - INFO - Connection cleanup completed for 127.0.0.1:43040
2025-05-23 19:05:39,327 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 19:05:39,327 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=43040)
2025-05-23 19:05:39,430 - INFO - Application shutdown event triggered.
2025-05-23 19:05:39,431 - INFO - SimulationManager stopped.
2025-05-23 19:05:39,431 - INFO - Stopping MessageProcessor...
2025-05-23 19:05:39,431 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 19:05:39,431 - INFO - All WebSocket connections attempted to close.
2025-05-23 19:05:39,431 - INFO - Application shutdown complete.
2025-05-23 19:09:05,005 - INFO - Application startup event triggered.
2025-05-23 19:09:05,005 - INFO - Initializing all queues...
2025-05-23 19:09:05,005 - INFO - All queues initialized on loop 813676672
2025-05-23 19:09:05,006 - INFO - Shared queues initialized.
2025-05-23 19:09:05,006 - INFO - Retrieved queue instances. Event loop ID: 813676672
2025-05-23 19:09:05,006 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 19:09:05,006 - INFO - MessageProcessor queues verified
2025-05-23 19:09:05,006 - INFO - MessageProcessor task started.
2025-05-23 19:09:05,006 - INFO - QueueForwarder queues verified
2025-05-23 19:09:05,006 - INFO - QueueForwarder task started.
2025-05-23 19:09:05,006 - INFO - Application startup complete. All core services initialized.
2025-05-23 19:09:05,006 - INFO - Starting MessageProcessor
2025-05-23 19:09:05,006 - INFO - Starting QueueForwarder
2025-05-23 19:09:06,332 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=38856)
2025-05-23 19:09:07,897 - ERROR - Receive error: 1001
2025-05-23 19:09:07,898 - INFO - Connection cleanup completed for 127.0.0.1:38856
2025-05-23 19:09:07,898 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 19:09:07,898 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=38856)
2025-05-23 19:09:07,967 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=38858)
2025-05-23 19:09:09,721 - INFO - Backend: Received POST request to /simulation/start
2025-05-23 19:09:09,722 - INFO - Simulation task starting
2025-05-23 19:09:09,723 - INFO - System message enqueued to backend queue
2025-05-23 19:09:09,723 - ERROR - Send error: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-23 19:09:22,469 - ERROR - Receive error: 1012
2025-05-23 19:09:22,469 - INFO - Connection cleanup completed for 127.0.0.1:38858
2025-05-23 19:09:22,469 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 19:09:22,469 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=38858)
2025-05-23 19:09:22,674 - INFO - Application shutdown event triggered.
2025-05-23 19:09:22,674 - INFO - SimulationManager stopped.
2025-05-23 19:09:22,675 - INFO - Stopping MessageProcessor...
2025-05-23 19:09:22,675 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 19:09:22,675 - INFO - All WebSocket connections attempted to close.
2025-05-23 19:09:22,675 - INFO - Application shutdown complete.
2025-05-23 19:10:45,405 - INFO - Application startup event triggered.
2025-05-23 19:10:45,405 - INFO - Initializing all queues...
2025-05-23 19:10:45,405 - INFO - All queues initialized on loop 970512512
2025-05-23 19:10:45,405 - INFO - Shared queues initialized.
2025-05-23 19:10:45,406 - INFO - Retrieved queue instances. Event loop ID: 970512512
2025-05-23 19:10:45,406 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 19:10:45,406 - INFO - MessageProcessor queues verified
2025-05-23 19:10:45,406 - INFO - MessageProcessor task started.
2025-05-23 19:10:45,406 - INFO - QueueForwarder queues verified
2025-05-23 19:10:45,406 - INFO - QueueForwarder task started.
2025-05-23 19:10:45,406 - INFO - Application startup complete. All core services initialized.
2025-05-23 19:10:45,406 - INFO - Starting MessageProcessor
2025-05-23 19:10:45,406 - INFO - Starting QueueForwarder
2025-05-23 19:10:55,543 - INFO - Application shutdown event triggered.
2025-05-23 19:10:55,543 - INFO - Stopping MessageProcessor...
2025-05-23 19:10:55,543 - WARNING - MessageProcessor didn't stop cleanly
2025-05-23 19:10:55,543 - INFO - QueueForwarder task cancelled.
2025-05-23 19:10:55,543 - INFO - All WebSocket connections attempted to close.
2025-05-23 19:10:55,544 - INFO - Application shutdown complete.
2025-05-23 19:14:49,911 - INFO - Application startup event triggered.
2025-05-23 19:14:49,911 - INFO - Initializing all queues...
2025-05-23 19:14:49,911 - INFO - All queues initialized on loop 650049664
2025-05-23 19:14:49,911 - INFO - Shared queues initialized.
2025-05-23 19:14:49,911 - INFO - Retrieved queue instances. Event loop ID: 650049664
2025-05-23 19:14:49,911 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 19:14:49,911 - INFO - MessageProcessor queues verified
2025-05-23 19:14:49,912 - INFO - MessageProcessor task started.
2025-05-23 19:14:49,912 - INFO - QueueForwarder queues verified
2025-05-23 19:14:49,912 - INFO - QueueForwarder task started.
2025-05-23 19:14:49,912 - INFO - Application startup complete. All core services initialized.
2025-05-23 19:14:49,912 - INFO - Starting MessageProcessor
2025-05-23 19:14:49,912 - INFO - Starting QueueForwarder
2025-05-23 19:14:51,311 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=34788)
2025-05-23 19:14:54,916 - INFO - Backend: Received POST request to /simulation/start
2025-05-23 19:14:54,917 - INFO - Simulation task starting
2025-05-23 19:14:54,918 - INFO - System message enqueued to backend queue
2025-05-23 19:16:45,251 - ERROR - Receive error: 1001
2025-05-23 19:16:45,251 - INFO - Connection cleanup completed for 127.0.0.1:34788
2025-05-23 19:16:45,251 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 19:16:45,251 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=34788)
2025-05-23 19:18:48,370 - INFO - Application shutdown event triggered.
2025-05-23 19:18:48,371 - INFO - SimulationManager stopped.
2025-05-23 19:18:48,371 - INFO - Stopping MessageProcessor...
2025-05-23 19:18:48,371 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 19:18:48,371 - INFO - All WebSocket connections attempted to close.
2025-05-23 19:18:48,371 - INFO - Application shutdown complete.
2025-05-23 19:18:52,330 - INFO - Application startup event triggered.
2025-05-23 19:18:52,330 - INFO - Initializing all queues...
2025-05-23 19:18:52,330 - INFO - All queues initialized on loop 1026177152
2025-05-23 19:18:52,330 - INFO - Shared queues initialized.
2025-05-23 19:18:52,331 - INFO - Retrieved queue instances. Event loop ID: 1026177152
2025-05-23 19:18:52,331 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 19:18:52,331 - INFO - MessageProcessor queues verified
2025-05-23 19:18:52,331 - INFO - MessageProcessor task started.
2025-05-23 19:18:52,331 - INFO - QueueForwarder queues verified
2025-05-23 19:18:52,331 - INFO - QueueForwarder task started.
2025-05-23 19:18:52,331 - INFO - Application startup complete. All core services initialized.
2025-05-23 19:18:52,331 - INFO - Starting MessageProcessor
2025-05-23 19:18:52,331 - INFO - Starting QueueForwarder
2025-05-23 19:18:53,735 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=49022)
2025-05-23 19:18:55,032 - ERROR - Receive error: 1001
2025-05-23 19:18:55,032 - INFO - Connection cleanup completed for 127.0.0.1:49022
2025-05-23 19:18:55,032 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 19:18:55,032 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=49022)
2025-05-23 19:18:55,100 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=49038)
2025-05-23 19:18:55,108 - INFO - Enqueuing valid message of type 'frontend_ready_ack'
2025-05-23 19:18:57,637 - INFO - Backend: Received POST request to /simulation/start
2025-05-23 19:18:57,638 - INFO - Simulation task starting
2025-05-23 19:18:57,638 - INFO - System message enqueued to backend queue
2025-05-23 19:18:57,639 - ERROR - Send error: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-23 19:19:08,589 - ERROR - Receive error: 1012
2025-05-23 19:19:08,589 - INFO - Connection cleanup completed for 127.0.0.1:49038
2025-05-23 19:19:08,589 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-23 19:19:08,589 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=49038)
2025-05-23 19:19:08,790 - INFO - Application shutdown event triggered.
2025-05-23 19:19:08,790 - INFO - SimulationManager stopped.
2025-05-23 19:19:08,790 - INFO - Stopping MessageProcessor...
2025-05-23 19:19:08,790 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 19:19:08,790 - INFO - All WebSocket connections attempted to close.
2025-05-23 19:19:08,790 - INFO - Application shutdown complete.
2025-05-23 19:20:31,161 - INFO - Application startup event triggered.
2025-05-23 19:20:31,161 - INFO - Initializing all queues...
2025-05-23 19:20:31,161 - INFO - All queues initialized on loop 719579264
2025-05-23 19:20:31,161 - INFO - Shared queues initialized.
2025-05-23 19:20:31,161 - INFO - Retrieved queue instances. Event loop ID: 719579264
2025-05-23 19:20:31,161 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-23 19:20:31,161 - INFO - MessageProcessor queues verified
2025-05-23 19:20:31,161 - INFO - MessageProcessor task started.
2025-05-23 19:20:31,162 - INFO - QueueForwarder queues verified
2025-05-23 19:20:31,162 - INFO - QueueForwarder task started.
2025-05-23 19:20:31,162 - INFO - Application startup complete. All core services initialized.
2025-05-23 19:20:31,162 - INFO - Starting MessageProcessor
2025-05-23 19:20:31,162 - INFO - Starting QueueForwarder
2025-05-23 19:20:32,443 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=41234)
2025-05-23 19:20:32,474 - INFO - Enqueuing valid message of type 'frontend_ready_ack'
2025-05-23 19:20:34,491 - ERROR - Receive error: 1001
2025-05-23 19:20:34,491 - INFO - Connection cleanup completed for 127.0.0.1:41234
2025-05-23 19:20:34,491 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=41234): Cannot call "receive" once a disconnect message has been received.
2025-05-23 19:20:34,492 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=41234)
2025-05-23 19:20:34,549 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=41240)
2025-05-23 19:20:34,552 - INFO - Enqueuing valid message of type 'frontend_ready_ack'
2025-05-23 19:20:35,545 - INFO - Backend: Received POST request to /simulation/start
2025-05-23 19:20:35,546 - INFO - Simulation task starting
2025-05-23 19:20:35,546 - INFO - System message enqueued to backend queue
2025-05-23 19:20:35,546 - ERROR - Send error: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-23 19:20:45,007 - ERROR - Receive error: 1012
2025-05-23 19:20:45,008 - INFO - Connection cleanup completed for 127.0.0.1:41240
2025-05-23 19:20:45,008 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=41240): Cannot call "receive" once a disconnect message has been received.
2025-05-23 19:20:45,008 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=41240)
2025-05-23 19:20:45,110 - INFO - Application shutdown event triggered.
2025-05-23 19:20:45,110 - INFO - SimulationManager stopped.
2025-05-23 19:20:45,110 - INFO - Stopping MessageProcessor...
2025-05-23 19:20:45,110 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-23 19:20:45,110 - INFO - All WebSocket connections attempted to close.
2025-05-23 19:20:45,110 - INFO - Application shutdown complete.
2025-05-24 10:24:21,258 - INFO - Application startup event triggered.
2025-05-24 10:24:21,258 - INFO - Initializing all queues...
2025-05-24 10:24:21,258 - INFO - All queues initialized on loop 733456512
2025-05-24 10:24:21,258 - INFO - Shared queues initialized.
2025-05-24 10:24:21,258 - INFO - Retrieved queue instances. Event loop ID: 733456512
2025-05-24 10:24:21,259 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 10:24:21,259 - INFO - MessageProcessor queues verified
2025-05-24 10:24:21,259 - INFO - MessageProcessor task started.
2025-05-24 10:24:21,259 - INFO - QueueForwarder queues verified
2025-05-24 10:24:21,259 - INFO - QueueForwarder task started.
2025-05-24 10:24:21,259 - INFO - Application startup complete. All core services initialized.
2025-05-24 10:24:21,259 - INFO - Starting MessageProcessor
2025-05-24 10:24:21,259 - INFO - Starting QueueForwarder
2025-05-24 10:24:22,666 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=49036)
2025-05-24 10:24:22,666 - INFO - Adding connection: 127.0.0.1:49036. Total connections: 1
2025-05-24 10:24:22,668 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=49036)
2025-05-24 10:24:22,668 - INFO - Sender task started for Address(host='127.0.0.1', port=49036)
2025-05-24 10:24:22,668 - INFO - Receiver task started for Address(host='127.0.0.1', port=49036)
2025-05-24 10:24:22,703 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=49036)
2025-05-24 10:24:24,805 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=49036): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-24 10:24:24,807 - INFO - Receiver task for Address(host='127.0.0.1', port=49036) finished.
2025-05-24 10:24:24,865 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=49044)
2025-05-24 10:24:24,866 - INFO - Adding connection: 127.0.0.1:49044. Total connections: 2
2025-05-24 10:24:24,867 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=49044)
2025-05-24 10:24:24,867 - INFO - Sender task started for Address(host='127.0.0.1', port=49044)
2025-05-24 10:24:24,867 - INFO - Receiver task started for Address(host='127.0.0.1', port=49044)
2025-05-24 10:24:24,872 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=49044)
2025-05-24 10:24:26,322 - INFO - Backend: Received POST request to /simulation/start
2025-05-24 10:24:26,323 - INFO - Simulation task starting
2025-05-24 10:24:26,323 - INFO - System message enqueued to backend queue
2025-05-24 10:24:26,324 - WARNING - Failed to send message to Address(host='127.0.0.1', port=49036), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-24 10:24:26,324 - INFO - Sender task for Address(host='127.0.0.1', port=49036) finished.
2025-05-24 10:24:26,324 - INFO - Initiating cleanup for connection: 127.0.0.1:49036
2025-05-24 10:24:26,324 - INFO - Starting cleanup for 127.0.0.1:49036
2025-05-24 10:24:26,324 - INFO - Connection cleanup completed for 127.0.0.1:49036. Remaining connections: 1
2025-05-24 10:24:26,324 - INFO - Cleanup finished for connection: 127.0.0.1:49036. Total connections: 1
2025-05-24 10:24:26,324 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=49036): Cannot call "receive" once a disconnect message has been received.
2025-05-24 10:24:26,324 - INFO - Starting cleanup for Address(host='127.0.0.1', port=49036)
2025-05-24 10:24:26,324 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=49036). Remaining connections: 1
2025-05-24 10:28:16,650 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=49044): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-24 10:28:16,651 - INFO - Receiver task for Address(host='127.0.0.1', port=49044) finished.
2025-05-24 10:28:16,751 - INFO - Sender task for Address(host='127.0.0.1', port=49044) was cancelled.
2025-05-24 10:28:16,755 - INFO - Application shutdown event triggered.
2025-05-24 10:28:16,755 - INFO - SimulationManager stopped.
2025-05-24 10:28:16,755 - INFO - Stopping MessageProcessor...
2025-05-24 10:28:16,755 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-24 10:28:16,756 - INFO - All WebSocket connections attempted to close.
2025-05-24 10:28:16,756 - INFO - Application shutdown complete.
2025-05-24 10:28:16,756 - INFO - Initiating cleanup for connection: 127.0.0.1:49044
2025-05-24 10:28:16,757 - INFO - Starting cleanup for 127.0.0.1:49044
2025-05-24 10:28:16,757 - INFO - Connection cleanup completed for 127.0.0.1:49044. Remaining connections: 0
2025-05-24 10:28:16,757 - INFO - Cleanup finished for connection: 127.0.0.1:49044. Total connections: 0
2025-05-24 10:28:20,471 - INFO - Application startup event triggered.
2025-05-24 10:28:20,472 - INFO - Initializing all queues...
2025-05-24 10:28:20,472 - INFO - All queues initialized on loop 592357504
2025-05-24 10:28:20,472 - INFO - Shared queues initialized.
2025-05-24 10:28:20,472 - INFO - Retrieved queue instances. Event loop ID: 592357504
2025-05-24 10:28:20,472 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 10:28:20,472 - INFO - MessageProcessor queues verified
2025-05-24 10:28:20,472 - INFO - MessageProcessor task started.
2025-05-24 10:28:20,472 - INFO - QueueForwarder queues verified
2025-05-24 10:28:20,472 - INFO - QueueForwarder task started.
2025-05-24 10:28:20,472 - INFO - Application startup complete. All core services initialized.
2025-05-24 10:28:20,473 - INFO - Starting MessageProcessor
2025-05-24 10:28:20,473 - INFO - Starting QueueForwarder
2025-05-24 10:28:21,843 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=40280)
2025-05-24 10:28:21,843 - INFO - Adding connection: 127.0.0.1:40280. Total connections: 1
2025-05-24 10:28:21,845 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=40280)
2025-05-24 10:28:21,845 - INFO - Sender task started for Address(host='127.0.0.1', port=40280)
2025-05-24 10:28:21,846 - INFO - Receiver task started for Address(host='127.0.0.1', port=40280)
2025-05-24 10:28:21,850 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=40280)
2025-05-24 10:28:23,337 - INFO - Backend: Received POST request to /simulation/start
2025-05-24 10:28:23,337 - INFO - Simulation task starting
2025-05-24 10:28:23,338 - INFO - System message enqueued to backend queue
2025-05-24 10:28:24,130 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=40310)
2025-05-24 10:28:24,131 - INFO - Adding connection: 127.0.0.1:40310. Total connections: 2
2025-05-24 10:28:24,132 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=40310)
2025-05-24 10:28:24,132 - INFO - Sender task started for Address(host='127.0.0.1', port=40310)
2025-05-24 10:28:24,132 - INFO - Receiver task started for Address(host='127.0.0.1', port=40310)
2025-05-24 10:28:24,136 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=40310)
2025-05-24 10:29:18,914 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=40280): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-24 10:29:18,915 - INFO - Receiver task for Address(host='127.0.0.1', port=40280) finished.
2025-05-24 10:29:18,982 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=56996)
2025-05-24 10:29:18,982 - INFO - Adding connection: 127.0.0.1:56996. Total connections: 3
2025-05-24 10:29:18,983 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=56996)
2025-05-24 10:29:18,983 - INFO - Sender task started for Address(host='127.0.0.1', port=56996)
2025-05-24 10:29:18,983 - INFO - Receiver task started for Address(host='127.0.0.1', port=56996)
2025-05-24 10:29:18,987 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=56996)
2025-05-24 10:29:57,033 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=56996): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-24 10:29:57,034 - INFO - Receiver task for Address(host='127.0.0.1', port=56996) finished.
2025-05-24 10:29:58,528 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=40310): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-24 10:29:58,529 - INFO - Receiver task for Address(host='127.0.0.1', port=40310) finished.
2025-05-24 10:30:00,951 - INFO - Sender task for Address(host='127.0.0.1', port=40310) was cancelled.
2025-05-24 10:30:00,951 - INFO - Sender task for Address(host='127.0.0.1', port=56996) was cancelled.
2025-05-24 10:30:00,951 - INFO - Sender task for Address(host='127.0.0.1', port=40280) was cancelled.
2025-05-24 10:30:00,951 - INFO - Application shutdown event triggered.
2025-05-24 10:30:00,951 - INFO - SimulationManager stopped.
2025-05-24 10:30:00,951 - INFO - Stopping MessageProcessor...
2025-05-24 10:30:00,954 - WARNING - MessageProcessor didn't stop cleanly
2025-05-24 10:30:00,954 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-24 10:30:00,954 - INFO - All WebSocket connections attempted to close.
2025-05-24 10:30:00,954 - INFO - Application shutdown complete.
2025-05-24 10:30:00,955 - INFO - Initiating cleanup for connection: 127.0.0.1:40310
2025-05-24 10:30:00,955 - INFO - Starting cleanup for 127.0.0.1:40310
2025-05-24 10:30:00,955 - INFO - Connection cleanup completed for 127.0.0.1:40310. Remaining connections: 2
2025-05-24 10:30:00,955 - INFO - Cleanup finished for connection: 127.0.0.1:40310. Total connections: 2
2025-05-24 10:30:00,957 - INFO - Initiating cleanup for connection: 127.0.0.1:56996
2025-05-24 10:30:00,957 - INFO - Starting cleanup for 127.0.0.1:56996
2025-05-24 10:30:00,957 - INFO - Connection cleanup completed for 127.0.0.1:56996. Remaining connections: 1
2025-05-24 10:30:00,958 - INFO - Cleanup finished for connection: 127.0.0.1:56996. Total connections: 1
2025-05-24 10:30:00,959 - INFO - Initiating cleanup for connection: 127.0.0.1:40280
2025-05-24 10:30:00,959 - INFO - Starting cleanup for 127.0.0.1:40280
2025-05-24 10:30:00,959 - INFO - Connection cleanup completed for 127.0.0.1:40280. Remaining connections: 0
2025-05-24 10:30:00,959 - INFO - Cleanup finished for connection: 127.0.0.1:40280. Total connections: 0
2025-05-24 10:30:04,722 - INFO - Application startup event triggered.
2025-05-24 10:30:04,722 - INFO - Initializing all queues...
2025-05-24 10:30:04,722 - INFO - All queues initialized on loop 159164544
2025-05-24 10:30:04,722 - INFO - Shared queues initialized.
2025-05-24 10:30:04,722 - INFO - Retrieved queue instances. Event loop ID: 159164544
2025-05-24 10:30:04,723 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 10:30:04,723 - INFO - MessageProcessor queues verified
2025-05-24 10:30:04,723 - INFO - MessageProcessor task started.
2025-05-24 10:30:04,723 - INFO - QueueForwarder queues verified
2025-05-24 10:30:04,723 - INFO - QueueForwarder task started.
2025-05-24 10:30:04,723 - INFO - Application startup complete. All core services initialized.
2025-05-24 10:30:04,723 - INFO - Starting MessageProcessor
2025-05-24 10:30:04,723 - INFO - Starting QueueForwarder
2025-05-24 10:30:06,102 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=57452)
2025-05-24 10:30:06,103 - INFO - Adding connection: 127.0.0.1:57452. Total connections: 1
2025-05-24 10:30:06,104 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=57452)
2025-05-24 10:30:06,104 - INFO - Sender task started for Address(host='127.0.0.1', port=57452)
2025-05-24 10:30:06,105 - INFO - Receiver task started for Address(host='127.0.0.1', port=57452)
2025-05-24 10:30:06,113 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=57452)
2025-05-24 10:30:08,120 - INFO - Backend: Received POST request to /simulation/start
2025-05-24 10:30:08,120 - INFO - Simulation task starting
2025-05-24 10:30:08,121 - INFO - System message enqueued to backend queue
2025-05-24 10:30:27,868 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=57452)
2025-05-24 10:30:36,963 - INFO - Backend: Received POST request to /simulation/stop
2025-05-24 10:30:37,181 - INFO - Simulation stopped
2025-05-24 10:31:15,597 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=57452): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-24 10:31:15,598 - INFO - Receiver task for Address(host='127.0.0.1', port=57452) finished.
2025-05-24 10:42:34,093 - INFO - Application startup event triggered.
2025-05-24 10:42:34,093 - INFO - Initializing all queues...
2025-05-24 10:42:34,094 - INFO - All queues initialized on loop 692980880
2025-05-24 10:42:34,094 - INFO - Shared queues initialized.
2025-05-24 10:42:34,094 - INFO - Retrieved queue instances. Event loop ID: 692980880
2025-05-24 10:42:34,094 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 10:42:34,094 - INFO - MessageProcessor queues verified
2025-05-24 10:42:34,094 - INFO - MessageProcessor task started.
2025-05-24 10:42:34,094 - INFO - QueueForwarder queues verified
2025-05-24 10:42:34,094 - INFO - QueueForwarder task started.
2025-05-24 10:42:34,094 - INFO - Application startup complete. All core services initialized.
2025-05-24 10:42:34,094 - INFO - Starting MessageProcessor
2025-05-24 10:42:34,094 - INFO - Starting QueueForwarder
2025-05-24 10:42:35,462 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37248)
2025-05-24 10:42:35,462 - INFO - Adding connection: 127.0.0.1:37248. Total connections: 1
2025-05-24 10:42:35,463 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=37248)
2025-05-24 10:42:35,463 - INFO - Sender task started for Address(host='127.0.0.1', port=37248)
2025-05-24 10:42:35,464 - INFO - Receiver task started for Address(host='127.0.0.1', port=37248)
2025-05-24 10:42:35,468 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=37248)
2025-05-24 10:43:16,646 - INFO - Backend: Received POST request to /simulation/start
2025-05-24 10:43:16,647 - INFO - Simulation task starting
2025-05-24 10:43:16,647 - INFO - System message enqueued to backend queue
2025-05-24 10:43:19,318 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=37248)
2025-05-24 10:43:37,403 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=37248): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-24 10:43:37,404 - INFO - Receiver task for Address(host='127.0.0.1', port=37248) finished.
2025-05-24 10:43:38,802 - INFO - Sender task for Address(host='127.0.0.1', port=37248) was cancelled.
2025-05-24 10:43:38,802 - INFO - Application shutdown event triggered.
2025-05-24 10:43:38,802 - INFO - SimulationManager stopped.
2025-05-24 10:43:38,802 - INFO - Stopping MessageProcessor...
2025-05-24 10:43:38,802 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-24 10:43:38,802 - INFO - All WebSocket connections attempted to close.
2025-05-24 10:43:38,803 - INFO - Application shutdown complete.
2025-05-24 10:43:38,806 - INFO - Initiating cleanup for connection: 127.0.0.1:37248
2025-05-24 10:43:38,806 - INFO - Starting cleanup for 127.0.0.1:37248
2025-05-24 10:43:38,806 - INFO - Connection cleanup completed for 127.0.0.1:37248. Remaining connections: 0
2025-05-24 10:43:38,806 - INFO - Cleanup finished for connection: 127.0.0.1:37248. Total connections: 0
2025-05-24 13:48:49,807 - INFO - Application startup event triggered.
2025-05-24 13:48:49,807 - INFO - Initializing all queues...
2025-05-24 13:48:49,808 - INFO - All queues initialized on loop 47484048
2025-05-24 13:48:49,808 - INFO - Shared queues initialized.
2025-05-24 13:48:49,808 - INFO - Retrieved queue instances. Event loop ID: 47484048
2025-05-24 13:48:49,808 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 13:48:49,808 - INFO - MessageProcessor queues verified
2025-05-24 13:48:49,808 - INFO - MessageProcessor task started.
2025-05-24 13:48:49,808 - INFO - QueueForwarder queues verified
2025-05-24 13:48:49,808 - INFO - QueueForwarder task started.
2025-05-24 13:48:49,808 - INFO - Application startup complete. All core services initialized.
2025-05-24 13:48:49,808 - INFO - Starting MessageProcessor
2025-05-24 13:48:49,808 - INFO - Starting QueueForwarder
2025-05-24 13:48:51,052 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53624)
2025-05-24 13:48:51,052 - INFO - Adding connection: 127.0.0.1:53624. Total connections: 1
2025-05-24 13:48:51,054 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=53624)
2025-05-24 13:48:51,054 - INFO - Sender task started for Address(host='127.0.0.1', port=53624)
2025-05-24 13:48:51,054 - INFO - Receiver task started for Address(host='127.0.0.1', port=53624)
2025-05-24 13:48:51,081 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=53624)
2025-05-24 13:48:52,916 - INFO - Backend: Received POST request to /simulation/start
2025-05-24 13:48:52,917 - INFO - Simulation task starting
2025-05-24 13:48:52,918 - INFO - System message enqueued to backend queue
2025-05-24 13:49:07,076 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=53624): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-24 13:49:07,078 - INFO - Receiver task for Address(host='127.0.0.1', port=53624) finished.
2025-05-24 13:49:07,280 - INFO - Sender task for Address(host='127.0.0.1', port=53624) was cancelled.
2025-05-24 13:49:07,280 - INFO - Application shutdown event triggered.
2025-05-24 13:49:07,280 - INFO - SimulationManager stopped.
2025-05-24 13:49:07,280 - INFO - Stopping MessageProcessor...
2025-05-24 13:49:07,280 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-24 13:49:07,280 - INFO - All WebSocket connections attempted to close.
2025-05-24 13:49:07,280 - INFO - Application shutdown complete.
2025-05-24 13:49:07,281 - INFO - Initiating cleanup for connection: 127.0.0.1:53624
2025-05-24 13:49:07,281 - INFO - Starting cleanup for 127.0.0.1:53624
2025-05-24 13:49:07,281 - INFO - Connection cleanup completed for 127.0.0.1:53624. Remaining connections: 0
2025-05-24 13:49:07,281 - INFO - Cleanup finished for connection: 127.0.0.1:53624. Total connections: 0
2025-05-24 13:54:03,676 - INFO - Application startup event triggered.
2025-05-24 13:54:03,676 - INFO - Initializing all queues...
2025-05-24 13:54:03,676 - INFO - All queues initialized on loop 668459520
2025-05-24 13:54:03,676 - INFO - Shared queues initialized.
2025-05-24 13:54:03,676 - INFO - Retrieved queue instances. Event loop ID: 668459520
2025-05-24 13:54:03,676 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 13:54:03,676 - INFO - MessageProcessor queues verified
2025-05-24 13:54:03,677 - INFO - MessageProcessor task started.
2025-05-24 13:54:03,677 - INFO - QueueForwarder queues verified
2025-05-24 13:54:03,677 - INFO - QueueForwarder task started.
2025-05-24 13:54:03,677 - INFO - Application startup complete. All core services initialized.
2025-05-24 13:54:03,677 - INFO - Starting MessageProcessor
2025-05-24 13:54:03,678 - INFO - Starting QueueForwarder
2025-05-24 13:54:05,065 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=33612)
2025-05-24 13:54:05,065 - INFO - Adding connection: 127.0.0.1:33612. Total connections: 1
2025-05-24 13:54:05,066 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=33612)
2025-05-24 13:54:05,066 - INFO - Sender task started for Address(host='127.0.0.1', port=33612)
2025-05-24 13:54:05,067 - INFO - Receiver task started for Address(host='127.0.0.1', port=33612)
2025-05-24 13:54:05,072 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=33612)
2025-05-24 13:54:11,078 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=33612)
2025-05-24 13:54:15,978 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=48364)
2025-05-24 13:54:15,978 - INFO - Adding connection: 127.0.0.1:48364. Total connections: 2
2025-05-24 13:54:15,979 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=48364)
2025-05-24 13:54:15,980 - INFO - Sender task started for Address(host='127.0.0.1', port=48364)
2025-05-24 13:54:15,980 - INFO - Receiver task started for Address(host='127.0.0.1', port=48364)
2025-05-24 13:54:15,982 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=48364)
2025-05-24 13:54:46,074 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=48364): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-24 13:54:46,075 - INFO - Receiver task for Address(host='127.0.0.1', port=48364) finished.
2025-05-24 13:54:47,602 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=33612): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-24 13:54:47,603 - INFO - Receiver task for Address(host='127.0.0.1', port=33612) finished.
2025-05-24 13:54:48,867 - INFO - Sender task for Address(host='127.0.0.1', port=33612) was cancelled.
2025-05-24 13:54:48,867 - INFO - Sender task for Address(host='127.0.0.1', port=48364) was cancelled.
2025-05-24 13:54:48,867 - INFO - Application shutdown event triggered.
2025-05-24 13:54:48,869 - INFO - Initiating cleanup for connection: 127.0.0.1:33612
2025-05-24 13:54:48,869 - INFO - Starting cleanup for 127.0.0.1:33612
2025-05-24 13:54:48,869 - INFO - Connection cleanup completed for 127.0.0.1:33612. Remaining connections: 1
2025-05-24 13:54:48,869 - INFO - Cleanup finished for connection: 127.0.0.1:33612. Total connections: 1
2025-05-24 13:54:48,871 - INFO - Initiating cleanup for connection: 127.0.0.1:48364
2025-05-24 13:54:48,871 - INFO - Starting cleanup for 127.0.0.1:48364
2025-05-24 13:54:48,871 - INFO - Connection cleanup completed for 127.0.0.1:48364. Remaining connections: 0
2025-05-24 13:54:48,871 - INFO - Cleanup finished for connection: 127.0.0.1:48364. Total connections: 0
2025-05-24 13:55:26,029 - INFO - Application startup event triggered.
2025-05-24 13:55:26,029 - INFO - Initializing all queues...
2025-05-24 13:55:26,029 - INFO - All queues initialized on loop 319496704
2025-05-24 13:55:26,029 - INFO - Shared queues initialized.
2025-05-24 13:55:26,029 - INFO - Retrieved queue instances. Event loop ID: 319496704
2025-05-24 13:55:26,029 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 13:55:26,029 - INFO - MessageProcessor queues verified
2025-05-24 13:55:26,029 - INFO - MessageProcessor task started.
2025-05-24 13:55:26,030 - INFO - QueueForwarder queues verified
2025-05-24 13:55:26,030 - INFO - QueueForwarder task started.
2025-05-24 13:55:26,030 - INFO - Application startup complete. All core services initialized.
2025-05-24 13:55:26,030 - INFO - Starting MessageProcessor
2025-05-24 13:55:26,030 - INFO - Starting QueueForwarder
2025-05-24 13:55:27,372 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=33086)
2025-05-24 13:55:27,372 - INFO - Adding connection: 127.0.0.1:33086. Total connections: 1
2025-05-24 13:55:27,374 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=33086)
2025-05-24 13:55:27,374 - INFO - Sender task started for Address(host='127.0.0.1', port=33086)
2025-05-24 13:55:27,374 - INFO - Receiver task started for Address(host='127.0.0.1', port=33086)
2025-05-24 13:55:27,396 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=33086)
2025-05-24 13:55:47,785 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=33086): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-24 13:55:47,786 - INFO - Receiver task for Address(host='127.0.0.1', port=33086) finished.
2025-05-24 13:55:48,622 - INFO - Sender task for Address(host='127.0.0.1', port=33086) was cancelled.
2025-05-24 13:55:48,622 - INFO - Application shutdown event triggered.
2025-05-24 13:55:48,624 - INFO - Initiating cleanup for connection: 127.0.0.1:33086
2025-05-24 13:55:48,624 - INFO - Starting cleanup for 127.0.0.1:33086
2025-05-24 13:55:48,624 - INFO - Connection cleanup completed for 127.0.0.1:33086. Remaining connections: 0
2025-05-24 13:55:48,624 - INFO - Cleanup finished for connection: 127.0.0.1:33086. Total connections: 0
2025-05-24 13:59:48,504 - INFO - Application startup event triggered.
2025-05-24 13:59:48,504 - INFO - Initializing all queues...
2025-05-24 13:59:48,504 - INFO - All queues initialized on loop 1061675520
2025-05-24 13:59:48,504 - INFO - Shared queues initialized.
2025-05-24 13:59:48,505 - INFO - Retrieved queue instances. Event loop ID: 1061675520
2025-05-24 13:59:48,505 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 13:59:48,505 - INFO - MessageProcessor queues verified
2025-05-24 13:59:48,505 - INFO - MessageProcessor task started.
2025-05-24 13:59:48,505 - INFO - QueueForwarder queues verified
2025-05-24 13:59:48,505 - INFO - QueueForwarder task started.
2025-05-24 13:59:48,505 - INFO - Application startup complete. All core services initialized.
2025-05-24 13:59:48,506 - INFO - Starting MessageProcessor
2025-05-24 13:59:48,506 - INFO - Starting QueueForwarder
2025-05-24 13:59:49,895 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=46582)
2025-05-24 13:59:49,895 - INFO - Adding connection: 127.0.0.1:46582. Total connections: 1
2025-05-24 13:59:49,896 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=46582)
2025-05-24 13:59:49,896 - INFO - Sender task started for Address(host='127.0.0.1', port=46582)
2025-05-24 13:59:49,897 - INFO - Receiver task started for Address(host='127.0.0.1', port=46582)
2025-05-24 13:59:49,901 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=46582)
2025-05-24 13:59:52,369 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=46582)
2025-05-24 14:00:12,988 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=46582): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-24 14:00:12,989 - INFO - Receiver task for Address(host='127.0.0.1', port=46582) finished.
2025-05-24 14:00:22,232 - INFO - Sender task for Address(host='127.0.0.1', port=46582) was cancelled.
2025-05-24 14:00:22,232 - INFO - Application shutdown event triggered.
2025-05-24 14:00:22,234 - INFO - Initiating cleanup for connection: 127.0.0.1:46582
2025-05-24 14:00:22,234 - INFO - Starting cleanup for 127.0.0.1:46582
2025-05-24 14:00:22,234 - INFO - Connection cleanup completed for 127.0.0.1:46582. Remaining connections: 0
2025-05-24 14:00:22,234 - INFO - Cleanup finished for connection: 127.0.0.1:46582. Total connections: 0
2025-05-24 14:00:26,134 - INFO - Application startup event triggered.
2025-05-24 14:00:26,134 - INFO - Initializing all queues...
2025-05-24 14:00:26,134 - INFO - All queues initialized on loop 415490560
2025-05-24 14:00:26,134 - INFO - Shared queues initialized.
2025-05-24 14:00:26,134 - INFO - Retrieved queue instances. Event loop ID: 415490560
2025-05-24 14:00:26,135 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 14:00:26,135 - INFO - MessageProcessor queues verified
2025-05-24 14:00:26,135 - INFO - MessageProcessor task started.
2025-05-24 14:00:26,135 - INFO - QueueForwarder queues verified
2025-05-24 14:00:26,135 - INFO - QueueForwarder task started.
2025-05-24 14:00:26,135 - INFO - Application startup complete. All core services initialized.
2025-05-24 14:00:26,135 - INFO - Starting MessageProcessor
2025-05-24 14:00:26,135 - INFO - Starting QueueForwarder
2025-05-24 14:00:27,487 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=35264)
2025-05-24 14:00:27,487 - INFO - Adding connection: 127.0.0.1:35264. Total connections: 1
2025-05-24 14:00:27,488 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=35264)
2025-05-24 14:00:27,488 - INFO - Sender task started for Address(host='127.0.0.1', port=35264)
2025-05-24 14:00:27,488 - INFO - Receiver task started for Address(host='127.0.0.1', port=35264)
2025-05-24 14:00:27,493 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=35264)
2025-05-24 14:00:30,182 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=35264)
2025-05-24 14:00:50,132 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=35264): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-24 14:00:50,133 - INFO - Receiver task for Address(host='127.0.0.1', port=35264) finished.
2025-05-24 14:00:50,333 - INFO - Sender task for Address(host='127.0.0.1', port=35264) was cancelled.
2025-05-24 14:00:50,333 - INFO - Application shutdown event triggered.
2025-05-24 14:00:50,336 - INFO - Initiating cleanup for connection: 127.0.0.1:35264
2025-05-24 14:00:50,336 - INFO - Starting cleanup for 127.0.0.1:35264
2025-05-24 14:00:50,336 - INFO - Connection cleanup completed for 127.0.0.1:35264. Remaining connections: 0
2025-05-24 14:00:50,336 - INFO - Cleanup finished for connection: 127.0.0.1:35264. Total connections: 0
2025-05-24 14:10:23,143 - INFO - Application startup event triggered.
2025-05-24 14:10:23,143 - INFO - Initializing all queues...
2025-05-24 14:10:23,143 - INFO - All queues initialized on loop 444256768
2025-05-24 14:10:23,144 - INFO - Shared queues initialized.
2025-05-24 14:10:23,144 - INFO - Retrieved queue instances. Event loop ID: 444256768
2025-05-24 14:10:23,144 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 14:10:23,144 - INFO - MessageProcessor queues verified
2025-05-24 14:10:23,144 - INFO - MessageProcessor task started.
2025-05-24 14:10:23,144 - INFO - QueueForwarder queues verified
2025-05-24 14:10:23,144 - INFO - QueueForwarder task started.
2025-05-24 14:10:23,144 - INFO - Application startup complete. All core services initialized.
2025-05-24 14:10:23,144 - INFO - Starting MessageProcessor
2025-05-24 14:10:23,145 - INFO - Starting QueueForwarder
2025-05-24 14:10:24,541 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=34438)
2025-05-24 14:10:24,541 - INFO - Adding connection: 127.0.0.1:34438. Total connections: 1
2025-05-24 14:10:24,543 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=34438)
2025-05-24 14:10:24,543 - INFO - Sender task started for Address(host='127.0.0.1', port=34438)
2025-05-24 14:10:24,543 - INFO - Receiver task started for Address(host='127.0.0.1', port=34438)
2025-05-24 14:10:24,547 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=34438)
2025-05-24 14:10:29,334 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=34438)
2025-05-24 14:10:46,538 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=34438): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-24 14:10:46,539 - INFO - Receiver task for Address(host='127.0.0.1', port=34438) finished.
2025-05-24 14:10:46,639 - INFO - Sender task for Address(host='127.0.0.1', port=34438) was cancelled.
2025-05-24 14:10:46,639 - INFO - Application shutdown event triggered.
2025-05-24 14:10:46,641 - INFO - Initiating cleanup for connection: 127.0.0.1:34438
2025-05-24 14:10:46,641 - INFO - Starting cleanup for 127.0.0.1:34438
2025-05-24 14:10:46,641 - INFO - Connection cleanup completed for 127.0.0.1:34438. Remaining connections: 0
2025-05-24 14:10:46,641 - INFO - Cleanup finished for connection: 127.0.0.1:34438. Total connections: 0
2025-05-24 14:22:59,953 - INFO - Application startup event triggered.
2025-05-24 14:22:59,953 - INFO - Initializing all queues...
2025-05-24 14:22:59,953 - INFO - All queues initialized on loop 416031232
2025-05-24 14:22:59,953 - INFO - Shared queues initialized.
2025-05-24 14:22:59,953 - INFO - Retrieved queue instances. Event loop ID: 416031232
2025-05-24 14:22:59,953 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 14:22:59,953 - INFO - MessageProcessor queues verified
2025-05-24 14:22:59,953 - INFO - MessageProcessor task started.
2025-05-24 14:22:59,953 - INFO - QueueForwarder queues verified
2025-05-24 14:22:59,954 - INFO - QueueForwarder task started.
2025-05-24 14:22:59,954 - INFO - Application startup complete. All core services initialized.
2025-05-24 14:22:59,954 - INFO - Starting MessageProcessor
2025-05-24 14:22:59,954 - INFO - Starting QueueForwarder
2025-05-24 14:23:01,475 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54384)
2025-05-24 14:23:01,475 - INFO - Adding connection: 127.0.0.1:54384. Total connections: 1
2025-05-24 14:23:01,477 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=54384)
2025-05-24 14:23:01,477 - INFO - Sender task started for Address(host='127.0.0.1', port=54384)
2025-05-24 14:23:01,477 - INFO - Receiver task started for Address(host='127.0.0.1', port=54384)
2025-05-24 14:23:01,482 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=54384)
2025-05-24 14:23:04,119 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=54384)
2025-05-24 14:23:04,987 - INFO - Backend: Starting simulation via API
2025-05-24 14:23:04,987 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-24 14:23:04,988 - INFO - Starting simulation loop
2025-05-24 14:23:04,988 - INFO - Initial message sent to frontend queue
2025-05-24 14:23:04,989 - INFO - System message enqueued to backend queue
2025-05-24 14:23:04,989 - INFO - Processed 3 messages
2025-05-24 14:23:07,098 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=54384)
2025-05-24 14:23:10,941 - INFO - Processed 4 messages
2025-05-24 14:23:16,146 - INFO - Processed 2 messages
2025-05-24 14:23:17,537 - WARNING - Messages not being forwarded to frontend
2025-05-24 14:23:21,149 - INFO - Processed 2 messages
2025-05-24 14:23:28,720 - INFO - Processed 3 messages
2025-05-24 14:23:28,765 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=54384): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-24 14:23:28,766 - INFO - Receiver task for Address(host='127.0.0.1', port=54384) finished.
2025-05-24 14:23:29,325 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=59488)
2025-05-24 14:23:29,325 - INFO - Adding connection: 127.0.0.1:59488. Total connections: 2
2025-05-24 14:23:29,326 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=59488)
2025-05-24 14:23:29,326 - INFO - Sender task started for Address(host='127.0.0.1', port=59488)
2025-05-24 14:23:29,326 - INFO - Receiver task started for Address(host='127.0.0.1', port=59488)
2025-05-24 14:23:29,330 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=59488)
2025-05-24 14:23:29,331 - WARNING - Failed to send message to Address(host='127.0.0.1', port=54384), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-24 14:23:29,331 - INFO - Sender task for Address(host='127.0.0.1', port=54384) finished.
2025-05-24 14:23:29,331 - INFO - Initiating cleanup for connection: 127.0.0.1:54384
2025-05-24 14:23:29,331 - INFO - Starting cleanup for 127.0.0.1:54384
2025-05-24 14:23:29,331 - INFO - Connection cleanup completed for 127.0.0.1:54384. Remaining connections: 1
2025-05-24 14:23:29,331 - INFO - Cleanup finished for connection: 127.0.0.1:54384. Total connections: 1
2025-05-24 14:23:29,331 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=54384): Cannot call "receive" once a disconnect message has been received.
2025-05-24 14:23:29,332 - INFO - Starting cleanup for Address(host='127.0.0.1', port=54384)
2025-05-24 14:23:29,332 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=54384). Remaining connections: 1
2025-05-24 14:23:29,817 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=59488): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-24 14:23:29,818 - INFO - Receiver task for Address(host='127.0.0.1', port=59488) finished.
2025-05-24 14:23:30,426 - WARNING - Messages not being forwarded to frontend
2025-05-24 14:23:31,428 - WARNING - Failed to send message to Address(host='127.0.0.1', port=59488), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-24 14:23:31,428 - INFO - Sender task for Address(host='127.0.0.1', port=59488) finished.
2025-05-24 14:23:31,428 - INFO - Initiating cleanup for connection: 127.0.0.1:59488
2025-05-24 14:23:31,428 - INFO - Starting cleanup for 127.0.0.1:59488
2025-05-24 14:23:31,428 - INFO - Connection cleanup completed for 127.0.0.1:59488. Remaining connections: 0
2025-05-24 14:23:31,429 - INFO - Cleanup finished for connection: 127.0.0.1:59488. Total connections: 0
2025-05-24 14:23:31,429 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=59488): Cannot call "receive" once a disconnect message has been received.
2025-05-24 14:23:31,429 - INFO - Starting cleanup for Address(host='127.0.0.1', port=59488)
2025-05-24 14:23:31,429 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=59488). Remaining connections: 0
2025-05-24 14:23:33,725 - INFO - Processed 3 messages
2025-05-24 14:23:40,212 - INFO - Application shutdown event triggered.
2025-05-24 14:23:40,212 - INFO - SimulationManager stopped.
2025-05-24 14:23:40,212 - INFO - Stopping MessageProcessor...
2025-05-24 14:23:40,212 - WARNING - MessageProcessor didn't stop cleanly
2025-05-24 14:23:40,212 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-24 14:23:40,213 - INFO - All WebSocket connections attempted to close.
2025-05-24 14:23:40,213 - INFO - Application shutdown complete.
2025-05-24 15:11:55,468 - INFO - Application startup event triggered.
2025-05-24 15:11:55,468 - INFO - Initializing all queues...
2025-05-24 15:11:55,468 - INFO - All queues initialized on loop 387609088
2025-05-24 15:11:55,468 - INFO - Shared queues initialized.
2025-05-24 15:11:55,468 - INFO - Retrieved queue instances. Event loop ID: 387609088
2025-05-24 15:11:55,469 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 15:11:55,469 - INFO - MessageProcessor queues verified
2025-05-24 15:11:55,469 - INFO - MessageProcessor task started.
2025-05-24 15:11:55,469 - INFO - QueueForwarder queues verified
2025-05-24 15:11:55,469 - INFO - QueueForwarder task started.
2025-05-24 15:11:55,469 - INFO - Application startup complete. All core services initialized.
2025-05-24 15:11:55,469 - INFO - Starting MessageProcessor
2025-05-24 15:11:55,470 - INFO - Starting QueueForwarder
2025-05-24 15:11:56,856 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37378)
2025-05-24 15:11:56,856 - INFO - Adding connection: 127.0.0.1:37378. Total connections: 1
2025-05-24 15:11:56,858 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=37378)
2025-05-24 15:11:56,858 - INFO - Sender task started for Address(host='127.0.0.1', port=37378)
2025-05-24 15:11:56,858 - INFO - Receiver task started for Address(host='127.0.0.1', port=37378)
2025-05-24 15:11:56,862 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=37378)
2025-05-24 15:11:59,220 - INFO - Backend: Starting simulation via API
2025-05-24 15:11:59,220 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-24 15:11:59,221 - INFO - Starting simulation loop
2025-05-24 15:11:59,221 - INFO - Initial message sent to frontend queue
2025-05-24 15:11:59,222 - INFO - System message enqueued to backend queue
2025-05-24 15:12:02,785 - INFO - Processed 4 messages
2025-05-24 15:12:07,614 - INFO - Backend: Received POST request to /simulation/stop
2025-05-24 15:12:08,416 - INFO - Processed 2 messages
2025-05-24 15:12:08,829 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=37378): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-24 15:12:08,831 - INFO - Receiver task for Address(host='127.0.0.1', port=37378) finished.
2025-05-24 15:12:09,133 - INFO - Sender task for Address(host='127.0.0.1', port=37378) was cancelled.
2025-05-24 15:12:09,134 - INFO - Application shutdown event triggered.
2025-05-24 15:12:09,134 - INFO - Stopping MessageProcessor...
2025-05-24 15:12:09,134 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-24 15:12:09,134 - INFO - All WebSocket connections attempted to close.
2025-05-24 15:12:09,134 - INFO - Application shutdown complete.
2025-05-24 15:12:09,135 - INFO - Initiating cleanup for connection: 127.0.0.1:37378
2025-05-24 15:12:09,135 - INFO - Starting cleanup for 127.0.0.1:37378
2025-05-24 15:12:09,135 - INFO - Connection cleanup completed for 127.0.0.1:37378. Remaining connections: 0
2025-05-24 15:12:09,135 - INFO - Cleanup finished for connection: 127.0.0.1:37378. Total connections: 0
2025-05-24 23:37:30,867 - INFO - Application startup event triggered.
2025-05-24 23:37:30,867 - INFO - Initializing all queues...
2025-05-24 23:37:30,867 - INFO - All queues initialized on loop 823837184
2025-05-24 23:37:30,867 - INFO - Shared queues initialized.
2025-05-24 23:37:30,867 - INFO - Retrieved queue instances. Event loop ID: 823837184
2025-05-24 23:37:30,867 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 23:37:30,867 - INFO - MessageProcessor queues verified
2025-05-24 23:37:30,867 - INFO - MessageProcessor task started.
2025-05-24 23:37:30,867 - INFO - QueueForwarder queues verified
2025-05-24 23:37:30,867 - INFO - QueueForwarder task started.
2025-05-24 23:37:30,868 - INFO - Application startup complete. All core services initialized.
2025-05-24 23:37:30,868 - INFO - Starting MessageProcessor
2025-05-24 23:37:30,868 - INFO - Starting QueueForwarder
2025-05-24 23:40:01,870 - INFO - Application shutdown event triggered.
2025-05-24 23:40:01,870 - INFO - Stopping MessageProcessor...
2025-05-24 23:40:01,870 - WARNING - MessageProcessor didn't stop cleanly
2025-05-24 23:40:01,870 - INFO - QueueForwarder task cancelled.
2025-05-24 23:40:01,870 - INFO - All WebSocket connections attempted to close.
2025-05-24 23:40:01,870 - INFO - Application shutdown complete.
2025-05-24 23:41:04,419 - INFO - Application startup event triggered.
2025-05-24 23:41:04,419 - INFO - Initializing all queues...
2025-05-24 23:41:04,420 - INFO - All queues initialized on loop 102244864
2025-05-24 23:41:04,420 - INFO - Shared queues initialized.
2025-05-24 23:41:04,420 - INFO - Retrieved queue instances. Event loop ID: 102244864
2025-05-24 23:41:04,420 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 23:41:04,420 - INFO - MessageProcessor queues verified
2025-05-24 23:41:04,420 - INFO - MessageProcessor task started.
2025-05-24 23:41:04,420 - INFO - QueueForwarder queues verified
2025-05-24 23:41:04,420 - INFO - QueueForwarder task started.
2025-05-24 23:41:04,420 - INFO - Application startup complete. All core services initialized.
2025-05-24 23:41:04,420 - INFO - Starting MessageProcessor
2025-05-24 23:41:04,420 - INFO - Starting QueueForwarder
2025-05-24 23:44:10,778 - INFO - Application shutdown event triggered.
2025-05-24 23:44:10,778 - INFO - Stopping MessageProcessor...
2025-05-24 23:44:10,778 - WARNING - MessageProcessor didn't stop cleanly
2025-05-24 23:44:10,779 - INFO - QueueForwarder task cancelled.
2025-05-24 23:44:10,779 - INFO - All WebSocket connections attempted to close.
2025-05-24 23:44:10,779 - INFO - Application shutdown complete.
2025-05-24 23:44:11,595 - INFO - Application startup event triggered.
2025-05-24 23:44:11,595 - INFO - Initializing all queues...
2025-05-24 23:44:11,595 - INFO - All queues initialized on loop 760215600
2025-05-24 23:44:11,595 - INFO - Shared queues initialized.
2025-05-24 23:44:11,595 - INFO - Retrieved queue instances. Event loop ID: 760215600
2025-05-24 23:44:11,595 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 23:44:11,595 - INFO - MessageProcessor queues verified
2025-05-24 23:44:11,596 - INFO - MessageProcessor task started.
2025-05-24 23:44:11,596 - INFO - QueueForwarder queues verified
2025-05-24 23:44:11,596 - INFO - QueueForwarder task started.
2025-05-24 23:44:11,596 - INFO - Application startup complete. All core services initialized.
2025-05-24 23:44:11,596 - INFO - Starting MessageProcessor
2025-05-24 23:44:11,596 - INFO - Starting QueueForwarder
2025-05-24 23:44:13,603 - INFO - Application shutdown event triggered.
2025-05-24 23:44:18,537 - INFO - Application startup event triggered.
2025-05-24 23:44:18,537 - INFO - Initializing all queues...
2025-05-24 23:44:18,537 - INFO - All queues initialized on loop 632316416
2025-05-24 23:44:18,537 - INFO - Shared queues initialized.
2025-05-24 23:44:18,537 - INFO - Retrieved queue instances. Event loop ID: 632316416
2025-05-24 23:44:18,537 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 23:44:18,537 - INFO - MessageProcessor queues verified
2025-05-24 23:44:18,538 - INFO - MessageProcessor task started.
2025-05-24 23:44:18,538 - INFO - QueueForwarder queues verified
2025-05-24 23:44:18,538 - INFO - QueueForwarder task started.
2025-05-24 23:44:18,538 - INFO - Application startup complete. All core services initialized.
2025-05-24 23:44:18,538 - INFO - Starting MessageProcessor
2025-05-24 23:44:18,538 - INFO - Starting QueueForwarder
2025-05-24 23:44:53,370 - INFO - Application shutdown event triggered.
2025-05-24 23:44:54,633 - INFO - Application startup event triggered.
2025-05-24 23:44:54,633 - INFO - Initializing all queues...
2025-05-24 23:44:54,633 - INFO - All queues initialized on loop 1033922608
2025-05-24 23:44:54,633 - INFO - Shared queues initialized.
2025-05-24 23:44:54,634 - INFO - Retrieved queue instances. Event loop ID: 1033922608
2025-05-24 23:44:54,634 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 23:44:54,634 - INFO - MessageProcessor queues verified
2025-05-24 23:44:54,634 - INFO - MessageProcessor task started.
2025-05-24 23:44:54,634 - INFO - QueueForwarder queues verified
2025-05-24 23:44:54,634 - INFO - QueueForwarder task started.
2025-05-24 23:44:54,634 - INFO - Application startup complete. All core services initialized.
2025-05-24 23:44:54,634 - INFO - Starting MessageProcessor
2025-05-24 23:44:54,634 - INFO - Starting QueueForwarder
2025-05-24 23:45:37,791 - INFO - Application shutdown event triggered.
2025-05-24 23:45:42,772 - INFO - Application startup event triggered.
2025-05-24 23:45:42,772 - INFO - Initializing all queues...
2025-05-24 23:45:42,772 - INFO - All queues initialized on loop 906150400
2025-05-24 23:45:42,772 - INFO - Shared queues initialized.
2025-05-24 23:45:42,772 - INFO - Retrieved queue instances. Event loop ID: 906150400
2025-05-24 23:45:42,772 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 23:45:42,772 - INFO - MessageProcessor queues verified
2025-05-24 23:45:42,773 - INFO - MessageProcessor task started.
2025-05-24 23:45:42,773 - INFO - QueueForwarder queues verified
2025-05-24 23:45:42,773 - INFO - QueueForwarder task started.
2025-05-24 23:45:42,773 - INFO - Application startup complete. All core services initialized.
2025-05-24 23:45:42,773 - INFO - Starting MessageProcessor
2025-05-24 23:45:42,773 - INFO - Starting QueueForwarder
2025-05-24 23:47:12,592 - INFO - Application shutdown event triggered.
2025-05-24 23:47:16,613 - INFO - Application startup event triggered.
2025-05-24 23:47:16,613 - INFO - Initializing all queues...
2025-05-24 23:47:16,613 - INFO - All queues initialized on loop 594756096
2025-05-24 23:47:16,614 - INFO - Shared queues initialized.
2025-05-24 23:47:16,614 - INFO - Retrieved queue instances. Event loop ID: 594756096
2025-05-24 23:47:16,614 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 23:47:16,614 - INFO - MessageProcessor queues verified
2025-05-24 23:47:16,614 - INFO - MessageProcessor task started.
2025-05-24 23:47:16,614 - INFO - QueueForwarder queues verified
2025-05-24 23:47:16,614 - INFO - QueueForwarder task started.
2025-05-24 23:47:16,614 - INFO - Application startup complete. All core services initialized.
2025-05-24 23:47:16,615 - INFO - Starting MessageProcessor
2025-05-24 23:47:16,615 - INFO - Starting QueueForwarder
2025-05-24 23:48:06,476 - INFO - Application shutdown event triggered.
2025-05-24 23:48:10,779 - INFO - Application startup event triggered.
2025-05-24 23:48:10,779 - INFO - Initializing all queues...
2025-05-24 23:48:10,779 - INFO - All queues initialized on loop 934445568
2025-05-24 23:48:10,779 - INFO - Shared queues initialized.
2025-05-24 23:48:10,779 - INFO - Retrieved queue instances. Event loop ID: 934445568
2025-05-24 23:48:10,779 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 23:48:10,779 - INFO - MessageProcessor queues verified
2025-05-24 23:48:10,779 - INFO - MessageProcessor task started.
2025-05-24 23:48:10,779 - INFO - QueueForwarder queues verified
2025-05-24 23:48:10,779 - INFO - QueueForwarder task started.
2025-05-24 23:48:10,779 - INFO - Application startup complete. All core services initialized.
2025-05-24 23:48:10,780 - INFO - Starting MessageProcessor
2025-05-24 23:48:10,780 - INFO - Starting QueueForwarder
2025-05-24 23:49:28,161 - INFO - Application shutdown event triggered.
2025-05-24 23:49:56,311 - INFO - Application startup event triggered.
2025-05-24 23:49:56,311 - INFO - Initializing all queues...
2025-05-24 23:49:56,311 - INFO - All queues initialized on loop 690172416
2025-05-24 23:49:56,311 - INFO - Shared queues initialized.
2025-05-24 23:49:56,311 - INFO - Retrieved queue instances. Event loop ID: 690172416
2025-05-24 23:49:56,312 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 23:49:56,312 - INFO - MessageProcessor queues verified
2025-05-24 23:49:56,312 - INFO - MessageProcessor task started.
2025-05-24 23:49:56,312 - INFO - QueueForwarder queues verified
2025-05-24 23:49:56,312 - INFO - QueueForwarder task started.
2025-05-24 23:49:56,312 - INFO - Application startup complete. All core services initialized.
2025-05-24 23:49:56,312 - INFO - Starting MessageProcessor
2025-05-24 23:49:56,312 - INFO - Starting QueueForwarder
2025-05-24 23:51:08,092 - INFO - Application shutdown event triggered.
2025-05-24 23:51:12,168 - INFO - Application startup event triggered.
2025-05-24 23:51:12,168 - INFO - Initializing all queues...
2025-05-24 23:51:12,168 - INFO - All queues initialized on loop 468038144
2025-05-24 23:51:12,168 - INFO - Shared queues initialized.
2025-05-24 23:51:12,169 - INFO - Retrieved queue instances. Event loop ID: 468038144
2025-05-24 23:51:12,169 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 23:51:12,169 - INFO - MessageProcessor queues verified
2025-05-24 23:51:12,169 - INFO - MessageProcessor task started.
2025-05-24 23:51:12,169 - INFO - QueueForwarder queues verified
2025-05-24 23:51:12,169 - INFO - QueueForwarder task started.
2025-05-24 23:51:12,169 - INFO - Application startup complete. All core services initialized.
2025-05-24 23:51:12,169 - INFO - Starting MessageProcessor
2025-05-24 23:51:12,169 - INFO - Starting QueueForwarder
2025-05-24 23:51:13,526 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53150)
2025-05-24 23:51:13,527 - INFO - Adding connection: 127.0.0.1:53150. Total connections: 1
2025-05-24 23:51:13,528 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=53150)
2025-05-24 23:51:13,528 - INFO - Sender task started for Address(host='127.0.0.1', port=53150)
2025-05-24 23:51:13,529 - INFO - Receiver task started for Address(host='127.0.0.1', port=53150)
2025-05-24 23:51:13,532 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=53150)
2025-05-24 23:51:18,266 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=53150)
2025-05-24 23:51:18,267 - INFO - Processed 2 messages
2025-05-24 23:52:17,198 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=53150): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-24 23:52:17,200 - INFO - Receiver task for Address(host='127.0.0.1', port=53150) finished.
2025-05-24 23:52:17,400 - INFO - Sender task for Address(host='127.0.0.1', port=53150) was cancelled.
2025-05-24 23:52:17,401 - INFO - Application shutdown event triggered.
2025-05-24 23:52:17,403 - INFO - Initiating cleanup for connection: 127.0.0.1:53150
2025-05-24 23:52:17,403 - INFO - Starting cleanup for 127.0.0.1:53150
2025-05-24 23:52:17,403 - INFO - Connection cleanup completed for 127.0.0.1:53150. Remaining connections: 0
2025-05-24 23:52:17,403 - INFO - Cleanup finished for connection: 127.0.0.1:53150. Total connections: 0
2025-05-24 23:54:20,796 - INFO - Application startup event triggered.
2025-05-24 23:54:20,796 - INFO - Initializing all queues...
2025-05-24 23:54:20,797 - INFO - All queues initialized on loop 986198528
2025-05-24 23:54:20,797 - INFO - Shared queues initialized.
2025-05-24 23:54:20,797 - INFO - Retrieved queue instances. Event loop ID: 986198528
2025-05-24 23:54:20,797 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-24 23:54:20,797 - INFO - MessageProcessor queues verified
2025-05-24 23:54:20,797 - INFO - MessageProcessor task started.
2025-05-24 23:54:20,797 - INFO - QueueForwarder queues verified
2025-05-24 23:54:20,797 - INFO - QueueForwarder task started.
2025-05-24 23:54:20,797 - INFO - Application startup complete. All core services initialized.
2025-05-24 23:54:20,797 - INFO - Starting MessageProcessor
2025-05-24 23:54:20,797 - INFO - Starting QueueForwarder
2025-05-24 23:54:22,180 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=43008)
2025-05-24 23:54:22,180 - INFO - Adding connection: 127.0.0.1:43008. Total connections: 1
2025-05-24 23:54:22,182 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=43008)
2025-05-24 23:54:22,182 - INFO - Sender task started for Address(host='127.0.0.1', port=43008)
2025-05-24 23:54:22,182 - INFO - Receiver task started for Address(host='127.0.0.1', port=43008)
2025-05-24 23:54:22,213 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=43008)
2025-05-24 23:54:23,792 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=43022)
2025-05-24 23:54:23,792 - INFO - Adding connection: 127.0.0.1:43022. Total connections: 2
2025-05-24 23:54:23,793 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=43022)
2025-05-24 23:54:23,793 - INFO - Sender task started for Address(host='127.0.0.1', port=43022)
2025-05-24 23:54:23,793 - INFO - Receiver task started for Address(host='127.0.0.1', port=43022)
2025-05-24 23:54:23,796 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=43022)
2025-05-24 23:54:42,900 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=43022): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-24 23:54:42,901 - INFO - Receiver task for Address(host='127.0.0.1', port=43022) finished.
2025-05-24 23:54:44,996 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=43008): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-24 23:54:44,997 - INFO - Receiver task for Address(host='127.0.0.1', port=43008) finished.
2025-05-24 23:54:45,077 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=51296)
2025-05-24 23:54:45,077 - INFO - Adding connection: 127.0.0.1:51296. Total connections: 3
2025-05-24 23:54:45,078 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=51296)
2025-05-24 23:54:45,079 - INFO - Sender task started for Address(host='127.0.0.1', port=51296)
2025-05-24 23:54:45,079 - INFO - Receiver task started for Address(host='127.0.0.1', port=51296)
2025-05-24 23:54:45,100 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=51296)
2025-05-24 23:54:45,100 - INFO - Processed 3 messages
2025-05-24 23:54:45,101 - WARNING - Failed to send message to Address(host='127.0.0.1', port=43022), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-24 23:54:45,101 - INFO - Sender task for Address(host='127.0.0.1', port=43022) finished.
2025-05-24 23:54:45,101 - INFO - Initiating cleanup for connection: 127.0.0.1:43022
2025-05-24 23:54:45,101 - INFO - Starting cleanup for 127.0.0.1:43022
2025-05-24 23:54:45,101 - INFO - Connection cleanup completed for 127.0.0.1:43022. Remaining connections: 2
2025-05-24 23:54:45,101 - INFO - Cleanup finished for connection: 127.0.0.1:43022. Total connections: 2
2025-05-24 23:54:45,101 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=43022): Cannot call "receive" once a disconnect message has been received.
2025-05-24 23:54:45,102 - INFO - Starting cleanup for Address(host='127.0.0.1', port=43022)
2025-05-24 23:54:45,102 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=43022). Remaining connections: 2
2025-05-24 23:56:13,604 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=51296): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-24 23:56:13,605 - INFO - Receiver task for Address(host='127.0.0.1', port=51296) finished.
2025-05-24 23:58:31,555 - INFO - Application shutdown event triggered.
2025-05-24 23:58:31,557 - INFO - Sender task for Address(host='127.0.0.1', port=43008) was cancelled.
2025-05-24 23:58:31,558 - INFO - Sender task for Address(host='127.0.0.1', port=51296) was cancelled.
2025-05-24 23:58:31,558 - INFO - Initiating cleanup for connection: 127.0.0.1:43008
2025-05-24 23:58:31,558 - INFO - Starting cleanup for 127.0.0.1:43008
2025-05-24 23:58:31,558 - INFO - Connection cleanup completed for 127.0.0.1:43008. Remaining connections: 1
2025-05-24 23:58:31,558 - INFO - Cleanup finished for connection: 127.0.0.1:43008. Total connections: 1
2025-05-24 23:58:31,561 - INFO - Initiating cleanup for connection: 127.0.0.1:51296
2025-05-24 23:58:31,561 - INFO - Starting cleanup for 127.0.0.1:51296
2025-05-24 23:58:31,561 - INFO - Connection cleanup completed for 127.0.0.1:51296. Remaining connections: 0
2025-05-24 23:58:31,561 - INFO - Cleanup finished for connection: 127.0.0.1:51296. Total connections: 0
2025-05-24 23:58:34,366 - INFO - Application startup event triggered.
2025-05-24 23:58:34,366 - INFO - Initializing all queues...
2025-05-24 23:58:34,366 - INFO - All queues initialized on loop 80007680
2025-05-24 23:58:34,366 - INFO - Shared queues initialized.
2025-05-24 23:58:34,366 - INFO - Retrieved queue instances. Event loop ID: 80007680
2025-05-25 00:00:57,243 - INFO - Application startup event triggered.
2025-05-25 00:00:57,243 - INFO - Initializing all queues...
2025-05-25 00:00:57,243 - INFO - All queues initialized on loop 563790336
2025-05-25 00:00:57,243 - INFO - Shared queues initialized.
2025-05-25 00:00:57,243 - INFO - Retrieved queue instances. Event loop ID: 563790336
2025-05-25 00:04:25,976 - INFO - Application startup event triggered.
2025-05-25 00:04:25,976 - INFO - Initializing all queues...
2025-05-25 00:04:25,976 - INFO - All queues initialized on loop 802226688
2025-05-25 00:04:25,976 - INFO - Shared queues initialized.
2025-05-25 00:04:25,976 - INFO - Retrieved queue instances. Event loop ID: 802226688
2025-05-25 00:06:04,257 - INFO - Application startup event triggered.
2025-05-25 00:06:04,257 - INFO - Initializing all queues...
2025-05-25 00:06:04,257 - INFO - All queues initialized on loop 625432624
2025-05-25 00:06:04,257 - INFO - Shared queues initialized.
2025-05-25 00:06:04,257 - INFO - Retrieved queue instances. Event loop ID: 625432624
2025-05-25 00:06:11,351 - INFO - Application startup event triggered.
2025-05-25 00:06:11,351 - INFO - Initializing all queues...
2025-05-25 00:06:11,351 - INFO - All queues initialized on loop 288983088
2025-05-25 00:06:11,351 - INFO - Shared queues initialized.
2025-05-25 00:06:11,351 - INFO - Retrieved queue instances. Event loop ID: 288983088
2025-05-25 00:06:20,793 - INFO - Application startup event triggered.
2025-05-25 00:06:20,793 - INFO - Initializing all queues...
2025-05-25 00:06:20,793 - INFO - All queues initialized on loop 242528768
2025-05-25 00:06:20,793 - INFO - Shared queues initialized.
2025-05-25 00:06:20,793 - INFO - Retrieved queue instances. Event loop ID: 242528768
2025-05-25 00:08:48,465 - INFO - Application startup event triggered.
2025-05-25 00:08:48,465 - INFO - Initializing all queues...
2025-05-25 00:08:48,466 - INFO - All queues initialized on loop 32068096
2025-05-25 00:08:48,466 - INFO - Shared queues initialized.
2025-05-25 00:08:48,466 - INFO - Retrieved queue instances. Event loop ID: 32068096
2025-05-25 00:09:32,192 - INFO - Application startup event triggered.
2025-05-25 00:09:32,192 - INFO - Initializing all queues...
2025-05-25 00:09:32,193 - INFO - All queues initialized on loop 128385536
2025-05-25 00:09:32,193 - INFO - Shared queues initialized.
2025-05-25 00:09:32,193 - INFO - Retrieved queue instances. Event loop ID: 128385536
2025-05-25 00:13:27,051 - INFO - Application startup event triggered.
2025-05-25 00:13:27,051 - INFO - Initializing all queues...
2025-05-25 00:13:27,051 - INFO - All queues initialized on loop 905961984
2025-05-25 00:13:27,051 - INFO - Shared queues initialized.
2025-05-25 00:13:27,051 - INFO - Retrieved queue instances. Event loop ID: 905961984
2025-05-25 00:18:39,083 - INFO - Application startup event triggered.
2025-05-25 00:18:39,083 - INFO - Initializing all queues...
2025-05-25 00:18:39,083 - INFO - All queues initialized on loop 352540720
2025-05-25 00:18:39,084 - INFO - Shared queues initialized.
2025-05-25 00:18:39,084 - INFO - Retrieved queue instances. Event loop ID: 352540720
2025-05-25 00:18:39,084 - INFO - SimulationManager ready state set to: True
2025-05-25 00:18:39,084 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 00:18:39,084 - INFO - MessageProcessor queues verified
2025-05-25 00:18:39,084 - INFO - MessageProcessor task started.
2025-05-25 00:18:39,084 - INFO - QueueForwarder queues verified
2025-05-25 00:18:39,084 - INFO - QueueForwarder task started.
2025-05-25 00:18:39,084 - INFO - Application startup complete. All core services initialized.
2025-05-25 00:18:39,084 - INFO - Starting MessageProcessor
2025-05-25 00:18:39,084 - INFO - Starting QueueForwarder
2025-05-25 00:18:51,334 - INFO - Application shutdown event triggered.
2025-05-25 00:18:56,677 - INFO - Application startup event triggered.
2025-05-25 00:18:56,677 - INFO - Initializing all queues...
2025-05-25 00:18:56,677 - INFO - All queues initialized on loop 508158464
2025-05-25 00:18:56,677 - INFO - Shared queues initialized.
2025-05-25 00:18:56,677 - INFO - Retrieved queue instances. Event loop ID: 508158464
2025-05-25 00:18:56,677 - INFO - SimulationManager ready state set to: True
2025-05-25 00:18:56,677 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 00:18:56,677 - INFO - MessageProcessor queues verified
2025-05-25 00:18:56,678 - INFO - MessageProcessor task started.
2025-05-25 00:18:56,678 - INFO - QueueForwarder queues verified
2025-05-25 00:18:56,678 - INFO - QueueForwarder task started.
2025-05-25 00:18:56,678 - INFO - Application startup complete. All core services initialized.
2025-05-25 00:18:56,678 - INFO - Starting MessageProcessor
2025-05-25 00:18:56,678 - INFO - Starting QueueForwarder
2025-05-25 00:23:36,567 - INFO - Application shutdown event triggered.
2025-05-25 00:23:37,356 - INFO - Application startup event triggered.
2025-05-25 00:23:37,357 - INFO - Initializing all queues...
2025-05-25 00:23:37,357 - INFO - All queues initialized on loop 903776304
2025-05-25 00:23:37,357 - INFO - Shared queues initialized.
2025-05-25 00:23:37,357 - INFO - Retrieved queue instances. Event loop ID: 903776304
2025-05-25 00:23:37,357 - INFO - SimulationManager ready state set to: True
2025-05-25 00:23:37,357 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 00:23:37,357 - INFO - MessageProcessor queues verified
2025-05-25 00:23:37,357 - INFO - MessageProcessor task started.
2025-05-25 00:23:37,357 - INFO - QueueForwarder queues verified
2025-05-25 00:23:37,357 - INFO - QueueForwarder task started.
2025-05-25 00:23:37,357 - INFO - Application startup complete. All core services initialized.
2025-05-25 00:23:37,357 - INFO - Starting MessageProcessor
2025-05-25 00:23:37,358 - INFO - Starting QueueForwarder
2025-05-25 00:23:42,775 - INFO - Application shutdown event triggered.
2025-05-25 00:23:48,387 - INFO - Application startup event triggered.
2025-05-25 00:23:48,387 - INFO - Initializing all queues...
2025-05-25 00:23:48,388 - INFO - All queues initialized on loop 428925440
2025-05-25 00:23:48,388 - INFO - Shared queues initialized.
2025-05-25 00:23:48,388 - INFO - Retrieved queue instances. Event loop ID: 428925440
2025-05-25 00:23:48,388 - INFO - SimulationManager ready state set to: True
2025-05-25 00:23:48,388 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 00:23:48,388 - INFO - MessageProcessor queues verified
2025-05-25 00:23:48,388 - INFO - MessageProcessor task started.
2025-05-25 00:23:48,388 - INFO - QueueForwarder queues verified
2025-05-25 00:23:48,389 - INFO - QueueForwarder task started.
2025-05-25 00:23:48,389 - INFO - Application startup complete. All core services initialized.
2025-05-25 00:23:48,389 - INFO - Starting MessageProcessor
2025-05-25 00:23:48,389 - INFO - Starting QueueForwarder
2025-05-25 00:24:10,904 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=52180)
2025-05-25 00:24:10,905 - INFO - Adding connection: 127.0.0.1:52180. Total connections: 1
2025-05-25 00:24:10,906 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=52180)
2025-05-25 00:24:10,906 - INFO - Sender task started for Address(host='127.0.0.1', port=52180)
2025-05-25 00:24:10,906 - INFO - Receiver task started for Address(host='127.0.0.1', port=52180)
2025-05-25 00:24:10,926 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=52180)
2025-05-25 00:24:10,926 - INFO - Processed 1 messages
2025-05-25 00:24:15,047 - INFO - Received request to start simulation
2025-05-25 00:24:15,048 - INFO - Initiating simulation start via background task
2025-05-25 00:24:15,048 - ERROR - Failed to start simulation: 'SimulationManager' object has no attribute 'running'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 72, in start_simulation
    response = await manager.start(background_tasks)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/simulator.py", line 60, in start
    if self.running:
       ^^^^^^^^^^^^
AttributeError: 'SimulationManager' object has no attribute 'running'. Did you mean: '_running'?
2025-05-25 00:24:26,192 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=52180): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-25 00:24:26,194 - INFO - Receiver task for Address(host='127.0.0.1', port=52180) finished.
2025-05-25 00:25:53,569 - INFO - Sender task for Address(host='127.0.0.1', port=52180) was cancelled.
2025-05-25 00:25:53,570 - INFO - Application shutdown event triggered.
2025-05-25 00:25:53,572 - INFO - Initiating cleanup for connection: 127.0.0.1:52180
2025-05-25 00:25:53,572 - INFO - Starting cleanup for 127.0.0.1:52180
2025-05-25 00:25:53,572 - INFO - Connection cleanup completed for 127.0.0.1:52180. Remaining connections: 0
2025-05-25 00:25:53,572 - INFO - Cleanup finished for connection: 127.0.0.1:52180. Total connections: 0
2025-05-25 00:25:58,026 - INFO - Application startup event triggered.
2025-05-25 00:25:58,026 - INFO - Initializing all queues...
2025-05-25 00:25:58,026 - INFO - All queues initialized on loop 983253504
2025-05-25 00:25:58,027 - INFO - Shared queues initialized.
2025-05-25 00:25:58,027 - INFO - Retrieved queue instances. Event loop ID: 983253504
2025-05-25 00:25:58,027 - INFO - SimulationManager ready state set to: True
2025-05-25 00:25:58,027 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 00:25:58,027 - INFO - MessageProcessor queues verified
2025-05-25 00:25:58,027 - INFO - MessageProcessor task started.
2025-05-25 00:25:58,027 - INFO - QueueForwarder queues verified
2025-05-25 00:25:58,027 - INFO - QueueForwarder task started.
2025-05-25 00:25:58,027 - INFO - Application startup complete. All core services initialized.
2025-05-25 00:25:58,027 - INFO - Starting MessageProcessor
2025-05-25 00:25:58,027 - INFO - Starting QueueForwarder
2025-05-25 00:25:59,377 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=42306)
2025-05-25 00:25:59,378 - INFO - Adding connection: 127.0.0.1:42306. Total connections: 1
2025-05-25 00:25:59,379 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=42306)
2025-05-25 00:25:59,379 - INFO - Sender task started for Address(host='127.0.0.1', port=42306)
2025-05-25 00:25:59,380 - INFO - Receiver task started for Address(host='127.0.0.1', port=42306)
2025-05-25 00:25:59,384 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=42306)
2025-05-25 00:26:01,439 - INFO - Received request to start simulation
2025-05-25 00:26:01,439 - INFO - Initiating simulation start via background task
2025-05-25 00:26:01,439 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-25 00:26:01,440 - INFO - Simulation task starting
2025-05-25 00:26:01,441 - INFO - System message enqueued to backend queue
2025-05-25 00:26:04,016 - INFO - Processed 4 messages
2025-05-25 00:26:05,895 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=42306)
2025-05-25 00:26:11,218 - INFO - Processed 4 messages
2025-05-25 00:26:11,879 - WARNING - Messages not being forwarded to frontend
2025-05-25 00:26:17,415 - INFO - Processed 3 messages
2025-05-25 00:26:22,227 - WARNING - Messages not being forwarded to frontend
2025-05-25 00:26:23,228 - INFO - Processed 3 messages
2025-05-25 00:26:29,559 - INFO - Processed 3 messages
2025-05-25 00:26:33,604 - WARNING - Messages not being forwarded to frontend
2025-05-25 00:26:34,605 - INFO - Processed 2 messages
2025-05-25 00:26:41,224 - INFO - Processed 3 messages
2025-05-25 00:26:44,928 - WARNING - Messages not being forwarded to frontend
2025-05-25 00:26:48,790 - INFO - Processed 3 messages
2025-05-25 00:26:53,988 - INFO - Processed 2 messages
2025-05-25 00:26:58,455 - WARNING - Messages not being forwarded to frontend
2025-05-25 00:26:59,456 - INFO - Processed 2 messages
2025-05-25 00:27:04,780 - INFO - Processed 3 messages
2025-05-25 00:27:07,827 - WARNING - Messages not being forwarded to frontend
2025-05-25 00:27:11,555 - INFO - Processed 3 messages
2025-05-25 00:27:12,911 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=42306): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-25 00:27:12,912 - INFO - Receiver task for Address(host='127.0.0.1', port=42306) finished.
2025-05-25 00:27:13,211 - INFO - Sender task for Address(host='127.0.0.1', port=42306) was cancelled.
2025-05-25 00:27:13,212 - INFO - Application shutdown event triggered.
2025-05-25 00:27:13,212 - INFO - SimulationManager stopped.
2025-05-25 00:27:13,212 - INFO - Stopping MessageProcessor...
2025-05-25 00:27:13,212 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-25 00:27:13,212 - INFO - All WebSocket connections attempted to close.
2025-05-25 00:27:13,212 - INFO - Application shutdown complete.
2025-05-25 00:27:13,216 - INFO - Initiating cleanup for connection: 127.0.0.1:42306
2025-05-25 00:27:13,216 - INFO - Starting cleanup for 127.0.0.1:42306
2025-05-25 00:27:13,216 - INFO - Connection cleanup completed for 127.0.0.1:42306. Remaining connections: 0
2025-05-25 00:27:13,216 - INFO - Cleanup finished for connection: 127.0.0.1:42306. Total connections: 0
2025-05-25 00:30:35,208 - INFO - Application startup event triggered.
2025-05-25 00:30:35,208 - INFO - Initializing all queues...
2025-05-25 00:30:35,208 - INFO - All queues initialized on loop 401310208
2025-05-25 00:30:35,208 - INFO - Shared queues initialized.
2025-05-25 00:30:35,208 - INFO - Retrieved queue instances. Event loop ID: 401310208
2025-05-25 00:30:35,208 - INFO - SimulationManager ready state set to: True
2025-05-25 00:30:35,208 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 00:30:35,209 - INFO - MessageProcessor queues verified
2025-05-25 00:30:35,209 - INFO - MessageProcessor task started.
2025-05-25 00:30:35,209 - INFO - QueueForwarder queues verified
2025-05-25 00:30:35,209 - INFO - QueueForwarder task started.
2025-05-25 00:30:35,209 - INFO - Application startup complete. All core services initialized.
2025-05-25 00:30:35,209 - INFO - Starting MessageProcessor
2025-05-25 00:30:35,209 - INFO - Starting QueueForwarder
2025-05-25 00:30:52,793 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=58178)
2025-05-25 00:30:52,793 - INFO - Adding connection: 127.0.0.1:58178. Total connections: 1
2025-05-25 00:30:52,794 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=58178)
2025-05-25 00:30:52,794 - INFO - Sender task started for Address(host='127.0.0.1', port=58178)
2025-05-25 00:30:52,795 - INFO - Receiver task started for Address(host='127.0.0.1', port=58178)
2025-05-25 00:30:52,797 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=58178)
2025-05-25 00:30:52,798 - INFO - Processed 1 messages
2025-05-25 00:31:34,533 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=59670)
2025-05-25 00:31:34,533 - INFO - Adding connection: 127.0.0.1:59670. Total connections: 2
2025-05-25 00:31:34,534 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=59670)
2025-05-25 00:31:34,535 - INFO - Sender task started for Address(host='127.0.0.1', port=59670)
2025-05-25 00:31:34,535 - INFO - Receiver task started for Address(host='127.0.0.1', port=59670)
2025-05-25 00:31:34,554 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=59670)
2025-05-25 00:31:34,554 - INFO - Processed 1 messages
2025-05-25 00:31:39,288 - INFO - Received request to start simulation
2025-05-25 00:31:39,288 - INFO - Initiating simulation start via background task
2025-05-25 00:31:39,289 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-25 00:31:39,289 - INFO - Simulation task starting
2025-05-25 00:31:39,290 - INFO - System message enqueued to backend queue
2025-05-25 00:31:40,291 - INFO - Processed 2 messages
2025-05-25 00:31:47,398 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=59670)
2025-05-25 00:31:47,398 - INFO - Processed 3 messages
2025-05-25 00:31:48,252 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=59670)
2025-05-25 00:31:51,333 - WARNING - Messages not being forwarded to frontend
2025-05-25 00:31:54,087 - INFO - Processed 5 messages
2025-05-25 00:32:00,979 - INFO - Processed 3 messages
2025-05-25 00:32:01,577 - WARNING - Messages not being forwarded to frontend
2025-05-25 00:32:05,741 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=58178): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-25 00:32:05,742 - INFO - Receiver task for Address(host='127.0.0.1', port=58178) finished.
2025-05-25 00:32:06,226 - INFO - Processed 3 messages
2025-05-25 00:32:06,226 - WARNING - Failed to send message to Address(host='127.0.0.1', port=58178), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-25 00:32:06,227 - INFO - Sender task for Address(host='127.0.0.1', port=58178) finished.
2025-05-25 00:32:06,227 - INFO - Initiating cleanup for connection: 127.0.0.1:58178
2025-05-25 00:32:06,228 - INFO - Starting cleanup for 127.0.0.1:58178
2025-05-25 00:32:06,228 - INFO - Connection cleanup completed for 127.0.0.1:58178. Remaining connections: 1
2025-05-25 00:32:06,228 - INFO - Cleanup finished for connection: 127.0.0.1:58178. Total connections: 1
2025-05-25 00:32:06,228 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=58178): Cannot call "receive" once a disconnect message has been received.
2025-05-25 00:32:06,228 - INFO - Starting cleanup for Address(host='127.0.0.1', port=58178)
2025-05-25 00:32:06,228 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=58178). Remaining connections: 1
2025-05-25 00:32:07,253 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=59670): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-25 00:32:07,254 - INFO - Receiver task for Address(host='127.0.0.1', port=59670) finished.
2025-05-25 00:32:08,245 - WARNING - Failed to send message to Address(host='127.0.0.1', port=59670), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-25 00:32:08,246 - INFO - Sender task for Address(host='127.0.0.1', port=59670) finished.
2025-05-25 00:32:08,246 - INFO - Initiating cleanup for connection: 127.0.0.1:59670
2025-05-25 00:32:08,246 - INFO - Starting cleanup for 127.0.0.1:59670
2025-05-25 00:32:08,246 - INFO - Connection cleanup completed for 127.0.0.1:59670. Remaining connections: 0
2025-05-25 00:32:08,246 - INFO - Cleanup finished for connection: 127.0.0.1:59670. Total connections: 0
2025-05-25 00:32:08,246 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=59670): Cannot call "receive" once a disconnect message has been received.
2025-05-25 00:32:08,246 - INFO - Starting cleanup for Address(host='127.0.0.1', port=59670)
2025-05-25 00:32:08,246 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=59670). Remaining connections: 0
2025-05-25 00:32:13,738 - INFO - Processed 3 messages
2025-05-25 00:32:19,908 - INFO - Processed 3 messages
2025-05-25 00:32:26,311 - INFO - Processed 3 messages
2025-05-25 00:32:33,472 - INFO - Processed 3 messages
2025-05-25 00:32:40,859 - INFO - Processed 3 messages
2025-05-25 00:32:48,371 - INFO - Processed 3 messages
2025-05-25 00:32:54,891 - INFO - Processed 3 messages
2025-05-25 00:33:01,194 - INFO - Processed 3 messages
2025-05-25 00:33:07,305 - INFO - Processed 3 messages
2025-05-25 00:33:13,794 - INFO - Processed 3 messages
2025-05-25 00:33:18,852 - INFO - Processed 2 messages
2025-05-25 00:33:35,635 - INFO - Application shutdown event triggered.
2025-05-25 09:24:05,143 - INFO - Application startup event triggered.
2025-05-25 09:24:05,144 - INFO - Initializing all queues...
2025-05-25 09:24:05,144 - INFO - All queues initialized on loop 687803936
2025-05-25 09:24:05,144 - INFO - Shared queues initialized.
2025-05-25 09:24:05,144 - INFO - Retrieved queue instances. Event loop ID: 687803936
2025-05-25 09:24:05,144 - INFO - SimulationManager ready state set to: True
2025-05-25 09:24:05,144 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 09:24:05,144 - INFO - MessageProcessor queues verified
2025-05-25 09:24:05,144 - INFO - MessageProcessor task started.
2025-05-25 09:24:05,144 - INFO - QueueForwarder queues verified
2025-05-25 09:24:05,144 - INFO - QueueForwarder task started.
2025-05-25 09:24:05,144 - INFO - Application startup complete. All core services initialized.
2025-05-25 09:24:05,145 - INFO - Starting MessageProcessor
2025-05-25 09:24:05,145 - INFO - Starting QueueForwarder
2025-05-25 09:24:09,718 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=48254)
2025-05-25 09:24:09,719 - INFO - Adding connection: 127.0.0.1:48254. Total connections: 1
2025-05-25 09:24:09,719 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=48254)
2025-05-25 09:24:09,720 - INFO - Sender task started for Address(host='127.0.0.1', port=48254)
2025-05-25 09:24:09,720 - INFO - Receiver task started for Address(host='127.0.0.1', port=48254)
2025-05-25 09:24:09,728 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=48254)
2025-05-25 09:24:12,656 - INFO - Received request to start simulation
2025-05-25 09:24:12,657 - INFO - Initiating simulation start via background task
2025-05-25 09:24:12,657 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-25 09:24:12,657 - INFO - Simulation task starting
2025-05-25 09:24:12,658 - INFO - System message enqueued to backend queue
2025-05-25 09:24:12,658 - INFO - Processed 2 messages
2025-05-25 09:24:15,626 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=48254)
2025-05-25 09:24:19,428 - INFO - Processed 5 messages
2025-05-25 09:24:23,090 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:24:26,865 - INFO - Processed 3 messages
2025-05-25 09:24:33,554 - INFO - Processed 3 messages
2025-05-25 09:24:35,069 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:24:40,585 - INFO - Processed 3 messages
2025-05-25 09:24:46,181 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:24:47,182 - INFO - Processed 3 messages
2025-05-25 09:24:54,923 - INFO - Processed 3 messages
2025-05-25 09:24:57,599 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:25:01,149 - INFO - Processed 3 messages
2025-05-25 09:25:06,969 - INFO - Processed 2 messages
2025-05-25 09:25:09,947 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:25:13,032 - INFO - Processed 3 messages
2025-05-25 09:25:18,589 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:25:19,591 - INFO - Processed 4 messages
2025-05-25 09:25:25,405 - INFO - Processed 3 messages
2025-05-25 09:25:25,750 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=48254): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-25 09:25:25,752 - INFO - Receiver task for Address(host='127.0.0.1', port=48254) finished.
2025-05-25 09:25:26,822 - INFO - Sender task for Address(host='127.0.0.1', port=48254) was cancelled.
2025-05-25 09:25:26,823 - INFO - Application shutdown event triggered.
2025-05-25 09:25:26,823 - INFO - SimulationManager stopped.
2025-05-25 09:25:26,823 - INFO - Stopping MessageProcessor...
2025-05-25 09:25:26,823 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-25 09:25:26,823 - INFO - All WebSocket connections attempted to close.
2025-05-25 09:25:26,823 - INFO - Application shutdown complete.
2025-05-25 09:25:26,832 - INFO - Initiating cleanup for connection: 127.0.0.1:48254
2025-05-25 09:25:26,832 - INFO - Starting cleanup for 127.0.0.1:48254
2025-05-25 09:25:26,832 - INFO - Connection cleanup completed for 127.0.0.1:48254. Remaining connections: 0
2025-05-25 09:25:26,833 - INFO - Cleanup finished for connection: 127.0.0.1:48254. Total connections: 0
2025-05-25 09:30:28,671 - INFO - Application startup event triggered.
2025-05-25 09:30:28,671 - INFO - Initializing all queues...
2025-05-25 09:30:28,671 - INFO - All queues initialized on loop 626441760
2025-05-25 09:30:28,671 - INFO - Shared queues initialized.
2025-05-25 09:30:28,671 - INFO - Retrieved queue instances. Event loop ID: 626441760
2025-05-25 09:30:28,672 - INFO - SimulationManager ready state set to: True
2025-05-25 09:30:28,672 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 09:30:28,672 - INFO - MessageProcessor queues verified
2025-05-25 09:30:28,672 - INFO - MessageProcessor task started.
2025-05-25 09:30:28,672 - INFO - QueueForwarder queues verified
2025-05-25 09:30:28,672 - INFO - QueueForwarder task started.
2025-05-25 09:30:28,672 - INFO - Application startup complete. All core services initialized.
2025-05-25 09:30:28,672 - INFO - Starting MessageProcessor
2025-05-25 09:30:28,672 - INFO - Starting QueueForwarder
2025-05-25 09:31:46,384 - INFO - Application shutdown event triggered.
2025-05-25 09:31:46,385 - INFO - Stopping MessageProcessor...
2025-05-25 09:31:46,385 - WARNING - MessageProcessor didn't stop cleanly
2025-05-25 09:31:46,385 - INFO - QueueForwarder task cancelled.
2025-05-25 09:31:46,385 - INFO - All WebSocket connections attempted to close.
2025-05-25 09:31:46,385 - INFO - Application shutdown complete.
2025-05-25 09:31:53,439 - INFO - Application startup event triggered.
2025-05-25 09:31:53,440 - INFO - Initializing all queues...
2025-05-25 09:31:53,440 - INFO - All queues initialized on loop 1015463456
2025-05-25 09:31:53,440 - INFO - Shared queues initialized.
2025-05-25 09:31:53,440 - INFO - Retrieved queue instances. Event loop ID: 1015463456
2025-05-25 09:31:53,440 - INFO - SimulationManager ready state set to: True
2025-05-25 09:31:53,440 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 09:31:53,440 - INFO - MessageProcessor queues verified
2025-05-25 09:31:53,441 - INFO - MessageProcessor task started.
2025-05-25 09:31:53,441 - INFO - QueueForwarder queues verified
2025-05-25 09:31:53,441 - INFO - QueueForwarder task started.
2025-05-25 09:31:53,441 - INFO - Application startup complete. All core services initialized.
2025-05-25 09:31:53,441 - INFO - Starting MessageProcessor
2025-05-25 09:31:53,441 - INFO - Starting QueueForwarder
2025-05-25 09:32:48,598 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=43210)
2025-05-25 09:32:48,598 - INFO - Adding connection: 127.0.0.1:43210. Total connections: 1
2025-05-25 09:32:48,600 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=43210)
2025-05-25 09:32:48,600 - INFO - Sender task started for Address(host='127.0.0.1', port=43210)
2025-05-25 09:32:48,601 - INFO - Receiver task started for Address(host='127.0.0.1', port=43210)
2025-05-25 09:32:48,605 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=43210)
2025-05-25 09:32:48,606 - INFO - Processed 1 messages
2025-05-25 09:32:51,782 - INFO - Received request to start simulation
2025-05-25 09:32:51,782 - INFO - Initiating simulation start via background task
2025-05-25 09:32:51,782 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-25 09:32:51,782 - INFO - Simulation task starting
2025-05-25 09:32:51,783 - INFO - System message enqueued to backend queue
2025-05-25 09:32:54,736 - INFO - Processed 3 messages
2025-05-25 09:32:59,855 - INFO - Processed 2 messages
2025-05-25 09:33:03,794 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:33:06,647 - INFO - Processed 3 messages
2025-05-25 09:33:11,739 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=43210): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-25 09:33:11,740 - INFO - Receiver task for Address(host='127.0.0.1', port=43210) finished.
2025-05-25 09:33:12,867 - INFO - Processed 3 messages
2025-05-25 09:33:12,868 - WARNING - Failed to send message to Address(host='127.0.0.1', port=43210), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-25 09:33:12,868 - INFO - Sender task for Address(host='127.0.0.1', port=43210) finished.
2025-05-25 09:33:12,868 - INFO - Initiating cleanup for connection: 127.0.0.1:43210
2025-05-25 09:33:12,868 - INFO - Starting cleanup for 127.0.0.1:43210
2025-05-25 09:33:12,868 - INFO - Connection cleanup completed for 127.0.0.1:43210. Remaining connections: 0
2025-05-25 09:33:12,868 - INFO - Cleanup finished for connection: 127.0.0.1:43210. Total connections: 0
2025-05-25 09:33:12,868 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=43210): Cannot call "receive" once a disconnect message has been received.
2025-05-25 09:33:12,869 - INFO - Starting cleanup for Address(host='127.0.0.1', port=43210)
2025-05-25 09:33:12,869 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=43210). Remaining connections: 0
2025-05-25 09:33:17,844 - INFO - Application shutdown event triggered.
2025-05-25 09:33:17,844 - INFO - SimulationManager stopped.
2025-05-25 09:33:17,844 - INFO - Stopping MessageProcessor...
2025-05-25 09:33:17,844 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-25 09:33:17,844 - INFO - All WebSocket connections attempted to close.
2025-05-25 09:33:17,844 - INFO - Application shutdown complete.
2025-05-25 09:37:30,554 - INFO - Application startup event triggered.
2025-05-25 09:37:30,554 - INFO - Initializing all queues...
2025-05-25 09:37:30,554 - INFO - All queues initialized on loop 980053536
2025-05-25 09:37:30,554 - INFO - Shared queues initialized.
2025-05-25 09:37:30,554 - INFO - Retrieved queue instances. Event loop ID: 980053536
2025-05-25 09:37:30,554 - INFO - SimulationManager ready state set to: True
2025-05-25 09:37:30,554 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 09:37:30,554 - INFO - MessageProcessor queues verified
2025-05-25 09:37:30,555 - INFO - MessageProcessor task started.
2025-05-25 09:37:30,555 - INFO - QueueForwarder queues verified
2025-05-25 09:37:30,555 - INFO - QueueForwarder task started.
2025-05-25 09:37:30,555 - INFO - Application startup complete. All core services initialized.
2025-05-25 09:37:30,555 - INFO - Starting MessageProcessor
2025-05-25 09:37:30,555 - INFO - Starting QueueForwarder
2025-05-25 09:37:31,966 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=45074)
2025-05-25 09:37:31,966 - INFO - Adding connection: 127.0.0.1:45074. Total connections: 1
2025-05-25 09:37:31,968 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=45074)
2025-05-25 09:37:31,968 - INFO - Sender task started for Address(host='127.0.0.1', port=45074)
2025-05-25 09:37:31,968 - INFO - Receiver task started for Address(host='127.0.0.1', port=45074)
2025-05-25 09:37:31,977 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=45074)
2025-05-25 09:37:34,927 - INFO - Received request to start simulation
2025-05-25 09:37:34,927 - INFO - Initiating simulation start via background task
2025-05-25 09:37:34,927 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-25 09:37:34,928 - INFO - Simulation task starting
2025-05-25 09:37:34,928 - INFO - System message enqueued to backend queue
2025-05-25 09:37:35,929 - INFO - Processed 3 messages
2025-05-25 09:37:43,124 - INFO - Processed 3 messages
2025-05-25 09:37:46,617 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:37:50,349 - INFO - Processed 3 messages
2025-05-25 09:37:56,936 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=45074): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-25 09:37:56,937 - INFO - Receiver task for Address(host='127.0.0.1', port=45074) finished.
2025-05-25 09:37:57,311 - INFO - Processed 3 messages
2025-05-25 09:37:57,312 - WARNING - Failed to send message to Address(host='127.0.0.1', port=45074), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-25 09:37:57,312 - INFO - Sender task for Address(host='127.0.0.1', port=45074) finished.
2025-05-25 09:37:57,312 - INFO - Initiating cleanup for connection: 127.0.0.1:45074
2025-05-25 09:37:57,312 - INFO - Starting cleanup for 127.0.0.1:45074
2025-05-25 09:37:57,313 - INFO - Connection cleanup completed for 127.0.0.1:45074. Remaining connections: 0
2025-05-25 09:37:57,313 - INFO - Cleanup finished for connection: 127.0.0.1:45074. Total connections: 0
2025-05-25 09:37:57,313 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=45074): Cannot call "receive" once a disconnect message has been received.
2025-05-25 09:37:57,313 - INFO - Starting cleanup for Address(host='127.0.0.1', port=45074)
2025-05-25 09:37:57,313 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=45074). Remaining connections: 0
2025-05-25 09:38:03,875 - INFO - Processed 3 messages
2025-05-25 09:38:10,879 - INFO - Processed 3 messages
2025-05-25 09:38:16,848 - INFO - Processed 3 messages
2025-05-25 09:38:23,003 - INFO - Processed 3 messages
2025-05-25 09:38:29,443 - INFO - Processed 3 messages
2025-05-25 09:38:36,226 - INFO - Processed 3 messages
2025-05-25 09:38:43,472 - INFO - Processed 3 messages
2025-05-25 09:38:50,078 - INFO - Processed 3 messages
2025-05-25 09:38:55,916 - INFO - Processed 3 messages
2025-05-25 09:39:00,958 - INFO - Processed 2 messages
2025-05-25 09:39:08,183 - INFO - Processed 3 messages
2025-05-25 09:39:12,886 - INFO - Application shutdown event triggered.
2025-05-25 09:44:36,805 - INFO - Application startup event triggered.
2025-05-25 09:44:36,805 - INFO - Initializing all queues...
2025-05-25 09:44:36,805 - INFO - All queues initialized on loop 742870560
2025-05-25 09:44:36,805 - INFO - Shared queues initialized.
2025-05-25 09:44:36,805 - INFO - Retrieved queue instances. Event loop ID: 742870560
2025-05-25 09:44:36,805 - INFO - SimulationManager ready state set to: True
2025-05-25 09:44:36,805 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 09:44:36,805 - INFO - MessageProcessor queues verified
2025-05-25 09:44:36,805 - INFO - MessageProcessor task started.
2025-05-25 09:44:36,806 - INFO - QueueForwarder queues verified
2025-05-25 09:44:36,806 - INFO - QueueForwarder task started.
2025-05-25 09:44:36,806 - INFO - Application startup complete. All core services initialized.
2025-05-25 09:44:36,806 - INFO - Starting MessageProcessor
2025-05-25 09:44:36,806 - INFO - Starting QueueForwarder
2025-05-25 09:44:40,328 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=57446)
2025-05-25 09:44:40,328 - INFO - Adding connection: 127.0.0.1:57446. Total connections: 1
2025-05-25 09:44:40,329 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=57446)
2025-05-25 09:44:40,329 - INFO - Sender task started for Address(host='127.0.0.1', port=57446)
2025-05-25 09:44:40,329 - INFO - Receiver task started for Address(host='127.0.0.1', port=57446)
2025-05-25 09:44:40,333 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=57446)
2025-05-25 09:44:47,784 - INFO - Received request to start simulation
2025-05-25 09:44:47,784 - INFO - Initiating simulation start via background task
2025-05-25 09:44:47,784 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-25 09:44:47,785 - INFO - Simulation task starting
2025-05-25 09:44:47,785 - INFO - System message enqueued to backend queue
2025-05-25 09:44:47,785 - INFO - Processed 2 messages
2025-05-25 09:44:53,461 - INFO - Processed 3 messages
2025-05-25 09:44:56,652 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=57446)
2025-05-25 09:44:59,006 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:45:00,008 - INFO - Processed 4 messages
2025-05-25 09:45:06,836 - INFO - Processed 3 messages
2025-05-25 09:45:10,160 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:45:13,267 - INFO - Processed 3 messages
2025-05-25 09:45:16,542 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=57446): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-25 09:45:16,544 - INFO - Receiver task for Address(host='127.0.0.1', port=57446) finished.
2025-05-25 09:45:17,366 - WARNING - Failed to send message to Address(host='127.0.0.1', port=57446), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-25 09:45:17,366 - INFO - Sender task for Address(host='127.0.0.1', port=57446) finished.
2025-05-25 09:45:17,366 - INFO - Initiating cleanup for connection: 127.0.0.1:57446
2025-05-25 09:45:17,367 - INFO - Starting cleanup for 127.0.0.1:57446
2025-05-25 09:45:17,367 - INFO - Connection cleanup completed for 127.0.0.1:57446. Remaining connections: 0
2025-05-25 09:45:17,367 - INFO - Cleanup finished for connection: 127.0.0.1:57446. Total connections: 0
2025-05-25 09:45:17,367 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=57446): Cannot call "receive" once a disconnect message has been received.
2025-05-25 09:45:17,367 - INFO - Starting cleanup for Address(host='127.0.0.1', port=57446)
2025-05-25 09:45:17,367 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=57446). Remaining connections: 0
2025-05-25 09:45:20,010 - INFO - Processed 3 messages
2025-05-25 09:45:27,691 - INFO - Processed 3 messages
2025-05-25 09:45:33,075 - INFO - Processed 3 messages
2025-05-25 09:45:40,409 - INFO - Processed 3 messages
2025-05-25 09:45:43,574 - INFO - Application shutdown event triggered.
2025-05-25 09:45:43,574 - INFO - SimulationManager stopped.
2025-05-25 09:45:43,575 - INFO - Stopping MessageProcessor...
2025-05-25 09:45:43,577 - INFO - QueueForwarder task cancelled.
2025-05-25 09:45:43,578 - INFO - All WebSocket connections attempted to close.
2025-05-25 09:45:43,578 - INFO - Application shutdown complete.
2025-05-25 09:47:24,757 - INFO - Application startup event triggered.
2025-05-25 09:47:24,757 - INFO - Initializing all queues...
2025-05-25 09:47:24,757 - INFO - All queues initialized on loop 507526688
2025-05-25 09:47:24,757 - INFO - Shared queues initialized.
2025-05-25 09:47:24,757 - INFO - Retrieved queue instances. Event loop ID: 507526688
2025-05-25 09:47:24,757 - INFO - SimulationManager ready state set to: True
2025-05-25 09:47:24,757 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 09:47:24,757 - INFO - MessageProcessor queues verified
2025-05-25 09:47:24,758 - INFO - MessageProcessor task started.
2025-05-25 09:47:24,758 - INFO - QueueForwarder queues verified
2025-05-25 09:47:24,758 - INFO - QueueForwarder task started.
2025-05-25 09:47:24,758 - INFO - Application startup complete. All core services initialized.
2025-05-25 09:47:24,758 - INFO - Starting MessageProcessor
2025-05-25 09:47:24,758 - INFO - Starting QueueForwarder
2025-05-25 09:47:26,180 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=34196)
2025-05-25 09:47:26,180 - INFO - Adding connection: 127.0.0.1:34196. Total connections: 1
2025-05-25 09:47:26,182 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=34196)
2025-05-25 09:47:26,182 - INFO - Sender task started for Address(host='127.0.0.1', port=34196)
2025-05-25 09:47:26,182 - INFO - Receiver task started for Address(host='127.0.0.1', port=34196)
2025-05-25 09:47:26,186 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=34196)
2025-05-25 09:47:28,045 - INFO - Received request to start simulation
2025-05-25 09:47:28,045 - INFO - Initiating simulation start via background task
2025-05-25 09:47:28,046 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-25 09:47:28,046 - INFO - Simulation task starting
2025-05-25 09:47:28,047 - INFO - System message enqueued to backend queue
2025-05-25 09:47:31,871 - INFO - Processed 4 messages
2025-05-25 09:47:35,104 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=34196): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-25 09:47:35,105 - INFO - Receiver task for Address(host='127.0.0.1', port=34196) finished.
2025-05-25 09:47:35,506 - INFO - Sender task for Address(host='127.0.0.1', port=34196) was cancelled.
2025-05-25 09:47:35,506 - INFO - Application shutdown event triggered.
2025-05-25 09:47:35,506 - INFO - SimulationManager stopped.
2025-05-25 09:47:35,507 - INFO - Stopping MessageProcessor...
2025-05-25 09:47:35,507 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-25 09:47:35,507 - INFO - All WebSocket connections attempted to close.
2025-05-25 09:47:35,507 - INFO - Application shutdown complete.
2025-05-25 09:47:35,511 - INFO - Initiating cleanup for connection: 127.0.0.1:34196
2025-05-25 09:47:35,511 - INFO - Starting cleanup for 127.0.0.1:34196
2025-05-25 09:47:35,511 - INFO - Connection cleanup completed for 127.0.0.1:34196. Remaining connections: 0
2025-05-25 09:47:35,511 - INFO - Cleanup finished for connection: 127.0.0.1:34196. Total connections: 0
2025-05-25 09:50:05,452 - INFO - Application startup event triggered.
2025-05-25 09:50:05,453 - INFO - Initializing all queues...
2025-05-25 09:50:05,453 - INFO - All queues initialized on loop 705936928
2025-05-25 09:50:05,453 - INFO - Shared queues initialized.
2025-05-25 09:50:05,453 - INFO - Retrieved queue instances. Event loop ID: 705936928
2025-05-25 09:50:05,453 - INFO - SimulationManager ready state set to: True
2025-05-25 09:50:05,453 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 09:50:05,453 - INFO - MessageProcessor queues verified
2025-05-25 09:50:05,453 - INFO - MessageProcessor task started.
2025-05-25 09:50:05,453 - INFO - QueueForwarder queues verified
2025-05-25 09:50:05,453 - INFO - QueueForwarder task started.
2025-05-25 09:50:05,453 - INFO - Application startup complete. All core services initialized.
2025-05-25 09:50:05,453 - INFO - Starting MessageProcessor
2025-05-25 09:50:05,453 - INFO - Starting QueueForwarder
2025-05-25 09:50:06,786 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=58526)
2025-05-25 09:50:06,786 - INFO - Adding connection: 127.0.0.1:58526. Total connections: 1
2025-05-25 09:50:06,788 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=58526)
2025-05-25 09:50:06,788 - INFO - Sender task started for Address(host='127.0.0.1', port=58526)
2025-05-25 09:50:06,788 - INFO - Receiver task started for Address(host='127.0.0.1', port=58526)
2025-05-25 09:50:06,791 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=58526)
2025-05-25 09:50:08,635 - INFO - Received request to start simulation
2025-05-25 09:50:08,635 - INFO - Initiating simulation start via background task
2025-05-25 09:50:08,635 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-25 09:50:08,635 - INFO - Simulation task starting
2025-05-25 09:50:08,636 - INFO - System message enqueued to backend queue
2025-05-25 09:50:10,678 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=58526)
2025-05-25 09:50:10,679 - INFO - Processed 4 messages
2025-05-25 09:50:17,379 - INFO - Processed 3 messages
2025-05-25 09:50:19,507 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:50:22,565 - INFO - Processed 3 messages
2025-05-25 09:50:25,806 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=58526): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-25 09:50:25,807 - INFO - Receiver task for Address(host='127.0.0.1', port=58526) finished.
2025-05-25 09:50:26,006 - INFO - Sender task for Address(host='127.0.0.1', port=58526) was cancelled.
2025-05-25 09:50:26,007 - INFO - Application shutdown event triggered.
2025-05-25 09:50:26,007 - INFO - SimulationManager stopped.
2025-05-25 09:50:26,007 - INFO - Stopping MessageProcessor...
2025-05-25 09:50:26,007 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-25 09:50:26,007 - INFO - All WebSocket connections attempted to close.
2025-05-25 09:50:26,007 - INFO - Application shutdown complete.
2025-05-25 09:50:26,009 - INFO - Initiating cleanup for connection: 127.0.0.1:58526
2025-05-25 09:50:26,009 - INFO - Starting cleanup for 127.0.0.1:58526
2025-05-25 09:50:26,009 - INFO - Connection cleanup completed for 127.0.0.1:58526. Remaining connections: 0
2025-05-25 09:50:26,009 - INFO - Cleanup finished for connection: 127.0.0.1:58526. Total connections: 0
2025-05-25 09:52:07,477 - INFO - Application startup event triggered.
2025-05-25 09:52:07,477 - INFO - Initializing all queues...
2025-05-25 09:52:07,477 - INFO - All queues initialized on loop 957894176
2025-05-25 09:52:07,477 - INFO - Shared queues initialized.
2025-05-25 09:52:07,477 - INFO - Retrieved queue instances. Event loop ID: 957894176
2025-05-25 09:52:07,478 - INFO - SimulationManager ready state set to: True
2025-05-25 09:52:07,478 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 09:52:07,478 - INFO - MessageProcessor queues verified
2025-05-25 09:52:07,478 - INFO - MessageProcessor task started.
2025-05-25 09:52:07,478 - INFO - QueueForwarder queues verified
2025-05-25 09:52:07,478 - INFO - QueueForwarder task started.
2025-05-25 09:52:07,478 - INFO - Application startup complete. All core services initialized.
2025-05-25 09:52:07,478 - INFO - Starting MessageProcessor
2025-05-25 09:52:07,478 - INFO - Starting QueueForwarder
2025-05-25 09:52:08,860 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=52794)
2025-05-25 09:52:08,861 - INFO - Adding connection: 127.0.0.1:52794. Total connections: 1
2025-05-25 09:52:08,862 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=52794)
2025-05-25 09:52:08,862 - INFO - Sender task started for Address(host='127.0.0.1', port=52794)
2025-05-25 09:52:08,862 - INFO - Receiver task started for Address(host='127.0.0.1', port=52794)
2025-05-25 09:52:08,868 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=52794)
2025-05-25 09:52:10,385 - INFO - Received request to start simulation
2025-05-25 09:52:10,385 - INFO - Initiating simulation start via background task
2025-05-25 09:52:10,385 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-25 09:52:10,386 - INFO - Simulation task starting
2025-05-25 09:52:10,386 - INFO - System message enqueued to backend queue
2025-05-25 09:52:12,427 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=52794)
2025-05-25 09:52:13,075 - INFO - Processed 5 messages
2025-05-25 09:52:19,718 - INFO - Processed 3 messages
2025-05-25 09:52:21,254 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:52:22,444 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=52794): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-25 09:52:22,446 - INFO - Receiver task for Address(host='127.0.0.1', port=52794) finished.
2025-05-25 09:52:22,646 - INFO - Sender task for Address(host='127.0.0.1', port=52794) was cancelled.
2025-05-25 09:52:22,646 - INFO - Application shutdown event triggered.
2025-05-25 09:52:22,647 - INFO - SimulationManager stopped.
2025-05-25 09:52:22,647 - INFO - Stopping MessageProcessor...
2025-05-25 09:52:22,647 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-25 09:52:22,647 - INFO - All WebSocket connections attempted to close.
2025-05-25 09:52:22,647 - INFO - Application shutdown complete.
2025-05-25 09:52:22,651 - INFO - Initiating cleanup for connection: 127.0.0.1:52794
2025-05-25 09:52:22,651 - INFO - Starting cleanup for 127.0.0.1:52794
2025-05-25 09:52:22,651 - INFO - Connection cleanup completed for 127.0.0.1:52794. Remaining connections: 0
2025-05-25 09:52:22,651 - INFO - Cleanup finished for connection: 127.0.0.1:52794. Total connections: 0
2025-05-25 09:53:24,230 - INFO - Application startup event triggered.
2025-05-25 09:53:24,231 - INFO - Initializing all queues...
2025-05-25 09:53:24,231 - INFO - All queues initialized on loop 193486368
2025-05-25 09:53:24,231 - INFO - Shared queues initialized.
2025-05-25 09:53:24,231 - INFO - Retrieved queue instances. Event loop ID: 193486368
2025-05-25 09:53:24,231 - INFO - SimulationManager ready state set to: True
2025-05-25 09:53:24,231 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 09:53:24,231 - INFO - MessageProcessor queues verified
2025-05-25 09:53:24,231 - INFO - MessageProcessor task started.
2025-05-25 09:53:24,231 - INFO - QueueForwarder queues verified
2025-05-25 09:53:24,231 - INFO - QueueForwarder task started.
2025-05-25 09:53:24,231 - INFO - Application startup complete. All core services initialized.
2025-05-25 09:53:24,232 - INFO - Starting MessageProcessor
2025-05-25 09:53:24,232 - INFO - Starting QueueForwarder
2025-05-25 09:53:25,639 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=47344)
2025-05-25 09:53:25,639 - INFO - Adding connection: 127.0.0.1:47344. Total connections: 1
2025-05-25 09:53:25,641 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=47344)
2025-05-25 09:53:25,642 - INFO - Sender task started for Address(host='127.0.0.1', port=47344)
2025-05-25 09:53:25,642 - INFO - Receiver task started for Address(host='127.0.0.1', port=47344)
2025-05-25 09:53:25,646 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=47344)
2025-05-25 09:53:27,635 - INFO - Received request to start simulation
2025-05-25 09:53:27,636 - INFO - Initiating simulation start via background task
2025-05-25 09:53:27,636 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-25 09:53:27,637 - INFO - Simulation task starting
2025-05-25 09:53:27,637 - INFO - System message enqueued to backend queue
2025-05-25 09:53:28,740 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=47344)
2025-05-25 09:53:31,135 - INFO - Processed 5 messages
2025-05-25 09:53:37,580 - INFO - Processed 3 messages
2025-05-25 09:53:37,690 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=47344): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-25 09:53:37,692 - INFO - Receiver task for Address(host='127.0.0.1', port=47344) finished.
2025-05-25 09:53:37,993 - INFO - Sender task for Address(host='127.0.0.1', port=47344) was cancelled.
2025-05-25 09:53:37,993 - INFO - Application shutdown event triggered.
2025-05-25 09:53:37,993 - INFO - SimulationManager stopped.
2025-05-25 09:53:37,993 - INFO - Stopping MessageProcessor...
2025-05-25 09:53:37,993 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-25 09:53:37,993 - INFO - All WebSocket connections attempted to close.
2025-05-25 09:53:37,993 - INFO - Application shutdown complete.
2025-05-25 09:53:37,997 - INFO - Initiating cleanup for connection: 127.0.0.1:47344
2025-05-25 09:53:37,997 - INFO - Starting cleanup for 127.0.0.1:47344
2025-05-25 09:53:37,997 - INFO - Connection cleanup completed for 127.0.0.1:47344. Remaining connections: 0
2025-05-25 09:53:37,997 - INFO - Cleanup finished for connection: 127.0.0.1:47344. Total connections: 0
2025-05-25 09:54:47,315 - INFO - Application startup event triggered.
2025-05-25 09:54:47,315 - INFO - Initializing all queues...
2025-05-25 09:54:47,315 - INFO - All queues initialized on loop 670117408
2025-05-25 09:54:47,315 - INFO - Shared queues initialized.
2025-05-25 09:54:47,316 - INFO - Retrieved queue instances. Event loop ID: 670117408
2025-05-25 09:54:47,316 - INFO - SimulationManager ready state set to: True
2025-05-25 09:54:47,316 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 09:54:47,316 - INFO - MessageProcessor queues verified
2025-05-25 09:54:47,316 - INFO - MessageProcessor task started.
2025-05-25 09:54:47,316 - INFO - QueueForwarder queues verified
2025-05-25 09:54:47,316 - INFO - QueueForwarder task started.
2025-05-25 09:54:47,316 - INFO - Application startup complete. All core services initialized.
2025-05-25 09:54:47,316 - INFO - Starting MessageProcessor
2025-05-25 09:54:47,316 - INFO - Starting QueueForwarder
2025-05-25 09:54:48,704 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=38376)
2025-05-25 09:54:48,704 - INFO - Adding connection: 127.0.0.1:38376. Total connections: 1
2025-05-25 09:54:48,706 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=38376)
2025-05-25 09:54:48,706 - INFO - Sender task started for Address(host='127.0.0.1', port=38376)
2025-05-25 09:54:48,706 - INFO - Receiver task started for Address(host='127.0.0.1', port=38376)
2025-05-25 09:54:48,711 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=38376)
2025-05-25 09:54:49,937 - INFO - Received request to start simulation
2025-05-25 09:54:49,937 - INFO - Initiating simulation start via background task
2025-05-25 09:54:49,937 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-25 09:54:49,937 - INFO - Simulation task starting
2025-05-25 09:54:49,938 - INFO - System message enqueued to backend queue
2025-05-25 09:54:52,789 - INFO - Processed 4 messages
2025-05-25 09:54:54,508 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=38394)
2025-05-25 09:54:54,508 - INFO - Adding connection: 127.0.0.1:38394. Total connections: 2
2025-05-25 09:54:54,509 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=38394)
2025-05-25 09:54:54,509 - INFO - Sender task started for Address(host='127.0.0.1', port=38394)
2025-05-25 09:54:54,509 - INFO - Receiver task started for Address(host='127.0.0.1', port=38394)
2025-05-25 09:54:54,514 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=38394)
2025-05-25 09:54:58,136 - INFO - Processed 3 messages
2025-05-25 09:55:02,146 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:55:03,147 - INFO - Processed 2 messages
2025-05-25 09:55:08,507 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=52614)
2025-05-25 09:55:08,507 - INFO - Adding connection: 127.0.0.1:52614. Total connections: 3
2025-05-25 09:55:08,508 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=52614)
2025-05-25 09:55:08,508 - INFO - Sender task started for Address(host='127.0.0.1', port=52614)
2025-05-25 09:55:08,509 - INFO - Receiver task started for Address(host='127.0.0.1', port=52614)
2025-05-25 09:55:08,511 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=52614)
2025-05-25 09:55:08,512 - INFO - Processed 3 messages
2025-05-25 09:55:13,509 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:55:14,510 - INFO - Processed 3 messages
2025-05-25 09:55:20,957 - INFO - Processed 3 messages
2025-05-25 09:55:23,510 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:55:26,703 - INFO - Processed 3 messages
2025-05-25 09:55:28,430 - INFO - Received request to start simulation
2025-05-25 09:55:28,430 - INFO - Initiating simulation start via background task
2025-05-25 09:55:28,430 - INFO - Simulation started successfully: {'status': 'already running'}
2025-05-25 09:55:32,869 - INFO - Processed 3 messages
2025-05-25 09:55:34,232 - WARNING - Messages not being forwarded to frontend
2025-05-25 09:55:38,353 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=38376): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-25 09:55:38,354 - INFO - Receiver task for Address(host='127.0.0.1', port=38376) finished.
2025-05-25 09:55:38,354 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=52614): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-25 09:55:38,355 - INFO - Receiver task for Address(host='127.0.0.1', port=52614) finished.
2025-05-25 09:55:38,355 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=38394): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-25 09:55:38,355 - INFO - Receiver task for Address(host='127.0.0.1', port=38394) finished.
2025-05-25 09:55:38,654 - INFO - Sender task for Address(host='127.0.0.1', port=38376) was cancelled.
2025-05-25 09:55:38,654 - INFO - Sender task for Address(host='127.0.0.1', port=52614) was cancelled.
2025-05-25 09:55:38,655 - INFO - Sender task for Address(host='127.0.0.1', port=38394) was cancelled.
2025-05-25 09:55:38,655 - INFO - Application shutdown event triggered.
2025-05-25 09:55:38,655 - INFO - SimulationManager stopped.
2025-05-25 09:55:38,655 - INFO - Stopping MessageProcessor...
2025-05-25 09:55:38,655 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-25 09:55:38,655 - INFO - All WebSocket connections attempted to close.
2025-05-25 09:55:38,655 - INFO - Application shutdown complete.
2025-05-25 09:55:38,659 - INFO - Initiating cleanup for connection: 127.0.0.1:38376
2025-05-25 09:55:38,659 - INFO - Starting cleanup for 127.0.0.1:38376
2025-05-25 09:55:38,659 - INFO - Connection cleanup completed for 127.0.0.1:38376. Remaining connections: 2
2025-05-25 09:55:38,659 - INFO - Cleanup finished for connection: 127.0.0.1:38376. Total connections: 2
2025-05-25 09:55:38,660 - INFO - Initiating cleanup for connection: 127.0.0.1:52614
2025-05-25 09:55:38,660 - INFO - Starting cleanup for 127.0.0.1:52614
2025-05-25 09:55:38,660 - INFO - Connection cleanup completed for 127.0.0.1:52614. Remaining connections: 1
2025-05-25 09:55:38,660 - INFO - Cleanup finished for connection: 127.0.0.1:52614. Total connections: 1
2025-05-25 09:55:38,661 - INFO - Initiating cleanup for connection: 127.0.0.1:38394
2025-05-25 09:55:38,661 - INFO - Starting cleanup for 127.0.0.1:38394
2025-05-25 09:55:38,661 - INFO - Connection cleanup completed for 127.0.0.1:38394. Remaining connections: 0
2025-05-25 09:55:38,661 - INFO - Cleanup finished for connection: 127.0.0.1:38394. Total connections: 0
2025-05-25 09:56:54,137 - INFO - Application startup event triggered.
2025-05-25 09:56:54,138 - INFO - Initializing all queues...
2025-05-25 09:56:54,138 - INFO - All queues initialized on loop 664890912
2025-05-25 09:56:54,138 - INFO - Shared queues initialized.
2025-05-25 09:56:54,138 - INFO - Retrieved queue instances. Event loop ID: 664890912
2025-05-25 09:56:54,138 - INFO - SimulationManager ready state set to: True
2025-05-25 09:56:54,138 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 09:56:54,138 - INFO - MessageProcessor queues verified
2025-05-25 09:56:54,138 - INFO - MessageProcessor task started.
2025-05-25 09:56:54,139 - INFO - QueueForwarder queues verified
2025-05-25 09:56:54,139 - INFO - QueueForwarder task started.
2025-05-25 09:56:54,139 - INFO - Application startup complete. All core services initialized.
2025-05-25 09:56:54,139 - INFO - Starting MessageProcessor
2025-05-25 09:56:54,139 - INFO - Starting QueueForwarder
2025-05-25 09:56:55,537 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=34302)
2025-05-25 09:56:55,537 - INFO - Adding connection: 127.0.0.1:34302. Total connections: 1
2025-05-25 09:56:55,538 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=34302)
2025-05-25 09:56:55,538 - INFO - Sender task started for Address(host='127.0.0.1', port=34302)
2025-05-25 09:56:55,538 - INFO - Receiver task started for Address(host='127.0.0.1', port=34302)
2025-05-25 09:56:55,543 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=34302)
2025-05-25 09:57:01,922 - INFO - Received request to start simulation
2025-05-25 09:57:01,922 - INFO - Initiating simulation start via background task
2025-05-25 09:57:01,922 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-25 09:57:01,923 - INFO - Simulation task starting
2025-05-25 09:57:01,923 - INFO - System message enqueued to backend queue
2025-05-25 09:57:01,924 - INFO - Processed 2 messages
2025-05-25 09:57:08,250 - INFO - Processed 3 messages
2025-05-25 09:57:13,109 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=34302): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-25 09:57:13,111 - INFO - Receiver task for Address(host='127.0.0.1', port=34302) finished.
2025-05-25 09:57:13,311 - INFO - Sender task for Address(host='127.0.0.1', port=34302) was cancelled.
2025-05-25 09:57:13,312 - INFO - Application shutdown event triggered.
2025-05-25 09:57:13,312 - INFO - SimulationManager stopped.
2025-05-25 09:57:13,312 - INFO - Stopping MessageProcessor...
2025-05-25 09:57:13,312 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-25 09:57:13,312 - INFO - All WebSocket connections attempted to close.
2025-05-25 09:57:13,312 - INFO - Application shutdown complete.
2025-05-25 09:57:13,316 - INFO - Initiating cleanup for connection: 127.0.0.1:34302
2025-05-25 09:57:13,316 - INFO - Starting cleanup for 127.0.0.1:34302
2025-05-25 09:57:13,316 - INFO - Connection cleanup completed for 127.0.0.1:34302. Remaining connections: 0
2025-05-25 09:57:13,316 - INFO - Cleanup finished for connection: 127.0.0.1:34302. Total connections: 0
2025-05-25 10:19:04,130 - INFO - Application startup event triggered.
2025-05-25 10:19:04,130 - INFO - Initializing all queues...
2025-05-25 10:19:04,130 - INFO - All queues initialized on loop 371363360
2025-05-25 10:19:04,130 - INFO - Shared queues initialized.
2025-05-25 10:19:04,131 - INFO - Retrieved queue instances. Event loop ID: 371363360
2025-05-25 10:19:04,131 - INFO - SimulationManager ready state set to: True
2025-05-25 10:19:04,131 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 10:19:04,131 - INFO - MessageProcessor queues verified
2025-05-25 10:19:04,131 - INFO - MessageProcessor task started.
2025-05-25 10:19:04,131 - INFO - QueueForwarder queues verified
2025-05-25 10:19:04,131 - INFO - QueueForwarder task started.
2025-05-25 10:19:04,131 - INFO - Application startup complete. All core services initialized.
2025-05-25 10:19:04,132 - INFO - Starting MessageProcessor
2025-05-25 10:19:04,132 - INFO - Starting QueueForwarder
2025-05-25 10:19:05,560 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=35960)
2025-05-25 10:19:05,560 - ERROR - Connection lifetime error for 127.0.0.1:35960: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-25 10:19:05,561 - INFO - Initiating cleanup for connection: 127.0.0.1:35960
2025-05-25 10:19:05,561 - INFO - Starting cleanup for 127.0.0.1:35960
2025-05-25 10:19:05,582 - INFO - Closed WebSocket connection for 127.0.0.1:35960
2025-05-25 10:19:05,582 - INFO - Connection cleanup completed for 127.0.0.1:35960. Remaining connections: 0
2025-05-25 10:19:05,582 - INFO - Cleanup finished for connection: 127.0.0.1:35960. Total connections: 0
2025-05-25 10:19:05,582 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=35960): WebSocket is not connected. Need to call "accept" first.
2025-05-25 10:19:05,582 - ERROR - Error during WebSocket cleanup for Address(host='127.0.0.1', port=35960): Cannot call "send" once a close message has been sent.
2025-05-25 10:19:06,904 - INFO - Received request to start simulation
2025-05-25 10:19:06,905 - INFO - Initiating simulation start via background task
2025-05-25 10:19:06,905 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-25 10:19:06,905 - INFO - Simulation task starting
2025-05-25 10:19:06,906 - INFO - System message enqueued to backend queue
2025-05-25 10:19:10,185 - INFO - Processed 3 messages
2025-05-25 10:19:13,506 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=35966)
2025-05-25 10:19:13,507 - ERROR - Connection lifetime error for 127.0.0.1:35966: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-25 10:19:13,507 - INFO - Initiating cleanup for connection: 127.0.0.1:35966
2025-05-25 10:19:13,507 - INFO - Starting cleanup for 127.0.0.1:35966
2025-05-25 10:19:13,511 - INFO - Closed WebSocket connection for 127.0.0.1:35966
2025-05-25 10:19:13,511 - INFO - Connection cleanup completed for 127.0.0.1:35966. Remaining connections: 0
2025-05-25 10:19:13,511 - INFO - Cleanup finished for connection: 127.0.0.1:35966. Total connections: 0
2025-05-25 10:19:13,511 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=35966): WebSocket is not connected. Need to call "accept" first.
2025-05-25 10:19:13,511 - ERROR - Error during WebSocket cleanup for Address(host='127.0.0.1', port=35966): Cannot call "send" once a close message has been sent.
2025-05-25 10:19:15,217 - INFO - Processed 2 messages
2025-05-25 10:19:18,506 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53744)
2025-05-25 10:19:18,506 - ERROR - Connection lifetime error for 127.0.0.1:53744: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-25 10:19:18,507 - INFO - Initiating cleanup for connection: 127.0.0.1:53744
2025-05-25 10:19:18,507 - INFO - Starting cleanup for 127.0.0.1:53744
2025-05-25 10:19:18,510 - INFO - Closed WebSocket connection for 127.0.0.1:53744
2025-05-25 10:19:18,511 - INFO - Connection cleanup completed for 127.0.0.1:53744. Remaining connections: 0
2025-05-25 10:19:18,511 - INFO - Cleanup finished for connection: 127.0.0.1:53744. Total connections: 0
2025-05-25 10:19:18,511 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=53744): WebSocket is not connected. Need to call "accept" first.
2025-05-25 10:19:18,511 - ERROR - Error during WebSocket cleanup for Address(host='127.0.0.1', port=53744): Cannot call "send" once a close message has been sent.
2025-05-25 10:19:20,267 - INFO - Processed 2 messages
2025-05-25 10:19:27,171 - INFO - Processed 3 messages
2025-05-25 10:19:33,017 - INFO - Processed 3 messages
2025-05-25 10:19:35,944 - INFO - Application shutdown event triggered.
2025-05-25 10:19:35,945 - INFO - SimulationManager stopped.
2025-05-25 10:19:35,945 - INFO - Stopping MessageProcessor...
2025-05-25 10:19:35,945 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-25 10:19:35,945 - INFO - All WebSocket connections attempted to close.
2025-05-25 10:19:35,945 - INFO - Application shutdown complete.
2025-05-25 10:25:51,764 - INFO - Application startup event triggered.
2025-05-25 10:25:51,764 - INFO - Initializing all queues...
2025-05-25 10:25:51,764 - INFO - All queues initialized on loop 835935776
2025-05-25 10:25:51,764 - INFO - Shared queues initialized.
2025-05-25 10:25:51,764 - INFO - Retrieved queue instances. Event loop ID: 835935776
2025-05-25 10:25:51,765 - INFO - SimulationManager ready state set to: True
2025-05-25 10:25:51,765 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 10:25:51,765 - INFO - MessageProcessor queues verified
2025-05-25 10:25:51,765 - INFO - MessageProcessor task started.
2025-05-25 10:25:51,765 - INFO - QueueForwarder queues verified
2025-05-25 10:25:51,765 - INFO - QueueForwarder task started.
2025-05-25 10:25:51,765 - INFO - Application startup complete. All core services initialized.
2025-05-25 10:25:51,765 - INFO - Starting MessageProcessor
2025-05-25 10:25:51,765 - INFO - Starting QueueForwarder
2025-05-25 10:28:12,713 - INFO - Application shutdown event triggered.
2025-05-25 10:28:12,714 - INFO - Stopping MessageProcessor...
2025-05-25 10:28:12,714 - WARNING - MessageProcessor didn't stop cleanly
2025-05-25 10:28:12,715 - INFO - QueueForwarder task cancelled.
2025-05-25 10:28:12,715 - INFO - All WebSocket connections attempted to close.
2025-05-25 10:28:12,715 - INFO - Application shutdown complete.
2025-05-25 10:28:22,870 - INFO - Application startup event triggered.
2025-05-25 10:28:22,870 - INFO - Initializing all queues...
2025-05-25 10:28:22,871 - INFO - All queues initialized on loop 500129312
2025-05-25 10:28:22,871 - INFO - Shared queues initialized.
2025-05-25 10:28:22,871 - INFO - Retrieved queue instances. Event loop ID: 500129312
2025-05-25 10:28:22,871 - INFO - SimulationManager ready state set to: True
2025-05-25 10:28:22,871 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 10:28:22,871 - INFO - MessageProcessor queues verified
2025-05-25 10:28:22,871 - INFO - MessageProcessor task started.
2025-05-25 10:28:22,871 - INFO - QueueForwarder queues verified
2025-05-25 10:28:22,872 - INFO - QueueForwarder task started.
2025-05-25 10:28:22,872 - INFO - Application startup complete. All core services initialized.
2025-05-25 10:28:22,872 - INFO - Starting MessageProcessor
2025-05-25 10:28:22,872 - INFO - Starting QueueForwarder
2025-05-25 10:30:07,625 - INFO - Application shutdown event triggered.
2025-05-25 10:30:07,625 - INFO - Stopping MessageProcessor...
2025-05-25 10:30:07,625 - WARNING - MessageProcessor didn't stop cleanly
2025-05-25 10:30:07,626 - INFO - QueueForwarder task cancelled.
2025-05-25 10:30:07,626 - INFO - All WebSocket connections attempted to close.
2025-05-25 10:30:07,626 - INFO - Application shutdown complete.
2025-05-25 10:30:11,579 - INFO - Application startup event triggered.
2025-05-25 10:30:11,579 - INFO - Initializing all queues...
2025-05-25 10:30:11,579 - INFO - All queues initialized on loop 907062816
2025-05-25 10:30:11,579 - INFO - Shared queues initialized.
2025-05-25 10:30:11,579 - INFO - Retrieved queue instances. Event loop ID: 907062816
2025-05-25 10:30:11,579 - INFO - SimulationManager ready state set to: True
2025-05-25 10:30:11,579 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 10:30:11,579 - INFO - MessageProcessor queues verified
2025-05-25 10:30:11,580 - INFO - MessageProcessor task started.
2025-05-25 10:30:11,580 - INFO - QueueForwarder queues verified
2025-05-25 10:30:11,580 - INFO - QueueForwarder task started.
2025-05-25 10:30:11,580 - INFO - Application startup complete. All core services initialized.
2025-05-25 10:30:11,580 - INFO - Starting MessageProcessor
2025-05-25 10:30:11,580 - INFO - Starting QueueForwarder
2025-05-25 10:31:53,443 - INFO - Application shutdown event triggered.
2025-05-25 10:31:53,443 - INFO - Stopping MessageProcessor...
2025-05-25 10:31:53,443 - WARNING - MessageProcessor didn't stop cleanly
2025-05-25 10:31:53,443 - INFO - QueueForwarder task cancelled.
2025-05-25 10:31:53,444 - INFO - All WebSocket connections attempted to close.
2025-05-25 10:31:53,444 - INFO - Application shutdown complete.
2025-05-25 10:31:57,487 - INFO - Application startup event triggered.
2025-05-25 10:31:57,487 - INFO - Initializing all queues...
2025-05-25 10:31:57,487 - INFO - All queues initialized on loop 348102176
2025-05-25 10:31:57,487 - INFO - Shared queues initialized.
2025-05-25 10:31:57,487 - INFO - Retrieved queue instances. Event loop ID: 348102176
2025-05-25 10:31:57,487 - INFO - SimulationManager ready state set to: True
2025-05-25 10:31:57,487 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 10:31:57,487 - INFO - MessageProcessor queues verified
2025-05-25 10:31:57,487 - INFO - MessageProcessor task started.
2025-05-25 10:31:57,487 - INFO - QueueForwarder queues verified
2025-05-25 10:31:57,487 - INFO - QueueForwarder task started.
2025-05-25 10:31:57,488 - INFO - Application startup complete. All core services initialized.
2025-05-25 10:31:57,488 - INFO - Starting MessageProcessor
2025-05-25 10:31:57,488 - INFO - Starting QueueForwarder
2025-05-25 10:32:05,499 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=51066)
2025-05-25 10:32:05,500 - ERROR - Connection lifetime error for 127.0.0.1:51066: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-25 10:32:05,501 - INFO - Initiating cleanup for connection: 127.0.0.1:51066
2025-05-25 10:32:05,501 - INFO - Starting cleanup for 127.0.0.1:51066
2025-05-25 10:32:05,507 - INFO - Closed WebSocket connection for 127.0.0.1:51066
2025-05-25 10:32:05,507 - INFO - Connection cleanup completed for 127.0.0.1:51066. Remaining connections: 0
2025-05-25 10:32:05,507 - INFO - Cleanup finished for connection: 127.0.0.1:51066. Total connections: 0
2025-05-25 10:32:05,507 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=51066): WebSocket is not connected. Need to call "accept" first.
2025-05-25 10:32:05,507 - ERROR - Error during WebSocket cleanup for Address(host='127.0.0.1', port=51066): Cannot call "send" once a close message has been sent.
2025-05-25 10:32:12,331 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=51070)
2025-05-25 10:32:12,331 - ERROR - Connection lifetime error for 127.0.0.1:51070: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-25 10:32:12,332 - INFO - Initiating cleanup for connection: 127.0.0.1:51070
2025-05-25 10:32:12,332 - INFO - Starting cleanup for 127.0.0.1:51070
2025-05-25 10:32:12,335 - INFO - Closed WebSocket connection for 127.0.0.1:51070
2025-05-25 10:32:12,336 - INFO - Connection cleanup completed for 127.0.0.1:51070. Remaining connections: 0
2025-05-25 10:32:12,336 - INFO - Cleanup finished for connection: 127.0.0.1:51070. Total connections: 0
2025-05-25 10:32:12,336 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=51070): WebSocket is not connected. Need to call "accept" first.
2025-05-25 10:32:12,336 - ERROR - Error during WebSocket cleanup for Address(host='127.0.0.1', port=51070): Cannot call "send" once a close message has been sent.
2025-05-25 10:32:17,156 - INFO - Application shutdown event triggered.
2025-05-25 10:32:17,156 - INFO - Stopping MessageProcessor...
2025-05-25 10:32:17,156 - WARNING - MessageProcessor didn't stop cleanly
2025-05-25 10:32:17,156 - INFO - QueueForwarder task cancelled.
2025-05-25 10:32:17,157 - INFO - All WebSocket connections attempted to close.
2025-05-25 10:32:17,157 - INFO - Application shutdown complete.
2025-05-25 10:35:15,141 - INFO - Application startup event triggered.
2025-05-25 10:35:15,141 - INFO - Initializing all queues...
2025-05-25 10:35:15,141 - INFO - All queues initialized on loop 546479648
2025-05-25 10:35:15,141 - INFO - Shared queues initialized.
2025-05-25 10:35:15,141 - INFO - Retrieved queue instances. Event loop ID: 546479648
2025-05-25 10:35:15,141 - INFO - SimulationManager ready state set to: True
2025-05-25 10:35:15,141 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 10:35:15,141 - INFO - MessageProcessor queues verified
2025-05-25 10:35:15,141 - INFO - MessageProcessor task started.
2025-05-25 10:35:15,141 - INFO - QueueForwarder queues verified
2025-05-25 10:35:15,141 - INFO - QueueForwarder task started.
2025-05-25 10:35:15,142 - INFO - Application startup complete. All core services initialized.
2025-05-25 10:35:15,142 - INFO - Starting MessageProcessor
2025-05-25 10:35:15,142 - INFO - Starting QueueForwarder
2025-05-25 10:35:16,526 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=38472)
2025-05-25 10:35:16,526 - ERROR - Connection lifetime error for 127.0.0.1:38472: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-25 10:35:16,527 - INFO - Initiating cleanup for connection: 127.0.0.1:38472
2025-05-25 10:35:16,527 - INFO - Starting cleanup for 127.0.0.1:38472
2025-05-25 10:35:16,531 - INFO - Closed WebSocket connection for 127.0.0.1:38472
2025-05-25 10:35:16,531 - INFO - Connection cleanup completed for 127.0.0.1:38472. Remaining connections: 0
2025-05-25 10:35:16,531 - INFO - Cleanup finished for connection: 127.0.0.1:38472. Total connections: 0
2025-05-25 10:35:16,532 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=38472): WebSocket is not connected. Need to call "accept" first.
2025-05-25 10:35:16,532 - ERROR - Error during WebSocket cleanup for Address(host='127.0.0.1', port=38472): Cannot call "send" once a close message has been sent.
2025-05-25 10:35:29,390 - INFO - Application shutdown event triggered.
2025-05-25 10:35:29,390 - INFO - Stopping MessageProcessor...
2025-05-25 10:35:29,390 - WARNING - MessageProcessor didn't stop cleanly
2025-05-25 10:35:29,390 - INFO - QueueForwarder task cancelled.
2025-05-25 10:35:29,390 - INFO - All WebSocket connections attempted to close.
2025-05-25 10:35:29,390 - INFO - Application shutdown complete.
2025-05-25 10:37:44,261 - INFO - Application startup event triggered.
2025-05-25 10:37:44,261 - INFO - Initializing all queues...
2025-05-25 10:37:44,262 - INFO - All queues initialized on loop 1048825376
2025-05-25 10:37:44,262 - INFO - Shared queues initialized.
2025-05-25 10:37:44,262 - INFO - Retrieved queue instances. Event loop ID: 1048825376
2025-05-25 10:37:44,262 - INFO - SimulationManager ready state set to: True
2025-05-25 10:37:44,262 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 10:37:44,262 - INFO - MessageProcessor queues verified
2025-05-25 10:37:44,262 - INFO - MessageProcessor task started.
2025-05-25 10:37:44,262 - INFO - QueueForwarder queues verified
2025-05-25 10:37:44,262 - INFO - QueueForwarder task started.
2025-05-25 10:37:44,262 - INFO - Application startup complete. All core services initialized.
2025-05-25 10:37:44,262 - INFO - Starting MessageProcessor
2025-05-25 10:37:44,262 - INFO - Starting QueueForwarder
2025-05-25 10:37:45,624 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37454)
2025-05-25 10:37:45,625 - ERROR - Connection lifetime error for 127.0.0.1:37454: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-25 10:37:45,625 - INFO - Initiating cleanup for connection: 127.0.0.1:37454
2025-05-25 10:37:45,626 - INFO - Starting cleanup for 127.0.0.1:37454
2025-05-25 10:37:45,630 - INFO - Closed WebSocket connection for 127.0.0.1:37454
2025-05-25 10:37:45,631 - INFO - Connection cleanup completed for 127.0.0.1:37454. Remaining connections: 0
2025-05-25 10:37:45,631 - INFO - Cleanup finished for connection: 127.0.0.1:37454. Total connections: 0
2025-05-25 10:37:45,631 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=37454): WebSocket is not connected. Need to call "accept" first.
2025-05-25 10:37:45,631 - ERROR - Error during WebSocket cleanup for Address(host='127.0.0.1', port=37454): Cannot call "send" once a close message has been sent.
2025-05-25 10:37:50,575 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37456)
2025-05-25 10:37:50,575 - ERROR - Connection lifetime error for 127.0.0.1:37456: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-25 10:37:50,576 - INFO - Initiating cleanup for connection: 127.0.0.1:37456
2025-05-25 10:37:50,576 - INFO - Starting cleanup for 127.0.0.1:37456
2025-05-25 10:37:50,579 - INFO - Closed WebSocket connection for 127.0.0.1:37456
2025-05-25 10:37:50,580 - INFO - Connection cleanup completed for 127.0.0.1:37456. Remaining connections: 0
2025-05-25 10:37:50,580 - INFO - Cleanup finished for connection: 127.0.0.1:37456. Total connections: 0
2025-05-25 10:37:50,580 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=37456): WebSocket is not connected. Need to call "accept" first.
2025-05-25 10:37:50,580 - ERROR - Error during WebSocket cleanup for Address(host='127.0.0.1', port=37456): Cannot call "send" once a close message has been sent.
2025-05-25 10:37:50,922 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37468)
2025-05-25 10:37:50,922 - ERROR - Connection lifetime error for 127.0.0.1:37468: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-25 10:37:50,922 - INFO - Initiating cleanup for connection: 127.0.0.1:37468
2025-05-25 10:37:50,922 - INFO - Starting cleanup for 127.0.0.1:37468
2025-05-25 10:37:50,925 - INFO - Closed WebSocket connection for 127.0.0.1:37468
2025-05-25 10:37:50,926 - INFO - Connection cleanup completed for 127.0.0.1:37468. Remaining connections: 0
2025-05-25 10:37:50,926 - INFO - Cleanup finished for connection: 127.0.0.1:37468. Total connections: 0
2025-05-25 10:37:50,926 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=37468): WebSocket is not connected. Need to call "accept" first.
2025-05-25 10:37:50,926 - ERROR - Error during WebSocket cleanup for Address(host='127.0.0.1', port=37468): Cannot call "send" once a close message has been sent.
2025-05-25 10:38:15,056 - INFO - Application shutdown event triggered.
2025-05-25 10:38:15,057 - INFO - Stopping MessageProcessor...
2025-05-25 10:38:15,057 - WARNING - MessageProcessor didn't stop cleanly
2025-05-25 10:38:15,057 - INFO - QueueForwarder task cancelled.
2025-05-25 10:38:15,057 - INFO - All WebSocket connections attempted to close.
2025-05-25 10:38:15,057 - INFO - Application shutdown complete.
2025-05-25 10:39:40,988 - INFO - Application startup event triggered.
2025-05-25 10:39:40,988 - INFO - Initializing all queues...
2025-05-25 10:39:40,988 - INFO - All queues initialized on loop 511778336
2025-05-25 10:39:40,988 - INFO - Shared queues initialized.
2025-05-25 10:39:40,988 - INFO - Retrieved queue instances. Event loop ID: 511778336
2025-05-25 10:39:40,988 - INFO - SimulationManager ready state set to: True
2025-05-25 10:39:40,989 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 10:39:40,989 - INFO - MessageProcessor queues verified
2025-05-25 10:39:40,989 - INFO - MessageProcessor task started.
2025-05-25 10:39:40,989 - INFO - QueueForwarder queues verified
2025-05-25 10:39:40,989 - INFO - QueueForwarder task started.
2025-05-25 10:39:40,989 - INFO - Application startup complete. All core services initialized.
2025-05-25 10:39:40,989 - INFO - Starting MessageProcessor
2025-05-25 10:39:40,989 - INFO - Starting QueueForwarder
2025-05-25 10:39:42,236 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=47782)
2025-05-25 10:39:42,236 - ERROR - Connection lifetime error for 127.0.0.1:47782: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-25 10:39:42,237 - INFO - Initiating cleanup for connection: 127.0.0.1:47782
2025-05-25 10:39:42,237 - INFO - Starting cleanup for 127.0.0.1:47782
2025-05-25 10:39:42,242 - INFO - Closed WebSocket connection for 127.0.0.1:47782
2025-05-25 10:39:42,242 - INFO - Connection cleanup completed for 127.0.0.1:47782. Remaining connections: 0
2025-05-25 10:39:42,242 - INFO - Cleanup finished for connection: 127.0.0.1:47782. Total connections: 0
2025-05-25 10:39:42,242 - ERROR - WebSocket receive error for Address(host='127.0.0.1', port=47782): WebSocket is not connected. Need to call "accept" first.
2025-05-25 10:39:42,242 - ERROR - Error during WebSocket cleanup for Address(host='127.0.0.1', port=47782): Cannot call "send" once a close message has been sent.
2025-05-25 10:41:09,372 - INFO - Application shutdown event triggered.
2025-05-25 10:41:09,372 - INFO - Stopping MessageProcessor...
2025-05-25 10:41:09,372 - WARNING - MessageProcessor didn't stop cleanly
2025-05-25 10:41:09,373 - INFO - QueueForwarder task cancelled.
2025-05-25 10:41:09,373 - INFO - All WebSocket connections attempted to close.
2025-05-25 10:41:09,373 - INFO - Application shutdown complete.
2025-05-25 10:43:06,058 - INFO - Application startup event triggered.
2025-05-25 10:43:06,058 - INFO - Initializing all queues...
2025-05-25 10:43:06,058 - INFO - All queues initialized on loop 21917904
2025-05-25 10:43:06,058 - INFO - Shared queues initialized.
2025-05-25 10:43:06,058 - INFO - Retrieved queue instances. Event loop ID: 21917904
2025-05-25 10:43:06,058 - INFO - SimulationManager ready state set to: True
2025-05-25 10:43:06,058 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 10:43:06,058 - INFO - MessageProcessor queues verified
2025-05-25 10:43:06,059 - INFO - MessageProcessor task started.
2025-05-25 10:43:06,059 - INFO - QueueForwarder queues verified
2025-05-25 10:43:06,059 - INFO - QueueForwarder task started.
2025-05-25 10:43:06,059 - INFO - Application startup complete. All core services initialized.
2025-05-25 10:43:06,059 - INFO - Starting MessageProcessor
2025-05-25 10:43:06,059 - INFO - Starting QueueForwarder
2025-05-25 10:43:17,099 - INFO - Application shutdown event triggered.
2025-05-25 10:43:17,099 - INFO - Stopping MessageProcessor...
2025-05-25 10:43:17,100 - WARNING - MessageProcessor didn't stop cleanly
2025-05-25 10:43:17,100 - INFO - QueueForwarder task cancelled.
2025-05-25 10:43:17,100 - INFO - All WebSocket connections attempted to close.
2025-05-25 10:43:17,100 - INFO - Application shutdown complete.
2025-05-25 10:43:20,318 - INFO - Application startup event triggered.
2025-05-25 10:43:20,318 - INFO - Initializing all queues...
2025-05-25 10:43:20,318 - INFO - All queues initialized on loop 56294944
2025-05-25 10:43:20,319 - INFO - Shared queues initialized.
2025-05-25 10:43:20,319 - INFO - Retrieved queue instances. Event loop ID: 56294944
2025-05-25 10:43:20,319 - INFO - SimulationManager ready state set to: True
2025-05-25 10:43:20,319 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 10:43:20,319 - INFO - MessageProcessor queues verified
2025-05-25 10:43:20,319 - INFO - MessageProcessor task started.
2025-05-25 10:43:20,319 - INFO - QueueForwarder queues verified
2025-05-25 10:43:20,319 - INFO - QueueForwarder task started.
2025-05-25 10:43:20,319 - INFO - Application startup complete. All core services initialized.
2025-05-25 10:43:20,319 - INFO - Starting MessageProcessor
2025-05-25 10:43:20,320 - INFO - Starting QueueForwarder
2025-05-25 10:43:21,572 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=49572)
2025-05-25 10:43:21,572 - ERROR - Connection lifetime error for 127.0.0.1:49572: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-25 10:43:21,573 - INFO - Initiating cleanup for connection: 127.0.0.1:49572
2025-05-25 10:43:21,573 - INFO - Starting cleanup for 127.0.0.1:49572
2025-05-25 10:43:21,577 - INFO - Closed WebSocket connection for 127.0.0.1:49572
2025-05-25 10:43:21,577 - INFO - Connection cleanup completed for 127.0.0.1:49572. Remaining connections: 0
2025-05-25 10:43:21,577 - INFO - Cleanup finished for connection: 127.0.0.1:49572. Total connections: 0
2025-05-25 10:43:21,577 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-25 10:43:21,577 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
2025-05-25 10:44:20,396 - INFO - Application shutdown event triggered.
2025-05-25 10:44:20,396 - INFO - Stopping MessageProcessor...
2025-05-25 10:44:20,396 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-25 10:44:20,396 - INFO - All WebSocket connections attempted to close.
2025-05-25 10:44:20,396 - INFO - Application shutdown complete.
2025-05-25 11:50:50,379 - INFO - Application startup event triggered.
2025-05-25 11:50:50,380 - INFO - Initializing all queues...
2025-05-25 11:50:50,380 - INFO - All queues initialized on loop 687328800
2025-05-25 11:50:50,380 - INFO - Shared queues initialized.
2025-05-25 11:50:50,380 - INFO - Retrieved queue instances. Event loop ID: 687328800
2025-05-25 11:50:50,380 - INFO - SimulationManager ready state set to: True
2025-05-25 11:50:50,380 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 11:50:50,380 - INFO - MessageProcessor queues verified
2025-05-25 11:50:50,381 - INFO - MessageProcessor task started.
2025-05-25 11:50:50,381 - INFO - QueueForwarder queues verified
2025-05-25 11:50:50,381 - INFO - QueueForwarder task started.
2025-05-25 11:50:50,381 - INFO - Application startup complete. All core services initialized.
2025-05-25 11:50:50,381 - INFO - Starting MessageProcessor
2025-05-25 11:50:50,381 - INFO - Starting QueueForwarder
2025-05-25 11:50:51,721 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=56332)
2025-05-25 11:50:51,721 - ERROR - Connection lifetime error for 127.0.0.1:56332: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-25 11:50:51,722 - INFO - Initiating cleanup for connection: 127.0.0.1:56332
2025-05-25 11:50:51,722 - INFO - Starting cleanup for 127.0.0.1:56332
2025-05-25 11:50:51,728 - INFO - Closed WebSocket connection for 127.0.0.1:56332
2025-05-25 11:50:51,728 - INFO - Connection cleanup completed for 127.0.0.1:56332. Remaining connections: 0
2025-05-25 11:50:51,728 - INFO - Cleanup finished for connection: 127.0.0.1:56332. Total connections: 0
2025-05-25 11:50:51,728 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-25 11:50:51,729 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
2025-05-25 11:58:28,641 - INFO - Application shutdown event triggered.
2025-05-25 11:58:28,641 - INFO - Stopping MessageProcessor...
2025-05-25 11:58:28,641 - WARNING - MessageProcessor didn't stop cleanly
2025-05-25 11:58:28,641 - INFO - QueueForwarder task cancelled.
2025-05-25 11:58:28,641 - INFO - All WebSocket connections attempted to close.
2025-05-25 11:58:28,641 - INFO - Application shutdown complete.
2025-05-25 11:58:32,010 - INFO - Application startup event triggered.
2025-05-25 11:58:32,010 - INFO - Initializing all queues...
2025-05-25 11:58:32,011 - INFO - All queues initialized on loop 181468704
2025-05-25 11:58:32,011 - INFO - Shared queues initialized.
2025-05-25 11:58:32,011 - INFO - Retrieved queue instances. Event loop ID: 181468704
2025-05-25 11:58:32,011 - INFO - SimulationManager ready state set to: True
2025-05-25 11:58:32,011 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 11:58:32,011 - INFO - MessageProcessor queues verified
2025-05-25 11:58:32,011 - INFO - MessageProcessor task started.
2025-05-25 11:58:32,011 - INFO - QueueForwarder queues verified
2025-05-25 11:58:32,011 - INFO - QueueForwarder task started.
2025-05-25 11:58:32,011 - INFO - Application startup complete. All core services initialized.
2025-05-25 11:58:32,011 - INFO - Starting MessageProcessor
2025-05-25 11:58:32,011 - INFO - Starting QueueForwarder
2025-05-25 11:58:33,330 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=45324)
2025-05-25 11:58:33,330 - ERROR - Connection lifetime error for 127.0.0.1:45324: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-25 11:58:33,331 - INFO - Initiating cleanup for connection: 127.0.0.1:45324
2025-05-25 11:58:33,331 - INFO - Starting cleanup for 127.0.0.1:45324
2025-05-25 11:58:33,336 - INFO - Closed WebSocket connection for 127.0.0.1:45324
2025-05-25 11:58:33,336 - INFO - Connection cleanup completed for 127.0.0.1:45324. Remaining connections: 0
2025-05-25 11:58:33,336 - INFO - Cleanup finished for connection: 127.0.0.1:45324. Total connections: 0
2025-05-25 11:58:33,336 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-25 11:58:33,336 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
2025-05-25 11:59:59,781 - INFO - Application shutdown event triggered.
2025-05-25 11:59:59,781 - INFO - Stopping MessageProcessor...
2025-05-25 11:59:59,782 - WARNING - MessageProcessor didn't stop cleanly
2025-05-25 11:59:59,782 - INFO - QueueForwarder task cancelled.
2025-05-25 11:59:59,782 - INFO - All WebSocket connections attempted to close.
2025-05-25 11:59:59,782 - INFO - Application shutdown complete.
2025-05-25 12:03:15,467 - INFO - Application startup event triggered.
2025-05-25 12:03:15,468 - INFO - Initializing all queues...
2025-05-25 12:03:15,468 - INFO - All queues initialized on loop 597392928
2025-05-25 12:03:15,468 - INFO - Shared queues initialized.
2025-05-25 12:03:15,468 - INFO - Retrieved queue instances. Event loop ID: 597392928
2025-05-25 12:03:15,468 - INFO - SimulationManager ready state set to: True
2025-05-25 12:03:15,468 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-25 12:03:15,468 - INFO - MessageProcessor queues verified
2025-05-25 12:03:15,468 - INFO - MessageProcessor task started.
2025-05-25 12:03:15,468 - INFO - QueueForwarder queues verified
2025-05-25 12:03:15,468 - INFO - QueueForwarder task started.
2025-05-25 12:03:15,468 - INFO - Application startup complete. All core services initialized.
2025-05-25 12:03:15,468 - INFO - Starting MessageProcessor
2025-05-25 12:03:15,469 - INFO - Starting QueueForwarder
2025-05-25 12:03:16,817 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=60520)
2025-05-25 12:03:16,817 - ERROR - Connection lifetime error for 127.0.0.1:60520: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-25 12:03:16,818 - INFO - Initiating cleanup for connection: 127.0.0.1:60520
2025-05-25 12:03:16,818 - INFO - Starting cleanup for 127.0.0.1:60520
2025-05-25 12:03:16,824 - INFO - Closed WebSocket connection for 127.0.0.1:60520
2025-05-25 12:03:16,824 - INFO - Connection cleanup completed for 127.0.0.1:60520. Remaining connections: 0
2025-05-25 12:03:16,824 - INFO - Cleanup finished for connection: 127.0.0.1:60520. Total connections: 0
2025-05-25 12:03:16,824 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-25 12:03:16,825 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 214, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-26 14:06:49,663 - INFO - Application shutdown event triggered.
2025-05-26 14:06:49,670 - INFO - Stopping MessageProcessor...
2025-05-26 14:06:49,676 - WARNING - MessageProcessor didn't stop cleanly
2025-05-26 14:06:49,677 - INFO - QueueForwarder task cancelled.
2025-05-26 14:06:49,678 - INFO - All WebSocket connections attempted to close.
2025-05-26 14:06:49,679 - INFO - Application shutdown complete.
2025-05-26 14:07:03,051 - INFO - Application startup event triggered.
2025-05-26 14:07:03,051 - INFO - Initializing all queues...
2025-05-26 14:07:03,051 - INFO - All queues initialized on loop 678977056
2025-05-26 14:07:03,051 - INFO - Shared queues initialized.
2025-05-26 14:07:03,052 - INFO - Retrieved queue instances. Event loop ID: 678977056
2025-05-26 14:07:03,052 - INFO - SimulationManager ready state set to: True
2025-05-26 14:07:03,052 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-26 14:07:03,052 - INFO - MessageProcessor queues verified
2025-05-26 14:07:03,052 - INFO - MessageProcessor task started.
2025-05-26 14:07:03,052 - INFO - QueueForwarder queues verified
2025-05-26 14:07:03,052 - INFO - QueueForwarder task started.
2025-05-26 14:07:03,052 - INFO - Application startup complete. All core services initialized.
2025-05-26 14:07:03,052 - INFO - Starting MessageProcessor
2025-05-26 14:07:03,052 - INFO - Starting QueueForwarder
2025-05-26 14:07:04,680 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54424)
2025-05-26 14:07:04,680 - ERROR - Connection lifetime error for 127.0.0.1:54424: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-26 14:07:04,682 - INFO - Initiating cleanup for connection: 127.0.0.1:54424
2025-05-26 14:07:04,682 - INFO - Starting cleanup for 127.0.0.1:54424
2025-05-26 14:07:04,686 - INFO - Closed WebSocket connection for 127.0.0.1:54424
2025-05-26 14:07:04,686 - INFO - Connection cleanup completed for 127.0.0.1:54424. Remaining connections: 0
2025-05-26 14:07:04,686 - INFO - Cleanup finished for connection: 127.0.0.1:54424. Total connections: 0
2025-05-26 14:07:04,686 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-26 14:07:04,687 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 214, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-26 14:07:10,403 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=49096)
2025-05-26 14:07:10,403 - ERROR - Connection lifetime error for 127.0.0.1:49096: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-26 14:07:10,404 - INFO - Initiating cleanup for connection: 127.0.0.1:49096
2025-05-26 14:07:10,404 - INFO - Starting cleanup for 127.0.0.1:49096
2025-05-26 14:07:10,407 - INFO - Closed WebSocket connection for 127.0.0.1:49096
2025-05-26 14:07:10,407 - INFO - Connection cleanup completed for 127.0.0.1:49096. Remaining connections: 0
2025-05-26 14:07:10,408 - INFO - Cleanup finished for connection: 127.0.0.1:49096. Total connections: 0
2025-05-26 14:07:10,408 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-26 14:07:10,408 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 214, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-26 14:20:08,454 - INFO - Application shutdown event triggered.
2025-05-26 14:20:08,455 - INFO - Stopping MessageProcessor...
2025-05-26 14:20:08,455 - WARNING - MessageProcessor didn't stop cleanly
2025-05-26 14:20:08,455 - INFO - QueueForwarder task cancelled.
2025-05-26 14:20:08,455 - INFO - All WebSocket connections attempted to close.
2025-05-26 14:20:08,455 - INFO - Application shutdown complete.
2025-05-26 19:35:34,787 - INFO - Application startup event triggered.
2025-05-26 19:35:34,788 - INFO - Initializing all queues...
2025-05-26 19:35:34,788 - INFO - All queues initialized on loop 905666080
2025-05-26 19:35:34,788 - INFO - Shared queues initialized.
2025-05-26 19:35:34,788 - INFO - Retrieved queue instances. Event loop ID: 905666080
2025-05-26 19:35:34,788 - INFO - SimulationManager ready state set to: True
2025-05-26 19:35:34,788 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-26 19:35:34,788 - INFO - MessageProcessor queues verified
2025-05-26 19:35:34,788 - INFO - MessageProcessor task started.
2025-05-26 19:35:34,788 - INFO - QueueForwarder queues verified
2025-05-26 19:35:34,788 - INFO - QueueForwarder task started.
2025-05-26 19:35:34,788 - INFO - Application startup complete. All core services initialized.
2025-05-26 19:35:34,788 - INFO - Starting MessageProcessor
2025-05-26 19:35:34,788 - INFO - Starting QueueForwarder
2025-05-26 19:35:36,537 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50008)
2025-05-26 19:35:36,537 - ERROR - Connection lifetime error for 127.0.0.1:50008: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-26 19:35:36,538 - INFO - Initiating cleanup for connection: 127.0.0.1:50008
2025-05-26 19:35:36,538 - INFO - Starting cleanup for 127.0.0.1:50008
2025-05-26 19:35:36,540 - INFO - Closed WebSocket connection for 127.0.0.1:50008
2025-05-26 19:35:36,540 - INFO - Connection cleanup completed for 127.0.0.1:50008. Remaining connections: 0
2025-05-26 19:35:36,540 - INFO - Cleanup finished for connection: 127.0.0.1:50008. Total connections: 0
2025-05-26 19:35:36,540 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-26 19:35:36,540 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 214, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-26 19:38:12,600 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=58946)
2025-05-26 19:38:12,601 - ERROR - Connection lifetime error for 127.0.0.1:58946: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 38, in handle_connection
    await websocket.accept()
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 99, in accept
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 79, in send
    raise RuntimeError(
RuntimeError: Expected ASGI message "websocket.send" or "websocket.close", but got 'websocket.accept'
2025-05-26 19:38:12,601 - INFO - Initiating cleanup for connection: 127.0.0.1:58946
2025-05-26 19:38:12,601 - INFO - Starting cleanup for 127.0.0.1:58946
2025-05-26 19:38:12,612 - INFO - Closed WebSocket connection for 127.0.0.1:58946
2025-05-26 19:38:12,612 - INFO - Connection cleanup completed for 127.0.0.1:58946. Remaining connections: 0
2025-05-26 19:38:12,612 - INFO - Cleanup finished for connection: 127.0.0.1:58946. Total connections: 0
2025-05-26 19:38:12,612 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-26 19:38:12,612 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 214, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-26 19:50:37,895 - INFO - Application startup event triggered.
2025-05-26 19:50:37,895 - INFO - Initializing all queues...
2025-05-26 19:50:37,895 - INFO - All queues initialized on loop 1020968480
2025-05-26 19:50:37,895 - INFO - Shared queues initialized.
2025-05-26 19:50:37,895 - INFO - Retrieved queue instances. Event loop ID: 1020968480
2025-05-26 19:50:37,896 - INFO - SimulationManager ready state set to: True
2025-05-26 19:50:37,896 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-26 19:50:37,896 - INFO - MessageProcessor queues verified
2025-05-26 19:50:37,896 - INFO - MessageProcessor task started.
2025-05-26 19:50:37,896 - INFO - QueueForwarder queues verified
2025-05-26 19:50:37,896 - INFO - QueueForwarder task started.
2025-05-26 19:50:37,896 - INFO - Application startup complete. All core services initialized.
2025-05-26 19:50:37,896 - INFO - Starting MessageProcessor
2025-05-26 19:50:37,896 - INFO - Starting QueueForwarder
2025-05-26 19:50:39,638 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=36122)
2025-05-26 19:50:39,638 - INFO - Adding connection: 127.0.0.1:36122. Total connections: 1
2025-05-26 19:50:39,638 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=36122)
2025-05-26 19:50:39,638 - INFO - Sender task started for Address(host='127.0.0.1', port=36122)
2025-05-26 19:50:39,638 - INFO - Receiver task started for Address(host='127.0.0.1', port=36122)
2025-05-26 19:50:39,643 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=36122)
2025-05-26 19:50:44,952 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=36122)
2025-05-26 19:50:44,952 - INFO - Processed 2 messages
2025-05-26 19:50:47,828 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=36122): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-26 19:50:47,829 - INFO - Receiver task for Address(host='127.0.0.1', port=36122) finished.
2025-05-26 19:50:47,857 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50910)
2025-05-26 19:50:47,858 - INFO - Adding connection: 127.0.0.1:50910. Total connections: 2
2025-05-26 19:50:47,858 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=50910)
2025-05-26 19:50:47,858 - INFO - Sender task started for Address(host='127.0.0.1', port=50910)
2025-05-26 19:50:47,858 - INFO - Receiver task started for Address(host='127.0.0.1', port=50910)
2025-05-26 19:50:47,859 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=50910)
2025-05-26 19:50:47,860 - WARNING - Failed to send message to Address(host='127.0.0.1', port=36122), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-26 19:50:47,860 - INFO - Sender task for Address(host='127.0.0.1', port=36122) finished.
2025-05-26 19:50:47,860 - INFO - Initiating cleanup for connection: 127.0.0.1:36122
2025-05-26 19:50:47,860 - INFO - Starting cleanup for 127.0.0.1:36122
2025-05-26 19:50:47,860 - INFO - Connection cleanup completed for 127.0.0.1:36122. Remaining connections: 1
2025-05-26 19:50:47,860 - INFO - Cleanup finished for connection: 127.0.0.1:36122. Total connections: 1
2025-05-26 19:50:47,860 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-26 19:50:47,860 - INFO - Starting cleanup for Address(host='127.0.0.1', port=36122)
2025-05-26 19:50:47,860 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=36122). Remaining connections: 1
2025-05-26 19:50:52,204 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=50910)
2025-05-26 19:50:52,204 - INFO - Processed 2 messages
2025-05-26 19:51:22,834 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=50910): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-26 19:51:22,835 - INFO - Receiver task for Address(host='127.0.0.1', port=50910) finished.
2025-05-27 00:22:48,783 - INFO - Sender task for Address(host='127.0.0.1', port=50910) was cancelled.
2025-05-27 00:22:48,783 - INFO - Application shutdown event triggered.
2025-05-27 00:22:48,784 - INFO - Stopping MessageProcessor...
2025-05-27 00:22:48,784 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 00:22:48,784 - INFO - All WebSocket connections attempted to close.
2025-05-27 00:22:48,784 - INFO - Application shutdown complete.
2025-05-27 00:22:48,786 - INFO - Initiating cleanup for connection: 127.0.0.1:50910
2025-05-27 00:22:48,786 - INFO - Starting cleanup for 127.0.0.1:50910
2025-05-27 00:22:48,786 - INFO - Connection cleanup completed for 127.0.0.1:50910. Remaining connections: 0
2025-05-27 00:22:48,786 - INFO - Cleanup finished for connection: 127.0.0.1:50910. Total connections: 0
2025-05-27 00:22:48,786 - INFO - Starting cleanup for Address(host='127.0.0.1', port=50910)
2025-05-27 00:22:48,786 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=50910). Remaining connections: 0
2025-05-27 00:23:01,251 - INFO - Application startup event triggered.
2025-05-27 00:23:01,251 - INFO - Initializing all queues...
2025-05-27 00:23:01,251 - INFO - All queues initialized on loop 319348256
2025-05-27 00:23:01,251 - INFO - Shared queues initialized.
2025-05-27 00:23:01,251 - INFO - Retrieved queue instances. Event loop ID: 319348256
2025-05-27 00:23:01,251 - INFO - SimulationManager ready state set to: True
2025-05-27 00:23:01,251 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 00:23:01,251 - INFO - MessageProcessor queues verified
2025-05-27 00:23:01,252 - INFO - MessageProcessor task started.
2025-05-27 00:23:01,252 - INFO - QueueForwarder queues verified
2025-05-27 00:23:01,252 - INFO - QueueForwarder task started.
2025-05-27 00:23:01,252 - INFO - Application startup complete. All core services initialized.
2025-05-27 00:23:01,252 - INFO - Starting MessageProcessor
2025-05-27 00:23:01,252 - INFO - Starting QueueForwarder
2025-05-27 00:23:03,019 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=38202)
2025-05-27 00:23:03,019 - INFO - Adding connection: 127.0.0.1:38202. Total connections: 1
2025-05-27 00:23:03,020 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=38202)
2025-05-27 00:23:03,021 - INFO - Sender task started for Address(host='127.0.0.1', port=38202)
2025-05-27 00:23:03,021 - INFO - Receiver task started for Address(host='127.0.0.1', port=38202)
2025-05-27 00:23:03,024 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=38202)
2025-05-27 00:23:05,208 - INFO - Initiating simulation start
2025-05-27 00:23:05,208 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-27 00:23:05,208 - INFO - Simulation task starting
2025-05-27 00:23:05,208 - INFO - System message enqueued to backend queue
2025-05-27 00:23:06,590 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=38202)
2025-05-27 00:23:06,590 - INFO - Processed 4 messages
2025-05-27 00:23:12,778 - INFO - Processed 3 messages
2025-05-27 00:23:15,983 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:23:18,625 - INFO - Processed 3 messages
2025-05-27 00:23:23,682 - INFO - Processed 2 messages
2025-05-27 00:23:27,258 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:23:28,025 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=38202)
2025-05-27 00:23:28,025 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=38202): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 00:23:28,027 - INFO - Receiver task for Address(host='127.0.0.1', port=38202) finished.
2025-05-27 00:23:29,998 - INFO - Processed 3 messages
2025-05-27 00:23:35,864 - INFO - Application shutdown event triggered.
2025-05-27 00:23:35,864 - INFO - SimulationManager stopped.
2025-05-27 00:23:35,864 - INFO - Stopping MessageProcessor...
2025-05-27 00:23:35,864 - INFO - Sender task for Address(host='127.0.0.1', port=38202) was cancelled.
2025-05-27 00:23:35,869 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 00:23:35,869 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 00:23:35,869 - INFO - All WebSocket connections attempted to close.
2025-05-27 00:23:35,869 - INFO - Application shutdown complete.
2025-05-27 00:23:35,869 - INFO - Initiating cleanup for connection: 127.0.0.1:38202
2025-05-27 00:23:35,870 - INFO - Starting cleanup for 127.0.0.1:38202
2025-05-27 00:23:35,870 - INFO - Closed WebSocket connection for 127.0.0.1:38202
2025-05-27 00:23:35,870 - INFO - Connection cleanup completed for 127.0.0.1:38202. Remaining connections: 0
2025-05-27 00:23:35,870 - INFO - Cleanup finished for connection: 127.0.0.1:38202. Total connections: 0
2025-05-27 00:23:35,870 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 141, in websocket_endpoint
    await ws_manager.handle_connection(websocket)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 50, in handle_connection
    await asyncio.gather(sender_task, receiver_task) # <--- CRITICAL CHANGE HERE
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 222, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 00:25:48,272 - INFO - Application startup event triggered.
2025-05-27 00:25:48,272 - INFO - Initializing all queues...
2025-05-27 00:25:48,272 - INFO - All queues initialized on loop 523157024
2025-05-27 00:25:48,272 - INFO - Shared queues initialized.
2025-05-27 00:25:48,272 - INFO - Retrieved queue instances. Event loop ID: 523157024
2025-05-27 00:25:48,273 - INFO - SimulationManager ready state set to: True
2025-05-27 00:25:48,273 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 00:25:48,273 - INFO - MessageProcessor queues verified
2025-05-27 00:25:48,273 - INFO - MessageProcessor task started.
2025-05-27 00:25:48,273 - INFO - QueueForwarder queues verified
2025-05-27 00:25:48,273 - INFO - QueueForwarder task started.
2025-05-27 00:25:48,273 - INFO - Application startup complete. All core services initialized.
2025-05-27 00:25:48,273 - INFO - Starting MessageProcessor
2025-05-27 00:25:48,273 - INFO - Starting QueueForwarder
2025-05-27 00:25:50,002 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=58982)
2025-05-27 00:25:50,002 - INFO - Adding connection: 127.0.0.1:58982. Total connections: 1
2025-05-27 00:25:50,003 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=58982)
2025-05-27 00:25:50,003 - INFO - Sender task started for Address(host='127.0.0.1', port=58982)
2025-05-27 00:25:50,003 - INFO - Receiver task started for Address(host='127.0.0.1', port=58982)
2025-05-27 00:25:50,006 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=58982)
2025-05-27 00:25:50,321 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=58984)
2025-05-27 00:25:50,321 - INFO - Adding connection: 127.0.0.1:58984. Total connections: 2
2025-05-27 00:25:50,321 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=58984)
2025-05-27 00:25:50,322 - INFO - Sender task started for Address(host='127.0.0.1', port=58984)
2025-05-27 00:25:50,322 - INFO - Receiver task started for Address(host='127.0.0.1', port=58984)
2025-05-27 00:25:50,323 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=58984)
2025-05-27 00:25:51,904 - INFO - Initiating simulation start
2025-05-27 00:25:51,905 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-27 00:25:51,905 - INFO - Simulation task starting
2025-05-27 00:25:51,905 - INFO - System message enqueued to backend queue
2025-05-27 00:25:55,322 - INFO - Processed 5 messages
2025-05-27 00:26:02,404 - INFO - Processed 3 messages
2025-05-27 00:26:03,284 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:26:09,469 - INFO - Processed 3 messages
2025-05-27 00:26:12,011 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=58982): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 00:26:12,012 - INFO - Receiver task for Address(host='127.0.0.1', port=58982) finished.
2025-05-27 00:26:12,143 - WARNING - Failed to send message to Address(host='127.0.0.1', port=58982), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 00:26:12,143 - INFO - Sender task for Address(host='127.0.0.1', port=58982) finished.
2025-05-27 00:26:12,144 - INFO - Initiating cleanup for connection: 127.0.0.1:58982
2025-05-27 00:26:12,144 - INFO - Starting cleanup for 127.0.0.1:58982
2025-05-27 00:26:12,144 - INFO - Connection cleanup completed for 127.0.0.1:58982. Remaining connections: 1
2025-05-27 00:26:12,144 - INFO - Cleanup finished for connection: 127.0.0.1:58982. Total connections: 1
2025-05-27 00:26:12,144 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-27 00:26:12,144 - INFO - Starting cleanup for Address(host='127.0.0.1', port=58982)
2025-05-27 00:26:12,144 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=58982). Remaining connections: 1
2025-05-27 00:26:14,882 - INFO - Processed 2 messages
2025-05-27 00:26:16,320 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=58984)
2025-05-27 00:26:16,321 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=58984): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 00:26:16,321 - INFO - Receiver task for Address(host='127.0.0.1', port=58984) finished.
2025-05-27 00:26:16,617 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:26:20,424 - INFO - Processed 2 messages
2025-05-27 00:26:22,868 - INFO - Application shutdown event triggered.
2025-05-27 00:26:22,868 - INFO - SimulationManager stopped.
2025-05-27 00:26:22,868 - INFO - Stopping MessageProcessor...
2025-05-27 00:26:22,869 - INFO - Sender task for Address(host='127.0.0.1', port=58984) was cancelled.
2025-05-27 00:26:22,871 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 00:26:22,871 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 00:26:22,871 - INFO - All WebSocket connections attempted to close.
2025-05-27 00:26:22,871 - INFO - Application shutdown complete.
2025-05-27 00:26:22,872 - INFO - Initiating cleanup for connection: 127.0.0.1:58984
2025-05-27 00:26:22,872 - INFO - Starting cleanup for 127.0.0.1:58984
2025-05-27 00:26:22,872 - INFO - Closed WebSocket connection for 127.0.0.1:58984
2025-05-27 00:26:22,872 - INFO - Connection cleanup completed for 127.0.0.1:58984. Remaining connections: 0
2025-05-27 00:26:22,872 - INFO - Cleanup finished for connection: 127.0.0.1:58984. Total connections: 0
2025-05-27 00:26:22,872 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 141, in websocket_endpoint
    await ws_manager.handle_connection(websocket)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 50, in handle_connection
    await asyncio.gather(sender_task, receiver_task) # <--- CRITICAL CHANGE HERE
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 222, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 00:28:13,403 - INFO - Application startup event triggered.
2025-05-27 00:28:13,403 - INFO - Initializing all queues...
2025-05-27 00:28:13,403 - INFO - All queues initialized on loop 479178272
2025-05-27 00:28:13,403 - INFO - Shared queues initialized.
2025-05-27 00:28:13,403 - INFO - Retrieved queue instances. Event loop ID: 479178272
2025-05-27 00:28:13,403 - INFO - SimulationManager ready state set to: True
2025-05-27 00:28:13,403 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 00:28:13,403 - INFO - MessageProcessor queues verified
2025-05-27 00:28:13,403 - INFO - MessageProcessor task started.
2025-05-27 00:28:13,403 - INFO - QueueForwarder queues verified
2025-05-27 00:28:13,403 - INFO - QueueForwarder task started.
2025-05-27 00:28:13,403 - INFO - Application startup complete. All core services initialized.
2025-05-27 00:28:13,404 - INFO - Starting MessageProcessor
2025-05-27 00:28:13,404 - INFO - Starting QueueForwarder
2025-05-27 00:28:15,138 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=35044)
2025-05-27 00:28:15,138 - INFO - Adding connection: 127.0.0.1:35044. Total connections: 1
2025-05-27 00:28:15,138 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=35044)
2025-05-27 00:28:15,139 - INFO - Sender task started for Address(host='127.0.0.1', port=35044)
2025-05-27 00:28:15,139 - INFO - Receiver task started for Address(host='127.0.0.1', port=35044)
2025-05-27 00:28:15,143 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=35044)
2025-05-27 00:28:17,231 - INFO - Initiating simulation start
2025-05-27 00:28:17,231 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-27 00:28:17,231 - INFO - Simulation task starting
2025-05-27 00:28:17,232 - INFO - System message enqueued to backend queue
2025-05-27 00:28:19,173 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=35044)
2025-05-27 00:28:19,173 - INFO - Processed 4 messages
2025-05-27 00:28:25,182 - INFO - Processed 3 messages
2025-05-27 00:28:28,293 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:28:30,930 - INFO - Processed 3 messages
2025-05-27 00:28:37,264 - INFO - Processed 3 messages
2025-05-27 00:28:38,000 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:28:38,322 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54954)
2025-05-27 00:28:38,323 - INFO - Adding connection: 127.0.0.1:54954. Total connections: 2
2025-05-27 00:28:38,324 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=54954)
2025-05-27 00:28:38,324 - INFO - Sender task started for Address(host='127.0.0.1', port=54954)
2025-05-27 00:28:38,324 - INFO - Receiver task started for Address(host='127.0.0.1', port=54954)
2025-05-27 00:28:38,326 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=54954)
2025-05-27 00:28:39,081 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=54954): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 00:28:39,082 - INFO - Receiver task for Address(host='127.0.0.1', port=54954) finished.
2025-05-27 00:28:39,082 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=35044): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 00:28:39,082 - INFO - Receiver task for Address(host='127.0.0.1', port=35044) finished.
2025-05-27 00:28:39,282 - INFO - Sender task for Address(host='127.0.0.1', port=35044) was cancelled.
2025-05-27 00:28:39,283 - INFO - Application shutdown event triggered.
2025-05-27 00:28:39,283 - INFO - SimulationManager stopped.
2025-05-27 00:28:39,283 - INFO - Stopping MessageProcessor...
2025-05-27 00:28:39,283 - INFO - Sender task for Address(host='127.0.0.1', port=54954) was cancelled.
2025-05-27 00:28:39,286 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 00:28:39,286 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 00:28:39,286 - INFO - All WebSocket connections attempted to close.
2025-05-27 00:28:39,286 - INFO - Application shutdown complete.
2025-05-27 00:28:39,287 - INFO - Initiating cleanup for connection: 127.0.0.1:35044
2025-05-27 00:28:39,287 - INFO - Starting cleanup for 127.0.0.1:35044
2025-05-27 00:28:39,287 - INFO - Connection cleanup completed for 127.0.0.1:35044. Remaining connections: 1
2025-05-27 00:28:39,287 - INFO - Cleanup finished for connection: 127.0.0.1:35044. Total connections: 1
2025-05-27 00:28:39,287 - INFO - Starting cleanup for Address(host='127.0.0.1', port=35044)
2025-05-27 00:28:39,288 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=35044). Remaining connections: 1
2025-05-27 00:28:39,289 - INFO - Initiating cleanup for connection: 127.0.0.1:54954
2025-05-27 00:28:39,289 - INFO - Starting cleanup for 127.0.0.1:54954
2025-05-27 00:28:39,289 - INFO - Connection cleanup completed for 127.0.0.1:54954. Remaining connections: 0
2025-05-27 00:28:39,289 - INFO - Cleanup finished for connection: 127.0.0.1:54954. Total connections: 0
2025-05-27 00:28:39,289 - INFO - Starting cleanup for Address(host='127.0.0.1', port=54954)
2025-05-27 00:28:39,289 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=54954). Remaining connections: 0
2025-05-27 00:34:20,361 - INFO - Application startup event triggered.
2025-05-27 00:34:20,362 - INFO - Initializing all queues...
2025-05-27 00:34:20,362 - INFO - All queues initialized on loop 1035554336
2025-05-27 00:34:20,362 - INFO - Shared queues initialized.
2025-05-27 00:34:20,362 - INFO - Retrieved queue instances. Event loop ID: 1035554336
2025-05-27 00:34:20,362 - INFO - SimulationManager ready state set to: True
2025-05-27 00:34:20,362 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 00:34:20,362 - INFO - MessageProcessor queues verified
2025-05-27 00:34:20,362 - INFO - MessageProcessor task started.
2025-05-27 00:34:20,362 - INFO - QueueForwarder queues verified
2025-05-27 00:34:20,362 - INFO - QueueForwarder task started.
2025-05-27 00:34:20,362 - INFO - Application startup complete. All core services initialized.
2025-05-27 00:34:20,362 - INFO - Starting MessageProcessor
2025-05-27 00:34:20,362 - INFO - Starting QueueForwarder
2025-05-27 00:34:22,094 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=44536)
2025-05-27 00:34:22,094 - INFO - Adding connection: 127.0.0.1:44536. Total connections: 1
2025-05-27 00:34:22,095 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=44536)
2025-05-27 00:34:22,095 - INFO - Sender task started for Address(host='127.0.0.1', port=44536)
2025-05-27 00:34:22,095 - INFO - Receiver task started for Address(host='127.0.0.1', port=44536)
2025-05-27 00:34:22,101 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=44536)
2025-05-27 00:34:24,072 - INFO - Initiating simulation start
2025-05-27 00:34:24,073 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-27 00:34:24,073 - INFO - Simulation task starting
2025-05-27 00:34:24,073 - INFO - System message enqueued to backend queue
2025-05-27 00:34:25,718 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=44536)
2025-05-27 00:34:25,718 - INFO - Processed 4 messages
2025-05-27 00:34:30,193 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=44536): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 00:34:30,193 - INFO - Receiver task for Address(host='127.0.0.1', port=44536) finished.
2025-05-27 00:34:30,218 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37862)
2025-05-27 00:34:30,218 - INFO - Adding connection: 127.0.0.1:37862. Total connections: 2
2025-05-27 00:34:30,219 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=37862)
2025-05-27 00:34:30,219 - INFO - Sender task started for Address(host='127.0.0.1', port=37862)
2025-05-27 00:34:30,219 - INFO - Receiver task started for Address(host='127.0.0.1', port=37862)
2025-05-27 00:34:30,220 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=37862)
2025-05-27 00:34:30,221 - WARNING - Failed to send message to Address(host='127.0.0.1', port=44536), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 00:34:30,221 - INFO - Sender task for Address(host='127.0.0.1', port=44536) finished.
2025-05-27 00:34:30,221 - INFO - Initiating cleanup for connection: 127.0.0.1:44536
2025-05-27 00:34:30,221 - INFO - Starting cleanup for 127.0.0.1:44536
2025-05-27 00:34:30,221 - INFO - Connection cleanup completed for 127.0.0.1:44536. Remaining connections: 1
2025-05-27 00:34:30,221 - INFO - Cleanup finished for connection: 127.0.0.1:44536. Total connections: 1
2025-05-27 00:34:30,222 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-27 00:34:30,222 - INFO - Starting cleanup for Address(host='127.0.0.1', port=44536)
2025-05-27 00:34:30,222 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=44536). Remaining connections: 1
2025-05-27 00:34:30,740 - INFO - Processed 3 messages
2025-05-27 00:34:31,322 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37868)
2025-05-27 00:34:31,322 - INFO - Adding connection: 127.0.0.1:37868. Total connections: 2
2025-05-27 00:34:31,323 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=37868)
2025-05-27 00:34:31,323 - INFO - Sender task started for Address(host='127.0.0.1', port=37868)
2025-05-27 00:34:31,323 - INFO - Receiver task started for Address(host='127.0.0.1', port=37868)
2025-05-27 00:34:31,325 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=37868)
2025-05-27 00:34:31,334 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37884)
2025-05-27 00:34:31,334 - INFO - Adding connection: 127.0.0.1:37884. Total connections: 3
2025-05-27 00:34:31,335 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=37884)
2025-05-27 00:34:31,335 - INFO - Sender task started for Address(host='127.0.0.1', port=37884)
2025-05-27 00:34:31,335 - INFO - Receiver task started for Address(host='127.0.0.1', port=37884)
2025-05-27 00:34:31,336 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=37884)
2025-05-27 00:34:32,228 - INFO - Initiating simulation start
2025-05-27 00:34:32,228 - INFO - Simulation started successfully: {'status': 'already running'}
2025-05-27 00:34:34,233 - INFO - Initiating simulation start
2025-05-27 00:34:34,233 - INFO - Simulation started successfully: {'status': 'already running'}
2025-05-27 00:34:34,847 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=37862)
2025-05-27 00:34:36,953 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=37862)
2025-05-27 00:34:36,953 - INFO - Processed 6 messages
2025-05-27 00:34:37,129 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:34:37,520 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=37862)
2025-05-27 00:34:39,061 - INFO - Initiating simulation start
2025-05-27 00:34:39,061 - INFO - Simulation started successfully: {'status': 'already running'}
2025-05-27 00:34:40,214 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=37862)
2025-05-27 00:34:42,343 - INFO - Processed 5 messages
2025-05-27 00:34:44,435 - INFO - Initiating simulation start
2025-05-27 00:34:44,435 - INFO - Simulation started successfully: {'status': 'already running'}
2025-05-27 00:34:48,861 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:34:49,862 - INFO - Processed 3 messages
2025-05-27 00:34:55,221 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=37862)
2025-05-27 00:34:55,221 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=37862): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 00:34:55,222 - INFO - Receiver task for Address(host='127.0.0.1', port=37862) finished.
2025-05-27 00:34:56,659 - INFO - Processed 3 messages
2025-05-27 00:34:57,320 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=37884)
2025-05-27 00:34:57,320 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=37884): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 00:34:57,321 - INFO - Receiver task for Address(host='127.0.0.1', port=37884) finished.
2025-05-27 00:34:57,321 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=37868)
2025-05-27 00:34:57,321 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=37868): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 00:34:57,322 - INFO - Receiver task for Address(host='127.0.0.1', port=37868) finished.
2025-05-27 00:35:00,104 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:35:02,636 - INFO - Processed 3 messages
2025-05-27 00:35:08,851 - INFO - Processed 3 messages
2025-05-27 00:35:09,809 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:35:16,552 - INFO - Processed 3 messages
2025-05-27 00:35:20,224 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=55410)
2025-05-27 00:35:20,224 - INFO - Adding connection: 127.0.0.1:55410. Total connections: 4
2025-05-27 00:35:20,224 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=55410)
2025-05-27 00:35:20,224 - INFO - Sender task started for Address(host='127.0.0.1', port=55410)
2025-05-27 00:35:20,225 - INFO - Receiver task started for Address(host='127.0.0.1', port=55410)
2025-05-27 00:35:20,227 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=55410)
2025-05-27 00:35:20,583 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=37862): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 00:35:20,585 - INFO - Sender task for Address(host='127.0.0.1', port=37862) finished.
2025-05-27 00:35:20,586 - INFO - Initiating cleanup for connection: 127.0.0.1:37862
2025-05-27 00:35:20,586 - INFO - Starting cleanup for 127.0.0.1:37862
2025-05-27 00:35:20,586 - INFO - Closed WebSocket connection for 127.0.0.1:37862
2025-05-27 00:35:20,586 - INFO - Connection cleanup completed for 127.0.0.1:37862. Remaining connections: 3
2025-05-27 00:35:20,586 - INFO - Cleanup finished for connection: 127.0.0.1:37862. Total connections: 3
2025-05-27 00:35:20,586 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 00:35:20,587 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 00:35:21,316 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:35:22,317 - INFO - Processed 4 messages
2025-05-27 00:35:22,323 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=57604)
2025-05-27 00:35:22,323 - INFO - Adding connection: 127.0.0.1:57604. Total connections: 4
2025-05-27 00:35:22,324 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=57604)
2025-05-27 00:35:22,324 - INFO - Sender task started for Address(host='127.0.0.1', port=57604)
2025-05-27 00:35:22,324 - INFO - Receiver task started for Address(host='127.0.0.1', port=57604)
2025-05-27 00:35:22,326 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=57604)
2025-05-27 00:35:22,327 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=37884): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 00:35:22,327 - INFO - Sender task for Address(host='127.0.0.1', port=37884) finished.
2025-05-27 00:35:22,328 - INFO - Initiating cleanup for connection: 127.0.0.1:37884
2025-05-27 00:35:22,328 - INFO - Starting cleanup for 127.0.0.1:37884
2025-05-27 00:35:22,328 - INFO - Closed WebSocket connection for 127.0.0.1:37884
2025-05-27 00:35:22,328 - INFO - Connection cleanup completed for 127.0.0.1:37884. Remaining connections: 3
2025-05-27 00:35:22,328 - INFO - Cleanup finished for connection: 127.0.0.1:37884. Total connections: 3
2025-05-27 00:35:22,328 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 00:35:22,328 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 00:35:22,336 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=57616)
2025-05-27 00:35:22,336 - INFO - Adding connection: 127.0.0.1:57616. Total connections: 4
2025-05-27 00:35:22,336 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=57616)
2025-05-27 00:35:22,337 - INFO - Sender task started for Address(host='127.0.0.1', port=57616)
2025-05-27 00:35:22,337 - INFO - Receiver task started for Address(host='127.0.0.1', port=57616)
2025-05-27 00:35:22,338 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=57616)
2025-05-27 00:35:22,338 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=37868): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 00:35:22,339 - INFO - Sender task for Address(host='127.0.0.1', port=37868) finished.
2025-05-27 00:35:22,339 - INFO - Initiating cleanup for connection: 127.0.0.1:37868
2025-05-27 00:35:22,339 - INFO - Starting cleanup for 127.0.0.1:37868
2025-05-27 00:35:22,339 - INFO - Closed WebSocket connection for 127.0.0.1:37868
2025-05-27 00:35:22,339 - INFO - Connection cleanup completed for 127.0.0.1:37868. Remaining connections: 3
2025-05-27 00:35:22,339 - INFO - Cleanup finished for connection: 127.0.0.1:37868. Total connections: 3
2025-05-27 00:35:22,340 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 00:35:22,340 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 00:35:28,868 - INFO - Processed 5 messages
2025-05-27 00:35:32,545 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:35:35,514 - INFO - Processed 3 messages
2025-05-27 00:35:40,614 - INFO - Processed 2 messages
2025-05-27 00:35:44,544 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:35:45,227 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=55410)
2025-05-27 00:35:45,227 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=55410): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 00:35:45,228 - INFO - Receiver task for Address(host='127.0.0.1', port=55410) finished.
2025-05-27 00:35:47,338 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=57616)
2025-05-27 00:35:47,339 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=57616): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 00:35:47,339 - INFO - Receiver task for Address(host='127.0.0.1', port=57616) finished.
2025-05-27 00:35:47,636 - INFO - Processed 3 messages
2025-05-27 00:35:48,320 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=57604)
2025-05-27 00:35:48,320 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=57604): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 00:35:48,321 - INFO - Receiver task for Address(host='127.0.0.1', port=57604) finished.
2025-05-27 00:35:53,102 - INFO - Processed 2 messages
2025-05-27 00:35:55,919 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:35:58,939 - INFO - Processed 3 messages
2025-05-27 00:36:04,432 - INFO - Processed 2 messages
2025-05-27 00:36:07,434 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:36:10,322 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50152)
2025-05-27 00:36:10,322 - INFO - Adding connection: 127.0.0.1:50152. Total connections: 4
2025-05-27 00:36:10,323 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=50152)
2025-05-27 00:36:10,323 - INFO - Sender task started for Address(host='127.0.0.1', port=50152)
2025-05-27 00:36:10,323 - INFO - Receiver task started for Address(host='127.0.0.1', port=50152)
2025-05-27 00:36:10,325 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=50152)
2025-05-27 00:36:10,325 - INFO - Processed 3 messages
2025-05-27 00:36:10,325 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=55410): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 00:36:10,326 - INFO - Sender task for Address(host='127.0.0.1', port=55410) finished.
2025-05-27 00:36:10,326 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=57616): received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2025-05-27 00:36:10,327 - INFO - Sender task for Address(host='127.0.0.1', port=57616) finished.
2025-05-27 00:36:10,327 - INFO - Initiating cleanup for connection: 127.0.0.1:55410
2025-05-27 00:36:10,327 - INFO - Starting cleanup for 127.0.0.1:55410
2025-05-27 00:36:10,327 - INFO - Closed WebSocket connection for 127.0.0.1:55410
2025-05-27 00:36:10,327 - INFO - Connection cleanup completed for 127.0.0.1:55410. Remaining connections: 3
2025-05-27 00:36:10,327 - INFO - Cleanup finished for connection: 127.0.0.1:55410. Total connections: 3
2025-05-27 00:36:10,327 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 00:36:10,327 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 00:36:10,328 - INFO - Initiating cleanup for connection: 127.0.0.1:57616
2025-05-27 00:36:10,328 - INFO - Starting cleanup for 127.0.0.1:57616
2025-05-27 00:36:10,328 - INFO - Closed WebSocket connection for 127.0.0.1:57616
2025-05-27 00:36:10,328 - INFO - Connection cleanup completed for 127.0.0.1:57616. Remaining connections: 2
2025-05-27 00:36:10,328 - INFO - Cleanup finished for connection: 127.0.0.1:57616. Total connections: 2
2025-05-27 00:36:10,328 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 00:36:10,328 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 00:36:13,322 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=57152)
2025-05-27 00:36:13,323 - INFO - Adding connection: 127.0.0.1:57152. Total connections: 3
2025-05-27 00:36:13,325 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=57152)
2025-05-27 00:36:13,325 - INFO - Sender task started for Address(host='127.0.0.1', port=57152)
2025-05-27 00:36:13,326 - INFO - Receiver task started for Address(host='127.0.0.1', port=57152)
2025-05-27 00:36:13,326 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=57152)
2025-05-27 00:36:13,326 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=57604): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 00:36:13,327 - INFO - Sender task for Address(host='127.0.0.1', port=57604) finished.
2025-05-27 00:36:13,327 - INFO - Initiating cleanup for connection: 127.0.0.1:57604
2025-05-27 00:36:13,327 - INFO - Starting cleanup for 127.0.0.1:57604
2025-05-27 00:36:13,327 - INFO - Closed WebSocket connection for 127.0.0.1:57604
2025-05-27 00:36:13,328 - INFO - Connection cleanup completed for 127.0.0.1:57604. Remaining connections: 2
2025-05-27 00:36:13,328 - INFO - Cleanup finished for connection: 127.0.0.1:57604. Total connections: 2
2025-05-27 00:36:13,328 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 00:36:13,328 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 00:36:15,778 - INFO - Processed 4 messages
2025-05-27 00:36:17,084 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=57152): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 00:36:17,085 - INFO - Receiver task for Address(host='127.0.0.1', port=57152) finished.
2025-05-27 00:36:17,085 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=50152): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 00:36:17,085 - INFO - Receiver task for Address(host='127.0.0.1', port=50152) finished.
2025-05-27 00:36:17,285 - INFO - Application shutdown event triggered.
2025-05-27 00:36:17,285 - INFO - SimulationManager stopped.
2025-05-27 00:36:17,285 - INFO - Stopping MessageProcessor...
2025-05-27 00:36:17,285 - INFO - Sender task for Address(host='127.0.0.1', port=50152) was cancelled.
2025-05-27 00:36:17,288 - INFO - Sender task for Address(host='127.0.0.1', port=57152) was cancelled.
2025-05-27 00:36:17,288 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 00:36:17,288 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 00:36:17,289 - INFO - All WebSocket connections attempted to close.
2025-05-27 00:36:17,289 - INFO - Application shutdown complete.
2025-05-27 00:36:17,289 - INFO - Initiating cleanup for connection: 127.0.0.1:50152
2025-05-27 00:36:17,289 - INFO - Starting cleanup for 127.0.0.1:50152
2025-05-27 00:36:17,289 - INFO - Connection cleanup completed for 127.0.0.1:50152. Remaining connections: 1
2025-05-27 00:36:17,289 - INFO - Cleanup finished for connection: 127.0.0.1:50152. Total connections: 1
2025-05-27 00:36:17,290 - INFO - Starting cleanup for Address(host='127.0.0.1', port=50152)
2025-05-27 00:36:17,290 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=50152). Remaining connections: 1
2025-05-27 00:36:17,291 - INFO - Initiating cleanup for connection: 127.0.0.1:57152
2025-05-27 00:36:17,291 - INFO - Starting cleanup for 127.0.0.1:57152
2025-05-27 00:36:17,291 - INFO - Connection cleanup completed for 127.0.0.1:57152. Remaining connections: 0
2025-05-27 00:36:17,291 - INFO - Cleanup finished for connection: 127.0.0.1:57152. Total connections: 0
2025-05-27 00:36:17,291 - INFO - Starting cleanup for Address(host='127.0.0.1', port=57152)
2025-05-27 00:36:17,291 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=57152). Remaining connections: 0
2025-05-27 00:37:37,027 - INFO - Application startup event triggered.
2025-05-27 00:37:37,027 - INFO - Initializing all queues...
2025-05-27 00:37:37,027 - INFO - All queues initialized on loop 167493152
2025-05-27 00:37:37,027 - INFO - Shared queues initialized.
2025-05-27 00:37:37,027 - INFO - Retrieved queue instances. Event loop ID: 167493152
2025-05-27 00:37:37,027 - INFO - SimulationManager ready state set to: True
2025-05-27 00:37:37,027 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 00:37:37,027 - INFO - MessageProcessor queues verified
2025-05-27 00:37:37,027 - INFO - MessageProcessor task started.
2025-05-27 00:37:37,027 - INFO - QueueForwarder queues verified
2025-05-27 00:37:37,027 - INFO - QueueForwarder task started.
2025-05-27 00:37:37,027 - INFO - Application startup complete. All core services initialized.
2025-05-27 00:37:37,027 - INFO - Starting MessageProcessor
2025-05-27 00:37:37,028 - INFO - Starting QueueForwarder
2025-05-27 00:37:38,760 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=36518)
2025-05-27 00:37:38,760 - INFO - Adding connection: 127.0.0.1:36518. Total connections: 1
2025-05-27 00:37:38,761 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=36518)
2025-05-27 00:37:38,761 - INFO - Sender task started for Address(host='127.0.0.1', port=36518)
2025-05-27 00:37:38,761 - INFO - Receiver task started for Address(host='127.0.0.1', port=36518)
2025-05-27 00:37:38,764 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=36518)
2025-05-27 00:37:40,387 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=36518): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 00:37:40,387 - INFO - Receiver task for Address(host='127.0.0.1', port=36518) finished.
2025-05-27 00:37:40,413 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=36526)
2025-05-27 00:37:40,413 - INFO - Adding connection: 127.0.0.1:36526. Total connections: 2
2025-05-27 00:37:40,413 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=36526)
2025-05-27 00:37:40,413 - INFO - Sender task started for Address(host='127.0.0.1', port=36526)
2025-05-27 00:37:40,413 - INFO - Receiver task started for Address(host='127.0.0.1', port=36526)
2025-05-27 00:37:40,415 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=36526)
2025-05-27 00:37:40,415 - WARNING - Failed to send message to Address(host='127.0.0.1', port=36518), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 00:37:40,415 - INFO - Sender task for Address(host='127.0.0.1', port=36518) finished.
2025-05-27 00:37:40,415 - INFO - Initiating cleanup for connection: 127.0.0.1:36518
2025-05-27 00:37:40,415 - INFO - Starting cleanup for 127.0.0.1:36518
2025-05-27 00:37:40,415 - INFO - Connection cleanup completed for 127.0.0.1:36518. Remaining connections: 1
2025-05-27 00:37:40,415 - INFO - Cleanup finished for connection: 127.0.0.1:36518. Total connections: 1
2025-05-27 00:37:40,416 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-27 00:37:40,416 - INFO - Starting cleanup for Address(host='127.0.0.1', port=36518)
2025-05-27 00:37:40,416 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=36518). Remaining connections: 1
2025-05-27 00:37:41,063 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=36526): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 00:37:41,063 - INFO - Receiver task for Address(host='127.0.0.1', port=36526) finished.
2025-05-27 00:37:41,091 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=36542)
2025-05-27 00:37:41,091 - INFO - Adding connection: 127.0.0.1:36542. Total connections: 2
2025-05-27 00:37:41,091 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=36542)
2025-05-27 00:37:41,091 - INFO - Sender task started for Address(host='127.0.0.1', port=36542)
2025-05-27 00:37:41,092 - INFO - Receiver task started for Address(host='127.0.0.1', port=36542)
2025-05-27 00:37:41,093 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=36542)
2025-05-27 00:37:41,093 - WARNING - Failed to send message to Address(host='127.0.0.1', port=36526), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 00:37:41,093 - INFO - Sender task for Address(host='127.0.0.1', port=36526) finished.
2025-05-27 00:37:41,093 - INFO - Initiating cleanup for connection: 127.0.0.1:36526
2025-05-27 00:37:41,093 - INFO - Starting cleanup for 127.0.0.1:36526
2025-05-27 00:37:41,093 - INFO - Connection cleanup completed for 127.0.0.1:36526. Remaining connections: 1
2025-05-27 00:37:41,093 - INFO - Cleanup finished for connection: 127.0.0.1:36526. Total connections: 1
2025-05-27 00:37:41,093 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-27 00:37:41,093 - INFO - Starting cleanup for Address(host='127.0.0.1', port=36526)
2025-05-27 00:37:41,093 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=36526). Remaining connections: 1
2025-05-27 00:37:41,955 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=36542)
2025-05-27 00:37:42,983 - INFO - Initiating simulation start
2025-05-27 00:37:42,983 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-27 00:37:42,984 - INFO - Simulation task starting
2025-05-27 00:37:42,984 - INFO - System message enqueued to backend queue
2025-05-27 00:37:42,985 - INFO - Processed 5 messages
2025-05-27 00:37:44,073 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=36542): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 00:37:44,073 - INFO - Receiver task for Address(host='127.0.0.1', port=36542) finished.
2025-05-27 00:37:44,097 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=44954)
2025-05-27 00:37:44,097 - INFO - Adding connection: 127.0.0.1:44954. Total connections: 2
2025-05-27 00:37:44,097 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=44954)
2025-05-27 00:37:44,097 - INFO - Sender task started for Address(host='127.0.0.1', port=44954)
2025-05-27 00:37:44,097 - INFO - Receiver task started for Address(host='127.0.0.1', port=44954)
2025-05-27 00:37:44,099 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=44954)
2025-05-27 00:37:44,099 - WARNING - Failed to send message to Address(host='127.0.0.1', port=36542), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 00:37:44,099 - INFO - Sender task for Address(host='127.0.0.1', port=36542) finished.
2025-05-27 00:37:44,099 - INFO - Initiating cleanup for connection: 127.0.0.1:36542
2025-05-27 00:37:44,099 - INFO - Starting cleanup for 127.0.0.1:36542
2025-05-27 00:37:44,099 - INFO - Connection cleanup completed for 127.0.0.1:36542. Remaining connections: 1
2025-05-27 00:37:44,099 - INFO - Cleanup finished for connection: 127.0.0.1:36542. Total connections: 1
2025-05-27 00:37:44,100 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-27 00:37:44,100 - INFO - Starting cleanup for Address(host='127.0.0.1', port=36542)
2025-05-27 00:37:44,100 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=36542). Remaining connections: 1
2025-05-27 00:37:44,698 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=44954): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 00:37:44,698 - INFO - Receiver task for Address(host='127.0.0.1', port=44954) finished.
2025-05-27 00:37:44,725 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=44968)
2025-05-27 00:37:44,725 - INFO - Adding connection: 127.0.0.1:44968. Total connections: 2
2025-05-27 00:37:44,725 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=44968)
2025-05-27 00:37:44,725 - INFO - Sender task started for Address(host='127.0.0.1', port=44968)
2025-05-27 00:37:44,725 - INFO - Receiver task started for Address(host='127.0.0.1', port=44968)
2025-05-27 00:37:44,726 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=44968)
2025-05-27 00:37:44,727 - WARNING - Failed to send message to Address(host='127.0.0.1', port=44954), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 00:37:44,727 - INFO - Sender task for Address(host='127.0.0.1', port=44954) finished.
2025-05-27 00:37:44,727 - INFO - Initiating cleanup for connection: 127.0.0.1:44954
2025-05-27 00:37:44,727 - INFO - Starting cleanup for 127.0.0.1:44954
2025-05-27 00:37:44,727 - INFO - Connection cleanup completed for 127.0.0.1:44954. Remaining connections: 1
2025-05-27 00:37:44,727 - INFO - Cleanup finished for connection: 127.0.0.1:44954. Total connections: 1
2025-05-27 00:37:44,727 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-27 00:37:44,727 - INFO - Starting cleanup for Address(host='127.0.0.1', port=44954)
2025-05-27 00:37:44,727 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=44954). Remaining connections: 1
2025-05-27 00:37:45,147 - INFO - Initiating simulation start
2025-05-27 00:37:45,147 - INFO - Simulation started successfully: {'status': 'already running'}
2025-05-27 00:37:45,817 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=44968)
2025-05-27 00:37:48,505 - INFO - Processed 6 messages
2025-05-27 00:37:50,066 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=44968): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 00:37:50,067 - INFO - Receiver task for Address(host='127.0.0.1', port=44968) finished.
2025-05-27 00:37:50,168 - INFO - Application shutdown event triggered.
2025-05-27 00:37:50,168 - INFO - SimulationManager stopped.
2025-05-27 00:37:50,168 - INFO - Stopping MessageProcessor...
2025-05-27 00:37:50,168 - INFO - Sender task for Address(host='127.0.0.1', port=44968) was cancelled.
2025-05-27 00:37:50,171 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 00:37:50,171 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 00:37:50,171 - INFO - All WebSocket connections attempted to close.
2025-05-27 00:37:50,171 - INFO - Application shutdown complete.
2025-05-27 00:37:50,172 - INFO - Initiating cleanup for connection: 127.0.0.1:44968
2025-05-27 00:37:50,172 - INFO - Starting cleanup for 127.0.0.1:44968
2025-05-27 00:37:50,172 - INFO - Connection cleanup completed for 127.0.0.1:44968. Remaining connections: 0
2025-05-27 00:37:50,172 - INFO - Cleanup finished for connection: 127.0.0.1:44968. Total connections: 0
2025-05-27 00:37:50,172 - INFO - Starting cleanup for Address(host='127.0.0.1', port=44968)
2025-05-27 00:37:50,172 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=44968). Remaining connections: 0
2025-05-27 00:39:07,464 - INFO - Application startup event triggered.
2025-05-27 00:39:07,464 - INFO - Initializing all queues...
2025-05-27 00:39:07,464 - INFO - All queues initialized on loop 1087278624
2025-05-27 00:39:07,464 - INFO - Shared queues initialized.
2025-05-27 00:39:07,464 - INFO - Retrieved queue instances. Event loop ID: 1087278624
2025-05-27 00:39:07,464 - INFO - SimulationManager ready state set to: True
2025-05-27 00:39:07,464 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 00:39:07,464 - INFO - MessageProcessor queues verified
2025-05-27 00:39:07,464 - INFO - MessageProcessor task started.
2025-05-27 00:39:07,464 - INFO - QueueForwarder queues verified
2025-05-27 00:39:07,464 - INFO - QueueForwarder task started.
2025-05-27 00:39:07,464 - INFO - Application startup complete. All core services initialized.
2025-05-27 00:39:07,464 - INFO - Starting MessageProcessor
2025-05-27 00:39:07,464 - INFO - Starting QueueForwarder
2025-05-27 00:39:09,213 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=38178)
2025-05-27 00:39:09,213 - INFO - Adding connection: 127.0.0.1:38178. Total connections: 1
2025-05-27 00:39:09,213 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=38178)
2025-05-27 00:39:09,213 - INFO - Sender task started for Address(host='127.0.0.1', port=38178)
2025-05-27 00:39:09,213 - INFO - Receiver task started for Address(host='127.0.0.1', port=38178)
2025-05-27 00:39:09,218 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=38178)
2025-05-27 00:39:11,088 - INFO - Initiating simulation start
2025-05-27 00:39:11,088 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-27 00:39:11,089 - INFO - Simulation task starting
2025-05-27 00:39:11,089 - INFO - System message enqueued to backend queue
2025-05-27 00:39:13,346 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=38178)
2025-05-27 00:39:13,346 - INFO - Processed 4 messages
2025-05-27 00:39:19,437 - INFO - Processed 3 messages
2025-05-27 00:39:22,547 - WARNING - Messages not being forwarded to frontend
2025-05-27 00:39:26,167 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=38178): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 00:39:26,167 - INFO - Receiver task for Address(host='127.0.0.1', port=38178) finished.
2025-05-27 00:39:26,361 - INFO - Processed 3 messages
2025-05-27 00:39:26,361 - WARNING - Failed to send message to Address(host='127.0.0.1', port=38178), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 00:39:26,361 - INFO - Sender task for Address(host='127.0.0.1', port=38178) finished.
2025-05-27 00:39:26,362 - INFO - Initiating cleanup for connection: 127.0.0.1:38178
2025-05-27 00:39:26,362 - INFO - Starting cleanup for 127.0.0.1:38178
2025-05-27 00:39:26,362 - INFO - Connection cleanup completed for 127.0.0.1:38178. Remaining connections: 0
2025-05-27 00:39:26,362 - INFO - Cleanup finished for connection: 127.0.0.1:38178. Total connections: 0
2025-05-27 00:39:26,362 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-27 00:39:26,362 - INFO - Starting cleanup for Address(host='127.0.0.1', port=38178)
2025-05-27 00:39:26,362 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=38178). Remaining connections: 0
2025-05-27 00:39:27,631 - INFO - Application shutdown event triggered.
2025-05-27 00:39:27,632 - INFO - SimulationManager stopped.
2025-05-27 00:39:27,632 - INFO - Stopping MessageProcessor...
2025-05-27 00:39:27,634 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 00:39:27,635 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 00:39:27,635 - INFO - All WebSocket connections attempted to close.
2025-05-27 00:39:27,635 - INFO - Application shutdown complete.
2025-05-27 00:48:55,572 - INFO - Application startup event triggered.
2025-05-27 00:48:55,572 - INFO - Initializing all queues...
2025-05-27 00:48:55,572 - INFO - All queues initialized on loop 737357344
2025-05-27 00:48:55,572 - INFO - Shared queues initialized.
2025-05-27 00:48:55,572 - INFO - Retrieved queue instances. Event loop ID: 737357344
2025-05-27 00:48:55,572 - INFO - SimulationManager ready state set to: True
2025-05-27 00:48:55,572 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 00:48:55,572 - INFO - MessageProcessor queues verified
2025-05-27 00:48:55,572 - INFO - MessageProcessor task started.
2025-05-27 00:48:55,572 - INFO - QueueForwarder queues verified
2025-05-27 00:48:55,573 - INFO - QueueForwarder task started.
2025-05-27 00:48:55,573 - INFO - Application startup complete. All core services initialized.
2025-05-27 00:48:55,573 - INFO - Starting MessageProcessor
2025-05-27 00:48:55,573 - INFO - Starting QueueForwarder
2025-05-27 00:52:07,439 - INFO - Application shutdown event triggered.
2025-05-27 00:52:07,439 - INFO - Stopping MessageProcessor...
2025-05-27 00:52:07,440 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 00:52:07,440 - INFO - QueueForwarder task cancelled.
2025-05-27 00:52:07,440 - INFO - All WebSocket connections attempted to close.
2025-05-27 00:52:07,440 - INFO - Application shutdown complete.
2025-05-27 00:52:07,839 - INFO - Application startup event triggered.
2025-05-27 00:52:07,840 - INFO - Initializing all queues...
2025-05-27 00:52:07,840 - INFO - All queues initialized on loop 628469968
2025-05-27 00:52:07,840 - INFO - Shared queues initialized.
2025-05-27 00:52:07,840 - INFO - Retrieved queue instances. Event loop ID: 628469968
2025-05-27 00:52:07,840 - INFO - SimulationManager ready state set to: True
2025-05-27 00:52:07,840 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 00:52:07,840 - INFO - MessageProcessor queues verified
2025-05-27 00:52:07,840 - INFO - MessageProcessor task started.
2025-05-27 00:52:07,840 - INFO - QueueForwarder queues verified
2025-05-27 00:52:07,840 - INFO - QueueForwarder task started.
2025-05-27 00:52:07,840 - INFO - Application startup complete. All core services initialized.
2025-05-27 00:52:07,840 - INFO - Starting MessageProcessor
2025-05-27 00:52:07,840 - INFO - Starting QueueForwarder
2025-05-27 00:52:28,085 - INFO - Application shutdown event triggered.
2025-05-27 00:52:28,086 - INFO - Stopping MessageProcessor...
2025-05-27 00:52:28,086 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 00:52:28,086 - INFO - QueueForwarder task cancelled.
2025-05-27 00:52:28,086 - INFO - All WebSocket connections attempted to close.
2025-05-27 00:52:28,086 - INFO - Application shutdown complete.
2025-05-27 00:52:28,483 - INFO - Application startup event triggered.
2025-05-27 00:52:28,483 - INFO - Initializing all queues...
2025-05-27 00:52:28,483 - INFO - All queues initialized on loop 819732688
2025-05-27 00:52:28,483 - INFO - Shared queues initialized.
2025-05-27 00:52:28,483 - INFO - Retrieved queue instances. Event loop ID: 819732688
2025-05-27 00:52:28,483 - INFO - SimulationManager ready state set to: True
2025-05-27 00:52:28,483 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 00:52:28,483 - INFO - MessageProcessor queues verified
2025-05-27 00:52:28,483 - INFO - MessageProcessor task started.
2025-05-27 00:52:28,483 - INFO - QueueForwarder queues verified
2025-05-27 00:52:28,483 - INFO - QueueForwarder task started.
2025-05-27 00:52:28,484 - INFO - Application startup complete. All core services initialized.
2025-05-27 00:52:28,484 - INFO - Starting MessageProcessor
2025-05-27 00:52:28,484 - INFO - Starting QueueForwarder
2025-05-27 00:54:46,421 - INFO - Application shutdown event triggered.
2025-05-27 00:54:46,421 - INFO - Stopping MessageProcessor...
2025-05-27 00:54:46,421 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 00:54:46,422 - INFO - QueueForwarder task cancelled.
2025-05-27 00:54:46,422 - INFO - All WebSocket connections attempted to close.
2025-05-27 00:54:46,422 - INFO - Application shutdown complete.
2025-05-27 00:54:49,158 - INFO - Application startup event triggered.
2025-05-27 00:54:49,158 - INFO - Initializing all queues...
2025-05-27 00:54:49,159 - INFO - All queues initialized on loop 152907296
2025-05-27 00:54:49,159 - INFO - Shared queues initialized.
2025-05-27 00:54:49,159 - INFO - Retrieved queue instances. Event loop ID: 152907296
2025-05-27 00:54:49,159 - INFO - SimulationManager ready state set to: True
2025-05-27 00:54:49,159 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 00:54:49,159 - INFO - MessageProcessor queues verified
2025-05-27 00:54:49,159 - INFO - MessageProcessor task started.
2025-05-27 00:54:49,159 - INFO - QueueForwarder queues verified
2025-05-27 00:54:49,159 - INFO - QueueForwarder task started.
2025-05-27 00:54:49,159 - INFO - Application startup complete. All core services initialized.
2025-05-27 00:54:49,159 - INFO - Starting MessageProcessor
2025-05-27 00:54:49,159 - INFO - Starting QueueForwarder
2025-05-27 00:55:56,920 - INFO - Application shutdown event triggered.
2025-05-27 00:55:56,921 - INFO - Stopping MessageProcessor...
2025-05-27 00:55:56,921 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 00:55:56,921 - INFO - All WebSocket connections attempted to close.
2025-05-27 00:55:56,921 - INFO - Application shutdown complete.
2025-05-27 00:55:58,802 - INFO - Application startup event triggered.
2025-05-27 00:55:58,802 - INFO - Initializing all queues...
2025-05-27 00:55:58,802 - INFO - All queues initialized on loop 72252960
2025-05-27 00:55:58,802 - INFO - Shared queues initialized.
2025-05-27 00:55:58,802 - INFO - Retrieved queue instances. Event loop ID: 72252960
2025-05-27 00:55:58,802 - INFO - SimulationManager ready state set to: True
2025-05-27 00:55:58,802 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 00:55:58,802 - INFO - MessageProcessor queues verified
2025-05-27 00:55:58,802 - INFO - MessageProcessor task started.
2025-05-27 00:55:58,802 - INFO - QueueForwarder queues verified
2025-05-27 00:55:58,803 - INFO - QueueForwarder task started.
2025-05-27 00:55:58,803 - INFO - Application startup complete. All core services initialized.
2025-05-27 00:55:58,803 - INFO - Starting MessageProcessor
2025-05-27 00:55:58,803 - INFO - Starting QueueForwarder
2025-05-27 00:57:04,864 - INFO - Application shutdown event triggered.
2025-05-27 00:57:04,865 - INFO - Stopping MessageProcessor...
2025-05-27 00:57:04,865 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 00:57:04,865 - INFO - All WebSocket connections attempted to close.
2025-05-27 00:57:04,865 - INFO - Application shutdown complete.
2025-05-27 00:57:09,717 - INFO - Application startup event triggered.
2025-05-27 00:57:09,718 - INFO - Initializing all queues...
2025-05-27 00:57:09,718 - INFO - All queues initialized on loop 215572000
2025-05-27 00:57:09,718 - INFO - Shared queues initialized.
2025-05-27 00:57:09,718 - INFO - Retrieved queue instances. Event loop ID: 215572000
2025-05-27 00:57:09,718 - INFO - SimulationManager ready state set to: True
2025-05-27 00:57:09,718 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 00:57:09,718 - INFO - MessageProcessor queues verified
2025-05-27 00:57:09,718 - INFO - MessageProcessor task started.
2025-05-27 00:57:09,718 - INFO - QueueForwarder queues verified
2025-05-27 00:57:09,718 - INFO - QueueForwarder task started.
2025-05-27 00:57:09,718 - INFO - Application startup complete. All core services initialized.
2025-05-27 00:57:09,718 - INFO - Starting MessageProcessor
2025-05-27 00:57:09,718 - INFO - Starting QueueForwarder
2025-05-27 00:57:44,302 - INFO - Application shutdown event triggered.
2025-05-27 00:57:44,303 - INFO - Stopping MessageProcessor...
2025-05-27 00:57:44,303 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 00:57:44,303 - INFO - QueueForwarder task cancelled.
2025-05-27 00:57:44,303 - INFO - All WebSocket connections attempted to close.
2025-05-27 00:57:44,303 - INFO - Application shutdown complete.
2025-05-27 00:57:49,820 - INFO - Application startup event triggered.
2025-05-27 00:57:49,820 - INFO - Initializing all queues...
2025-05-27 00:57:49,820 - INFO - All queues initialized on loop 1053384224
2025-05-27 00:57:49,820 - INFO - Shared queues initialized.
2025-05-27 00:57:49,820 - INFO - Retrieved queue instances. Event loop ID: 1053384224
2025-05-27 00:57:49,820 - INFO - SimulationManager ready state set to: True
2025-05-27 00:57:49,820 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 00:57:49,820 - INFO - MessageProcessor queues verified
2025-05-27 00:57:49,820 - INFO - MessageProcessor task started.
2025-05-27 00:57:49,821 - INFO - QueueForwarder queues verified
2025-05-27 00:57:49,821 - INFO - QueueForwarder task started.
2025-05-27 00:57:49,821 - INFO - Application startup complete. All core services initialized.
2025-05-27 00:57:49,821 - INFO - Starting MessageProcessor
2025-05-27 00:57:49,821 - INFO - Starting QueueForwarder
2025-05-27 00:58:26,914 - INFO - Application shutdown event triggered.
2025-05-27 00:58:26,914 - INFO - Stopping MessageProcessor...
2025-05-27 00:58:26,914 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 00:58:26,915 - INFO - QueueForwarder task cancelled.
2025-05-27 00:58:26,915 - INFO - All WebSocket connections attempted to close.
2025-05-27 00:58:26,915 - INFO - Application shutdown complete.
2025-05-27 01:00:00,478 - INFO - Application startup event triggered.
2025-05-27 01:00:00,478 - INFO - Initializing all queues...
2025-05-27 01:00:00,478 - INFO - All queues initialized on loop 158604832
2025-05-27 01:00:00,478 - INFO - Shared queues initialized.
2025-05-27 01:00:00,478 - INFO - Retrieved queue instances. Event loop ID: 158604832
2025-05-27 01:00:00,478 - INFO - SimulationManager ready state set to: True
2025-05-27 01:00:00,478 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:00:00,479 - INFO - MessageProcessor queues verified
2025-05-27 01:00:00,479 - INFO - MessageProcessor task started.
2025-05-27 01:00:00,479 - INFO - QueueForwarder queues verified
2025-05-27 01:00:00,479 - INFO - QueueForwarder task started.
2025-05-27 01:00:00,479 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:00:00,479 - INFO - Starting MessageProcessor
2025-05-27 01:00:00,479 - INFO - Starting QueueForwarder
2025-05-27 01:05:16,024 - INFO - Application shutdown event triggered.
2025-05-27 01:05:16,024 - INFO - Stopping MessageProcessor...
2025-05-27 01:05:16,024 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 01:05:16,024 - INFO - QueueForwarder task cancelled.
2025-05-27 01:05:16,024 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:05:16,024 - INFO - Application shutdown complete.
2025-05-27 01:05:17,830 - INFO - Application startup event triggered.
2025-05-27 01:05:17,831 - INFO - Initializing all queues...
2025-05-27 01:05:17,831 - INFO - All queues initialized on loop 574352928
2025-05-27 01:05:17,831 - INFO - Shared queues initialized.
2025-05-27 01:05:17,831 - INFO - Retrieved queue instances. Event loop ID: 574352928
2025-05-27 01:05:17,831 - INFO - SimulationManager ready state set to: True
2025-05-27 01:05:17,831 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:05:17,831 - INFO - MessageProcessor queues verified
2025-05-27 01:05:17,831 - INFO - MessageProcessor task started.
2025-05-27 01:05:17,831 - INFO - QueueForwarder queues verified
2025-05-27 01:05:17,831 - INFO - QueueForwarder task started.
2025-05-27 01:05:17,831 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:05:17,831 - INFO - Starting MessageProcessor
2025-05-27 01:05:17,831 - INFO - Starting QueueForwarder
2025-05-27 01:06:32,327 - INFO - Application shutdown event triggered.
2025-05-27 01:06:32,327 - INFO - Stopping MessageProcessor...
2025-05-27 01:06:32,327 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 01:06:32,328 - INFO - QueueForwarder task cancelled.
2025-05-27 01:06:32,328 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:06:32,328 - INFO - Application shutdown complete.
2025-05-27 01:06:34,228 - INFO - Application startup event triggered.
2025-05-27 01:06:34,228 - INFO - Initializing all queues...
2025-05-27 01:06:34,228 - INFO - All queues initialized on loop 699932192
2025-05-27 01:06:34,228 - INFO - Shared queues initialized.
2025-05-27 01:06:34,228 - INFO - Retrieved queue instances. Event loop ID: 699932192
2025-05-27 01:06:34,228 - INFO - SimulationManager ready state set to: True
2025-05-27 01:06:34,228 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:06:34,228 - INFO - MessageProcessor queues verified
2025-05-27 01:06:34,228 - INFO - MessageProcessor task started.
2025-05-27 01:06:34,228 - INFO - QueueForwarder queues verified
2025-05-27 01:06:34,228 - INFO - QueueForwarder task started.
2025-05-27 01:06:34,229 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:06:34,229 - INFO - Starting MessageProcessor
2025-05-27 01:06:34,229 - INFO - Starting QueueForwarder
2025-05-27 01:07:27,549 - INFO - Application shutdown event triggered.
2025-05-27 01:07:27,549 - INFO - Stopping MessageProcessor...
2025-05-27 01:07:27,549 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 01:07:27,549 - INFO - QueueForwarder task cancelled.
2025-05-27 01:07:27,549 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:07:27,549 - INFO - Application shutdown complete.
2025-05-27 01:07:32,812 - INFO - Application startup event triggered.
2025-05-27 01:07:32,813 - INFO - Initializing all queues...
2025-05-27 01:07:32,813 - INFO - All queues initialized on loop 750591520
2025-05-27 01:07:32,813 - INFO - Shared queues initialized.
2025-05-27 01:07:32,813 - INFO - Retrieved queue instances. Event loop ID: 750591520
2025-05-27 01:07:32,813 - INFO - SimulationManager ready state set to: True
2025-05-27 01:07:32,813 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:07:32,813 - INFO - MessageProcessor queues verified
2025-05-27 01:07:32,813 - INFO - MessageProcessor task started.
2025-05-27 01:07:32,813 - INFO - QueueForwarder queues verified
2025-05-27 01:07:32,813 - INFO - QueueForwarder task started.
2025-05-27 01:07:32,813 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:07:32,813 - INFO - Starting MessageProcessor
2025-05-27 01:07:32,813 - INFO - Starting QueueForwarder
2025-05-27 01:07:42,140 - INFO - Application shutdown event triggered.
2025-05-27 01:07:42,141 - INFO - Stopping MessageProcessor...
2025-05-27 01:07:42,141 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 01:07:42,141 - INFO - QueueForwarder task cancelled.
2025-05-27 01:07:42,141 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:07:42,141 - INFO - Application shutdown complete.
2025-05-27 01:08:53,307 - INFO - Application startup event triggered.
2025-05-27 01:08:53,308 - INFO - Initializing all queues...
2025-05-27 01:08:53,308 - INFO - All queues initialized on loop 895614496
2025-05-27 01:08:53,308 - INFO - Shared queues initialized.
2025-05-27 01:08:53,308 - INFO - Retrieved queue instances. Event loop ID: 895614496
2025-05-27 01:08:53,308 - INFO - SimulationManager ready state set to: True
2025-05-27 01:08:53,308 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:08:53,308 - INFO - MessageProcessor queues verified
2025-05-27 01:08:53,308 - INFO - MessageProcessor task started.
2025-05-27 01:08:53,308 - INFO - QueueForwarder queues verified
2025-05-27 01:08:53,308 - INFO - QueueForwarder task started.
2025-05-27 01:08:53,308 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:08:53,308 - INFO - Starting MessageProcessor
2025-05-27 01:08:53,308 - INFO - Starting QueueForwarder
2025-05-27 01:09:22,301 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54094)
2025-05-27 01:09:22,301 - INFO - Adding connection: 127.0.0.1:54094. Total connections: 1
2025-05-27 01:09:22,303 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=54094)
2025-05-27 01:09:22,303 - INFO - Sender task started for Address(host='127.0.0.1', port=54094)
2025-05-27 01:09:22,303 - INFO - Receiver task started for Address(host='127.0.0.1', port=54094)
2025-05-27 01:09:22,312 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=54094)
2025-05-27 01:09:22,313 - INFO - Processed 1 messages
2025-05-27 01:09:25,143 - INFO - Initiating simulation start
2025-05-27 01:09:25,144 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-27 01:09:25,144 - INFO - Simulation task starting
2025-05-27 01:09:25,144 - INFO - System message enqueued to backend queue
2025-05-27 01:09:28,847 - INFO - Processed 3 messages
2025-05-27 01:09:36,136 - INFO - Processed 3 messages
2025-05-27 01:09:37,985 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:09:41,454 - INFO - Processed 2 messages
2025-05-27 01:09:47,312 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=54094)
2025-05-27 01:09:47,313 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=54094): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 01:09:47,313 - INFO - Receiver task for Address(host='127.0.0.1', port=54094) finished.
2025-05-27 01:09:48,323 - INFO - Processed 3 messages
2025-05-27 01:09:49,179 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:09:54,922 - INFO - Processed 3 messages
2025-05-27 01:10:00,043 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:10:01,043 - INFO - Processed 3 messages
2025-05-27 01:10:07,137 - INFO - Processed 3 messages
2025-05-27 01:10:10,610 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:10:12,314 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=60520)
2025-05-27 01:10:12,315 - INFO - Adding connection: 127.0.0.1:60520. Total connections: 2
2025-05-27 01:10:12,316 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=60520)
2025-05-27 01:10:12,316 - INFO - Sender task started for Address(host='127.0.0.1', port=60520)
2025-05-27 01:10:12,316 - INFO - Receiver task started for Address(host='127.0.0.1', port=60520)
2025-05-27 01:10:12,318 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=60520)
2025-05-27 01:10:12,318 - INFO - Processed 3 messages
2025-05-27 01:10:12,319 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=54094): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 01:10:12,321 - INFO - Sender task for Address(host='127.0.0.1', port=54094) finished.
2025-05-27 01:10:12,322 - INFO - Initiating cleanup for connection: 127.0.0.1:54094
2025-05-27 01:10:12,322 - INFO - Starting cleanup for 127.0.0.1:54094
2025-05-27 01:10:12,322 - INFO - Closed WebSocket connection for 127.0.0.1:54094
2025-05-27 01:10:12,322 - INFO - Connection cleanup completed for 127.0.0.1:54094. Remaining connections: 1
2025-05-27 01:10:12,322 - INFO - Cleanup finished for connection: 127.0.0.1:54094. Total connections: 1
2025-05-27 01:10:12,322 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 01:10:12,322 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 01:10:18,630 - INFO - Processed 3 messages
2025-05-27 01:10:21,843 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:10:24,810 - INFO - Processed 3 messages
2025-05-27 01:10:30,368 - INFO - Processed 2 messages
2025-05-27 01:10:34,180 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:10:37,319 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=60520)
2025-05-27 01:10:37,319 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=60520): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 01:10:37,319 - INFO - Receiver task for Address(host='127.0.0.1', port=60520) finished.
2025-05-27 01:10:37,653 - INFO - Processed 3 messages
2025-05-27 01:10:44,203 - INFO - Processed 3 messages
2025-05-27 01:10:45,403 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:10:49,341 - INFO - Processed 2 messages
2025-05-27 01:10:55,444 - INFO - Processed 3 messages
2025-05-27 01:10:57,081 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:11:00,668 - INFO - Processed 2 messages
2025-05-27 01:11:02,320 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=47976)
2025-05-27 01:11:02,320 - INFO - Adding connection: 127.0.0.1:47976. Total connections: 2
2025-05-27 01:11:02,321 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=47976)
2025-05-27 01:11:02,321 - INFO - Sender task started for Address(host='127.0.0.1', port=47976)
2025-05-27 01:11:02,321 - INFO - Receiver task started for Address(host='127.0.0.1', port=47976)
2025-05-27 01:11:02,322 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=47976)
2025-05-27 01:11:02,323 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=60520): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 01:11:02,323 - INFO - Sender task for Address(host='127.0.0.1', port=60520) finished.
2025-05-27 01:11:02,324 - INFO - Initiating cleanup for connection: 127.0.0.1:60520
2025-05-27 01:11:02,324 - INFO - Starting cleanup for 127.0.0.1:60520
2025-05-27 01:11:02,324 - INFO - Closed WebSocket connection for 127.0.0.1:60520
2025-05-27 01:11:02,324 - INFO - Connection cleanup completed for 127.0.0.1:60520. Remaining connections: 1
2025-05-27 01:11:02,324 - INFO - Cleanup finished for connection: 127.0.0.1:60520. Total connections: 1
2025-05-27 01:11:02,324 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 01:11:02,324 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 01:11:05,981 - INFO - Processed 3 messages
2025-05-27 01:11:09,134 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:11:11,788 - INFO - Processed 3 messages
2025-05-27 01:11:16,809 - INFO - Processed 2 messages
2025-05-27 01:11:19,607 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:11:23,360 - INFO - Processed 3 messages
2025-05-27 01:11:27,323 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=47976)
2025-05-27 01:11:27,323 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=47976): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 01:11:27,323 - INFO - Receiver task for Address(host='127.0.0.1', port=47976) finished.
2025-05-27 01:11:29,431 - INFO - Processed 3 messages
2025-05-27 01:11:29,549 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=44108)
2025-05-27 01:11:29,549 - INFO - Adding connection: 127.0.0.1:44108. Total connections: 2
2025-05-27 01:11:29,549 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=44108)
2025-05-27 01:11:29,550 - INFO - Sender task started for Address(host='127.0.0.1', port=44108)
2025-05-27 01:11:29,550 - INFO - Receiver task started for Address(host='127.0.0.1', port=44108)
2025-05-27 01:11:29,558 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=44108)
2025-05-27 01:11:29,558 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=47976): received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2025-05-27 01:11:29,559 - INFO - Sender task for Address(host='127.0.0.1', port=47976) finished.
2025-05-27 01:11:29,560 - INFO - Initiating cleanup for connection: 127.0.0.1:47976
2025-05-27 01:11:29,560 - INFO - Starting cleanup for 127.0.0.1:47976
2025-05-27 01:11:29,560 - INFO - Closed WebSocket connection for 127.0.0.1:47976
2025-05-27 01:11:29,560 - INFO - Connection cleanup completed for 127.0.0.1:47976. Remaining connections: 1
2025-05-27 01:11:29,560 - INFO - Cleanup finished for connection: 127.0.0.1:47976. Total connections: 1
2025-05-27 01:11:29,560 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 01:11:29,560 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 01:11:30,499 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:11:35,766 - INFO - Processed 4 messages
2025-05-27 01:11:41,518 - INFO - Processed 2 messages
2025-05-27 01:11:42,084 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:11:43,345 - INFO - Initiating simulation start
2025-05-27 01:11:43,345 - INFO - Simulation started successfully: {'status': 'already running'}
2025-05-27 01:11:44,411 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=44108)
2025-05-27 01:11:48,502 - INFO - Processed 4 messages
2025-05-27 01:11:50,623 - INFO - Initiating simulation start
2025-05-27 01:11:50,623 - INFO - Simulation started successfully: {'status': 'already running'}
2025-05-27 01:11:54,997 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:11:55,319 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=44108)
2025-05-27 01:11:55,319 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=44108): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 01:11:55,320 - INFO - Receiver task for Address(host='127.0.0.1', port=44108) finished.
2025-05-27 01:11:55,997 - INFO - Processed 3 messages
2025-05-27 01:12:00,821 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=44108): received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2025-05-27 01:12:00,821 - INFO - Sender task for Address(host='127.0.0.1', port=44108) finished.
2025-05-27 01:12:00,821 - INFO - Initiating cleanup for connection: 127.0.0.1:44108
2025-05-27 01:12:00,821 - INFO - Starting cleanup for 127.0.0.1:44108
2025-05-27 01:12:00,822 - INFO - Closed WebSocket connection for 127.0.0.1:44108
2025-05-27 01:12:00,822 - INFO - Connection cleanup completed for 127.0.0.1:44108. Remaining connections: 0
2025-05-27 01:12:00,822 - INFO - Cleanup finished for connection: 127.0.0.1:44108. Total connections: 0
2025-05-27 01:12:00,822 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 01:12:00,822 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 01:12:03,036 - INFO - Application shutdown event triggered.
2025-05-27 01:12:03,036 - INFO - SimulationManager stopped.
2025-05-27 01:12:03,036 - INFO - Stopping MessageProcessor...
2025-05-27 01:12:03,038 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 01:12:03,038 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 01:12:03,038 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:12:03,038 - INFO - Application shutdown complete.
2025-05-27 01:12:33,181 - INFO - Application startup event triggered.
2025-05-27 01:12:33,181 - INFO - Initializing all queues...
2025-05-27 01:12:33,181 - INFO - All queues initialized on loop 100580896
2025-05-27 01:12:33,181 - INFO - Shared queues initialized.
2025-05-27 01:12:33,181 - INFO - Retrieved queue instances. Event loop ID: 100580896
2025-05-27 01:12:33,181 - INFO - SimulationManager ready state set to: True
2025-05-27 01:12:33,181 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:12:33,181 - INFO - MessageProcessor queues verified
2025-05-27 01:12:33,181 - INFO - MessageProcessor task started.
2025-05-27 01:12:33,181 - INFO - QueueForwarder queues verified
2025-05-27 01:12:33,181 - INFO - QueueForwarder task started.
2025-05-27 01:12:33,181 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:12:33,181 - INFO - Starting MessageProcessor
2025-05-27 01:12:33,181 - INFO - Starting QueueForwarder
2025-05-27 01:12:34,903 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=44334)
2025-05-27 01:12:34,903 - INFO - Adding connection: 127.0.0.1:44334. Total connections: 1
2025-05-27 01:12:34,904 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=44334)
2025-05-27 01:12:34,904 - INFO - Sender task started for Address(host='127.0.0.1', port=44334)
2025-05-27 01:12:34,904 - INFO - Receiver task started for Address(host='127.0.0.1', port=44334)
2025-05-27 01:12:34,906 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=44334)
2025-05-27 01:12:35,965 - INFO - Initiating simulation start
2025-05-27 01:12:35,965 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-27 01:12:35,965 - INFO - Simulation task starting
2025-05-27 01:12:35,966 - INFO - System message enqueued to backend queue
2025-05-27 01:12:38,014 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=44334)
2025-05-27 01:12:38,550 - INFO - Processed 5 messages
2025-05-27 01:12:39,212 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=44334)
2025-05-27 01:12:44,933 - INFO - Processed 4 messages
2025-05-27 01:12:45,685 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:12:50,358 - INFO - Processed 3 messages
2025-05-27 01:12:51,135 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=44334): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 01:12:51,136 - INFO - Receiver task for Address(host='127.0.0.1', port=44334) finished.
2025-05-27 01:12:51,236 - INFO - Application shutdown event triggered.
2025-05-27 01:12:51,237 - INFO - SimulationManager stopped.
2025-05-27 01:12:51,237 - INFO - Stopping MessageProcessor...
2025-05-27 01:12:51,237 - INFO - Sender task for Address(host='127.0.0.1', port=44334) was cancelled.
2025-05-27 01:12:51,240 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 01:12:51,240 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 01:12:51,240 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:12:51,240 - INFO - Application shutdown complete.
2025-05-27 01:12:51,241 - INFO - Initiating cleanup for connection: 127.0.0.1:44334
2025-05-27 01:12:51,241 - INFO - Starting cleanup for 127.0.0.1:44334
2025-05-27 01:12:51,241 - INFO - Connection cleanup completed for 127.0.0.1:44334. Remaining connections: 0
2025-05-27 01:12:51,241 - INFO - Cleanup finished for connection: 127.0.0.1:44334. Total connections: 0
2025-05-27 01:12:51,241 - INFO - Starting cleanup for Address(host='127.0.0.1', port=44334)
2025-05-27 01:12:51,241 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=44334). Remaining connections: 0
2025-05-27 01:14:32,629 - INFO - Application startup event triggered.
2025-05-27 01:14:32,629 - INFO - Initializing all queues...
2025-05-27 01:14:32,629 - INFO - All queues initialized on loop 57921056
2025-05-27 01:14:32,629 - INFO - Shared queues initialized.
2025-05-27 01:14:32,629 - INFO - Retrieved queue instances. Event loop ID: 57921056
2025-05-27 01:14:32,629 - INFO - SimulationManager ready state set to: True
2025-05-27 01:14:32,629 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:14:32,629 - INFO - MessageProcessor queues verified
2025-05-27 01:14:32,630 - INFO - MessageProcessor task started.
2025-05-27 01:14:32,630 - INFO - QueueForwarder queues verified
2025-05-27 01:14:32,630 - INFO - QueueForwarder task started.
2025-05-27 01:14:32,630 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:14:32,630 - INFO - Starting MessageProcessor
2025-05-27 01:14:32,630 - INFO - Starting QueueForwarder
2025-05-27 01:14:34,306 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=45234)
2025-05-27 01:14:34,306 - INFO - Adding connection: 127.0.0.1:45234. Total connections: 1
2025-05-27 01:14:34,307 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=45234)
2025-05-27 01:14:34,307 - INFO - Sender task started for Address(host='127.0.0.1', port=45234)
2025-05-27 01:14:34,307 - INFO - Receiver task started for Address(host='127.0.0.1', port=45234)
2025-05-27 01:14:34,310 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=45234)
2025-05-27 01:14:35,733 - INFO - Initiating simulation start
2025-05-27 01:14:35,733 - INFO - Simulation started successfully: {'status': 'started', 'message': 'Simulation messages will begin flowing through queues'}
2025-05-27 01:14:35,733 - INFO - Simulation task starting
2025-05-27 01:14:35,734 - INFO - System message enqueued to backend queue
2025-05-27 01:14:37,721 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=45234)
2025-05-27 01:14:37,721 - INFO - Processed 4 messages
2025-05-27 01:14:38,199 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=45234)
2025-05-27 01:14:43,948 - INFO - Processed 4 messages
2025-05-27 01:14:46,263 - WARNING - Messages not being forwarded to frontend
2025-05-27 01:14:48,976 - INFO - Processed 3 messages
2025-05-27 01:14:49,484 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=45234): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 01:14:49,485 - INFO - Receiver task for Address(host='127.0.0.1', port=45234) finished.
2025-05-27 01:14:49,584 - INFO - Application shutdown event triggered.
2025-05-27 01:14:49,585 - INFO - SimulationManager stopped.
2025-05-27 01:14:49,585 - INFO - Stopping MessageProcessor...
2025-05-27 01:14:49,585 - INFO - Sender task for Address(host='127.0.0.1', port=45234) was cancelled.
2025-05-27 01:14:49,588 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 01:14:49,588 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 01:14:49,588 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:14:49,588 - INFO - Application shutdown complete.
2025-05-27 01:14:49,589 - INFO - Initiating cleanup for connection: 127.0.0.1:45234
2025-05-27 01:14:49,589 - INFO - Starting cleanup for 127.0.0.1:45234
2025-05-27 01:14:49,589 - INFO - Connection cleanup completed for 127.0.0.1:45234. Remaining connections: 0
2025-05-27 01:14:49,589 - INFO - Cleanup finished for connection: 127.0.0.1:45234. Total connections: 0
2025-05-27 01:14:49,589 - INFO - Starting cleanup for Address(host='127.0.0.1', port=45234)
2025-05-27 01:14:49,589 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=45234). Remaining connections: 0
2025-05-27 01:17:44,017 - INFO - Application startup event triggered.
2025-05-27 01:17:44,017 - INFO - Initializing all queues...
2025-05-27 01:17:44,017 - INFO - All queues initialized on loop 1086381600
2025-05-27 01:17:44,017 - INFO - Shared queues initialized.
2025-05-27 01:17:44,017 - INFO - Retrieved queue instances. Event loop ID: 1086381600
2025-05-27 01:17:44,017 - INFO - SimulationManager ready state set to: True
2025-05-27 01:17:44,017 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:17:44,017 - INFO - MessageProcessor queues verified
2025-05-27 01:17:44,017 - INFO - MessageProcessor task started.
2025-05-27 01:17:44,017 - INFO - QueueForwarder queues verified
2025-05-27 01:17:44,017 - INFO - QueueForwarder task started.
2025-05-27 01:17:44,017 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:17:44,017 - INFO - Starting MessageProcessor
2025-05-27 01:17:44,017 - INFO - Starting QueueForwarder
2025-05-27 01:17:45,906 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=59654)
2025-05-27 01:17:45,906 - INFO - Adding connection: 127.0.0.1:59654. Total connections: 1
2025-05-27 01:17:45,907 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=59654)
2025-05-27 01:17:45,907 - INFO - Sender task started for Address(host='127.0.0.1', port=59654)
2025-05-27 01:17:45,907 - INFO - Receiver task started for Address(host='127.0.0.1', port=59654)
2025-05-27 01:17:45,910 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=59654)
2025-05-27 01:17:48,744 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=59654)
2025-05-27 01:17:53,216 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=59654)
2025-05-27 01:17:53,216 - INFO - Processed 3 messages
2025-05-27 01:17:54,440 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=59654)
2025-05-27 01:17:55,819 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=59654)
2025-05-27 01:18:05,322 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54226)
2025-05-27 01:18:05,322 - INFO - Adding connection: 127.0.0.1:54226. Total connections: 2
2025-05-27 01:18:05,323 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=54226)
2025-05-27 01:18:05,323 - INFO - Sender task started for Address(host='127.0.0.1', port=54226)
2025-05-27 01:18:05,323 - INFO - Receiver task started for Address(host='127.0.0.1', port=54226)
2025-05-27 01:18:05,325 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=54226)
2025-05-27 01:18:05,326 - INFO - Processed 3 messages
2025-05-27 01:18:10,910 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=59654)
2025-05-27 01:18:10,910 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=59654): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 01:18:10,912 - INFO - Receiver task for Address(host='127.0.0.1', port=59654) finished.
2025-05-27 01:18:31,320 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=54226)
2025-05-27 01:18:31,320 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=54226): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 01:18:31,321 - INFO - Receiver task for Address(host='127.0.0.1', port=54226) finished.
2025-05-27 01:18:36,323 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54078)
2025-05-27 01:18:36,323 - INFO - Adding connection: 127.0.0.1:54078. Total connections: 3
2025-05-27 01:18:36,323 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=54078)
2025-05-27 01:18:36,324 - INFO - Sender task started for Address(host='127.0.0.1', port=54078)
2025-05-27 01:18:36,324 - INFO - Receiver task started for Address(host='127.0.0.1', port=54078)
2025-05-27 01:18:36,325 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=54078)
2025-05-27 01:18:36,326 - INFO - Processed 1 messages
2025-05-27 01:18:36,326 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=59654): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 01:18:36,328 - INFO - Sender task for Address(host='127.0.0.1', port=59654) finished.
2025-05-27 01:18:36,328 - INFO - Initiating cleanup for connection: 127.0.0.1:59654
2025-05-27 01:18:36,329 - INFO - Starting cleanup for 127.0.0.1:59654
2025-05-27 01:18:36,329 - INFO - Closed WebSocket connection for 127.0.0.1:59654
2025-05-27 01:18:36,329 - INFO - Connection cleanup completed for 127.0.0.1:59654. Remaining connections: 2
2025-05-27 01:18:36,329 - INFO - Cleanup finished for connection: 127.0.0.1:59654. Total connections: 2
2025-05-27 01:18:36,329 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 01:18:36,329 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 01:18:56,321 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=39546)
2025-05-27 01:18:56,321 - INFO - Adding connection: 127.0.0.1:39546. Total connections: 3
2025-05-27 01:18:56,321 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=39546)
2025-05-27 01:18:56,322 - INFO - Sender task started for Address(host='127.0.0.1', port=39546)
2025-05-27 01:18:56,322 - INFO - Receiver task started for Address(host='127.0.0.1', port=39546)
2025-05-27 01:18:56,323 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=39546)
2025-05-27 01:18:56,324 - INFO - Processed 1 messages
2025-05-27 01:19:02,320 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=54078)
2025-05-27 01:19:02,320 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=54078): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 01:19:02,321 - INFO - Receiver task for Address(host='127.0.0.1', port=54078) finished.
2025-05-27 01:19:22,320 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=39546)
2025-05-27 01:19:22,320 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=39546): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 01:19:22,321 - INFO - Receiver task for Address(host='127.0.0.1', port=39546) finished.
2025-05-27 01:19:27,322 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53714)
2025-05-27 01:19:27,322 - INFO - Adding connection: 127.0.0.1:53714. Total connections: 4
2025-05-27 01:19:27,322 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=53714)
2025-05-27 01:19:27,323 - INFO - Sender task started for Address(host='127.0.0.1', port=53714)
2025-05-27 01:19:27,323 - INFO - Receiver task started for Address(host='127.0.0.1', port=53714)
2025-05-27 01:19:27,324 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=53714)
2025-05-27 01:19:27,324 - INFO - Processed 1 messages
2025-05-27 01:19:52,325 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=53714)
2025-05-27 01:19:52,325 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=53714): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 01:19:52,326 - INFO - Receiver task for Address(host='127.0.0.1', port=53714) finished.
2025-05-27 01:20:17,326 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=39210)
2025-05-27 01:20:17,327 - INFO - Adding connection: 127.0.0.1:39210. Total connections: 5
2025-05-27 01:20:17,328 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=39210)
2025-05-27 01:20:17,328 - INFO - Sender task started for Address(host='127.0.0.1', port=39210)
2025-05-27 01:20:17,328 - INFO - Receiver task started for Address(host='127.0.0.1', port=39210)
2025-05-27 01:20:17,329 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=39210)
2025-05-27 01:20:17,330 - INFO - Processed 1 messages
2025-05-27 01:20:17,330 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=54226): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 01:20:17,331 - INFO - Sender task for Address(host='127.0.0.1', port=54226) finished.
2025-05-27 01:20:17,331 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=53714): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 01:20:17,332 - INFO - Sender task for Address(host='127.0.0.1', port=53714) finished.
2025-05-27 01:20:17,332 - INFO - Initiating cleanup for connection: 127.0.0.1:54226
2025-05-27 01:20:17,332 - INFO - Starting cleanup for 127.0.0.1:54226
2025-05-27 01:20:17,332 - INFO - Closed WebSocket connection for 127.0.0.1:54226
2025-05-27 01:20:17,332 - INFO - Connection cleanup completed for 127.0.0.1:54226. Remaining connections: 4
2025-05-27 01:20:17,332 - INFO - Cleanup finished for connection: 127.0.0.1:54226. Total connections: 4
2025-05-27 01:20:17,332 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 01:20:17,332 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 01:20:17,333 - INFO - Initiating cleanup for connection: 127.0.0.1:53714
2025-05-27 01:20:17,333 - INFO - Starting cleanup for 127.0.0.1:53714
2025-05-27 01:20:17,333 - INFO - Closed WebSocket connection for 127.0.0.1:53714
2025-05-27 01:20:17,333 - INFO - Connection cleanup completed for 127.0.0.1:53714. Remaining connections: 3
2025-05-27 01:20:17,333 - INFO - Cleanup finished for connection: 127.0.0.1:53714. Total connections: 3
2025-05-27 01:20:17,333 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 01:20:17,333 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 01:20:24,224 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=39210): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 01:20:24,224 - INFO - Receiver task for Address(host='127.0.0.1', port=39210) finished.
2025-05-27 01:20:24,424 - INFO - Application shutdown event triggered.
2025-05-27 01:20:24,424 - INFO - Stopping MessageProcessor...
2025-05-27 01:20:24,425 - INFO - Sender task for Address(host='127.0.0.1', port=39210) was cancelled.
2025-05-27 01:20:24,425 - INFO - Sender task for Address(host='127.0.0.1', port=39546) was cancelled.
2025-05-27 01:20:24,425 - INFO - Sender task for Address(host='127.0.0.1', port=54078) was cancelled.
2025-05-27 01:20:24,425 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 01:20:24,425 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 01:20:24,425 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:20:24,425 - INFO - Application shutdown complete.
2025-05-27 01:20:24,426 - INFO - Initiating cleanup for connection: 127.0.0.1:39210
2025-05-27 01:20:24,426 - INFO - Starting cleanup for 127.0.0.1:39210
2025-05-27 01:20:24,426 - INFO - Connection cleanup completed for 127.0.0.1:39210. Remaining connections: 2
2025-05-27 01:20:24,427 - INFO - Cleanup finished for connection: 127.0.0.1:39210. Total connections: 2
2025-05-27 01:20:24,427 - INFO - Starting cleanup for Address(host='127.0.0.1', port=39210)
2025-05-27 01:20:24,427 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=39210). Remaining connections: 2
2025-05-27 01:20:24,430 - INFO - Initiating cleanup for connection: 127.0.0.1:39546
2025-05-27 01:20:24,430 - INFO - Starting cleanup for 127.0.0.1:39546
2025-05-27 01:20:24,430 - INFO - Closed WebSocket connection for 127.0.0.1:39546
2025-05-27 01:20:24,430 - INFO - Connection cleanup completed for 127.0.0.1:39546. Remaining connections: 1
2025-05-27 01:20:24,430 - INFO - Cleanup finished for connection: 127.0.0.1:39546. Total connections: 1
2025-05-27 01:20:24,430 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 164, in websocket_endpoint
    await ws_manager.handle_connection(websocket)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 50, in handle_connection
    await asyncio.gather(sender_task, receiver_task) # <--- CRITICAL CHANGE HERE
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 01:20:24,431 - INFO - Initiating cleanup for connection: 127.0.0.1:54078
2025-05-27 01:20:24,431 - INFO - Starting cleanup for 127.0.0.1:54078
2025-05-27 01:20:24,431 - INFO - Closed WebSocket connection for 127.0.0.1:54078
2025-05-27 01:20:24,431 - INFO - Connection cleanup completed for 127.0.0.1:54078. Remaining connections: 0
2025-05-27 01:20:24,432 - INFO - Cleanup finished for connection: 127.0.0.1:54078. Total connections: 0
2025-05-27 01:20:24,432 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 164, in websocket_endpoint
    await ws_manager.handle_connection(websocket)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 50, in handle_connection
    await asyncio.gather(sender_task, receiver_task) # <--- CRITICAL CHANGE HERE
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 01:38:44,594 - INFO - Application startup event triggered.
2025-05-27 01:38:44,594 - INFO - Initializing all queues...
2025-05-27 01:38:44,594 - INFO - All queues initialized on loop 380583456
2025-05-27 01:38:44,594 - INFO - Shared queues initialized.
2025-05-27 01:38:44,594 - INFO - Retrieved queue instances. Event loop ID: 380583456
2025-05-27 01:38:44,595 - INFO - SimulationManager ready state set to: True
2025-05-27 01:38:44,595 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:38:44,595 - INFO - MessageProcessor queues verified
2025-05-27 01:38:44,595 - INFO - MessageProcessor task started.
2025-05-27 01:38:44,595 - INFO - QueueForwarder queues verified
2025-05-27 01:38:44,595 - INFO - QueueForwarder task started.
2025-05-27 01:38:44,596 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:38:44,596 - INFO - Starting MessageProcessor
2025-05-27 01:38:44,596 - INFO - Starting QueueForwarder
2025-05-27 01:39:01,257 - INFO - Application shutdown event triggered.
2025-05-27 01:39:01,257 - INFO - Stopping MessageProcessor...
2025-05-27 01:39:01,257 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 01:39:01,257 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:39:01,257 - INFO - Application shutdown complete.
2025-05-27 01:40:09,656 - INFO - Application startup event triggered.
2025-05-27 01:40:09,657 - INFO - Initializing all queues...
2025-05-27 01:40:09,657 - INFO - All queues initialized on loop 862174752
2025-05-27 01:40:09,657 - INFO - Shared queues initialized.
2025-05-27 01:40:09,657 - INFO - Retrieved queue instances. Event loop ID: 862174752
2025-05-27 01:40:09,657 - INFO - SimulationManager ready state set to: True
2025-05-27 01:40:09,657 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:40:09,657 - INFO - MessageProcessor queues verified
2025-05-27 01:40:09,657 - INFO - MessageProcessor task started.
2025-05-27 01:40:09,657 - INFO - QueueForwarder queues verified
2025-05-27 01:40:09,657 - INFO - QueueForwarder task started.
2025-05-27 01:40:09,658 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:40:09,658 - INFO - Starting MessageProcessor
2025-05-27 01:40:09,658 - INFO - Starting QueueForwarder
2025-05-27 01:40:11,132 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53010)
2025-05-27 01:40:11,133 - INFO - Adding connection: 127.0.0.1:53010. Total connections: 1
2025-05-27 01:40:11,134 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=53010)
2025-05-27 01:40:11,134 - INFO - Sender task started for Address(host='127.0.0.1', port=53010)
2025-05-27 01:40:11,135 - INFO - Receiver task started for Address(host='127.0.0.1', port=53010)
2025-05-27 01:40:11,139 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=53010)
2025-05-27 01:40:11,323 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53024)
2025-05-27 01:40:11,323 - INFO - Adding connection: 127.0.0.1:53024. Total connections: 2
2025-05-27 01:40:11,324 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=53024)
2025-05-27 01:40:11,325 - INFO - Sender task started for Address(host='127.0.0.1', port=53024)
2025-05-27 01:40:11,325 - INFO - Receiver task started for Address(host='127.0.0.1', port=53024)
2025-05-27 01:40:11,328 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=53024)
2025-05-27 01:40:27,051 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=53010): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 01:40:27,053 - INFO - Receiver task for Address(host='127.0.0.1', port=53010) finished.
2025-05-27 01:40:28,832 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=53024): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 01:40:28,833 - INFO - Receiver task for Address(host='127.0.0.1', port=53024) finished.
2025-05-27 01:41:05,850 - INFO - Application shutdown event triggered.
2025-05-27 01:41:05,850 - INFO - Stopping MessageProcessor...
2025-05-27 01:41:05,851 - INFO - Sender task for Address(host='127.0.0.1', port=53010) was cancelled.
2025-05-27 01:41:05,851 - INFO - Sender task for Address(host='127.0.0.1', port=53024) was cancelled.
2025-05-27 01:41:05,851 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 01:41:05,851 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 01:41:05,851 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:41:05,851 - INFO - Application shutdown complete.
2025-05-27 01:41:05,852 - INFO - Initiating cleanup for connection: 127.0.0.1:53010
2025-05-27 01:41:05,853 - INFO - Starting cleanup for 127.0.0.1:53010
2025-05-27 01:41:05,853 - INFO - Connection cleanup completed for 127.0.0.1:53010. Remaining connections: 1
2025-05-27 01:41:05,853 - INFO - Cleanup finished for connection: 127.0.0.1:53010. Total connections: 1
2025-05-27 01:41:05,853 - INFO - Starting cleanup for Address(host='127.0.0.1', port=53010)
2025-05-27 01:41:05,853 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=53010). Remaining connections: 1
2025-05-27 01:41:05,855 - INFO - Initiating cleanup for connection: 127.0.0.1:53024
2025-05-27 01:41:05,855 - INFO - Starting cleanup for 127.0.0.1:53024
2025-05-27 01:41:05,855 - INFO - Connection cleanup completed for 127.0.0.1:53024. Remaining connections: 0
2025-05-27 01:41:05,855 - INFO - Cleanup finished for connection: 127.0.0.1:53024. Total connections: 0
2025-05-27 01:41:05,855 - INFO - Starting cleanup for Address(host='127.0.0.1', port=53024)
2025-05-27 01:41:05,855 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=53024). Remaining connections: 0
2025-05-27 01:41:51,820 - INFO - Application startup event triggered.
2025-05-27 01:41:51,820 - INFO - Initializing all queues...
2025-05-27 01:41:51,820 - INFO - All queues initialized on loop 205008416
2025-05-27 01:41:51,820 - INFO - Shared queues initialized.
2025-05-27 01:41:51,821 - INFO - Retrieved queue instances. Event loop ID: 205008416
2025-05-27 01:41:51,821 - INFO - SimulationManager ready state set to: True
2025-05-27 01:41:51,821 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:41:51,821 - INFO - MessageProcessor queues verified
2025-05-27 01:41:51,821 - INFO - MessageProcessor task started.
2025-05-27 01:41:51,821 - INFO - QueueForwarder queues verified
2025-05-27 01:41:51,821 - INFO - QueueForwarder task started.
2025-05-27 01:41:51,822 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:41:51,822 - INFO - Starting MessageProcessor
2025-05-27 01:41:51,822 - INFO - Starting QueueForwarder
2025-05-27 01:41:53,196 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=35650)
2025-05-27 01:41:53,196 - INFO - Adding connection: 127.0.0.1:35650. Total connections: 1
2025-05-27 01:41:53,197 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=35650)
2025-05-27 01:41:53,197 - INFO - Sender task started for Address(host='127.0.0.1', port=35650)
2025-05-27 01:41:53,197 - INFO - Receiver task started for Address(host='127.0.0.1', port=35650)
2025-05-27 01:41:53,203 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=35650)
2025-05-27 01:41:54,713 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=35650): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 01:41:54,714 - INFO - Receiver task for Address(host='127.0.0.1', port=35650) finished.
2025-05-27 01:41:54,765 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=35654)
2025-05-27 01:41:54,765 - INFO - Adding connection: 127.0.0.1:35654. Total connections: 2
2025-05-27 01:41:54,766 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=35654)
2025-05-27 01:41:54,766 - INFO - Sender task started for Address(host='127.0.0.1', port=35654)
2025-05-27 01:41:54,766 - INFO - Receiver task started for Address(host='127.0.0.1', port=35654)
2025-05-27 01:41:54,769 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=35654)
2025-05-27 01:41:54,769 - WARNING - Failed to send message to Address(host='127.0.0.1', port=35650), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 01:41:54,770 - INFO - Sender task for Address(host='127.0.0.1', port=35650) finished.
2025-05-27 01:41:54,770 - INFO - Initiating cleanup for connection: 127.0.0.1:35650
2025-05-27 01:41:54,770 - INFO - Starting cleanup for 127.0.0.1:35650
2025-05-27 01:41:54,770 - INFO - Connection cleanup completed for 127.0.0.1:35650. Remaining connections: 1
2025-05-27 01:41:54,771 - INFO - Cleanup finished for connection: 127.0.0.1:35650. Total connections: 1
2025-05-27 01:41:54,771 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-27 01:41:54,771 - INFO - Starting cleanup for Address(host='127.0.0.1', port=35650)
2025-05-27 01:41:54,771 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=35650). Remaining connections: 1
2025-05-27 01:41:58,299 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=35654): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 01:41:58,300 - INFO - Receiver task for Address(host='127.0.0.1', port=35654) finished.
2025-05-27 01:41:58,447 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=35664)
2025-05-27 01:41:58,447 - INFO - Adding connection: 127.0.0.1:35664. Total connections: 2
2025-05-27 01:41:58,448 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=35664)
2025-05-27 01:41:58,448 - INFO - Sender task started for Address(host='127.0.0.1', port=35664)
2025-05-27 01:41:58,448 - INFO - Receiver task started for Address(host='127.0.0.1', port=35664)
2025-05-27 01:41:58,452 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=35664)
2025-05-27 01:41:58,453 - INFO - Processed 3 messages
2025-05-27 01:41:58,453 - WARNING - Failed to send message to Address(host='127.0.0.1', port=35654), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 01:41:58,454 - INFO - Sender task for Address(host='127.0.0.1', port=35654) finished.
2025-05-27 01:41:58,454 - INFO - Initiating cleanup for connection: 127.0.0.1:35654
2025-05-27 01:41:58,454 - INFO - Starting cleanup for 127.0.0.1:35654
2025-05-27 01:41:58,454 - INFO - Connection cleanup completed for 127.0.0.1:35654. Remaining connections: 1
2025-05-27 01:41:58,454 - INFO - Cleanup finished for connection: 127.0.0.1:35654. Total connections: 1
2025-05-27 01:41:58,455 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-27 01:41:58,455 - INFO - Starting cleanup for Address(host='127.0.0.1', port=35654)
2025-05-27 01:41:58,455 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=35654). Remaining connections: 1
2025-05-27 01:42:23,453 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=35664)
2025-05-27 01:42:23,453 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=35664): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 01:42:23,454 - INFO - Receiver task for Address(host='127.0.0.1', port=35664) finished.
2025-05-27 01:42:48,455 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=40932)
2025-05-27 01:42:48,455 - INFO - Adding connection: 127.0.0.1:40932. Total connections: 2
2025-05-27 01:42:48,456 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=40932)
2025-05-27 01:42:48,456 - INFO - Sender task started for Address(host='127.0.0.1', port=40932)
2025-05-27 01:42:48,456 - INFO - Receiver task started for Address(host='127.0.0.1', port=40932)
2025-05-27 01:42:48,459 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=40932)
2025-05-27 01:42:48,459 - INFO - Processed 1 messages
2025-05-27 01:42:48,460 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=35664): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 01:42:48,461 - INFO - Sender task for Address(host='127.0.0.1', port=35664) finished.
2025-05-27 01:42:48,462 - INFO - Initiating cleanup for connection: 127.0.0.1:35664
2025-05-27 01:42:48,462 - INFO - Starting cleanup for 127.0.0.1:35664
2025-05-27 01:42:48,462 - INFO - Closed WebSocket connection for 127.0.0.1:35664
2025-05-27 01:42:48,462 - INFO - Connection cleanup completed for 127.0.0.1:35664. Remaining connections: 1
2025-05-27 01:42:48,462 - INFO - Cleanup finished for connection: 127.0.0.1:35664. Total connections: 1
2025-05-27 01:42:48,462 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 01:42:48,462 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 01:43:13,459 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=40932)
2025-05-27 01:43:13,460 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=40932): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 01:43:13,460 - INFO - Receiver task for Address(host='127.0.0.1', port=40932) finished.
2025-05-27 01:43:38,463 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=39920)
2025-05-27 01:43:38,463 - INFO - Adding connection: 127.0.0.1:39920. Total connections: 2
2025-05-27 01:43:38,464 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=39920)
2025-05-27 01:43:38,464 - INFO - Sender task started for Address(host='127.0.0.1', port=39920)
2025-05-27 01:43:38,464 - INFO - Receiver task started for Address(host='127.0.0.1', port=39920)
2025-05-27 01:43:38,467 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=39920)
2025-05-27 01:43:38,468 - INFO - Processed 1 messages
2025-05-27 01:43:38,468 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=40932): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 01:43:38,469 - INFO - Sender task for Address(host='127.0.0.1', port=40932) finished.
2025-05-27 01:43:38,470 - INFO - Initiating cleanup for connection: 127.0.0.1:40932
2025-05-27 01:43:38,470 - INFO - Starting cleanup for 127.0.0.1:40932
2025-05-27 01:43:38,470 - INFO - Closed WebSocket connection for 127.0.0.1:40932
2025-05-27 01:43:38,470 - INFO - Connection cleanup completed for 127.0.0.1:40932. Remaining connections: 1
2025-05-27 01:43:38,471 - INFO - Cleanup finished for connection: 127.0.0.1:40932. Total connections: 1
2025-05-27 01:43:38,471 - ERROR - WebSocket receive error: WebSocket is not connected. Need to call "accept" first.
2025-05-27 01:43:38,471 - ERROR - Error during WebSocket cleanup: Cannot call "send" once a close message has been sent.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 245, in websocket_endpoint
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send(
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 87, in send
    raise RuntimeError('Cannot call "send" once a close message has been sent.')
RuntimeError: Cannot call "send" once a close message has been sent.
2025-05-27 01:43:43,494 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=39920): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 01:43:43,494 - INFO - Receiver task for Address(host='127.0.0.1', port=39920) finished.
2025-05-27 01:46:26,716 - INFO - Application shutdown event triggered.
2025-05-27 01:46:26,716 - INFO - Stopping MessageProcessor...
2025-05-27 01:46:26,717 - INFO - Sender task for Address(host='127.0.0.1', port=39920) was cancelled.
2025-05-27 01:46:26,717 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 01:46:26,717 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 01:46:26,717 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:46:26,717 - INFO - Application shutdown complete.
2025-05-27 01:46:26,718 - INFO - Initiating cleanup for connection: 127.0.0.1:39920
2025-05-27 01:46:26,718 - INFO - Starting cleanup for 127.0.0.1:39920
2025-05-27 01:46:26,718 - INFO - Connection cleanup completed for 127.0.0.1:39920. Remaining connections: 0
2025-05-27 01:46:26,718 - INFO - Cleanup finished for connection: 127.0.0.1:39920. Total connections: 0
2025-05-27 01:46:26,718 - INFO - Starting cleanup for Address(host='127.0.0.1', port=39920)
2025-05-27 01:46:26,719 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=39920). Remaining connections: 0
2025-05-27 01:46:31,255 - INFO - Application startup event triggered.
2025-05-27 01:46:31,255 - INFO - Initializing all queues...
2025-05-27 01:46:31,255 - INFO - All queues initialized on loop 168328736
2025-05-27 01:46:31,255 - INFO - Shared queues initialized.
2025-05-27 01:46:31,255 - INFO - Retrieved queue instances. Event loop ID: 168328736
2025-05-27 01:46:31,255 - INFO - SimulationManager ready state set to: True
2025-05-27 01:46:31,255 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:46:31,255 - INFO - MessageProcessor queues verified
2025-05-27 01:46:31,255 - INFO - MessageProcessor task started.
2025-05-27 01:46:31,256 - INFO - QueueForwarder queues verified
2025-05-27 01:46:31,256 - INFO - QueueForwarder task started.
2025-05-27 01:46:31,256 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:46:31,256 - INFO - Starting MessageProcessor
2025-05-27 01:46:31,256 - INFO - Starting QueueForwarder
2025-05-27 01:47:54,228 - INFO - Application shutdown event triggered.
2025-05-27 01:47:54,228 - INFO - Stopping MessageProcessor...
2025-05-27 01:47:54,229 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 01:47:54,229 - INFO - QueueForwarder task cancelled.
2025-05-27 01:47:54,229 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:47:54,229 - INFO - Application shutdown complete.
2025-05-27 01:47:57,480 - INFO - Application startup event triggered.
2025-05-27 01:47:57,480 - INFO - Initializing all queues...
2025-05-27 01:47:57,480 - INFO - All queues initialized on loop 438795808
2025-05-27 01:47:57,480 - INFO - Shared queues initialized.
2025-05-27 01:47:57,481 - INFO - Retrieved queue instances. Event loop ID: 438795808
2025-05-27 01:47:57,481 - INFO - SimulationManager ready state set to: True
2025-05-27 01:47:57,481 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:47:57,481 - INFO - MessageProcessor queues verified
2025-05-27 01:47:57,481 - INFO - MessageProcessor task started.
2025-05-27 01:47:57,481 - INFO - QueueForwarder queues verified
2025-05-27 01:47:57,481 - INFO - QueueForwarder task started.
2025-05-27 01:47:57,481 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:47:57,481 - INFO - Starting MessageProcessor
2025-05-27 01:47:57,482 - INFO - Starting QueueForwarder
2025-05-27 01:47:58,879 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=49440)
2025-05-27 01:47:58,880 - INFO - Adding connection: 127.0.0.1:49440. Total connections: 1
2025-05-27 01:47:58,881 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=49440)
2025-05-27 01:47:58,882 - INFO - Sender task started for Address(host='127.0.0.1', port=49440)
2025-05-27 01:47:58,882 - INFO - Receiver task started for Address(host='127.0.0.1', port=49440)
2025-05-27 01:48:18,761 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=49440): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 01:48:18,762 - INFO - Receiver task for Address(host='127.0.0.1', port=49440) finished.
2025-05-27 01:48:18,862 - INFO - Application shutdown event triggered.
2025-05-27 01:48:18,862 - INFO - Stopping MessageProcessor...
2025-05-27 01:48:18,862 - INFO - Sender task for Address(host='127.0.0.1', port=49440) was cancelled.
2025-05-27 01:48:18,862 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 01:48:18,862 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 01:48:18,862 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:48:18,863 - INFO - Application shutdown complete.
2025-05-27 01:48:18,864 - INFO - Initiating cleanup for connection: 127.0.0.1:49440
2025-05-27 01:48:18,864 - INFO - Starting cleanup for 127.0.0.1:49440
2025-05-27 01:48:18,864 - INFO - Connection cleanup completed for 127.0.0.1:49440. Remaining connections: 0
2025-05-27 01:48:18,864 - INFO - Cleanup finished for connection: 127.0.0.1:49440. Total connections: 0
2025-05-27 01:48:18,864 - INFO - Starting cleanup for Address(host='127.0.0.1', port=49440)
2025-05-27 01:48:18,864 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=49440). Remaining connections: 0
2025-05-27 01:51:54,979 - INFO - Application startup event triggered.
2025-05-27 01:51:54,980 - INFO - Initializing all queues...
2025-05-27 01:51:54,980 - INFO - All queues initialized on loop 544169504
2025-05-27 01:51:54,980 - INFO - Shared queues initialized.
2025-05-27 01:51:54,980 - INFO - Retrieved queue instances. Event loop ID: 544169504
2025-05-27 01:51:54,980 - INFO - SimulationManager ready state set to: True
2025-05-27 01:51:54,980 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:51:54,980 - INFO - MessageProcessor queues verified
2025-05-27 01:51:54,981 - INFO - MessageProcessor task started.
2025-05-27 01:51:54,981 - INFO - QueueForwarder queues verified
2025-05-27 01:51:54,981 - INFO - QueueForwarder task started.
2025-05-27 01:51:54,981 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:51:54,981 - INFO - Starting MessageProcessor
2025-05-27 01:51:54,981 - INFO - Starting QueueForwarder
2025-05-27 01:51:56,433 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=44582)
2025-05-27 01:51:56,433 - INFO - Adding connection: 127.0.0.1:44582. Total connections: 1
2025-05-27 01:51:56,435 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=44582)
2025-05-27 01:51:56,435 - INFO - Sender task started for Address(host='127.0.0.1', port=44582)
2025-05-27 01:51:56,435 - INFO - Receiver task started for Address(host='127.0.0.1', port=44582)
2025-05-27 01:51:56,442 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=44582)
2025-05-27 01:51:57,710 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=44582)
2025-05-27 01:52:02,070 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=44582)
2025-05-27 01:52:02,070 - INFO - Processed 3 messages
2025-05-27 01:52:09,075 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=44582): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 01:52:09,076 - INFO - Receiver task for Address(host='127.0.0.1', port=44582) finished.
2025-05-27 01:52:09,143 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=42992)
2025-05-27 01:52:09,143 - INFO - Adding connection: 127.0.0.1:42992. Total connections: 2
2025-05-27 01:52:09,144 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=42992)
2025-05-27 01:52:09,144 - INFO - Sender task started for Address(host='127.0.0.1', port=42992)
2025-05-27 01:52:09,145 - INFO - Receiver task started for Address(host='127.0.0.1', port=42992)
2025-05-27 01:52:09,150 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=42992)
2025-05-27 01:52:09,151 - INFO - Processed 1 messages
2025-05-27 01:52:09,151 - WARNING - Failed to send message to Address(host='127.0.0.1', port=44582), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 01:52:09,152 - INFO - Sender task for Address(host='127.0.0.1', port=44582) finished.
2025-05-27 01:52:09,152 - INFO - Initiating cleanup for connection: 127.0.0.1:44582
2025-05-27 01:52:09,152 - INFO - Starting cleanup for 127.0.0.1:44582
2025-05-27 01:52:09,153 - INFO - Connection cleanup completed for 127.0.0.1:44582. Remaining connections: 1
2025-05-27 01:52:09,153 - INFO - Cleanup finished for connection: 127.0.0.1:44582. Total connections: 1
2025-05-27 01:52:09,153 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-27 01:52:09,153 - INFO - Starting cleanup for Address(host='127.0.0.1', port=44582)
2025-05-27 01:52:09,153 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=44582). Remaining connections: 1
2025-05-27 01:52:11,845 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=42992)
2025-05-27 01:52:28,877 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=42992): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 01:52:28,878 - INFO - Receiver task for Address(host='127.0.0.1', port=42992) finished.
2025-05-27 01:56:48,623 - INFO - Application shutdown event triggered.
2025-05-27 01:56:48,624 - INFO - Stopping MessageProcessor...
2025-05-27 01:56:48,624 - INFO - Sender task for Address(host='127.0.0.1', port=42992) was cancelled.
2025-05-27 01:56:48,624 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 01:56:48,624 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 01:56:48,625 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:56:48,625 - INFO - Application shutdown complete.
2025-05-27 01:56:48,626 - INFO - Initiating cleanup for connection: 127.0.0.1:42992
2025-05-27 01:56:48,626 - INFO - Starting cleanup for 127.0.0.1:42992
2025-05-27 01:56:48,626 - INFO - Connection cleanup completed for 127.0.0.1:42992. Remaining connections: 0
2025-05-27 01:56:48,626 - INFO - Cleanup finished for connection: 127.0.0.1:42992. Total connections: 0
2025-05-27 01:56:48,626 - INFO - Starting cleanup for Address(host='127.0.0.1', port=42992)
2025-05-27 01:56:48,626 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=42992). Remaining connections: 0
2025-05-27 01:56:54,012 - INFO - Application startup event triggered.
2025-05-27 01:56:54,012 - INFO - Initializing all queues...
2025-05-27 01:56:54,012 - INFO - All queues initialized on loop 959639072
2025-05-27 01:56:54,012 - INFO - Shared queues initialized.
2025-05-27 01:56:54,012 - INFO - Retrieved queue instances. Event loop ID: 959639072
2025-05-27 01:56:54,012 - INFO - SimulationManager ready state set to: True
2025-05-27 01:56:54,013 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:56:54,013 - INFO - MessageProcessor queues verified
2025-05-27 01:56:54,013 - INFO - MessageProcessor task started.
2025-05-27 01:56:54,013 - INFO - QueueForwarder queues verified
2025-05-27 01:56:54,013 - INFO - QueueForwarder task started.
2025-05-27 01:56:54,013 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:56:54,013 - INFO - Starting MessageProcessor
2025-05-27 01:56:54,014 - INFO - Starting QueueForwarder
2025-05-27 01:56:55,438 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=39584)
2025-05-27 01:56:55,439 - INFO - Adding connection: 127.0.0.1:39584. Total connections: 1
2025-05-27 01:56:55,440 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=39584)
2025-05-27 01:56:55,440 - INFO - Sender task started for Address(host='127.0.0.1', port=39584)
2025-05-27 01:56:55,440 - INFO - Receiver task started for Address(host='127.0.0.1', port=39584)
2025-05-27 01:56:55,446 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=39584)
2025-05-27 01:56:57,065 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=39584)
2025-05-27 01:57:09,535 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=39584): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 01:57:09,537 - INFO - Receiver task for Address(host='127.0.0.1', port=39584) finished.
2025-05-27 01:57:12,783 - INFO - Application shutdown event triggered.
2025-05-27 01:57:12,783 - INFO - Stopping MessageProcessor...
2025-05-27 01:57:12,783 - INFO - Sender task for Address(host='127.0.0.1', port=39584) was cancelled.
2025-05-27 01:57:12,783 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 01:57:12,784 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 01:57:12,784 - INFO - All WebSocket connections attempted to close.
2025-05-27 01:57:12,784 - INFO - Application shutdown complete.
2025-05-27 01:57:12,785 - INFO - Initiating cleanup for connection: 127.0.0.1:39584
2025-05-27 01:57:12,785 - INFO - Starting cleanup for 127.0.0.1:39584
2025-05-27 01:57:12,785 - INFO - Connection cleanup completed for 127.0.0.1:39584. Remaining connections: 0
2025-05-27 01:57:12,785 - INFO - Cleanup finished for connection: 127.0.0.1:39584. Total connections: 0
2025-05-27 01:57:12,785 - INFO - Starting cleanup for Address(host='127.0.0.1', port=39584)
2025-05-27 01:57:12,785 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=39584). Remaining connections: 0
2025-05-27 01:59:57,355 - INFO - Application startup event triggered.
2025-05-27 01:59:57,355 - INFO - Initializing all queues...
2025-05-27 01:59:57,356 - INFO - All queues initialized on loop 431746592
2025-05-27 01:59:57,356 - INFO - Shared queues initialized.
2025-05-27 01:59:57,356 - INFO - Retrieved queue instances. Event loop ID: 431746592
2025-05-27 01:59:57,356 - INFO - SimulationManager ready state set to: True
2025-05-27 01:59:57,356 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 01:59:57,356 - INFO - MessageProcessor queues verified
2025-05-27 01:59:57,356 - INFO - MessageProcessor task started.
2025-05-27 01:59:57,356 - INFO - QueueForwarder queues verified
2025-05-27 01:59:57,356 - INFO - QueueForwarder task started.
2025-05-27 01:59:57,356 - INFO - Application startup complete. All core services initialized.
2025-05-27 01:59:57,356 - INFO - Starting MessageProcessor
2025-05-27 01:59:57,357 - INFO - Starting QueueForwarder
2025-05-27 01:59:58,813 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=38100)
2025-05-27 01:59:58,813 - INFO - Adding connection: 127.0.0.1:38100. Total connections: 1
2025-05-27 01:59:58,814 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=38100)
2025-05-27 01:59:58,815 - INFO - Sender task started for Address(host='127.0.0.1', port=38100)
2025-05-27 01:59:58,815 - INFO - Receiver task started for Address(host='127.0.0.1', port=38100)
2025-05-27 01:59:58,823 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=38100)
2025-05-27 01:59:58,824 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=38100): Object of type WebSocketMessage is not JSON serializable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(json.dumps(ws_msg))
                              ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type WebSocketMessage is not JSON serializable
2025-05-27 01:59:58,826 - INFO - Sender task for Address(host='127.0.0.1', port=38100) finished.
2025-05-27 02:00:00,290 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=38100)
2025-05-27 02:00:10,125 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=38100): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 02:00:10,126 - INFO - Receiver task for Address(host='127.0.0.1', port=38100) finished.
2025-05-27 02:00:10,126 - INFO - Initiating cleanup for connection: 127.0.0.1:38100
2025-05-27 02:00:10,126 - INFO - Starting cleanup for 127.0.0.1:38100
2025-05-27 02:00:10,126 - INFO - Connection cleanup completed for 127.0.0.1:38100. Remaining connections: 0
2025-05-27 02:00:10,127 - INFO - Cleanup finished for connection: 127.0.0.1:38100. Total connections: 0
2025-05-27 02:00:10,127 - ERROR - WebSocket receive error: Cannot call "receive" once a disconnect message has been received.
2025-05-27 02:00:10,127 - INFO - Starting cleanup for Address(host='127.0.0.1', port=38100)
2025-05-27 02:00:10,127 - INFO - Connection cleanup completed for Address(host='127.0.0.1', port=38100). Remaining connections: 0
2025-05-27 02:00:14,516 - INFO - Application shutdown event triggered.
2025-05-27 02:00:14,516 - INFO - Stopping MessageProcessor...
2025-05-27 02:00:14,516 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 02:00:14,516 - INFO - QueueForwarder task cancelled.
2025-05-27 02:00:14,516 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:00:14,516 - INFO - Application shutdown complete.
2025-05-27 02:02:21,137 - INFO - Application startup event triggered.
2025-05-27 02:02:21,138 - INFO - Initializing all queues...
2025-05-27 02:02:21,138 - INFO - All queues initialized on loop 750247456
2025-05-27 02:02:21,138 - INFO - Shared queues initialized.
2025-05-27 02:02:21,138 - INFO - Retrieved queue instances. Event loop ID: 750247456
2025-05-27 02:02:21,138 - INFO - SimulationManager ready state set to: True
2025-05-27 02:02:21,138 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:02:21,138 - INFO - MessageProcessor queues verified
2025-05-27 02:02:21,138 - INFO - MessageProcessor task started.
2025-05-27 02:02:21,138 - INFO - QueueForwarder queues verified
2025-05-27 02:02:21,138 - INFO - QueueForwarder task started.
2025-05-27 02:02:21,139 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:02:21,139 - INFO - Starting MessageProcessor
2025-05-27 02:02:21,139 - INFO - Starting QueueForwarder
2025-05-27 02:02:22,606 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=56122)
2025-05-27 02:02:22,606 - INFO - Adding connection: 127.0.0.1:56122. Total connections: 1
2025-05-27 02:02:22,607 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=56122)
2025-05-27 02:02:22,607 - INFO - Sender task started for Address(host='127.0.0.1', port=56122)
2025-05-27 02:02:22,608 - INFO - Receiver task started for Address(host='127.0.0.1', port=56122)
2025-05-27 02:02:22,614 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=56122)
2025-05-27 02:02:22,616 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=56122): Object of type WebSocketMessage is not JSON serializable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(json.dumps(ws_msg))
                              ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type WebSocketMessage is not JSON serializable
2025-05-27 02:02:22,617 - INFO - Sender task for Address(host='127.0.0.1', port=56122) finished.
2025-05-27 02:02:23,904 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=56122)
2025-05-27 02:02:28,481 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=56122)
2025-05-27 02:02:28,482 - INFO - Processed 3 messages
2025-05-27 02:02:39,104 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=56122): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 02:02:39,105 - INFO - Receiver task for Address(host='127.0.0.1', port=56122) finished.
2025-05-27 02:02:39,105 - INFO - Initiating cleanup for connection: 127.0.0.1:56122
2025-05-27 02:02:39,106 - INFO - Starting cleanup for 127.0.0.1:56122
2025-05-27 02:02:39,106 - INFO - Connection cleanup completed for 127.0.0.1:56122. Remaining connections: 0
2025-05-27 02:02:39,106 - INFO - Cleanup finished for connection: 127.0.0.1:56122. Total connections: 0
2025-05-27 02:02:39,106 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=56122): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 02:02:39,107 - INFO - Message forwarding task for Address(host='127.0.0.1', port=56122) cancelled.
2025-05-27 02:02:39,107 - INFO - Cleanup finished for Address(host='127.0.0.1', port=56122) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:02:39,205 - INFO - Application shutdown event triggered.
2025-05-27 02:02:39,205 - INFO - Stopping MessageProcessor...
2025-05-27 02:02:39,205 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 02:02:39,205 - INFO - QueueForwarder task cancelled.
2025-05-27 02:02:39,205 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:02:39,206 - INFO - Application shutdown complete.
2025-05-27 02:03:10,512 - INFO - Application startup event triggered.
2025-05-27 02:03:10,512 - INFO - Initializing all queues...
2025-05-27 02:03:10,512 - INFO - All queues initialized on loop 152763936
2025-05-27 02:03:10,513 - INFO - Shared queues initialized.
2025-05-27 02:03:10,513 - INFO - Retrieved queue instances. Event loop ID: 152763936
2025-05-27 02:03:10,513 - INFO - SimulationManager ready state set to: True
2025-05-27 02:03:10,513 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:03:10,513 - INFO - MessageProcessor queues verified
2025-05-27 02:03:10,514 - INFO - MessageProcessor task started.
2025-05-27 02:03:10,514 - INFO - QueueForwarder queues verified
2025-05-27 02:03:10,514 - INFO - QueueForwarder task started.
2025-05-27 02:03:10,514 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:03:10,514 - INFO - Starting MessageProcessor
2025-05-27 02:03:10,514 - INFO - Starting QueueForwarder
2025-05-27 02:03:11,944 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=57110)
2025-05-27 02:03:11,944 - INFO - Adding connection: 127.0.0.1:57110. Total connections: 1
2025-05-27 02:03:11,945 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=57110)
2025-05-27 02:03:11,946 - INFO - Sender task started for Address(host='127.0.0.1', port=57110)
2025-05-27 02:03:11,946 - INFO - Receiver task started for Address(host='127.0.0.1', port=57110)
2025-05-27 02:03:11,952 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=57110)
2025-05-27 02:03:11,954 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=57110): Object of type WebSocketMessage is not JSON serializable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(json.dumps(ws_msg))
                              ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type WebSocketMessage is not JSON serializable
2025-05-27 02:03:11,955 - INFO - Sender task for Address(host='127.0.0.1', port=57110) finished.
2025-05-27 02:03:12,327 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=55104)
2025-05-27 02:03:12,327 - INFO - Adding connection: 127.0.0.1:55104. Total connections: 2
2025-05-27 02:03:12,328 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=55104)
2025-05-27 02:03:12,328 - INFO - Sender task started for Address(host='127.0.0.1', port=55104)
2025-05-27 02:03:12,329 - INFO - Receiver task started for Address(host='127.0.0.1', port=55104)
2025-05-27 02:03:12,334 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=55104)
2025-05-27 02:03:14,111 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=57110): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 02:03:14,112 - INFO - Receiver task for Address(host='127.0.0.1', port=57110) finished.
2025-05-27 02:03:14,113 - INFO - Initiating cleanup for connection: 127.0.0.1:57110
2025-05-27 02:03:14,113 - INFO - Starting cleanup for 127.0.0.1:57110
2025-05-27 02:03:14,113 - INFO - Connection cleanup completed for 127.0.0.1:57110. Remaining connections: 1
2025-05-27 02:03:14,113 - INFO - Cleanup finished for connection: 127.0.0.1:57110. Total connections: 1
2025-05-27 02:03:14,113 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=57110): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 02:03:14,114 - INFO - Message forwarding task for Address(host='127.0.0.1', port=57110) cancelled.
2025-05-27 02:03:14,115 - INFO - Cleanup finished for Address(host='127.0.0.1', port=57110) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:03:14,180 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=55112)
2025-05-27 02:03:14,180 - INFO - Adding connection: 127.0.0.1:55112. Total connections: 2
2025-05-27 02:03:14,181 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=55112)
2025-05-27 02:03:14,182 - INFO - Sender task started for Address(host='127.0.0.1', port=55112)
2025-05-27 02:03:14,182 - INFO - Receiver task started for Address(host='127.0.0.1', port=55112)
2025-05-27 02:03:14,187 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=55112)
2025-05-27 02:03:14,188 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=55104): Object of type WebSocketMessage is not JSON serializable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(json.dumps(ws_msg))
                              ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type WebSocketMessage is not JSON serializable
2025-05-27 02:03:14,189 - INFO - Sender task for Address(host='127.0.0.1', port=55104) finished.
2025-05-27 02:03:16,481 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=55112)
2025-05-27 02:03:16,482 - INFO - Processed 4 messages
2025-05-27 02:03:16,482 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=55112): Object of type WebSocketMessage is not JSON serializable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(json.dumps(ws_msg))
                              ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type WebSocketMessage is not JSON serializable
2025-05-27 02:03:16,483 - INFO - Sender task for Address(host='127.0.0.1', port=55112) finished.
2025-05-27 02:03:17,762 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=55112)
2025-05-27 02:03:29,012 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=55112): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 02:03:29,013 - INFO - Receiver task for Address(host='127.0.0.1', port=55112) finished.
2025-05-27 02:03:29,013 - INFO - Initiating cleanup for connection: 127.0.0.1:55112
2025-05-27 02:03:29,013 - INFO - Starting cleanup for 127.0.0.1:55112
2025-05-27 02:03:29,013 - INFO - Connection cleanup completed for 127.0.0.1:55112. Remaining connections: 1
2025-05-27 02:03:29,013 - INFO - Cleanup finished for connection: 127.0.0.1:55112. Total connections: 1
2025-05-27 02:03:29,014 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=55112): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 02:03:29,014 - INFO - Message forwarding task for Address(host='127.0.0.1', port=55112) cancelled.
2025-05-27 02:03:29,015 - INFO - Cleanup finished for Address(host='127.0.0.1', port=55112) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:03:30,623 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=55104): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 02:03:30,624 - INFO - Receiver task for Address(host='127.0.0.1', port=55104) finished.
2025-05-27 02:03:30,624 - INFO - Initiating cleanup for connection: 127.0.0.1:55104
2025-05-27 02:03:30,624 - INFO - Starting cleanup for 127.0.0.1:55104
2025-05-27 02:03:30,624 - INFO - Connection cleanup completed for 127.0.0.1:55104. Remaining connections: 0
2025-05-27 02:03:30,624 - INFO - Cleanup finished for connection: 127.0.0.1:55104. Total connections: 0
2025-05-27 02:03:30,624 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=55104): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 02:03:30,625 - INFO - Message forwarding task for Address(host='127.0.0.1', port=55104) cancelled.
2025-05-27 02:03:30,625 - INFO - Cleanup finished for Address(host='127.0.0.1', port=55104) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:04:57,269 - INFO - Application shutdown event triggered.
2025-05-27 02:04:57,269 - INFO - Stopping MessageProcessor...
2025-05-27 02:04:57,269 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 02:04:57,269 - INFO - QueueForwarder task cancelled.
2025-05-27 02:04:57,269 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:04:57,269 - INFO - Application shutdown complete.
2025-05-27 02:04:58,087 - INFO - Application startup event triggered.
2025-05-27 02:04:58,087 - INFO - Initializing all queues...
2025-05-27 02:04:58,087 - INFO - All queues initialized on loop 514072784
2025-05-27 02:04:58,087 - INFO - Shared queues initialized.
2025-05-27 02:04:58,087 - INFO - Retrieved queue instances. Event loop ID: 514072784
2025-05-27 02:04:58,087 - INFO - SimulationManager ready state set to: True
2025-05-27 02:04:58,087 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:04:58,087 - INFO - MessageProcessor queues verified
2025-05-27 02:04:58,087 - INFO - MessageProcessor task started.
2025-05-27 02:04:58,087 - INFO - QueueForwarder queues verified
2025-05-27 02:04:58,088 - INFO - QueueForwarder task started.
2025-05-27 02:04:58,088 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:04:58,088 - INFO - Starting MessageProcessor
2025-05-27 02:04:58,088 - INFO - Starting QueueForwarder
2025-05-27 02:07:58,076 - INFO - Application shutdown event triggered.
2025-05-27 02:07:58,077 - INFO - Stopping MessageProcessor...
2025-05-27 02:07:58,077 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 02:07:58,077 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:07:58,077 - INFO - Application shutdown complete.
2025-05-27 02:08:01,435 - INFO - Application startup event triggered.
2025-05-27 02:08:01,435 - INFO - Initializing all queues...
2025-05-27 02:08:01,435 - INFO - All queues initialized on loop 897904160
2025-05-27 02:08:01,436 - INFO - Shared queues initialized.
2025-05-27 02:08:01,436 - INFO - Retrieved queue instances. Event loop ID: 897904160
2025-05-27 02:08:01,436 - INFO - SimulationManager ready state set to: True
2025-05-27 02:08:01,436 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:08:01,436 - INFO - MessageProcessor queues verified
2025-05-27 02:08:01,436 - INFO - MessageProcessor task started.
2025-05-27 02:08:01,436 - INFO - QueueForwarder queues verified
2025-05-27 02:08:01,436 - INFO - QueueForwarder task started.
2025-05-27 02:08:01,436 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:08:01,437 - INFO - Starting MessageProcessor
2025-05-27 02:08:01,437 - INFO - Starting QueueForwarder
2025-05-27 02:08:02,892 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=39350)
2025-05-27 02:08:02,892 - INFO - Adding connection: 127.0.0.1:39350. Total connections: 1
2025-05-27 02:08:02,893 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=39350)
2025-05-27 02:08:02,894 - INFO - Sender task started for Address(host='127.0.0.1', port=39350)
2025-05-27 02:08:02,894 - INFO - Receiver task started for Address(host='127.0.0.1', port=39350)
2025-05-27 02:08:02,902 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=39350)
2025-05-27 02:08:02,903 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=39350): Object of type WebSocketMessage is not JSON serializable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(json.dumps(ws_msg))
                              ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type WebSocketMessage is not JSON serializable
2025-05-27 02:08:02,905 - INFO - Sender task for Address(host='127.0.0.1', port=39350) finished.
2025-05-27 02:08:03,856 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=39350)
2025-05-27 02:08:06,926 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=39350)
2025-05-27 02:08:06,927 - INFO - Processed 3 messages
2025-05-27 02:08:20,819 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=39350)
2025-05-27 02:08:20,819 - INFO - Processed 1 messages
2025-05-27 02:08:27,903 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=39350)
2025-05-27 02:08:27,903 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=39350): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 02:08:27,904 - INFO - Receiver task for Address(host='127.0.0.1', port=39350) finished.
2025-05-27 02:08:27,904 - INFO - Initiating cleanup for connection: 127.0.0.1:39350
2025-05-27 02:08:27,904 - INFO - Starting cleanup for 127.0.0.1:39350
2025-05-27 02:08:27,905 - INFO - Closed WebSocket connection for 127.0.0.1:39350
2025-05-27 02:08:27,905 - INFO - Connection cleanup completed for 127.0.0.1:39350. Remaining connections: 0
2025-05-27 02:08:27,905 - INFO - Cleanup finished for connection: 127.0.0.1:39350. Total connections: 0
2025-05-27 02:08:27,905 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=39350): WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 109, in receive_text
    raise RuntimeError(
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-05-27 02:08:27,907 - INFO - Message forwarding task for Address(host='127.0.0.1', port=39350) cancelled.
2025-05-27 02:08:27,907 - INFO - Cleanup finished for Address(host='127.0.0.1', port=39350) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:08:36,464 - INFO - Application shutdown event triggered.
2025-05-27 02:08:36,464 - INFO - Stopping MessageProcessor...
2025-05-27 02:08:36,464 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 02:08:36,464 - INFO - QueueForwarder task cancelled.
2025-05-27 02:08:36,464 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:08:36,464 - INFO - Application shutdown complete.
2025-05-27 02:10:55,818 - INFO - Application startup event triggered.
2025-05-27 02:10:55,818 - INFO - Initializing all queues...
2025-05-27 02:10:55,818 - INFO - All queues initialized on loop 791113248
2025-05-27 02:10:55,818 - INFO - Shared queues initialized.
2025-05-27 02:10:55,818 - INFO - Retrieved queue instances. Event loop ID: 791113248
2025-05-27 02:10:55,818 - INFO - SimulationManager ready state set to: True
2025-05-27 02:10:55,819 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:10:55,819 - INFO - MessageProcessor queues verified
2025-05-27 02:10:55,819 - INFO - MessageProcessor task started.
2025-05-27 02:10:55,819 - INFO - QueueForwarder queues verified
2025-05-27 02:10:55,819 - INFO - QueueForwarder task started.
2025-05-27 02:10:55,819 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:10:55,819 - INFO - Starting MessageProcessor
2025-05-27 02:10:55,819 - INFO - Starting QueueForwarder
2025-05-27 02:10:57,264 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50162)
2025-05-27 02:10:57,265 - INFO - Adding connection: 127.0.0.1:50162. Total connections: 1
2025-05-27 02:10:57,266 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=50162)
2025-05-27 02:10:57,266 - INFO - Sender task started for Address(host='127.0.0.1', port=50162)
2025-05-27 02:10:57,266 - INFO - Receiver task started for Address(host='127.0.0.1', port=50162)
2025-05-27 02:10:57,275 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=50162)
2025-05-27 02:10:57,276 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=50162): Object of type WebSocketMessage is not JSON serializable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(json.dumps(ws_msg))
                              ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type WebSocketMessage is not JSON serializable
2025-05-27 02:10:57,277 - INFO - Sender task for Address(host='127.0.0.1', port=50162) finished.
2025-05-27 02:10:58,457 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=50162)
2025-05-27 02:11:02,384 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=50162)
2025-05-27 02:11:02,384 - INFO - Processed 3 messages
2025-05-27 02:11:08,303 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=50162): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 02:11:08,304 - INFO - Receiver task for Address(host='127.0.0.1', port=50162) finished.
2025-05-27 02:11:08,304 - INFO - Initiating cleanup for connection: 127.0.0.1:50162
2025-05-27 02:11:08,305 - INFO - Starting cleanup for 127.0.0.1:50162
2025-05-27 02:11:08,305 - INFO - Connection cleanup completed for 127.0.0.1:50162. Remaining connections: 0
2025-05-27 02:11:08,305 - INFO - Cleanup finished for connection: 127.0.0.1:50162. Total connections: 0
2025-05-27 02:11:08,305 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=50162): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 02:11:08,306 - INFO - Message forwarding task for Address(host='127.0.0.1', port=50162) cancelled.
2025-05-27 02:11:08,306 - INFO - Cleanup finished for Address(host='127.0.0.1', port=50162) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:11:09,468 - INFO - Application shutdown event triggered.
2025-05-27 02:11:09,468 - INFO - Stopping MessageProcessor...
2025-05-27 02:11:09,468 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 02:11:09,469 - INFO - QueueForwarder task cancelled.
2025-05-27 02:11:09,469 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:11:09,469 - INFO - Application shutdown complete.
2025-05-27 02:11:39,243 - INFO - Application startup event triggered.
2025-05-27 02:11:39,243 - INFO - Initializing all queues...
2025-05-27 02:11:39,243 - INFO - All queues initialized on loop 597954080
2025-05-27 02:11:39,243 - INFO - Shared queues initialized.
2025-05-27 02:11:39,244 - INFO - Retrieved queue instances. Event loop ID: 597954080
2025-05-27 02:11:39,244 - INFO - SimulationManager ready state set to: True
2025-05-27 02:11:39,244 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:11:39,244 - INFO - MessageProcessor queues verified
2025-05-27 02:11:39,244 - INFO - MessageProcessor task started.
2025-05-27 02:11:39,244 - INFO - QueueForwarder queues verified
2025-05-27 02:11:39,244 - INFO - QueueForwarder task started.
2025-05-27 02:11:39,244 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:11:39,245 - INFO - Starting MessageProcessor
2025-05-27 02:11:39,245 - INFO - Starting QueueForwarder
2025-05-27 02:11:40,669 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=41480)
2025-05-27 02:11:40,669 - INFO - Adding connection: 127.0.0.1:41480. Total connections: 1
2025-05-27 02:11:40,671 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=41480)
2025-05-27 02:11:40,671 - INFO - Sender task started for Address(host='127.0.0.1', port=41480)
2025-05-27 02:11:40,671 - INFO - Receiver task started for Address(host='127.0.0.1', port=41480)
2025-05-27 02:11:40,678 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=41480)
2025-05-27 02:11:40,679 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=41480): Object of type WebSocketMessage is not JSON serializable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(json.dumps(ws_msg))
                              ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type WebSocketMessage is not JSON serializable
2025-05-27 02:11:40,681 - INFO - Sender task for Address(host='127.0.0.1', port=41480) finished.
2025-05-27 02:11:41,448 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=41480): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 02:11:41,449 - INFO - Receiver task for Address(host='127.0.0.1', port=41480) finished.
2025-05-27 02:11:41,449 - INFO - Initiating cleanup for connection: 127.0.0.1:41480
2025-05-27 02:11:41,449 - INFO - Starting cleanup for 127.0.0.1:41480
2025-05-27 02:11:41,449 - INFO - Connection cleanup completed for 127.0.0.1:41480. Remaining connections: 0
2025-05-27 02:11:41,449 - INFO - Cleanup finished for connection: 127.0.0.1:41480. Total connections: 0
2025-05-27 02:11:41,449 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=41480): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 02:11:41,450 - INFO - Message forwarding task for Address(host='127.0.0.1', port=41480) cancelled.
2025-05-27 02:11:41,451 - INFO - Cleanup finished for Address(host='127.0.0.1', port=41480) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:11:41,517 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=41490)
2025-05-27 02:11:41,518 - INFO - Adding connection: 127.0.0.1:41490. Total connections: 1
2025-05-27 02:11:41,519 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=41490)
2025-05-27 02:11:41,519 - INFO - Sender task started for Address(host='127.0.0.1', port=41490)
2025-05-27 02:11:41,519 - INFO - Receiver task started for Address(host='127.0.0.1', port=41490)
2025-05-27 02:11:41,524 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=41490)
2025-05-27 02:11:41,525 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=41490): Object of type WebSocketMessage is not JSON serializable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(json.dumps(ws_msg))
                              ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type WebSocketMessage is not JSON serializable
2025-05-27 02:11:41,526 - INFO - Sender task for Address(host='127.0.0.1', port=41490) finished.
2025-05-27 02:11:42,219 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=41490): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 02:11:42,220 - INFO - Receiver task for Address(host='127.0.0.1', port=41490) finished.
2025-05-27 02:11:42,221 - INFO - Initiating cleanup for connection: 127.0.0.1:41490
2025-05-27 02:11:42,221 - INFO - Starting cleanup for 127.0.0.1:41490
2025-05-27 02:11:42,221 - INFO - Connection cleanup completed for 127.0.0.1:41490. Remaining connections: 0
2025-05-27 02:11:42,221 - INFO - Cleanup finished for connection: 127.0.0.1:41490. Total connections: 0
2025-05-27 02:11:42,221 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=41490): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 02:11:42,221 - INFO - Message forwarding task for Address(host='127.0.0.1', port=41490) cancelled.
2025-05-27 02:11:42,222 - INFO - Cleanup finished for Address(host='127.0.0.1', port=41490) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:11:42,280 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=47318)
2025-05-27 02:11:42,280 - INFO - Adding connection: 127.0.0.1:47318. Total connections: 1
2025-05-27 02:11:42,281 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=47318)
2025-05-27 02:11:42,281 - INFO - Sender task started for Address(host='127.0.0.1', port=47318)
2025-05-27 02:11:42,281 - INFO - Receiver task started for Address(host='127.0.0.1', port=47318)
2025-05-27 02:11:42,284 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=47318)
2025-05-27 02:11:42,285 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=47318): Object of type WebSocketMessage is not JSON serializable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(json.dumps(ws_msg))
                              ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type WebSocketMessage is not JSON serializable
2025-05-27 02:11:42,286 - INFO - Sender task for Address(host='127.0.0.1', port=47318) finished.
2025-05-27 02:11:43,859 - INFO - Enqueuing valid message of type 'test_message' from Address(host='127.0.0.1', port=47318)
2025-05-27 02:11:47,335 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=47318)
2025-05-27 02:11:47,335 - INFO - Processed 5 messages
2025-05-27 02:12:07,321 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=47318)
2025-05-27 02:12:07,321 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=47318): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 02:12:07,322 - INFO - Receiver task for Address(host='127.0.0.1', port=47318) finished.
2025-05-27 02:12:07,322 - INFO - Initiating cleanup for connection: 127.0.0.1:47318
2025-05-27 02:12:07,323 - INFO - Starting cleanup for 127.0.0.1:47318
2025-05-27 02:12:07,324 - INFO - Closed WebSocket connection for 127.0.0.1:47318
2025-05-27 02:12:07,324 - INFO - Connection cleanup completed for 127.0.0.1:47318. Remaining connections: 0
2025-05-27 02:12:07,324 - INFO - Cleanup finished for connection: 127.0.0.1:47318. Total connections: 0
2025-05-27 02:12:07,324 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=47318): WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 109, in receive_text
    raise RuntimeError(
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-05-27 02:12:07,325 - INFO - Message forwarding task for Address(host='127.0.0.1', port=47318) cancelled.
2025-05-27 02:12:07,325 - INFO - Cleanup finished for Address(host='127.0.0.1', port=47318) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:21:35,292 - INFO - Application shutdown event triggered.
2025-05-27 02:21:35,292 - INFO - Stopping MessageProcessor...
2025-05-27 02:21:35,293 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 02:21:35,293 - INFO - QueueForwarder task cancelled.
2025-05-27 02:21:35,293 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:21:35,293 - INFO - Application shutdown complete.
2025-05-27 02:21:36,133 - INFO - Application startup event triggered.
2025-05-27 02:21:36,133 - INFO - Initializing all queues...
2025-05-27 02:21:36,133 - INFO - All queues initialized on loop 385089744
2025-05-27 02:21:36,133 - INFO - Shared queues initialized.
2025-05-27 02:21:36,133 - INFO - Retrieved queue instances. Event loop ID: 385089744
2025-05-27 02:21:36,134 - INFO - SimulationManager ready state set to: True
2025-05-27 02:21:36,134 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:21:36,134 - INFO - MessageProcessor queues verified
2025-05-27 02:21:36,134 - INFO - MessageProcessor task started.
2025-05-27 02:21:36,134 - INFO - QueueForwarder queues verified
2025-05-27 02:21:36,134 - INFO - QueueForwarder task started.
2025-05-27 02:21:36,134 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:21:36,134 - INFO - Starting MessageProcessor
2025-05-27 02:21:36,134 - INFO - Starting QueueForwarder
2025-05-27 02:21:36,336 - INFO - Application shutdown event triggered.
2025-05-27 02:21:36,336 - INFO - Stopping MessageProcessor...
2025-05-27 02:21:36,336 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 02:21:36,337 - INFO - QueueForwarder task cancelled.
2025-05-27 02:21:36,337 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:21:36,337 - INFO - Application shutdown complete.
2025-05-27 02:21:37,181 - INFO - Application startup event triggered.
2025-05-27 02:21:37,181 - INFO - Initializing all queues...
2025-05-27 02:21:37,181 - INFO - All queues initialized on loop 690745552
2025-05-27 02:21:37,182 - INFO - Shared queues initialized.
2025-05-27 02:21:37,182 - INFO - Retrieved queue instances. Event loop ID: 690745552
2025-05-27 02:21:37,182 - INFO - SimulationManager ready state set to: True
2025-05-27 02:21:37,182 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:21:37,182 - INFO - MessageProcessor queues verified
2025-05-27 02:21:37,182 - INFO - MessageProcessor task started.
2025-05-27 02:21:37,182 - INFO - QueueForwarder queues verified
2025-05-27 02:21:37,182 - INFO - QueueForwarder task started.
2025-05-27 02:21:37,182 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:21:37,182 - INFO - Starting MessageProcessor
2025-05-27 02:21:37,182 - INFO - Starting QueueForwarder
2025-05-27 02:21:39,390 - INFO - Application shutdown event triggered.
2025-05-27 02:21:39,391 - INFO - Stopping MessageProcessor...
2025-05-27 02:21:39,391 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 02:21:39,391 - INFO - QueueForwarder task cancelled.
2025-05-27 02:21:39,392 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:21:39,392 - INFO - Application shutdown complete.
2025-05-27 02:21:42,448 - INFO - Application startup event triggered.
2025-05-27 02:21:42,448 - INFO - Initializing all queues...
2025-05-27 02:21:42,448 - INFO - All queues initialized on loop 645787168
2025-05-27 02:21:42,448 - INFO - Shared queues initialized.
2025-05-27 02:21:42,448 - INFO - Retrieved queue instances. Event loop ID: 645787168
2025-05-27 02:21:42,448 - INFO - SimulationManager ready state set to: True
2025-05-27 02:21:42,449 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:21:42,449 - INFO - MessageProcessor queues verified
2025-05-27 02:21:42,449 - INFO - MessageProcessor task started.
2025-05-27 02:21:42,449 - INFO - QueueForwarder queues verified
2025-05-27 02:21:42,449 - INFO - QueueForwarder task started.
2025-05-27 02:21:42,449 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:21:42,449 - INFO - Starting MessageProcessor
2025-05-27 02:21:42,450 - INFO - Starting QueueForwarder
2025-05-27 02:24:04,215 - INFO - Application shutdown event triggered.
2025-05-27 02:24:04,215 - INFO - Stopping MessageProcessor...
2025-05-27 02:24:04,216 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 02:24:04,216 - INFO - QueueForwarder task cancelled.
2025-05-27 02:24:04,216 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:24:04,216 - INFO - Application shutdown complete.
2025-05-27 02:24:08,898 - INFO - Application startup event triggered.
2025-05-27 02:24:08,898 - INFO - Initializing all queues...
2025-05-27 02:24:08,898 - INFO - All queues initialized on loop 262966816
2025-05-27 02:24:08,898 - INFO - Shared queues initialized.
2025-05-27 02:24:08,899 - INFO - Retrieved queue instances. Event loop ID: 262966816
2025-05-27 02:24:08,899 - INFO - SimulationManager ready state set to: True
2025-05-27 02:24:08,899 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:24:08,899 - INFO - MessageProcessor queues verified
2025-05-27 02:24:08,899 - INFO - MessageProcessor task started.
2025-05-27 02:24:08,899 - INFO - QueueForwarder queues verified
2025-05-27 02:24:08,899 - INFO - QueueForwarder task started.
2025-05-27 02:24:08,900 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:24:08,900 - INFO - Starting MessageProcessor
2025-05-27 02:24:08,900 - INFO - Starting QueueForwarder
2025-05-27 02:24:10,244 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=51830)
2025-05-27 02:24:10,244 - INFO - Adding connection: 127.0.0.1:51830. Total connections: 1
2025-05-27 02:24:10,245 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=51830)
2025-05-27 02:24:10,245 - INFO - Sender task started for Address(host='127.0.0.1', port=51830)
2025-05-27 02:24:10,246 - INFO - Receiver task started for Address(host='127.0.0.1', port=51830)
2025-05-27 02:24:10,250 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=51830)
2025-05-27 02:24:10,251 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=51830): Object of type WebSocketMessage is not JSON serializable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(json.dumps(ws_msg))
                              ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type WebSocketMessage is not JSON serializable
2025-05-27 02:24:10,253 - INFO - Sender task for Address(host='127.0.0.1', port=51830) finished.
2025-05-27 02:24:14,109 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=51830): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 02:24:14,110 - INFO - Receiver task for Address(host='127.0.0.1', port=51830) finished.
2025-05-27 02:24:14,111 - INFO - Initiating cleanup for connection: 127.0.0.1:51830
2025-05-27 02:24:14,111 - INFO - Starting cleanup for 127.0.0.1:51830
2025-05-27 02:24:14,111 - INFO - Connection cleanup completed for 127.0.0.1:51830. Remaining connections: 0
2025-05-27 02:24:14,111 - INFO - Cleanup finished for connection: 127.0.0.1:51830. Total connections: 0
2025-05-27 02:24:14,111 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=51830): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 02:24:14,112 - INFO - Message forwarding task for Address(host='127.0.0.1', port=51830) cancelled.
2025-05-27 02:24:14,113 - INFO - Cleanup finished for Address(host='127.0.0.1', port=51830) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:24:14,170 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=59972)
2025-05-27 02:24:14,171 - INFO - Adding connection: 127.0.0.1:59972. Total connections: 1
2025-05-27 02:24:14,172 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=59972)
2025-05-27 02:24:14,173 - INFO - Sender task started for Address(host='127.0.0.1', port=59972)
2025-05-27 02:24:14,173 - INFO - Receiver task started for Address(host='127.0.0.1', port=59972)
2025-05-27 02:24:14,175 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=59972)
2025-05-27 02:24:14,176 - INFO - Processed 2 messages
2025-05-27 02:24:14,176 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=59972): Object of type WebSocketMessage is not JSON serializable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(json.dumps(ws_msg))
                              ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type WebSocketMessage is not JSON serializable
2025-05-27 02:24:14,177 - INFO - Sender task for Address(host='127.0.0.1', port=59972) finished.
2025-05-27 02:24:16,364 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=59972)
2025-05-27 02:24:27,652 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=59972): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 02:24:27,653 - INFO - Receiver task for Address(host='127.0.0.1', port=59972) finished.
2025-05-27 02:24:27,653 - INFO - Initiating cleanup for connection: 127.0.0.1:59972
2025-05-27 02:24:27,653 - INFO - Starting cleanup for 127.0.0.1:59972
2025-05-27 02:24:27,654 - INFO - Connection cleanup completed for 127.0.0.1:59972. Remaining connections: 0
2025-05-27 02:24:27,654 - INFO - Cleanup finished for connection: 127.0.0.1:59972. Total connections: 0
2025-05-27 02:24:27,654 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=59972): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 02:24:27,655 - INFO - Message forwarding task for Address(host='127.0.0.1', port=59972) cancelled.
2025-05-27 02:24:27,655 - INFO - Cleanup finished for Address(host='127.0.0.1', port=59972) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:24:31,680 - INFO - Application shutdown event triggered.
2025-05-27 02:24:31,680 - INFO - Stopping MessageProcessor...
2025-05-27 02:24:31,680 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 02:24:31,680 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 02:24:31,680 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:24:31,680 - INFO - Application shutdown complete.
2025-05-27 02:26:46,481 - INFO - Application startup event triggered.
2025-05-27 02:26:46,481 - INFO - Initializing all queues...
2025-05-27 02:26:46,481 - INFO - All queues initialized on loop 177729056
2025-05-27 02:26:46,481 - INFO - Shared queues initialized.
2025-05-27 02:26:46,481 - INFO - Retrieved queue instances. Event loop ID: 177729056
2025-05-27 02:26:46,482 - INFO - SimulationManager ready state set to: True
2025-05-27 02:26:46,482 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:26:46,482 - INFO - MessageProcessor queues verified
2025-05-27 02:26:46,482 - INFO - MessageProcessor task started.
2025-05-27 02:26:46,482 - INFO - QueueForwarder queues verified
2025-05-27 02:26:46,482 - INFO - QueueForwarder task started.
2025-05-27 02:26:46,483 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:26:46,483 - INFO - Starting MessageProcessor
2025-05-27 02:26:46,483 - INFO - Starting QueueForwarder
2025-05-27 02:26:47,929 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=41438)
2025-05-27 02:26:47,929 - INFO - Adding connection: 127.0.0.1:41438. Total connections: 1
2025-05-27 02:26:47,930 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=41438)
2025-05-27 02:26:47,930 - INFO - Sender task started for Address(host='127.0.0.1', port=41438)
2025-05-27 02:26:47,931 - INFO - Receiver task started for Address(host='127.0.0.1', port=41438)
2025-05-27 02:26:47,936 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=41438)
2025-05-27 02:26:47,937 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=41438): Object of type WebSocketMessage is not JSON serializable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(json.dumps(ws_msg))
                              ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type WebSocketMessage is not JSON serializable
2025-05-27 02:26:47,939 - INFO - Sender task for Address(host='127.0.0.1', port=41438) finished.
2025-05-27 02:26:49,763 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=41438)
2025-05-27 02:26:59,262 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=41438)
2025-05-27 02:26:59,263 - INFO - Processed 3 messages
2025-05-27 02:27:12,937 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=41438)
2025-05-27 02:27:12,938 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=41438): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 02:27:12,939 - INFO - Receiver task for Address(host='127.0.0.1', port=41438) finished.
2025-05-27 02:27:12,939 - INFO - Initiating cleanup for connection: 127.0.0.1:41438
2025-05-27 02:27:12,939 - INFO - Starting cleanup for 127.0.0.1:41438
2025-05-27 02:27:12,940 - INFO - Closed WebSocket connection for 127.0.0.1:41438
2025-05-27 02:27:12,940 - INFO - Connection cleanup completed for 127.0.0.1:41438. Remaining connections: 0
2025-05-27 02:27:12,940 - INFO - Cleanup finished for connection: 127.0.0.1:41438. Total connections: 0
2025-05-27 02:27:12,940 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=41438): WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 109, in receive_text
    raise RuntimeError(
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-05-27 02:27:12,942 - INFO - Message forwarding task for Address(host='127.0.0.1', port=41438) cancelled.
2025-05-27 02:27:12,942 - INFO - Cleanup finished for Address(host='127.0.0.1', port=41438) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:27:15,487 - INFO - Application shutdown event triggered.
2025-05-27 02:27:15,488 - INFO - Stopping MessageProcessor...
2025-05-27 02:27:15,488 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 02:27:15,488 - INFO - QueueForwarder task cancelled.
2025-05-27 02:27:15,488 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:27:15,488 - INFO - Application shutdown complete.
2025-05-27 02:28:28,981 - INFO - Application startup event triggered.
2025-05-27 02:28:28,981 - INFO - Initializing all queues...
2025-05-27 02:28:28,981 - INFO - All queues initialized on loop 884551200
2025-05-27 02:28:28,981 - INFO - Shared queues initialized.
2025-05-27 02:28:28,981 - INFO - Retrieved queue instances. Event loop ID: 884551200
2025-05-27 02:28:28,982 - INFO - SimulationManager ready state set to: True
2025-05-27 02:28:28,982 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:28:28,982 - INFO - MessageProcessor queues verified
2025-05-27 02:28:28,982 - INFO - MessageProcessor task started.
2025-05-27 02:28:28,982 - INFO - QueueForwarder queues verified
2025-05-27 02:28:28,982 - INFO - QueueForwarder task started.
2025-05-27 02:28:28,982 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:28:28,982 - INFO - Starting MessageProcessor
2025-05-27 02:28:28,983 - INFO - Starting QueueForwarder
2025-05-27 02:28:30,126 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53742)
2025-05-27 02:28:30,126 - INFO - Adding connection: 127.0.0.1:53742. Total connections: 1
2025-05-27 02:28:30,128 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=53742)
2025-05-27 02:28:30,128 - INFO - Sender task started for Address(host='127.0.0.1', port=53742)
2025-05-27 02:28:30,128 - INFO - Receiver task started for Address(host='127.0.0.1', port=53742)
2025-05-27 02:28:30,150 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=53742)
2025-05-27 02:28:30,151 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=53742): Object of type WebSocketMessage is not JSON serializable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(json.dumps(ws_msg))
                              ^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type WebSocketMessage is not JSON serializable
2025-05-27 02:28:30,152 - INFO - Sender task for Address(host='127.0.0.1', port=53742) finished.
2025-05-27 02:28:42,532 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=53742): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 02:28:42,533 - INFO - Receiver task for Address(host='127.0.0.1', port=53742) finished.
2025-05-27 02:28:42,534 - INFO - Initiating cleanup for connection: 127.0.0.1:53742
2025-05-27 02:28:42,534 - INFO - Starting cleanup for 127.0.0.1:53742
2025-05-27 02:28:42,534 - INFO - Connection cleanup completed for 127.0.0.1:53742. Remaining connections: 0
2025-05-27 02:28:42,534 - INFO - Cleanup finished for connection: 127.0.0.1:53742. Total connections: 0
2025-05-27 02:28:42,534 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=53742): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 02:28:42,535 - INFO - Message forwarding task for Address(host='127.0.0.1', port=53742) cancelled.
2025-05-27 02:28:42,535 - INFO - Cleanup finished for Address(host='127.0.0.1', port=53742) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:28:42,631 - INFO - Application shutdown event triggered.
2025-05-27 02:28:42,631 - INFO - Stopping MessageProcessor...
2025-05-27 02:28:42,632 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 02:28:42,632 - INFO - QueueForwarder task cancelled.
2025-05-27 02:28:42,632 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:28:42,632 - INFO - Application shutdown complete.
2025-05-27 02:32:20,094 - INFO - Application startup event triggered.
2025-05-27 02:32:20,094 - INFO - Initializing all queues...
2025-05-27 02:32:20,094 - INFO - All queues initialized on loop 331796000
2025-05-27 02:32:20,094 - INFO - Shared queues initialized.
2025-05-27 02:32:20,095 - INFO - Retrieved queue instances. Event loop ID: 331796000
2025-05-27 02:32:20,095 - INFO - SimulationManager ready state set to: True
2025-05-27 02:32:20,095 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:32:20,095 - INFO - MessageProcessor queues verified
2025-05-27 02:32:20,095 - INFO - MessageProcessor task started.
2025-05-27 02:32:20,095 - INFO - QueueForwarder queues verified
2025-05-27 02:32:20,095 - INFO - QueueForwarder task started.
2025-05-27 02:32:20,095 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:32:20,095 - INFO - Starting MessageProcessor
2025-05-27 02:32:20,095 - INFO - Starting QueueForwarder
2025-05-27 02:32:21,492 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=44390)
2025-05-27 02:32:21,492 - INFO - Adding connection: 127.0.0.1:44390. Total connections: 1
2025-05-27 02:32:21,493 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=44390)
2025-05-27 02:32:21,494 - INFO - Sender task started for Address(host='127.0.0.1', port=44390)
2025-05-27 02:32:21,494 - INFO - Receiver task started for Address(host='127.0.0.1', port=44390)
2025-05-27 02:32:21,499 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=44390)
2025-05-27 02:32:21,500 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=44390): 'WebSocketMessage' object has no attribute 'model_dump_json'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.model_dump_json())
                              ^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump_json'
2025-05-27 02:32:21,504 - INFO - Sender task for Address(host='127.0.0.1', port=44390) finished.
2025-05-27 02:32:23,107 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=44390)
2025-05-27 02:32:37,612 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=44390): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 02:32:37,613 - INFO - Receiver task for Address(host='127.0.0.1', port=44390) finished.
2025-05-27 02:32:37,613 - INFO - Initiating cleanup for connection: 127.0.0.1:44390
2025-05-27 02:32:37,613 - INFO - Starting cleanup for 127.0.0.1:44390
2025-05-27 02:32:37,613 - INFO - Connection cleanup completed for 127.0.0.1:44390. Remaining connections: 0
2025-05-27 02:32:37,613 - INFO - Cleanup finished for connection: 127.0.0.1:44390. Total connections: 0
2025-05-27 02:32:37,614 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=44390): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 02:32:37,615 - INFO - Message forwarding task for Address(host='127.0.0.1', port=44390) cancelled.
2025-05-27 02:32:37,615 - INFO - Cleanup finished for Address(host='127.0.0.1', port=44390) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:32:40,169 - INFO - Application shutdown event triggered.
2025-05-27 02:32:40,170 - INFO - Stopping MessageProcessor...
2025-05-27 02:32:40,170 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 02:32:40,170 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:32:40,170 - INFO - Application shutdown complete.
2025-05-27 02:33:34,358 - INFO - Application startup event triggered.
2025-05-27 02:33:34,358 - INFO - Initializing all queues...
2025-05-27 02:33:34,358 - INFO - All queues initialized on loop 575725088
2025-05-27 02:33:34,358 - INFO - Shared queues initialized.
2025-05-27 02:33:34,358 - INFO - Retrieved queue instances. Event loop ID: 575725088
2025-05-27 02:33:34,359 - INFO - SimulationManager ready state set to: True
2025-05-27 02:33:34,359 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:33:34,359 - INFO - MessageProcessor queues verified
2025-05-27 02:33:34,359 - INFO - MessageProcessor task started.
2025-05-27 02:33:34,359 - INFO - QueueForwarder queues verified
2025-05-27 02:33:34,360 - INFO - QueueForwarder task started.
2025-05-27 02:33:34,360 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:33:34,360 - INFO - Starting MessageProcessor
2025-05-27 02:33:34,360 - INFO - Starting QueueForwarder
2025-05-27 02:33:35,786 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=56396)
2025-05-27 02:33:35,786 - INFO - Adding connection: 127.0.0.1:56396. Total connections: 1
2025-05-27 02:33:35,787 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=56396)
2025-05-27 02:33:35,788 - INFO - Sender task started for Address(host='127.0.0.1', port=56396)
2025-05-27 02:33:35,788 - INFO - Receiver task started for Address(host='127.0.0.1', port=56396)
2025-05-27 02:33:35,791 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=56396)
2025-05-27 02:33:37,172 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=56396)
2025-05-27 02:33:51,227 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=56396): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 02:33:51,228 - INFO - Receiver task for Address(host='127.0.0.1', port=56396) finished.
2025-05-27 02:33:51,428 - INFO - Message forwarding task for Address(host='127.0.0.1', port=56396) cancelled.
2025-05-27 02:33:51,429 - INFO - Application shutdown event triggered.
2025-05-27 02:33:51,429 - INFO - Stopping MessageProcessor...
2025-05-27 02:33:51,429 - INFO - Sender task for Address(host='127.0.0.1', port=56396) was cancelled.
2025-05-27 02:33:51,429 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 02:33:51,430 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 02:33:51,430 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:33:51,430 - INFO - Application shutdown complete.
2025-05-27 02:33:51,431 - INFO - Initiating cleanup for connection: 127.0.0.1:56396
2025-05-27 02:33:51,431 - INFO - Starting cleanup for 127.0.0.1:56396
2025-05-27 02:33:51,431 - INFO - Connection cleanup completed for 127.0.0.1:56396. Remaining connections: 0
2025-05-27 02:33:51,431 - INFO - Cleanup finished for connection: 127.0.0.1:56396. Total connections: 0
2025-05-27 02:33:51,432 - INFO - Cleanup finished for Address(host='127.0.0.1', port=56396) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:34:16,610 - INFO - Application startup event triggered.
2025-05-27 02:34:16,610 - INFO - Initializing all queues...
2025-05-27 02:34:16,610 - INFO - All queues initialized on loop 514346528
2025-05-27 02:34:16,610 - INFO - Shared queues initialized.
2025-05-27 02:34:16,610 - INFO - Retrieved queue instances. Event loop ID: 514346528
2025-05-27 02:34:16,610 - INFO - SimulationManager ready state set to: True
2025-05-27 02:34:16,611 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:34:16,611 - INFO - MessageProcessor queues verified
2025-05-27 02:34:16,611 - INFO - MessageProcessor task started.
2025-05-27 02:34:16,611 - INFO - QueueForwarder queues verified
2025-05-27 02:34:16,611 - INFO - QueueForwarder task started.
2025-05-27 02:34:16,611 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:34:16,611 - INFO - Starting MessageProcessor
2025-05-27 02:34:16,612 - INFO - Starting QueueForwarder
2025-05-27 02:34:17,981 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=59238)
2025-05-27 02:34:17,981 - INFO - Adding connection: 127.0.0.1:59238. Total connections: 1
2025-05-27 02:34:17,982 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=59238)
2025-05-27 02:34:17,983 - INFO - Sender task started for Address(host='127.0.0.1', port=59238)
2025-05-27 02:34:17,983 - INFO - Receiver task started for Address(host='127.0.0.1', port=59238)
2025-05-27 02:34:17,988 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=59238)
2025-05-27 02:34:25,497 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=59238)
2025-05-27 02:34:25,498 - INFO - Processed 2 messages
2025-05-27 02:34:33,671 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=59238)
2025-05-27 02:34:33,672 - INFO - Processed 1 messages
2025-05-27 02:34:41,678 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=59238): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 02:34:41,679 - INFO - Receiver task for Address(host='127.0.0.1', port=59238) finished.
2025-05-27 02:34:41,755 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=56756)
2025-05-27 02:34:41,755 - INFO - Adding connection: 127.0.0.1:56756. Total connections: 2
2025-05-27 02:34:41,756 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=56756)
2025-05-27 02:34:41,756 - INFO - Sender task started for Address(host='127.0.0.1', port=56756)
2025-05-27 02:34:41,757 - INFO - Receiver task started for Address(host='127.0.0.1', port=56756)
2025-05-27 02:34:41,777 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=56756)
2025-05-27 02:34:41,778 - INFO - Processed 1 messages
2025-05-27 02:34:41,778 - WARNING - Failed to send message to Address(host='127.0.0.1', port=59238), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 02:34:41,779 - INFO - Sender task for Address(host='127.0.0.1', port=59238) finished.
2025-05-27 02:34:41,779 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=59238)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 50, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 02:34:41,781 - INFO - Initiating cleanup for connection: 127.0.0.1:59238
2025-05-27 02:34:41,781 - INFO - Starting cleanup for 127.0.0.1:59238
2025-05-27 02:34:41,781 - INFO - Connection cleanup completed for 127.0.0.1:59238. Remaining connections: 1
2025-05-27 02:34:41,781 - INFO - Cleanup finished for connection: 127.0.0.1:59238. Total connections: 1
2025-05-27 02:34:41,782 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=59238): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 02:34:41,783 - INFO - Cleanup finished for Address(host='127.0.0.1', port=59238) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:34:46,618 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=56756)
2025-05-27 02:35:06,778 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=56756)
2025-05-27 02:35:06,778 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=56756): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 02:35:06,779 - INFO - Receiver task for Address(host='127.0.0.1', port=56756) finished.
2025-05-27 02:36:12,853 - INFO - Application shutdown event triggered.
2025-05-27 02:36:12,853 - INFO - Stopping MessageProcessor...
2025-05-27 02:36:12,854 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 02:36:12,854 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:36:12,854 - INFO - Application shutdown complete.
2025-05-27 02:36:12,855 - INFO - Sender task for Address(host='127.0.0.1', port=56756) was cancelled.
2025-05-27 02:36:12,855 - INFO - Message forwarding task for Address(host='127.0.0.1', port=56756) cancelled.
2025-05-27 02:36:12,856 - INFO - Initiating cleanup for connection: 127.0.0.1:56756
2025-05-27 02:36:12,856 - INFO - Starting cleanup for 127.0.0.1:56756
2025-05-27 02:36:12,856 - INFO - Closed WebSocket connection for 127.0.0.1:56756
2025-05-27 02:36:12,856 - INFO - Connection cleanup completed for 127.0.0.1:56756. Remaining connections: 0
2025-05-27 02:36:12,856 - INFO - Cleanup finished for connection: 127.0.0.1:56756. Total connections: 0
2025-05-27 02:36:12,856 - INFO - Cleanup finished for Address(host='127.0.0.1', port=56756) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:36:16,567 - INFO - Application startup event triggered.
2025-05-27 02:36:16,567 - INFO - Initializing all queues...
2025-05-27 02:36:16,568 - INFO - All queues initialized on loop 581172768
2025-05-27 02:36:16,568 - INFO - Shared queues initialized.
2025-05-27 02:36:16,568 - INFO - Retrieved queue instances. Event loop ID: 581172768
2025-05-27 02:36:16,568 - INFO - SimulationManager ready state set to: True
2025-05-27 02:36:16,568 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:36:16,568 - INFO - MessageProcessor queues verified
2025-05-27 02:36:16,569 - INFO - MessageProcessor task started.
2025-05-27 02:36:16,569 - INFO - QueueForwarder queues verified
2025-05-27 02:36:16,569 - INFO - QueueForwarder task started.
2025-05-27 02:36:16,569 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:36:16,569 - INFO - Starting MessageProcessor
2025-05-27 02:36:16,569 - INFO - Starting QueueForwarder
2025-05-27 02:36:17,978 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=60912)
2025-05-27 02:36:17,978 - INFO - Adding connection: 127.0.0.1:60912. Total connections: 1
2025-05-27 02:36:17,980 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=60912)
2025-05-27 02:36:17,980 - INFO - Sender task started for Address(host='127.0.0.1', port=60912)
2025-05-27 02:36:17,980 - INFO - Receiver task started for Address(host='127.0.0.1', port=60912)
2025-05-27 02:36:17,987 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=60912)
2025-05-27 02:36:27,055 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=60912)
2025-05-27 02:36:27,056 - INFO - Processed 2 messages
2025-05-27 02:36:35,504 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=60912)
2025-05-27 02:36:35,505 - INFO - Processed 1 messages
2025-05-27 02:36:42,808 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=60912)
2025-05-27 02:36:42,808 - INFO - Processed 1 messages
2025-05-27 02:36:42,987 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=60912)
2025-05-27 02:36:42,987 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=60912): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 02:36:42,989 - INFO - Receiver task for Address(host='127.0.0.1', port=60912) finished.
2025-05-27 02:36:48,386 - INFO - Sender task for Address(host='127.0.0.1', port=60912) was cancelled.
2025-05-27 02:36:48,386 - INFO - Application shutdown event triggered.
2025-05-27 02:36:48,386 - INFO - Stopping MessageProcessor...
2025-05-27 02:36:48,387 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 02:36:48,387 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:36:48,387 - INFO - Application shutdown complete.
2025-05-27 02:36:48,388 - INFO - Message forwarding task for Address(host='127.0.0.1', port=60912) cancelled.
2025-05-27 02:36:48,388 - INFO - Initiating cleanup for connection: 127.0.0.1:60912
2025-05-27 02:36:48,389 - INFO - Starting cleanup for 127.0.0.1:60912
2025-05-27 02:36:48,389 - INFO - Closed WebSocket connection for 127.0.0.1:60912
2025-05-27 02:36:48,389 - INFO - Connection cleanup completed for 127.0.0.1:60912. Remaining connections: 0
2025-05-27 02:36:48,389 - INFO - Cleanup finished for connection: 127.0.0.1:60912. Total connections: 0
2025-05-27 02:36:48,389 - INFO - Cleanup finished for Address(host='127.0.0.1', port=60912) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:36:51,010 - INFO - Application startup event triggered.
2025-05-27 02:36:51,010 - INFO - Initializing all queues...
2025-05-27 02:36:51,010 - INFO - All queues initialized on loop 520216096
2025-05-27 02:36:51,010 - INFO - Shared queues initialized.
2025-05-27 02:36:51,010 - INFO - Retrieved queue instances. Event loop ID: 520216096
2025-05-27 02:36:51,010 - INFO - SimulationManager ready state set to: True
2025-05-27 02:36:51,011 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:36:51,011 - INFO - MessageProcessor queues verified
2025-05-27 02:36:51,011 - INFO - MessageProcessor task started.
2025-05-27 02:36:51,011 - INFO - QueueForwarder queues verified
2025-05-27 02:36:51,011 - INFO - QueueForwarder task started.
2025-05-27 02:36:51,011 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:36:51,011 - INFO - Starting MessageProcessor
2025-05-27 02:36:51,011 - INFO - Starting QueueForwarder
2025-05-27 02:36:52,310 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=47198)
2025-05-27 02:36:52,310 - INFO - Adding connection: 127.0.0.1:47198. Total connections: 1
2025-05-27 02:36:52,311 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=47198)
2025-05-27 02:36:52,312 - INFO - Sender task started for Address(host='127.0.0.1', port=47198)
2025-05-27 02:36:52,312 - INFO - Receiver task started for Address(host='127.0.0.1', port=47198)
2025-05-27 02:36:52,316 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=47198)
2025-05-27 02:37:17,317 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=47198)
2025-05-27 02:37:17,317 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=47198): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 02:37:17,318 - INFO - Receiver task for Address(host='127.0.0.1', port=47198) finished.
2025-05-27 02:37:26,659 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=55330)
2025-05-27 02:37:26,659 - INFO - Adding connection: 127.0.0.1:55330. Total connections: 2
2025-05-27 02:37:26,660 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=55330)
2025-05-27 02:37:26,660 - INFO - Sender task started for Address(host='127.0.0.1', port=55330)
2025-05-27 02:37:26,660 - INFO - Receiver task started for Address(host='127.0.0.1', port=55330)
2025-05-27 02:37:26,678 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=55330)
2025-05-27 02:37:26,679 - INFO - Processed 2 messages
2025-05-27 02:37:26,679 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=47198): received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2025-05-27 02:37:26,682 - INFO - Sender task for Address(host='127.0.0.1', port=47198) finished.
2025-05-27 02:37:26,683 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=47198)): received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 50, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2025-05-27 02:37:26,684 - INFO - Initiating cleanup for connection: 127.0.0.1:47198
2025-05-27 02:37:26,684 - INFO - Starting cleanup for 127.0.0.1:47198
2025-05-27 02:37:26,685 - INFO - Closed WebSocket connection for 127.0.0.1:47198
2025-05-27 02:37:26,685 - INFO - Connection cleanup completed for 127.0.0.1:47198. Remaining connections: 1
2025-05-27 02:37:26,685 - INFO - Cleanup finished for connection: 127.0.0.1:47198. Total connections: 1
2025-05-27 02:37:26,685 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=47198): WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 109, in receive_text
    raise RuntimeError(
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-05-27 02:37:26,686 - INFO - Cleanup finished for Address(host='127.0.0.1', port=47198) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:37:33,570 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=55330)
2025-05-27 02:37:33,571 - INFO - Processed 1 messages
2025-05-27 02:37:39,200 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=55330)
2025-05-27 02:37:39,201 - INFO - Processed 1 messages
2025-05-27 02:37:52,320 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=55330)
2025-05-27 02:37:52,321 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=55330): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 02:37:52,321 - INFO - Receiver task for Address(host='127.0.0.1', port=55330) finished.
2025-05-27 02:38:16,316 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37584)
2025-05-27 02:38:16,316 - INFO - Adding connection: 127.0.0.1:37584. Total connections: 2
2025-05-27 02:38:16,318 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=37584)
2025-05-27 02:38:16,318 - INFO - Sender task started for Address(host='127.0.0.1', port=37584)
2025-05-27 02:38:16,318 - INFO - Receiver task started for Address(host='127.0.0.1', port=37584)
2025-05-27 02:38:16,335 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=37584)
2025-05-27 02:38:16,336 - INFO - Processed 1 messages
2025-05-27 02:38:16,336 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=55330): received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2025-05-27 02:38:16,337 - INFO - Sender task for Address(host='127.0.0.1', port=55330) finished.
2025-05-27 02:38:16,338 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=55330)): received 1001 (going away); then sent 1001 (going away)
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 50, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1001 (going away); then sent 1001 (going away)
2025-05-27 02:38:16,339 - INFO - Initiating cleanup for connection: 127.0.0.1:55330
2025-05-27 02:38:16,339 - INFO - Starting cleanup for 127.0.0.1:55330
2025-05-27 02:38:16,339 - INFO - Closed WebSocket connection for 127.0.0.1:55330
2025-05-27 02:38:16,339 - INFO - Connection cleanup completed for 127.0.0.1:55330. Remaining connections: 1
2025-05-27 02:38:16,339 - INFO - Cleanup finished for connection: 127.0.0.1:55330. Total connections: 1
2025-05-27 02:38:16,339 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=55330): WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 109, in receive_text
    raise RuntimeError(
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-05-27 02:38:16,340 - INFO - Cleanup finished for Address(host='127.0.0.1', port=55330) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:38:22,739 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=37584)
2025-05-27 02:38:22,740 - INFO - Processed 1 messages
2025-05-27 02:38:42,320 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=37584)
2025-05-27 02:38:42,320 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=37584): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 02:38:42,321 - INFO - Receiver task for Address(host='127.0.0.1', port=37584) finished.
2025-05-27 02:39:07,323 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=45494)
2025-05-27 02:39:07,323 - INFO - Adding connection: 127.0.0.1:45494. Total connections: 2
2025-05-27 02:39:07,324 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=45494)
2025-05-27 02:39:07,324 - INFO - Sender task started for Address(host='127.0.0.1', port=45494)
2025-05-27 02:39:07,324 - INFO - Receiver task started for Address(host='127.0.0.1', port=45494)
2025-05-27 02:39:07,326 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=45494)
2025-05-27 02:39:07,326 - INFO - Processed 1 messages
2025-05-27 02:39:07,326 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=37584): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 02:39:07,327 - INFO - Sender task for Address(host='127.0.0.1', port=37584) finished.
2025-05-27 02:39:07,327 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=37584)): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 50, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 02:39:07,328 - INFO - Initiating cleanup for connection: 127.0.0.1:37584
2025-05-27 02:39:07,328 - INFO - Starting cleanup for 127.0.0.1:37584
2025-05-27 02:39:07,328 - INFO - Closed WebSocket connection for 127.0.0.1:37584
2025-05-27 02:39:07,328 - INFO - Connection cleanup completed for 127.0.0.1:37584. Remaining connections: 1
2025-05-27 02:39:07,328 - INFO - Cleanup finished for connection: 127.0.0.1:37584. Total connections: 1
2025-05-27 02:39:07,328 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=37584): WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 109, in receive_text
    raise RuntimeError(
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-05-27 02:39:07,329 - INFO - Cleanup finished for Address(host='127.0.0.1', port=37584) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:39:33,320 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=45494)
2025-05-27 02:39:33,321 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=45494): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 02:39:33,321 - INFO - Receiver task for Address(host='127.0.0.1', port=45494) finished.
2025-05-27 02:39:58,323 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53752)
2025-05-27 02:39:58,323 - INFO - Adding connection: 127.0.0.1:53752. Total connections: 2
2025-05-27 02:39:58,324 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=53752)
2025-05-27 02:39:58,324 - INFO - Sender task started for Address(host='127.0.0.1', port=53752)
2025-05-27 02:39:58,324 - INFO - Receiver task started for Address(host='127.0.0.1', port=53752)
2025-05-27 02:39:58,326 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=53752)
2025-05-27 02:39:58,326 - INFO - Processed 1 messages
2025-05-27 02:39:58,326 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=45494)): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 50, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 02:39:58,327 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=45494): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 02:39:58,328 - INFO - Sender task for Address(host='127.0.0.1', port=45494) finished.
2025-05-27 02:39:58,328 - INFO - Initiating cleanup for connection: 127.0.0.1:45494
2025-05-27 02:39:58,328 - INFO - Starting cleanup for 127.0.0.1:45494
2025-05-27 02:39:58,329 - INFO - Closed WebSocket connection for 127.0.0.1:45494
2025-05-27 02:39:58,329 - INFO - Connection cleanup completed for 127.0.0.1:45494. Remaining connections: 1
2025-05-27 02:39:58,329 - INFO - Cleanup finished for connection: 127.0.0.1:45494. Total connections: 1
2025-05-27 02:39:58,329 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=45494): WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 109, in receive_text
    raise RuntimeError(
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-05-27 02:39:58,329 - INFO - Cleanup finished for Address(host='127.0.0.1', port=45494) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:40:24,321 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=53752)
2025-05-27 02:40:24,321 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=53752): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 02:40:24,322 - INFO - Receiver task for Address(host='127.0.0.1', port=53752) finished.
2025-05-27 02:40:49,323 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=39950)
2025-05-27 02:40:49,324 - INFO - Adding connection: 127.0.0.1:39950. Total connections: 2
2025-05-27 02:40:49,325 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=39950)
2025-05-27 02:40:49,325 - INFO - Sender task started for Address(host='127.0.0.1', port=39950)
2025-05-27 02:40:49,325 - INFO - Receiver task started for Address(host='127.0.0.1', port=39950)
2025-05-27 02:40:49,327 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=39950)
2025-05-27 02:40:49,328 - INFO - Processed 1 messages
2025-05-27 02:40:49,328 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=53752)): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 50, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 02:40:49,329 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=53752): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 02:40:49,330 - INFO - Sender task for Address(host='127.0.0.1', port=53752) finished.
2025-05-27 02:40:49,330 - INFO - Initiating cleanup for connection: 127.0.0.1:53752
2025-05-27 02:40:49,330 - INFO - Starting cleanup for 127.0.0.1:53752
2025-05-27 02:40:49,330 - INFO - Closed WebSocket connection for 127.0.0.1:53752
2025-05-27 02:40:49,330 - INFO - Connection cleanup completed for 127.0.0.1:53752. Remaining connections: 1
2025-05-27 02:40:49,330 - INFO - Cleanup finished for connection: 127.0.0.1:53752. Total connections: 1
2025-05-27 02:40:49,330 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=53752): WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 109, in receive_text
    raise RuntimeError(
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-05-27 02:40:49,331 - INFO - Cleanup finished for Address(host='127.0.0.1', port=53752) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:41:15,321 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=39950)
2025-05-27 02:41:15,321 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=39950): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 02:41:15,322 - INFO - Receiver task for Address(host='127.0.0.1', port=39950) finished.
2025-05-27 02:41:40,323 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=34030)
2025-05-27 02:41:40,323 - INFO - Adding connection: 127.0.0.1:34030. Total connections: 2
2025-05-27 02:41:40,325 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=34030)
2025-05-27 02:41:40,325 - INFO - Sender task started for Address(host='127.0.0.1', port=34030)
2025-05-27 02:41:40,325 - INFO - Receiver task started for Address(host='127.0.0.1', port=34030)
2025-05-27 02:41:40,327 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=34030)
2025-05-27 02:41:40,327 - INFO - Processed 1 messages
2025-05-27 02:41:40,327 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=39950)): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 50, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 02:41:40,328 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=39950): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 108, in _sender
    await websocket.send_text(ws_msg.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 02:41:40,329 - INFO - Sender task for Address(host='127.0.0.1', port=39950) finished.
2025-05-27 02:41:40,329 - INFO - Initiating cleanup for connection: 127.0.0.1:39950
2025-05-27 02:41:40,329 - INFO - Starting cleanup for 127.0.0.1:39950
2025-05-27 02:41:40,329 - INFO - Closed WebSocket connection for 127.0.0.1:39950
2025-05-27 02:41:40,329 - INFO - Connection cleanup completed for 127.0.0.1:39950. Remaining connections: 1
2025-05-27 02:41:40,329 - INFO - Cleanup finished for connection: 127.0.0.1:39950. Total connections: 1
2025-05-27 02:41:40,329 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=39950): WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 109, in receive_text
    raise RuntimeError(
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-05-27 02:41:40,330 - INFO - Cleanup finished for Address(host='127.0.0.1', port=39950) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:42:06,321 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=34030)
2025-05-27 02:42:06,321 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=34030): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 02:42:06,322 - INFO - Receiver task for Address(host='127.0.0.1', port=34030) finished.
2025-05-27 02:43:45,558 - INFO - Message forwarding task for Address(host='127.0.0.1', port=34030) cancelled.
2025-05-27 02:43:45,559 - INFO - Sender task for Address(host='127.0.0.1', port=34030) was cancelled.
2025-05-27 02:43:45,559 - INFO - Application shutdown event triggered.
2025-05-27 02:43:45,559 - INFO - Stopping MessageProcessor...
2025-05-27 02:43:45,559 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 02:43:45,559 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:43:45,559 - INFO - Application shutdown complete.
2025-05-27 02:43:45,560 - INFO - Initiating cleanup for connection: 127.0.0.1:34030
2025-05-27 02:43:45,561 - INFO - Starting cleanup for 127.0.0.1:34030
2025-05-27 02:43:45,561 - INFO - Closed WebSocket connection for 127.0.0.1:34030
2025-05-27 02:43:45,561 - INFO - Connection cleanup completed for 127.0.0.1:34030. Remaining connections: 0
2025-05-27 02:43:45,561 - INFO - Cleanup finished for connection: 127.0.0.1:34030. Total connections: 0
2025-05-27 02:43:45,561 - INFO - Cleanup finished for Address(host='127.0.0.1', port=34030) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:43:52,992 - INFO - Application startup event triggered.
2025-05-27 02:43:52,992 - INFO - Initializing all queues...
2025-05-27 02:43:52,992 - INFO - All queues initialized on loop 651230752
2025-05-27 02:43:52,992 - INFO - Shared queues initialized.
2025-05-27 02:43:52,992 - INFO - Retrieved queue instances. Event loop ID: 651230752
2025-05-27 02:43:52,992 - INFO - SimulationManager ready state set to: True
2025-05-27 02:43:52,992 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:43:52,992 - INFO - MessageProcessor queues verified
2025-05-27 02:43:52,993 - INFO - MessageProcessor task started.
2025-05-27 02:43:52,993 - INFO - QueueForwarder queues verified
2025-05-27 02:43:52,993 - INFO - QueueForwarder task started.
2025-05-27 02:43:52,993 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:43:52,993 - INFO - Starting MessageProcessor
2025-05-27 02:43:52,993 - INFO - Starting QueueForwarder
2025-05-27 02:43:54,325 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=55580)
2025-05-27 02:43:54,325 - INFO - Adding connection: 127.0.0.1:55580. Total connections: 1
2025-05-27 02:43:54,326 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=55580)
2025-05-27 02:43:54,327 - INFO - Sender task started for Address(host='127.0.0.1', port=55580)
2025-05-27 02:43:54,327 - INFO - Receiver task started for Address(host='127.0.0.1', port=55580)
2025-05-27 02:43:54,330 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=55580)
2025-05-27 02:43:54,401 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=55592)
2025-05-27 02:43:54,401 - INFO - Adding connection: 127.0.0.1:55592. Total connections: 2
2025-05-27 02:43:54,402 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=55592)
2025-05-27 02:43:54,402 - INFO - Sender task started for Address(host='127.0.0.1', port=55592)
2025-05-27 02:43:54,403 - INFO - Receiver task started for Address(host='127.0.0.1', port=55592)
2025-05-27 02:43:54,424 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=55592)
2025-05-27 02:43:55,894 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=55592)
2025-05-27 02:44:16,725 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=55592): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 02:44:16,726 - INFO - Receiver task for Address(host='127.0.0.1', port=55592) finished.
2025-05-27 02:44:18,788 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=55580): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 02:44:18,789 - INFO - Receiver task for Address(host='127.0.0.1', port=55580) finished.
2025-05-27 02:44:18,989 - INFO - Sender task for Address(host='127.0.0.1', port=55580) was cancelled.
2025-05-27 02:44:18,989 - INFO - Application shutdown event triggered.
2025-05-27 02:44:18,990 - INFO - Stopping MessageProcessor...
2025-05-27 02:44:18,990 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 02:44:18,990 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:44:18,990 - INFO - Application shutdown complete.
2025-05-27 02:44:18,991 - INFO - Sender task for Address(host='127.0.0.1', port=55592) was cancelled.
2025-05-27 02:44:18,991 - INFO - Message forwarding task for Address(host='127.0.0.1', port=55580) cancelled.
2025-05-27 02:44:18,992 - INFO - Message forwarding task for Address(host='127.0.0.1', port=55592) cancelled.
2025-05-27 02:44:18,992 - INFO - Initiating cleanup for connection: 127.0.0.1:55580
2025-05-27 02:44:18,992 - INFO - Starting cleanup for 127.0.0.1:55580
2025-05-27 02:44:18,992 - INFO - Connection cleanup completed for 127.0.0.1:55580. Remaining connections: 1
2025-05-27 02:44:18,992 - INFO - Cleanup finished for connection: 127.0.0.1:55580. Total connections: 1
2025-05-27 02:44:18,992 - INFO - Cleanup finished for Address(host='127.0.0.1', port=55580) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:44:18,994 - INFO - Initiating cleanup for connection: 127.0.0.1:55592
2025-05-27 02:44:18,994 - INFO - Starting cleanup for 127.0.0.1:55592
2025-05-27 02:44:18,994 - INFO - Connection cleanup completed for 127.0.0.1:55592. Remaining connections: 0
2025-05-27 02:44:18,995 - INFO - Cleanup finished for connection: 127.0.0.1:55592. Total connections: 0
2025-05-27 02:44:18,995 - INFO - Cleanup finished for Address(host='127.0.0.1', port=55592) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:47:13,406 - INFO - Application startup event triggered.
2025-05-27 02:47:13,406 - INFO - Initializing all queues...
2025-05-27 02:47:13,406 - INFO - All queues initialized on loop 92057120
2025-05-27 02:47:13,407 - INFO - Shared queues initialized.
2025-05-27 02:47:13,407 - INFO - Retrieved queue instances. Event loop ID: 92057120
2025-05-27 02:47:13,407 - INFO - SimulationManager ready state set to: True
2025-05-27 02:47:13,407 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:47:13,407 - INFO - MessageProcessor queues verified
2025-05-27 02:47:13,407 - INFO - MessageProcessor task started.
2025-05-27 02:47:13,407 - INFO - QueueForwarder queues verified
2025-05-27 02:47:13,407 - INFO - QueueForwarder task started.
2025-05-27 02:47:13,407 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:47:13,407 - INFO - Starting MessageProcessor
2025-05-27 02:47:13,408 - INFO - Starting QueueForwarder
2025-05-27 02:47:14,730 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=40228)
2025-05-27 02:47:14,730 - INFO - Adding connection: 127.0.0.1:40228. Total connections: 1
2025-05-27 02:47:14,732 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=40228)
2025-05-27 02:47:14,732 - INFO - Sender task started for Address(host='127.0.0.1', port=40228)
2025-05-27 02:47:14,732 - INFO - Receiver task started for Address(host='127.0.0.1', port=40228)
2025-05-27 02:47:14,736 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=40228)
2025-05-27 02:47:25,585 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=40228)
2025-05-27 02:47:25,585 - INFO - Processed 2 messages
2025-05-27 02:47:36,323 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=35902)
2025-05-27 02:47:36,323 - INFO - Adding connection: 127.0.0.1:35902. Total connections: 2
2025-05-27 02:47:36,324 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=35902)
2025-05-27 02:47:36,325 - INFO - Sender task started for Address(host='127.0.0.1', port=35902)
2025-05-27 02:47:36,325 - INFO - Receiver task started for Address(host='127.0.0.1', port=35902)
2025-05-27 02:47:36,328 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=35902)
2025-05-27 02:47:36,328 - INFO - Processed 1 messages
2025-05-27 02:47:39,738 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=40228)
2025-05-27 02:47:39,738 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=40228): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 173, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 02:47:39,739 - INFO - Receiver task for Address(host='127.0.0.1', port=40228) finished.
2025-05-27 02:47:53,254 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=35902): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 133, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 02:47:53,255 - INFO - Receiver task for Address(host='127.0.0.1', port=35902) finished.
2025-05-27 02:47:53,456 - INFO - Sender task for Address(host='127.0.0.1', port=40228) was cancelled.
2025-05-27 02:47:53,456 - INFO - Application shutdown event triggered.
2025-05-27 02:47:53,456 - INFO - Stopping MessageProcessor...
2025-05-27 02:47:53,456 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 02:47:53,456 - INFO - All WebSocket connections attempted to close.
2025-05-27 02:47:53,456 - INFO - Application shutdown complete.
2025-05-27 02:47:53,458 - INFO - Sender task for Address(host='127.0.0.1', port=35902) was cancelled.
2025-05-27 02:47:53,458 - INFO - Message forwarding task for Address(host='127.0.0.1', port=40228) cancelled.
2025-05-27 02:47:53,458 - INFO - Message forwarding task for Address(host='127.0.0.1', port=35902) cancelled.
2025-05-27 02:47:53,458 - INFO - Initiating cleanup for connection: 127.0.0.1:40228
2025-05-27 02:47:53,458 - INFO - Starting cleanup for 127.0.0.1:40228
2025-05-27 02:47:53,459 - INFO - Closed WebSocket connection for 127.0.0.1:40228
2025-05-27 02:47:53,459 - INFO - Connection cleanup completed for 127.0.0.1:40228. Remaining connections: 1
2025-05-27 02:47:53,459 - INFO - Cleanup finished for connection: 127.0.0.1:40228. Total connections: 1
2025-05-27 02:47:53,459 - INFO - Cleanup finished for Address(host='127.0.0.1', port=40228) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:47:53,461 - INFO - Initiating cleanup for connection: 127.0.0.1:35902
2025-05-27 02:47:53,461 - INFO - Starting cleanup for 127.0.0.1:35902
2025-05-27 02:47:53,461 - INFO - Connection cleanup completed for 127.0.0.1:35902. Remaining connections: 0
2025-05-27 02:47:53,462 - INFO - Cleanup finished for connection: 127.0.0.1:35902. Total connections: 0
2025-05-27 02:47:53,462 - INFO - Cleanup finished for Address(host='127.0.0.1', port=35902) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 02:52:54,883 - INFO - Application startup event triggered.
2025-05-27 02:52:54,883 - INFO - Initializing all queues...
2025-05-27 02:52:54,883 - INFO - All queues initialized on loop 774626848
2025-05-27 02:52:54,883 - INFO - Shared queues initialized.
2025-05-27 02:52:54,883 - INFO - Retrieved queue instances. Event loop ID: 774626848
2025-05-27 02:52:54,883 - INFO - SimulationManager ready state set to: True
2025-05-27 02:52:54,883 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 02:52:54,883 - INFO - MessageProcessor queues verified
2025-05-27 02:52:54,883 - INFO - MessageProcessor task started.
2025-05-27 02:52:54,883 - INFO - QueueForwarder queues verified
2025-05-27 02:52:54,883 - INFO - QueueForwarder task started.
2025-05-27 02:52:54,883 - INFO - Application startup complete. All core services initialized.
2025-05-27 02:52:54,884 - INFO - Starting MessageProcessor
2025-05-27 02:52:54,884 - INFO - Starting QueueForwarder
2025-05-27 02:52:56,583 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=59164)
2025-05-27 02:52:56,583 - INFO - Adding connection: 127.0.0.1:59164. Total connections: 1
2025-05-27 02:52:56,584 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=59164)
2025-05-27 02:52:56,584 - INFO - Sender task started for Address(host='127.0.0.1', port=59164)
2025-05-27 02:52:56,584 - INFO - Receiver task started for Address(host='127.0.0.1', port=59164)
2025-05-27 02:52:56,592 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=59164)
2025-05-27 02:53:02,240 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=59164)
2025-05-27 02:53:02,241 - INFO - Processed 2 messages
2025-05-27 02:53:18,944 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=59164): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 134, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 02:53:18,945 - INFO - Receiver task for Address(host='127.0.0.1', port=59164) finished.
2025-05-27 03:24:20,867 - INFO - Message forwarding task for Address(host='127.0.0.1', port=59164) cancelled.
2025-05-27 03:24:20,867 - INFO - Application shutdown event triggered.
2025-05-27 03:24:20,868 - INFO - Stopping MessageProcessor...
2025-05-27 03:24:20,868 - INFO - Sender task for Address(host='127.0.0.1', port=59164) was cancelled.
2025-05-27 03:24:20,868 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 03:24:20,868 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 03:24:20,868 - INFO - All WebSocket connections attempted to close.
2025-05-27 03:24:20,868 - INFO - Application shutdown complete.
2025-05-27 03:24:20,870 - INFO - Initiating cleanup for connection: 127.0.0.1:59164
2025-05-27 03:24:20,870 - INFO - Starting cleanup for 127.0.0.1:59164
2025-05-27 03:24:20,870 - INFO - Connection cleanup completed for 127.0.0.1:59164. Remaining connections: 0
2025-05-27 03:24:20,870 - INFO - Cleanup finished for connection: 127.0.0.1:59164. Total connections: 0
2025-05-27 03:24:20,870 - INFO - Cleanup finished for Address(host='127.0.0.1', port=59164) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 03:24:24,190 - INFO - Application startup event triggered.
2025-05-27 03:24:24,190 - INFO - Initializing all queues...
2025-05-27 03:24:24,190 - INFO - All queues initialized on loop 1004039712
2025-05-27 03:24:24,190 - INFO - Shared queues initialized.
2025-05-27 03:24:24,191 - INFO - Retrieved queue instances. Event loop ID: 1004039712
2025-05-27 03:27:26,592 - INFO - Application startup event triggered.
2025-05-27 03:27:26,592 - INFO - Initializing all queues...
2025-05-27 03:27:26,593 - INFO - All queues initialized on loop 712551968
2025-05-27 03:27:26,593 - INFO - Shared queues initialized.
2025-05-27 03:27:26,593 - INFO - Retrieved queue instances. Event loop ID: 712551968
2025-05-27 03:29:22,893 - INFO - Application startup event triggered.
2025-05-27 03:29:22,893 - INFO - Initializing all queues...
2025-05-27 03:29:22,893 - INFO - All queues initialized on loop 1024785952
2025-05-27 03:29:22,893 - INFO - Shared queues initialized.
2025-05-27 03:29:22,893 - INFO - Retrieved queue instances. Event loop ID: 1024785952
2025-05-27 03:30:58,798 - INFO - Application startup event triggered.
2025-05-27 03:30:58,798 - INFO - Initializing all queues...
2025-05-27 03:30:58,798 - INFO - All queues initialized on loop 123252256
2025-05-27 03:30:58,798 - INFO - Shared queues initialized.
2025-05-27 03:30:58,798 - INFO - Retrieved queue instances. Event loop ID: 123252256
2025-05-27 03:30:58,799 - INFO - SimulationManager ready state set to: True
2025-05-27 03:30:58,799 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 03:30:58,799 - INFO - MessageProcessor queues verified
2025-05-27 03:30:58,799 - INFO - MessageProcessor task started.
2025-05-27 03:30:58,799 - INFO - QueueForwarder queues verified
2025-05-27 03:30:58,799 - INFO - QueueForwarder task started.
2025-05-27 03:30:58,799 - INFO - Application startup complete. All core services initialized.
2025-05-27 03:30:58,799 - INFO - Starting MessageProcessor
2025-05-27 03:30:58,800 - INFO - Starting QueueForwarder
2025-05-27 03:31:00,252 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=59312)
2025-05-27 03:31:00,253 - INFO - Adding connection: 127.0.0.1:59312. Total connections: 1
2025-05-27 03:31:00,254 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=59312)
2025-05-27 03:31:00,254 - INFO - Sender task started for Address(host='127.0.0.1', port=59312)
2025-05-27 03:31:00,254 - INFO - Receiver task started for Address(host='127.0.0.1', port=59312)
2025-05-27 03:31:00,259 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=59312): 'FieldInfo' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 160, in _receiver
    queue_msg = self._create_queue_message(message, source='websocket', status='pending')
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 44, in _create_queue_message
    'processing_path': getattr(message, '_trace', {}).get('processing_path', []),
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'FieldInfo' object has no attribute 'get'. Did you mean: 'ge'?
2025-05-27 03:31:00,260 - INFO - Receiver task for Address(host='127.0.0.1', port=59312) finished.
2025-05-27 03:31:02,846 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=48094)
2025-05-27 03:31:02,847 - INFO - Adding connection: 127.0.0.1:48094. Total connections: 2
2025-05-27 03:31:02,848 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=48094)
2025-05-27 03:31:02,848 - INFO - Sender task started for Address(host='127.0.0.1', port=48094)
2025-05-27 03:31:02,848 - INFO - Receiver task started for Address(host='127.0.0.1', port=48094)
2025-05-27 03:31:02,851 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=48094): 'FieldInfo' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 160, in _receiver
    queue_msg = self._create_queue_message(message, source='websocket', status='pending')
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 44, in _create_queue_message
    'processing_path': getattr(message, '_trace', {}).get('processing_path', []),
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'FieldInfo' object has no attribute 'get'. Did you mean: 'ge'?
2025-05-27 03:31:02,853 - INFO - Receiver task for Address(host='127.0.0.1', port=48094) finished.
2025-05-27 03:32:02,215 - INFO - Sender task for Address(host='127.0.0.1', port=48094) was cancelled.
2025-05-27 03:32:02,216 - INFO - Application shutdown event triggered.
2025-05-27 03:32:02,216 - INFO - Stopping MessageProcessor...
2025-05-27 03:32:02,216 - INFO - Message forwarding task for Address(host='127.0.0.1', port=59312) cancelled.
2025-05-27 03:32:02,216 - INFO - Message forwarding task for Address(host='127.0.0.1', port=48094) cancelled.
2025-05-27 03:32:02,216 - INFO - Sender task for Address(host='127.0.0.1', port=59312) was cancelled.
2025-05-27 03:32:02,217 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 03:32:02,217 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 03:32:02,217 - INFO - All WebSocket connections attempted to close.
2025-05-27 03:32:02,217 - INFO - Application shutdown complete.
2025-05-27 03:32:02,218 - INFO - Initiating cleanup for connection: 127.0.0.1:48094
2025-05-27 03:32:02,218 - INFO - Starting cleanup for 127.0.0.1:48094
2025-05-27 03:32:02,218 - INFO - Closed WebSocket connection for 127.0.0.1:48094
2025-05-27 03:32:02,218 - INFO - Connection cleanup completed for 127.0.0.1:48094. Remaining connections: 1
2025-05-27 03:32:02,218 - INFO - Cleanup finished for connection: 127.0.0.1:48094. Total connections: 1
2025-05-27 03:32:02,218 - INFO - Cleanup finished for Address(host='127.0.0.1', port=48094) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 03:32:02,221 - INFO - Initiating cleanup for connection: 127.0.0.1:59312
2025-05-27 03:32:02,221 - INFO - Starting cleanup for 127.0.0.1:59312
2025-05-27 03:32:02,221 - INFO - Closed WebSocket connection for 127.0.0.1:59312
2025-05-27 03:32:02,221 - INFO - Connection cleanup completed for 127.0.0.1:59312. Remaining connections: 0
2025-05-27 03:32:02,221 - INFO - Cleanup finished for connection: 127.0.0.1:59312. Total connections: 0
2025-05-27 03:32:02,221 - INFO - Cleanup finished for Address(host='127.0.0.1', port=59312) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 03:35:24,919 - INFO - Application startup event triggered.
2025-05-27 03:35:24,919 - INFO - Initializing all queues...
2025-05-27 03:35:24,919 - INFO - All queues initialized on loop 857132576
2025-05-27 03:35:24,919 - INFO - Shared queues initialized.
2025-05-27 03:35:24,919 - INFO - Retrieved queue instances. Event loop ID: 857132576
2025-05-27 03:35:24,920 - INFO - SimulationManager ready state set to: True
2025-05-27 03:35:24,920 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 03:35:24,920 - INFO - MessageProcessor queues verified
2025-05-27 03:35:24,920 - INFO - MessageProcessor task started.
2025-05-27 03:35:24,920 - INFO - QueueForwarder queues verified
2025-05-27 03:35:24,920 - INFO - QueueForwarder task started.
2025-05-27 03:35:24,920 - INFO - Application startup complete. All core services initialized.
2025-05-27 03:35:24,920 - INFO - Starting MessageProcessor
2025-05-27 03:35:24,920 - INFO - Starting QueueForwarder
2025-05-27 03:35:26,310 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=48474)
2025-05-27 03:35:26,310 - INFO - Adding connection: 127.0.0.1:48474. Total connections: 1
2025-05-27 03:35:26,312 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=48474)
2025-05-27 03:35:26,312 - INFO - Sender task started for Address(host='127.0.0.1', port=48474)
2025-05-27 03:35:26,312 - INFO - Receiver task started for Address(host='127.0.0.1', port=48474)
2025-05-27 03:35:26,343 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=48474): 'FieldInfo' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 167, in _receiver
    queue_msg = self._create_queue_message(message, source='websocket', status='pending')
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 51, in _create_queue_message
    'processing_path': trace_data.get('processing_path', []),
                       ^^^^^^^^^^^^^^
AttributeError: 'FieldInfo' object has no attribute 'get'. Did you mean: 'ge'?
2025-05-27 03:35:26,345 - INFO - Receiver task for Address(host='127.0.0.1', port=48474) finished.
2025-05-27 03:36:35,740 - INFO - Sender task for Address(host='127.0.0.1', port=48474) was cancelled.
2025-05-27 03:36:35,741 - INFO - Application shutdown event triggered.
2025-05-27 03:36:35,741 - INFO - Stopping MessageProcessor...
2025-05-27 03:36:35,741 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 03:36:35,741 - INFO - All WebSocket connections attempted to close.
2025-05-27 03:36:35,741 - INFO - Application shutdown complete.
2025-05-27 03:36:35,741 - INFO - Message forwarding task for Address(host='127.0.0.1', port=48474) cancelled.
2025-05-27 03:36:35,742 - INFO - Initiating cleanup for connection: 127.0.0.1:48474
2025-05-27 03:36:35,742 - INFO - Starting cleanup for 127.0.0.1:48474
2025-05-27 03:36:35,742 - INFO - Closed WebSocket connection for 127.0.0.1:48474
2025-05-27 03:36:35,742 - INFO - Connection cleanup completed for 127.0.0.1:48474. Remaining connections: 0
2025-05-27 03:36:35,742 - INFO - Cleanup finished for connection: 127.0.0.1:48474. Total connections: 0
2025-05-27 03:36:35,742 - INFO - Cleanup finished for Address(host='127.0.0.1', port=48474) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 03:46:04,614 - INFO - Application startup event triggered.
2025-05-27 03:46:04,614 - INFO - Initializing all queues...
2025-05-27 03:46:04,614 - INFO - All queues initialized on loop 597724704
2025-05-27 03:46:04,614 - INFO - Shared queues initialized.
2025-05-27 03:46:04,615 - INFO - Retrieved queue instances. Event loop ID: 597724704
2025-05-27 03:46:04,615 - INFO - SimulationManager ready state set to: True
2025-05-27 03:46:04,615 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 03:46:04,615 - INFO - MessageProcessor queues verified
2025-05-27 03:46:04,615 - INFO - MessageProcessor task started.
2025-05-27 03:46:04,615 - INFO - QueueForwarder queues verified
2025-05-27 03:46:04,616 - INFO - QueueForwarder task started.
2025-05-27 03:46:04,616 - INFO - Application startup complete. All core services initialized.
2025-05-27 03:46:04,616 - INFO - Starting MessageProcessor
2025-05-27 03:46:04,616 - INFO - Starting QueueForwarder
2025-05-27 03:46:06,058 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=48880)
2025-05-27 03:46:06,058 - INFO - Adding connection: 127.0.0.1:48880. Total connections: 1
2025-05-27 03:46:06,059 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=48880)
2025-05-27 03:46:06,059 - INFO - Sender task started for Address(host='127.0.0.1', port=48880)
2025-05-27 03:46:06,060 - INFO - Receiver task started for Address(host='127.0.0.1', port=48880)
2025-05-27 03:46:06,068 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=48880): 'FieldInfo' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 167, in _receiver
    queue_msg = self._create_queue_message(message, source='websocket', status='pending')
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 51, in _create_queue_message
    'processing_path': trace_data.get('processing_path', []),
                       ^^^^^^^^^^^^^^
AttributeError: 'FieldInfo' object has no attribute 'get'. Did you mean: 'ge'?
2025-05-27 03:46:06,069 - INFO - Receiver task for Address(host='127.0.0.1', port=48880) finished.
2025-05-27 03:46:08,863 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=48884)
2025-05-27 03:46:08,864 - INFO - Adding connection: 127.0.0.1:48884. Total connections: 2
2025-05-27 03:46:08,865 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=48884)
2025-05-27 03:46:08,865 - INFO - Sender task started for Address(host='127.0.0.1', port=48884)
2025-05-27 03:46:08,866 - INFO - Receiver task started for Address(host='127.0.0.1', port=48884)
2025-05-27 03:46:08,868 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=48884): 'FieldInfo' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 167, in _receiver
    queue_msg = self._create_queue_message(message, source='websocket', status='pending')
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 51, in _create_queue_message
    'processing_path': trace_data.get('processing_path', []),
                       ^^^^^^^^^^^^^^
AttributeError: 'FieldInfo' object has no attribute 'get'. Did you mean: 'ge'?
2025-05-27 03:46:08,870 - INFO - Receiver task for Address(host='127.0.0.1', port=48884) finished.
2025-05-27 03:46:09,417 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=48898)
2025-05-27 03:46:09,417 - INFO - Adding connection: 127.0.0.1:48898. Total connections: 3
2025-05-27 03:46:09,418 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=48898)
2025-05-27 03:46:09,419 - INFO - Sender task started for Address(host='127.0.0.1', port=48898)
2025-05-27 03:46:09,419 - INFO - Receiver task started for Address(host='127.0.0.1', port=48898)
2025-05-27 03:46:09,422 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=48898): 'FieldInfo' object has no attribute 'get'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 167, in _receiver
    queue_msg = self._create_queue_message(message, source='websocket', status='pending')
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 51, in _create_queue_message
    'processing_path': trace_data.get('processing_path', []),
                       ^^^^^^^^^^^^^^
AttributeError: 'FieldInfo' object has no attribute 'get'. Did you mean: 'ge'?
2025-05-27 03:46:09,423 - INFO - Receiver task for Address(host='127.0.0.1', port=48898) finished.
2025-05-27 03:46:50,075 - INFO - Sender task for Address(host='127.0.0.1', port=48898) was cancelled.
2025-05-27 03:46:50,075 - INFO - Message forwarding task for Address(host='127.0.0.1', port=48884) cancelled.
2025-05-27 03:46:50,075 - INFO - Sender task for Address(host='127.0.0.1', port=48880) was cancelled.
2025-05-27 03:46:50,076 - INFO - Message forwarding task for Address(host='127.0.0.1', port=48898) cancelled.
2025-05-27 03:46:50,076 - INFO - Sender task for Address(host='127.0.0.1', port=48884) was cancelled.
2025-05-27 03:46:50,076 - INFO - Application shutdown event triggered.
2025-05-27 03:46:50,076 - INFO - Stopping MessageProcessor...
2025-05-27 03:46:50,076 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 03:46:50,076 - INFO - All WebSocket connections attempted to close.
2025-05-27 03:46:50,076 - INFO - Application shutdown complete.
2025-05-27 03:46:50,077 - INFO - Message forwarding task for Address(host='127.0.0.1', port=48880) cancelled.
2025-05-27 03:46:50,077 - INFO - Initiating cleanup for connection: 127.0.0.1:48898
2025-05-27 03:46:50,077 - INFO - Starting cleanup for 127.0.0.1:48898
2025-05-27 03:46:50,078 - INFO - Closed WebSocket connection for 127.0.0.1:48898
2025-05-27 03:46:50,078 - INFO - Connection cleanup completed for 127.0.0.1:48898. Remaining connections: 2
2025-05-27 03:46:50,078 - INFO - Cleanup finished for connection: 127.0.0.1:48898. Total connections: 2
2025-05-27 03:46:50,078 - INFO - Cleanup finished for Address(host='127.0.0.1', port=48898) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 03:46:50,080 - INFO - Initiating cleanup for connection: 127.0.0.1:48880
2025-05-27 03:46:50,080 - INFO - Starting cleanup for 127.0.0.1:48880
2025-05-27 03:46:50,080 - INFO - Closed WebSocket connection for 127.0.0.1:48880
2025-05-27 03:46:50,080 - INFO - Connection cleanup completed for 127.0.0.1:48880. Remaining connections: 1
2025-05-27 03:46:50,081 - INFO - Cleanup finished for connection: 127.0.0.1:48880. Total connections: 1
2025-05-27 03:46:50,081 - INFO - Cleanup finished for Address(host='127.0.0.1', port=48880) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 03:46:50,082 - INFO - Initiating cleanup for connection: 127.0.0.1:48884
2025-05-27 03:46:50,082 - INFO - Starting cleanup for 127.0.0.1:48884
2025-05-27 03:46:50,082 - INFO - Closed WebSocket connection for 127.0.0.1:48884
2025-05-27 03:46:50,082 - INFO - Connection cleanup completed for 127.0.0.1:48884. Remaining connections: 0
2025-05-27 03:46:50,082 - INFO - Cleanup finished for connection: 127.0.0.1:48884. Total connections: 0
2025-05-27 03:46:50,082 - INFO - Cleanup finished for Address(host='127.0.0.1', port=48884) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 03:50:04,869 - INFO - Application startup event triggered.
2025-05-27 03:50:04,869 - INFO - Initializing all queues...
2025-05-27 03:50:04,869 - INFO - All queues initialized on loop 1003474464
2025-05-27 03:50:04,869 - INFO - Shared queues initialized.
2025-05-27 03:50:04,869 - INFO - Retrieved queue instances. Event loop ID: 1003474464
2025-05-27 03:50:04,869 - INFO - SimulationManager ready state set to: True
2025-05-27 03:50:04,869 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 03:50:04,869 - INFO - MessageProcessor queues verified
2025-05-27 03:50:04,870 - INFO - MessageProcessor task started.
2025-05-27 03:50:04,870 - INFO - QueueForwarder queues verified
2025-05-27 03:50:04,870 - INFO - QueueForwarder task started.
2025-05-27 03:50:04,870 - INFO - Application startup complete. All core services initialized.
2025-05-27 03:50:04,870 - INFO - Starting MessageProcessor
2025-05-27 03:50:04,870 - INFO - Starting QueueForwarder
2025-05-27 03:50:06,307 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=33938)
2025-05-27 03:50:06,307 - INFO - Adding connection: 127.0.0.1:33938. Total connections: 1
2025-05-27 03:50:06,309 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=33938)
2025-05-27 03:50:06,309 - INFO - Sender task started for Address(host='127.0.0.1', port=33938)
2025-05-27 03:50:06,309 - INFO - Receiver task started for Address(host='127.0.0.1', port=33938)
2025-05-27 03:50:06,313 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=33938)
2025-05-27 03:50:12,536 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=33938)
2025-05-27 03:50:12,537 - INFO - Processed 2 messages
2025-05-27 03:50:31,315 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=33938)
2025-05-27 03:50:31,315 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=33938): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 167, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 03:50:31,316 - INFO - Receiver task for Address(host='127.0.0.1', port=33938) finished.
2025-05-27 03:50:56,317 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=35674)
2025-05-27 03:50:56,317 - INFO - Adding connection: 127.0.0.1:35674. Total connections: 2
2025-05-27 03:50:56,318 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=35674)
2025-05-27 03:50:56,318 - INFO - Sender task started for Address(host='127.0.0.1', port=35674)
2025-05-27 03:50:56,318 - INFO - Receiver task started for Address(host='127.0.0.1', port=35674)
2025-05-27 03:50:56,322 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=35674)
2025-05-27 03:50:56,322 - INFO - Processed 1 messages
2025-05-27 03:50:56,323 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=33938): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 111, in _sender
    await websocket.send_text(ws_msg.json()) # Use .json() for Pydantic v1.x
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 03:50:56,326 - INFO - Sender task for Address(host='127.0.0.1', port=33938) finished.
2025-05-27 03:50:56,326 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=33938)): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 50, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 03:50:56,327 - INFO - Initiating cleanup for connection: 127.0.0.1:33938
2025-05-27 03:50:56,327 - INFO - Starting cleanup for 127.0.0.1:33938
2025-05-27 03:50:56,328 - INFO - Closed WebSocket connection for 127.0.0.1:33938
2025-05-27 03:50:56,328 - INFO - Connection cleanup completed for 127.0.0.1:33938. Remaining connections: 1
2025-05-27 03:50:56,328 - INFO - Cleanup finished for connection: 127.0.0.1:33938. Total connections: 1
2025-05-27 03:50:56,328 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=33938): WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 109, in receive_text
    raise RuntimeError(
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-05-27 03:50:56,328 - INFO - Cleanup finished for Address(host='127.0.0.1', port=33938) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 03:51:21,323 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=35674)
2025-05-27 03:51:21,324 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=35674): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 167, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 03:51:21,324 - INFO - Receiver task for Address(host='127.0.0.1', port=35674) finished.
2025-05-27 03:51:46,325 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=34902)
2025-05-27 03:51:46,325 - INFO - Adding connection: 127.0.0.1:34902. Total connections: 2
2025-05-27 03:51:46,326 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=34902)
2025-05-27 03:51:46,326 - INFO - Sender task started for Address(host='127.0.0.1', port=34902)
2025-05-27 03:51:46,326 - INFO - Receiver task started for Address(host='127.0.0.1', port=34902)
2025-05-27 03:51:46,330 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=34902)
2025-05-27 03:51:46,330 - INFO - Processed 1 messages
2025-05-27 03:51:46,330 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=35674)): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 50, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 03:51:46,332 - ERROR - Unexpected error during WebSocket send to Address(host='127.0.0.1', port=35674): received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 111, in _sender
    await websocket.send_text(ws_msg.json()) # Use .json() for Pydantic v1.x
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 935, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 03:51:46,332 - INFO - Sender task for Address(host='127.0.0.1', port=35674) finished.
2025-05-27 03:51:46,333 - INFO - Initiating cleanup for connection: 127.0.0.1:35674
2025-05-27 03:51:46,333 - INFO - Starting cleanup for 127.0.0.1:35674
2025-05-27 03:51:46,333 - INFO - Closed WebSocket connection for 127.0.0.1:35674
2025-05-27 03:51:46,333 - INFO - Connection cleanup completed for 127.0.0.1:35674. Remaining connections: 1
2025-05-27 03:51:46,333 - INFO - Cleanup finished for connection: 127.0.0.1:35674. Total connections: 1
2025-05-27 03:51:46,333 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=35674): WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 109, in receive_text
    raise RuntimeError(
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-05-27 03:51:46,333 - INFO - Cleanup finished for Address(host='127.0.0.1', port=35674) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 03:51:56,968 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=34902): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 134, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 03:51:56,968 - INFO - Receiver task for Address(host='127.0.0.1', port=34902) finished.
2025-05-27 03:51:57,068 - INFO - Sender task for Address(host='127.0.0.1', port=34902) was cancelled.
2025-05-27 03:51:57,069 - INFO - Application shutdown event triggered.
2025-05-27 03:51:57,069 - INFO - Stopping MessageProcessor...
2025-05-27 03:51:57,069 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 03:51:57,069 - INFO - All WebSocket connections attempted to close.
2025-05-27 03:51:57,069 - INFO - Application shutdown complete.
2025-05-27 03:51:57,070 - INFO - Message forwarding task for Address(host='127.0.0.1', port=34902) cancelled.
2025-05-27 03:51:57,070 - INFO - Initiating cleanup for connection: 127.0.0.1:34902
2025-05-27 03:51:57,070 - INFO - Starting cleanup for 127.0.0.1:34902
2025-05-27 03:51:57,070 - INFO - Connection cleanup completed for 127.0.0.1:34902. Remaining connections: 0
2025-05-27 03:51:57,070 - INFO - Cleanup finished for connection: 127.0.0.1:34902. Total connections: 0
2025-05-27 03:51:57,071 - INFO - Cleanup finished for Address(host='127.0.0.1', port=34902) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 03:55:34,097 - INFO - Application startup event triggered.
2025-05-27 03:55:34,097 - INFO - Initializing all queues...
2025-05-27 03:55:34,097 - INFO - All queues initialized on loop 731942432
2025-05-27 03:55:34,097 - INFO - Shared queues initialized.
2025-05-27 03:55:34,098 - INFO - Retrieved queue instances. Event loop ID: 731942432
2025-05-27 03:55:34,098 - INFO - SimulationManager ready state set to: True
2025-05-27 03:55:34,098 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 03:55:34,098 - INFO - MessageProcessor queues verified
2025-05-27 03:55:34,098 - INFO - MessageProcessor task started.
2025-05-27 03:55:34,098 - INFO - QueueForwarder queues verified
2025-05-27 03:55:34,098 - INFO - QueueForwarder task started.
2025-05-27 03:55:34,098 - INFO - Application startup complete. All core services initialized.
2025-05-27 03:55:34,098 - INFO - Starting MessageProcessor
2025-05-27 03:55:34,098 - INFO - Starting QueueForwarder
2025-05-27 03:55:35,438 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54418)
2025-05-27 03:55:35,438 - INFO - Adding connection: 127.0.0.1:54418. Total connections: 1
2025-05-27 03:55:35,439 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=54418)
2025-05-27 03:55:35,440 - INFO - Sender task started for Address(host='127.0.0.1', port=54418)
2025-05-27 03:55:35,440 - INFO - Receiver task started for Address(host='127.0.0.1', port=54418)
2025-05-27 03:55:35,471 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=54418)
2025-05-27 03:55:35,472 - ERROR - Message processing failed: 'str' object does not support item assignment
2025-05-27 03:55:41,227 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=54418)
2025-05-27 03:55:41,228 - ERROR - Message processing failed: 'str' object does not support item assignment
2025-05-27 03:55:41,228 - INFO - Processed 2 messages
2025-05-27 03:55:56,683 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=54418): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 146, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 03:55:56,685 - INFO - Receiver task for Address(host='127.0.0.1', port=54418) finished.
2025-05-27 03:55:56,884 - INFO - Message forwarding task for Address(host='127.0.0.1', port=54418) cancelled.
2025-05-27 03:55:56,884 - INFO - Sender task for Address(host='127.0.0.1', port=54418) was cancelled.
2025-05-27 03:55:56,884 - INFO - Application shutdown event triggered.
2025-05-27 03:55:56,885 - INFO - Stopping MessageProcessor...
2025-05-27 03:55:56,885 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 03:55:56,885 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 03:55:56,885 - INFO - All WebSocket connections attempted to close.
2025-05-27 03:55:56,885 - INFO - Application shutdown complete.
2025-05-27 03:55:56,887 - INFO - Initiating cleanup for connection: 127.0.0.1:54418
2025-05-27 03:55:56,887 - INFO - Starting cleanup for 127.0.0.1:54418
2025-05-27 03:55:56,887 - INFO - Connection cleanup completed for 127.0.0.1:54418. Remaining connections: 0
2025-05-27 03:55:56,887 - INFO - Cleanup finished for connection: 127.0.0.1:54418. Total connections: 0
2025-05-27 03:55:56,887 - INFO - Cleanup finished for Address(host='127.0.0.1', port=54418) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 03:58:12,946 - INFO - Application startup event triggered.
2025-05-27 03:58:12,947 - INFO - Initializing all queues...
2025-05-27 03:58:12,947 - INFO - All queues initialized on loop 450076192
2025-05-27 03:58:12,947 - INFO - Shared queues initialized.
2025-05-27 03:58:12,947 - INFO - Retrieved queue instances. Event loop ID: 450076192
2025-05-27 03:58:12,947 - INFO - SimulationManager ready state set to: True
2025-05-27 03:58:12,947 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 03:58:12,947 - INFO - MessageProcessor queues verified
2025-05-27 03:58:12,947 - INFO - MessageProcessor task started.
2025-05-27 03:58:12,947 - INFO - QueueForwarder queues verified
2025-05-27 03:58:12,948 - INFO - QueueForwarder task started.
2025-05-27 03:58:12,948 - INFO - Application startup complete. All core services initialized.
2025-05-27 03:58:12,948 - INFO - Starting MessageProcessor
2025-05-27 03:58:12,948 - INFO - Starting QueueForwarder
2025-05-27 03:58:14,328 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=51518)
2025-05-27 03:58:14,328 - INFO - Adding connection: 127.0.0.1:51518. Total connections: 1
2025-05-27 03:58:14,329 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=51518)
2025-05-27 03:58:14,329 - INFO - Sender task started for Address(host='127.0.0.1', port=51518)
2025-05-27 03:58:14,330 - INFO - Receiver task started for Address(host='127.0.0.1', port=51518)
2025-05-27 03:58:14,359 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=51518)
2025-05-27 03:58:17,805 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=51518): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 146, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 03:58:17,807 - INFO - Receiver task for Address(host='127.0.0.1', port=51518) finished.
2025-05-27 03:58:17,863 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=51524)
2025-05-27 03:58:17,863 - INFO - Adding connection: 127.0.0.1:51524. Total connections: 2
2025-05-27 03:58:17,864 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=51524)
2025-05-27 03:58:17,865 - INFO - Sender task started for Address(host='127.0.0.1', port=51524)
2025-05-27 03:58:17,865 - INFO - Receiver task started for Address(host='127.0.0.1', port=51524)
2025-05-27 03:58:17,868 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=51524)
2025-05-27 03:58:17,869 - ERROR - Validation error creating WebSocketMessage from dequeued message in sender: [{'loc': ('processing_path', 0), 'msg': 'str type expected', 'type': 'type_error.str'}] Message: {'type': 'status_update', 'data': {'original_id': 'adffe5fe-342b-4c93-a948-99e5d5f69fbe', 'original_type': 'frontend_ready_ack', 'status': 'processed', 'processing_time': 7.867813110351562e-06}, 'id': '9105c873-6cae-4e8c-9c45-2d57e85f1c71', 'client_id': "Address(host='127.0.0.1', port=51524)", 'processing_path': [{'processor': 'message_processor', 'timestamp': 1748311097.8686228, 'status': 'completed', 'completed_at': 1748311097.8686323}], 'forwarding_path': ['queue_forwarder:from_frontend->to_backend'], 'timestamp': 1748311097.8686576, '_trace': {'queue': 'to_frontend', 'enqueue_time': 1748311097.8686726, 'source': 'unknown', 'original_timestamp': 1748311097.8686576}}
2025-05-27 03:58:17,869 - WARNING - Failed to send message to Address(host='127.0.0.1', port=51518), connection likely closed: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 03:58:17,869 - INFO - Sender task for Address(host='127.0.0.1', port=51518) finished.
2025-05-27 03:58:17,869 - INFO - Initiating cleanup for connection: 127.0.0.1:51518
2025-05-27 03:58:17,870 - INFO - Starting cleanup for 127.0.0.1:51518
2025-05-27 03:58:17,870 - INFO - Connection cleanup completed for 127.0.0.1:51518. Remaining connections: 1
2025-05-27 03:58:17,870 - INFO - Cleanup finished for connection: 127.0.0.1:51518. Total connections: 1
2025-05-27 03:58:17,870 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=51518): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 03:58:17,872 - INFO - Message forwarding task for Address(host='127.0.0.1', port=51518) cancelled.
2025-05-27 03:58:17,872 - INFO - Cleanup finished for Address(host='127.0.0.1', port=51518) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 03:58:23,433 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=51524)
2025-05-27 03:58:23,434 - INFO - Processed 3 messages
2025-05-27 03:58:42,869 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=51524)
2025-05-27 03:58:42,870 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=51524): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 179, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 03:58:42,871 - INFO - Receiver task for Address(host='127.0.0.1', port=51524) finished.
2025-05-27 03:59:02,929 - INFO - Sender task for Address(host='127.0.0.1', port=51524) was cancelled.
2025-05-27 03:59:02,930 - INFO - Message forwarding task for Address(host='127.0.0.1', port=51524) cancelled.
2025-05-27 03:59:02,930 - INFO - Application shutdown event triggered.
2025-05-27 03:59:02,930 - INFO - Stopping MessageProcessor...
2025-05-27 03:59:02,930 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 03:59:02,930 - INFO - All WebSocket connections attempted to close.
2025-05-27 03:59:02,930 - INFO - Application shutdown complete.
2025-05-27 03:59:02,931 - INFO - Initiating cleanup for connection: 127.0.0.1:51524
2025-05-27 03:59:02,931 - INFO - Starting cleanup for 127.0.0.1:51524
2025-05-27 03:59:02,931 - INFO - Closed WebSocket connection for 127.0.0.1:51524
2025-05-27 03:59:02,932 - INFO - Connection cleanup completed for 127.0.0.1:51524. Remaining connections: 0
2025-05-27 03:59:02,932 - INFO - Cleanup finished for connection: 127.0.0.1:51524. Total connections: 0
2025-05-27 03:59:02,932 - INFO - Cleanup finished for Address(host='127.0.0.1', port=51524) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 04:01:35,548 - INFO - Application startup event triggered.
2025-05-27 04:01:35,548 - INFO - Initializing all queues...
2025-05-27 04:01:35,548 - INFO - All queues initialized on loop 842309152
2025-05-27 04:01:35,548 - INFO - Shared queues initialized.
2025-05-27 04:01:35,548 - INFO - Retrieved queue instances. Event loop ID: 842309152
2025-05-27 04:01:35,548 - INFO - SimulationManager ready state set to: True
2025-05-27 04:01:35,548 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 04:01:35,548 - INFO - MessageProcessor queues verified
2025-05-27 04:01:35,548 - INFO - MessageProcessor task started.
2025-05-27 04:01:35,549 - INFO - QueueForwarder queues verified
2025-05-27 04:01:35,549 - INFO - QueueForwarder task started.
2025-05-27 04:01:35,549 - INFO - Application startup complete. All core services initialized.
2025-05-27 04:01:35,549 - INFO - Starting MessageProcessor
2025-05-27 04:01:35,549 - INFO - Starting QueueForwarder
2025-05-27 04:01:36,947 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50082)
2025-05-27 04:01:36,947 - INFO - Adding connection: 127.0.0.1:50082. Total connections: 1
2025-05-27 04:01:36,949 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=50082)
2025-05-27 04:01:36,950 - INFO - Sender task started for Address(host='127.0.0.1', port=50082)
2025-05-27 04:01:36,950 - INFO - Receiver task started for Address(host='127.0.0.1', port=50082)
2025-05-27 04:01:36,982 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=50082)
2025-05-27 04:01:44,778 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=50082)
2025-05-27 04:01:44,778 - INFO - Processed 2 messages
2025-05-27 04:01:44,779 - ERROR - Validation error creating WebSocketMessage from dequeued message in sender: [{'loc': ('processing_path', 0), 'msg': 'str type expected', 'type': 'type_error.str'}, {'loc': ('forwarding_path', 0), 'msg': 'str type expected', 'type': 'type_error.str'}] Message: {'type': 'status_update', 'data': {'original_id': '43774006-9a68-43ab-bb0e-ef293d837384', 'original_type': 'command', 'status': 'processed', 'processing_time': 6.67572021484375e-06}, 'id': 'fe5c1649-9fc0-41da-9ad0-26152a2aa2d2', 'client_id': "Address(host='127.0.0.1', port=50082)", 'processing_path': [{'processor': 'message_processor', 'timestamp': 1748311304.7785876, 'status': 'completed', 'completed_at': 1748311304.7785962}], 'forwarding_path': [{'processor': 'queue_forwarder', 'timestamp': 1748311304.778454, 'status': 'forwarded', 'from_queue': 'from_frontend', 'to_queue': 'to_backend'}], 'timestamp': 1748311304.7786121, '_trace': {'queue': 'to_frontend', 'enqueue_time': 1748311304.7786171, 'source': 'unknown', 'original_timestamp': 1748311304.7786121}}
2025-05-27 04:02:01,983 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=50082)
2025-05-27 04:02:01,984 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=50082): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 179, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 04:02:01,985 - INFO - Receiver task for Address(host='127.0.0.1', port=50082) finished.
2025-05-27 04:02:05,267 - INFO - Sender task for Address(host='127.0.0.1', port=50082) was cancelled.
2025-05-27 04:02:05,268 - INFO - Application shutdown event triggered.
2025-05-27 04:02:05,268 - INFO - Stopping MessageProcessor...
2025-05-27 04:02:05,268 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 04:02:05,268 - INFO - All WebSocket connections attempted to close.
2025-05-27 04:02:05,268 - INFO - Application shutdown complete.
2025-05-27 04:02:05,269 - INFO - Message forwarding task for Address(host='127.0.0.1', port=50082) cancelled.
2025-05-27 04:02:05,270 - INFO - Initiating cleanup for connection: 127.0.0.1:50082
2025-05-27 04:02:05,270 - INFO - Starting cleanup for 127.0.0.1:50082
2025-05-27 04:02:05,270 - INFO - Closed WebSocket connection for 127.0.0.1:50082
2025-05-27 04:02:05,270 - INFO - Connection cleanup completed for 127.0.0.1:50082. Remaining connections: 0
2025-05-27 04:02:05,270 - INFO - Cleanup finished for connection: 127.0.0.1:50082. Total connections: 0
2025-05-27 04:02:05,270 - INFO - Cleanup finished for Address(host='127.0.0.1', port=50082) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 04:04:56,249 - INFO - Application startup event triggered.
2025-05-27 04:04:56,249 - INFO - Initializing all queues...
2025-05-27 04:04:56,249 - INFO - All queues initialized on loop 882986528
2025-05-27 04:04:56,249 - INFO - Shared queues initialized.
2025-05-27 04:04:56,249 - INFO - Retrieved queue instances. Event loop ID: 882986528
2025-05-27 04:04:56,249 - INFO - SimulationManager ready state set to: True
2025-05-27 04:04:56,250 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 04:04:56,250 - INFO - MessageProcessor queues verified
2025-05-27 04:04:56,250 - INFO - MessageProcessor task started.
2025-05-27 04:04:56,250 - INFO - QueueForwarder queues verified
2025-05-27 04:04:56,250 - INFO - QueueForwarder task started.
2025-05-27 04:04:56,250 - INFO - Application startup complete. All core services initialized.
2025-05-27 04:04:56,250 - INFO - Starting MessageProcessor
2025-05-27 04:04:56,250 - INFO - Starting QueueForwarder
2025-05-27 04:04:57,614 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=42376)
2025-05-27 04:04:57,614 - INFO - Adding connection: 127.0.0.1:42376. Total connections: 1
2025-05-27 04:04:57,616 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=42376)
2025-05-27 04:04:57,616 - INFO - Sender task started for Address(host='127.0.0.1', port=42376)
2025-05-27 04:04:57,616 - INFO - Receiver task started for Address(host='127.0.0.1', port=42376)
2025-05-27 04:04:57,652 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=42376)
2025-05-27 04:04:59,860 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=42376)
2025-05-27 04:05:21,447 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=42376): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 146, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 04:05:21,448 - INFO - Receiver task for Address(host='127.0.0.1', port=42376) finished.
2025-05-27 04:05:21,950 - INFO - Message forwarding task for Address(host='127.0.0.1', port=42376) cancelled.
2025-05-27 04:05:21,950 - INFO - Application shutdown event triggered.
2025-05-27 04:05:21,951 - INFO - Stopping MessageProcessor...
2025-05-27 04:05:21,951 - INFO - Sender task for Address(host='127.0.0.1', port=42376) was cancelled.
2025-05-27 04:05:21,951 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 04:05:21,951 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 04:05:21,952 - INFO - All WebSocket connections attempted to close.
2025-05-27 04:05:21,952 - INFO - Application shutdown complete.
2025-05-27 04:05:21,953 - INFO - Initiating cleanup for connection: 127.0.0.1:42376
2025-05-27 04:05:21,953 - INFO - Starting cleanup for 127.0.0.1:42376
2025-05-27 04:05:21,953 - INFO - Connection cleanup completed for 127.0.0.1:42376. Remaining connections: 0
2025-05-27 04:05:21,953 - INFO - Cleanup finished for connection: 127.0.0.1:42376. Total connections: 0
2025-05-27 04:05:21,953 - INFO - Cleanup finished for Address(host='127.0.0.1', port=42376) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 04:05:56,790 - INFO - Application startup event triggered.
2025-05-27 04:05:56,790 - INFO - Initializing all queues...
2025-05-27 04:05:56,790 - INFO - All queues initialized on loop 995941920
2025-05-27 04:05:56,790 - INFO - Shared queues initialized.
2025-05-27 04:05:56,790 - INFO - Retrieved queue instances. Event loop ID: 995941920
2025-05-27 04:05:56,791 - INFO - SimulationManager ready state set to: True
2025-05-27 04:05:56,791 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 04:05:56,791 - INFO - MessageProcessor queues verified
2025-05-27 04:05:56,791 - INFO - MessageProcessor task started.
2025-05-27 04:05:56,791 - INFO - QueueForwarder queues verified
2025-05-27 04:05:56,791 - INFO - QueueForwarder task started.
2025-05-27 04:05:56,791 - INFO - Application startup complete. All core services initialized.
2025-05-27 04:05:56,791 - INFO - Starting MessageProcessor
2025-05-27 04:05:56,791 - INFO - Starting QueueForwarder
2025-05-27 04:05:58,211 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=45926)
2025-05-27 04:05:58,211 - INFO - Adding connection: 127.0.0.1:45926. Total connections: 1
2025-05-27 04:05:58,212 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=45926)
2025-05-27 04:05:58,213 - INFO - Sender task started for Address(host='127.0.0.1', port=45926)
2025-05-27 04:05:58,213 - INFO - Receiver task started for Address(host='127.0.0.1', port=45926)
2025-05-27 04:05:58,218 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=45926)
2025-05-27 04:06:00,638 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=45926)
2025-05-27 04:06:22,894 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=45926): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 146, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 04:06:22,895 - INFO - Receiver task for Address(host='127.0.0.1', port=45926) finished.
2025-05-27 04:06:41,242 - INFO - Message forwarding task for Address(host='127.0.0.1', port=45926) cancelled.
2025-05-27 04:06:41,242 - INFO - Application shutdown event triggered.
2025-05-27 04:06:41,243 - INFO - Stopping MessageProcessor...
2025-05-27 04:06:41,243 - INFO - Sender task for Address(host='127.0.0.1', port=45926) was cancelled.
2025-05-27 04:06:41,243 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 04:06:41,243 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 04:06:41,243 - INFO - All WebSocket connections attempted to close.
2025-05-27 04:06:41,243 - INFO - Application shutdown complete.
2025-05-27 04:06:41,244 - INFO - Initiating cleanup for connection: 127.0.0.1:45926
2025-05-27 04:06:41,244 - INFO - Starting cleanup for 127.0.0.1:45926
2025-05-27 04:06:41,244 - INFO - Connection cleanup completed for 127.0.0.1:45926. Remaining connections: 0
2025-05-27 04:06:41,244 - INFO - Cleanup finished for connection: 127.0.0.1:45926. Total connections: 0
2025-05-27 04:06:41,244 - INFO - Cleanup finished for Address(host='127.0.0.1', port=45926) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 04:18:37,968 - INFO - Application startup event triggered.
2025-05-27 04:18:37,968 - INFO - Initializing all queues...
2025-05-27 04:18:37,969 - INFO - All queues initialized on loop 655457824
2025-05-27 04:18:37,969 - INFO - Shared queues initialized.
2025-05-27 04:18:37,969 - INFO - Retrieved queue instances. Event loop ID: 655457824
2025-05-27 04:18:37,969 - INFO - SimulationManager ready state set to: True
2025-05-27 04:18:37,969 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 04:18:37,969 - INFO - MessageProcessor queues verified
2025-05-27 04:18:37,969 - INFO - MessageProcessor task started.
2025-05-27 04:18:37,969 - INFO - QueueForwarder queues verified
2025-05-27 04:18:37,969 - INFO - QueueForwarder task started.
2025-05-27 04:18:37,969 - INFO - Application startup complete. All core services initialized.
2025-05-27 04:18:37,969 - INFO - Starting MessageProcessor
2025-05-27 04:18:37,970 - INFO - Starting QueueForwarder
2025-05-27 04:18:39,389 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=60430)
2025-05-27 04:18:39,389 - INFO - Adding connection: 127.0.0.1:60430. Total connections: 1
2025-05-27 04:18:39,391 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=60430)
2025-05-27 04:18:39,391 - INFO - Sender task started for Address(host='127.0.0.1', port=60430)
2025-05-27 04:18:39,391 - INFO - Receiver task started for Address(host='127.0.0.1', port=60430)
2025-05-27 04:18:39,411 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=60430)
2025-05-27 04:18:40,413 - ERROR - Sender task crashed: 'WebSocketManager' object has no attribute '_running'
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 66, in dequeue
    await self._not_empty.wait()
  File "/usr/lib/python3.12/asyncio/locks.py", line 266, in wait
    await fut
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 110, in _sender
    message = await asyncio.wait_for(
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 519, in wait_for
    async with timeouts.timeout(timeout):
  File "/usr/lib/python3.12/asyncio/timeouts.py", line 115, in __aexit__
    raise TimeoutError from exc_val
TimeoutError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 116, in _sender
    if not self._running:
           ^^^^^^^^^^^^^
AttributeError: 'WebSocketManager' object has no attribute '_running'
2025-05-27 04:18:40,416 - INFO - Sender task for Address(host='127.0.0.1', port=60430) finished
2025-05-27 04:18:41,371 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=60430)
2025-05-27 04:19:04,397 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=60430)
2025-05-27 04:19:04,397 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=60430): Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 214, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 04:19:04,398 - INFO - Receiver task for Address(host='127.0.0.1', port=60430) finished.
2025-05-27 04:19:04,398 - INFO - Initiating cleanup for connection: 127.0.0.1:60430
2025-05-27 04:19:04,398 - INFO - Starting cleanup for 127.0.0.1:60430
2025-05-27 04:19:04,399 - INFO - Closed WebSocket connection for 127.0.0.1:60430
2025-05-27 04:19:04,399 - INFO - Connection cleanup completed for 127.0.0.1:60430. Remaining connections: 0
2025-05-27 04:19:04,399 - INFO - Cleanup finished for connection: 127.0.0.1:60430. Total connections: 0
2025-05-27 04:19:04,400 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=60430): WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 109, in receive_text
    raise RuntimeError(
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-05-27 04:19:04,401 - INFO - Message forwarding task for Address(host='127.0.0.1', port=60430) cancelled.
2025-05-27 04:19:04,401 - INFO - Cleanup finished for Address(host='127.0.0.1', port=60430) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 04:19:28,050 - INFO - Application shutdown event triggered.
2025-05-27 04:19:28,050 - INFO - Stopping MessageProcessor...
2025-05-27 04:19:28,050 - INFO - QueueForwarder task cancelled.
2025-05-27 04:19:28,050 - INFO - All WebSocket connections attempted to close.
2025-05-27 04:19:28,050 - INFO - Application shutdown complete.
2025-05-27 04:30:13,086 - INFO - Application startup event triggered.
2025-05-27 04:30:13,086 - INFO - Initializing all queues...
2025-05-27 04:30:13,086 - INFO - All queues initialized on loop 535830736
2025-05-27 04:30:13,086 - INFO - Shared queues initialized.
2025-05-27 04:30:13,087 - INFO - Retrieved queue instances. Event loop ID: 535830736
2025-05-27 04:30:13,087 - INFO - SimulationManager ready state set to: True
2025-05-27 04:30:13,087 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 04:30:13,087 - INFO - MessageProcessor queues verified
2025-05-27 04:30:13,087 - INFO - MessageProcessor task started.
2025-05-27 04:30:13,087 - INFO - QueueForwarder initialized with all queues
2025-05-27 04:30:13,087 - INFO - QueueForwarder queues already initialized
2025-05-27 04:30:13,088 - INFO - QueueForwarder task started.
2025-05-27 04:30:13,088 - INFO - Application startup complete. All core services initialized.
2025-05-27 04:30:13,088 - INFO - Starting MessageProcessor
2025-05-27 04:30:13,088 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 04:30:13,592 - INFO - Application shutdown event triggered.
2025-05-27 04:30:13,592 - INFO - Stopping MessageProcessor...
2025-05-27 04:30:13,592 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 04:30:13,592 - INFO - QueueForwarder task cancelled.
2025-05-27 04:30:13,592 - INFO - All WebSocket connections attempted to close.
2025-05-27 04:30:13,592 - INFO - Application shutdown complete.
2025-05-27 04:30:16,945 - INFO - Application startup event triggered.
2025-05-27 04:30:16,945 - INFO - Initializing all queues...
2025-05-27 04:30:16,945 - INFO - All queues initialized on loop 893697568
2025-05-27 04:30:16,946 - INFO - Shared queues initialized.
2025-05-27 04:30:16,946 - INFO - Retrieved queue instances. Event loop ID: 893697568
2025-05-27 04:30:16,946 - INFO - SimulationManager ready state set to: True
2025-05-27 04:30:16,946 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 04:30:16,946 - INFO - MessageProcessor queues verified
2025-05-27 04:30:16,946 - INFO - MessageProcessor task started.
2025-05-27 04:30:16,946 - INFO - QueueForwarder initialized with all queues
2025-05-27 04:30:16,946 - INFO - QueueForwarder queues already initialized
2025-05-27 04:30:16,946 - INFO - QueueForwarder task started.
2025-05-27 04:30:16,947 - INFO - Application startup complete. All core services initialized.
2025-05-27 04:30:16,947 - INFO - Starting MessageProcessor
2025-05-27 04:30:16,947 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 04:30:18,182 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=51156)
2025-05-27 04:30:18,182 - INFO - Adding connection: 127.0.0.1:51156. Total connections: 1
2025-05-27 04:30:18,183 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=51156)
2025-05-27 04:30:18,183 - INFO - Sender task started for Address(host='127.0.0.1', port=51156)
2025-05-27 04:30:18,184 - INFO - Receiver task started for Address(host='127.0.0.1', port=51156)
2025-05-27 04:30:18,197 - ERROR - Error processing received message: type object 'WebSocketMessage' has no attribute 'model_validate_json'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 196, in _receiver
    message = WebSocketMessage.model_validate_json(data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'WebSocketMessage' has no attribute 'model_validate_json'
2025-05-27 04:30:21,215 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=51156): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 191, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 04:30:21,216 - INFO - Receiver task for Address(host='127.0.0.1', port=51156) finished.
2025-05-27 04:30:21,266 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=51164)
2025-05-27 04:30:21,266 - INFO - Adding connection: 127.0.0.1:51164. Total connections: 2
2025-05-27 04:30:21,267 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=51164)
2025-05-27 04:30:21,267 - INFO - Sender task started for Address(host='127.0.0.1', port=51164)
2025-05-27 04:30:21,267 - INFO - Receiver task started for Address(host='127.0.0.1', port=51164)
2025-05-27 04:30:21,271 - ERROR - Error processing received message: type object 'WebSocketMessage' has no attribute 'model_validate_json'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 196, in _receiver
    message = WebSocketMessage.model_validate_json(data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'WebSocketMessage' has no attribute 'model_validate_json'
2025-05-27 04:30:23,238 - ERROR - Error processing received message: type object 'WebSocketMessage' has no attribute 'model_validate_json'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 196, in _receiver
    message = WebSocketMessage.model_validate_json(data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'WebSocketMessage' has no attribute 'model_validate_json'
2025-05-27 04:30:30,915 - ERROR - Error processing received message: type object 'WebSocketMessage' has no attribute 'model_validate_json'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 196, in _receiver
    message = WebSocketMessage.model_validate_json(data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'WebSocketMessage' has no attribute 'model_validate_json'
2025-05-27 04:30:34,817 - ERROR - Error processing received message: type object 'WebSocketMessage' has no attribute 'model_validate_json'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 196, in _receiver
    message = WebSocketMessage.model_validate_json(data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'WebSocketMessage' has no attribute 'model_validate_json'
2025-05-27 04:30:46,272 - ERROR - Error processing received message: type object 'WebSocketMessage' has no attribute 'model_validate_json'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 196, in _receiver
    message = WebSocketMessage.model_validate_json(data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'WebSocketMessage' has no attribute 'model_validate_json'
2025-05-27 04:31:02,615 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=51164): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 191, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 04:31:02,616 - INFO - Receiver task for Address(host='127.0.0.1', port=51164) finished.
2025-05-27 04:31:02,715 - INFO - Message forwarding task for Address(host='127.0.0.1', port=51164) cancelled.
2025-05-27 04:31:02,716 - INFO - Sender task for Address(host='127.0.0.1', port=51156) was cancelled normally
2025-05-27 04:31:02,716 - INFO - Sender task for Address(host='127.0.0.1', port=51156) finished
2025-05-27 04:31:02,716 - INFO - Application shutdown event triggered.
2025-05-27 04:31:02,716 - INFO - Stopping MessageProcessor...
2025-05-27 04:31:02,716 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 04:31:02,716 - INFO - All WebSocket connections attempted to close.
2025-05-27 04:31:02,717 - INFO - Application shutdown complete.
2025-05-27 04:31:02,718 - INFO - Sender task for Address(host='127.0.0.1', port=51164) was cancelled normally
2025-05-27 04:31:02,718 - INFO - Sender task for Address(host='127.0.0.1', port=51164) finished
2025-05-27 04:31:02,718 - INFO - Message forwarding task for Address(host='127.0.0.1', port=51156) cancelled.
2025-05-27 04:31:02,718 - INFO - Initiating cleanup for connection: 127.0.0.1:51156
2025-05-27 04:31:02,718 - INFO - Starting cleanup for 127.0.0.1:51156
2025-05-27 04:31:02,719 - INFO - Connection cleanup completed for 127.0.0.1:51156. Remaining connections: 1
2025-05-27 04:31:02,719 - INFO - Cleanup finished for connection: 127.0.0.1:51156. Total connections: 1
2025-05-27 04:31:02,719 - INFO - Cleanup finished for Address(host='127.0.0.1', port=51156) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 04:31:02,721 - INFO - Initiating cleanup for connection: 127.0.0.1:51164
2025-05-27 04:31:02,721 - INFO - Starting cleanup for 127.0.0.1:51164
2025-05-27 04:31:02,722 - INFO - Connection cleanup completed for 127.0.0.1:51164. Remaining connections: 0
2025-05-27 04:31:02,722 - INFO - Cleanup finished for connection: 127.0.0.1:51164. Total connections: 0
2025-05-27 04:31:02,722 - INFO - Cleanup finished for Address(host='127.0.0.1', port=51164) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 04:32:22,635 - INFO - Application startup event triggered.
2025-05-27 04:32:22,635 - INFO - Initializing all queues...
2025-05-27 04:32:22,636 - INFO - All queues initialized on loop 659725856
2025-05-27 04:32:22,636 - INFO - Shared queues initialized.
2025-05-27 04:32:22,636 - INFO - Retrieved queue instances. Event loop ID: 659725856
2025-05-27 04:32:22,636 - INFO - SimulationManager ready state set to: True
2025-05-27 04:32:22,636 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 04:32:22,637 - INFO - MessageProcessor queues verified
2025-05-27 04:32:22,637 - INFO - MessageProcessor task started.
2025-05-27 04:32:22,637 - INFO - QueueForwarder initialized with all queues
2025-05-27 04:32:22,637 - INFO - QueueForwarder queues already initialized
2025-05-27 04:32:22,637 - INFO - QueueForwarder task started.
2025-05-27 04:32:22,637 - INFO - Application startup complete. All core services initialized.
2025-05-27 04:32:22,637 - INFO - Starting MessageProcessor
2025-05-27 04:32:22,638 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 04:32:23,997 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=47560)
2025-05-27 04:32:23,997 - INFO - Adding connection: 127.0.0.1:47560. Total connections: 1
2025-05-27 04:32:23,998 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=47560)
2025-05-27 04:32:23,999 - INFO - Sender task started for Address(host='127.0.0.1', port=47560)
2025-05-27 04:32:23,999 - INFO - Receiver task started for Address(host='127.0.0.1', port=47560)
2025-05-27 04:32:24,004 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=47560)
2025-05-27 04:32:26,045 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=47560): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 191, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 04:32:26,047 - INFO - Receiver task for Address(host='127.0.0.1', port=47560) finished.
2025-05-27 04:32:26,105 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=47572)
2025-05-27 04:32:26,105 - INFO - Adding connection: 127.0.0.1:47572. Total connections: 2
2025-05-27 04:32:26,106 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=47572)
2025-05-27 04:32:26,107 - INFO - Sender task started for Address(host='127.0.0.1', port=47572)
2025-05-27 04:32:26,107 - INFO - Receiver task started for Address(host='127.0.0.1', port=47572)
2025-05-27 04:32:26,111 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=47572)
2025-05-27 04:32:26,112 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=47560)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 04:32:26,113 - WARNING - WebSocket not connected, discarding message 3b458c37-38b2-4897-84b8-c9a993f8f862
2025-05-27 04:32:26,114 - INFO - Sender task for Address(host='127.0.0.1', port=47560) finished
2025-05-27 04:32:26,114 - INFO - Initiating cleanup for connection: 127.0.0.1:47560
2025-05-27 04:32:26,114 - INFO - Starting cleanup for 127.0.0.1:47560
2025-05-27 04:32:26,114 - INFO - Connection cleanup completed for 127.0.0.1:47560. Remaining connections: 1
2025-05-27 04:32:26,114 - INFO - Cleanup finished for connection: 127.0.0.1:47560. Total connections: 1
2025-05-27 04:32:26,114 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=47560): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 04:32:26,115 - INFO - Cleanup finished for Address(host='127.0.0.1', port=47560) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 04:32:27,387 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=47572)
2025-05-27 04:32:51,113 - INFO - Enqueuing valid message of type 'ping' from Address(host='127.0.0.1', port=47572)
2025-05-27 04:32:51,113 - ERROR - Error processing received message: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 04:33:01,193 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=47572): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 191, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 04:33:01,194 - INFO - Receiver task for Address(host='127.0.0.1', port=47572) finished.
2025-05-27 04:33:45,006 - INFO - Sender task for Address(host='127.0.0.1', port=47572) was cancelled normally
2025-05-27 04:33:45,007 - INFO - Sender task for Address(host='127.0.0.1', port=47572) finished
2025-05-27 04:33:45,007 - INFO - Message forwarding task for Address(host='127.0.0.1', port=47572) cancelled.
2025-05-27 04:33:45,007 - INFO - Application shutdown event triggered.
2025-05-27 04:33:45,008 - INFO - Stopping MessageProcessor...
2025-05-27 04:33:45,008 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 04:33:45,008 - INFO - All WebSocket connections attempted to close.
2025-05-27 04:33:45,008 - INFO - Application shutdown complete.
2025-05-27 04:33:45,009 - INFO - Initiating cleanup for connection: 127.0.0.1:47572
2025-05-27 04:33:45,009 - INFO - Starting cleanup for 127.0.0.1:47572
2025-05-27 04:33:45,009 - INFO - Connection cleanup completed for 127.0.0.1:47572. Remaining connections: 0
2025-05-27 04:33:45,009 - INFO - Cleanup finished for connection: 127.0.0.1:47572. Total connections: 0
2025-05-27 04:33:45,010 - INFO - Cleanup finished for Address(host='127.0.0.1', port=47572) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 04:37:30,784 - INFO - Application startup event triggered.
2025-05-27 04:37:30,784 - INFO - Initializing all queues...
2025-05-27 04:37:30,785 - INFO - All queues initialized on loop 567635488
2025-05-27 04:37:30,785 - INFO - Shared queues initialized.
2025-05-27 04:37:30,785 - INFO - Retrieved queue instances. Event loop ID: 567635488
2025-05-27 04:37:30,785 - INFO - SimulationManager ready state set to: True
2025-05-27 04:37:30,785 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 04:37:30,785 - INFO - MessageProcessor queues verified
2025-05-27 04:37:30,785 - INFO - MessageProcessor task started.
2025-05-27 04:37:30,785 - INFO - QueueForwarder initialized with all queues
2025-05-27 04:37:30,785 - INFO - QueueForwarder queues already initialized
2025-05-27 04:37:30,785 - INFO - QueueForwarder task started.
2025-05-27 04:37:30,785 - INFO - Application startup complete. All core services initialized.
2025-05-27 04:37:30,785 - INFO - Starting MessageProcessor
2025-05-27 04:37:30,786 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 04:37:32,181 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53754)
2025-05-27 04:37:32,181 - INFO - Adding connection: 127.0.0.1:53754. Total connections: 1
2025-05-27 04:37:32,183 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=53754)
2025-05-27 04:37:32,183 - INFO - Sender task started for Address(host='127.0.0.1', port=53754)
2025-05-27 04:37:32,184 - INFO - Receiver task started for Address(host='127.0.0.1', port=53754)
2025-05-27 04:37:32,215 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=53754)
2025-05-27 04:37:34,126 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=53754)
2025-05-27 04:37:57,216 - ERROR - Failed to enqueue message: Invalid message format for queue from_frontend
Message: {'id': '8ada0c5b-b887-453f-99f1-c02dda59fedf', 'type': 'ping', 'data': {}, 'timestamp': 1748313477214.0, 'client_id': "Address(host='127.0.0.1', port=53754)", 'processing_path': [], 'forwarding_path': [], 'source': 'websocket', 'status': 'pending'}
2025-05-27 04:38:05,509 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=53754): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 170, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 04:38:05,511 - INFO - Receiver task for Address(host='127.0.0.1', port=53754) finished.
2025-05-27 04:38:05,711 - INFO - Application shutdown event triggered.
2025-05-27 04:38:05,711 - INFO - Stopping MessageProcessor...
2025-05-27 04:38:05,711 - INFO - Sender task for Address(host='127.0.0.1', port=53754) was cancelled normally
2025-05-27 04:38:05,712 - INFO - Sender task for Address(host='127.0.0.1', port=53754) finished
2025-05-27 04:38:05,712 - INFO - Message forwarding task for Address(host='127.0.0.1', port=53754) cancelled.
2025-05-27 04:38:05,712 - WARNING - MessageProcessor didn't stop cleanly
2025-05-27 04:38:05,712 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 04:38:05,712 - INFO - All WebSocket connections attempted to close.
2025-05-27 04:38:05,712 - INFO - Application shutdown complete.
2025-05-27 04:38:05,714 - INFO - Initiating cleanup for connection: 127.0.0.1:53754
2025-05-27 04:38:05,714 - INFO - Starting cleanup for 127.0.0.1:53754
2025-05-27 04:38:05,714 - INFO - Connection cleanup completed for 127.0.0.1:53754. Remaining connections: 0
2025-05-27 04:38:05,714 - INFO - Cleanup finished for connection: 127.0.0.1:53754. Total connections: 0
2025-05-27 04:38:05,714 - INFO - Cleanup finished for Address(host='127.0.0.1', port=53754) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 04:38:50,488 - INFO - Application startup event triggered.
2025-05-27 04:38:50,489 - INFO - Initializing all queues...
2025-05-27 04:38:50,489 - INFO - All queues initialized on loop 979451424
2025-05-27 04:38:50,489 - INFO - Shared queues initialized.
2025-05-27 04:38:50,489 - INFO - Retrieved queue instances. Event loop ID: 979451424
2025-05-27 04:38:50,489 - INFO - SimulationManager ready state set to: True
2025-05-27 04:38:50,489 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 04:38:50,489 - INFO - MessageProcessor queues verified
2025-05-27 04:38:50,490 - INFO - MessageProcessor task started.
2025-05-27 04:38:50,490 - INFO - QueueForwarder initialized with all queues
2025-05-27 04:38:50,490 - INFO - QueueForwarder queues already initialized
2025-05-27 04:38:50,490 - INFO - QueueForwarder task started.
2025-05-27 04:38:50,490 - INFO - Application startup complete. All core services initialized.
2025-05-27 04:38:50,490 - INFO - Starting MessageProcessor
2025-05-27 04:38:50,490 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 04:38:51,724 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=48422)
2025-05-27 04:38:51,724 - INFO - Adding connection: 127.0.0.1:48422. Total connections: 1
2025-05-27 04:38:51,725 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=48422)
2025-05-27 04:38:51,726 - INFO - Sender task started for Address(host='127.0.0.1', port=48422)
2025-05-27 04:38:51,726 - INFO - Receiver task started for Address(host='127.0.0.1', port=48422)
2025-05-27 04:38:51,730 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=48422)
2025-05-27 04:39:01,365 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=48422): 1001
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 170, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1001
2025-05-27 04:39:01,367 - INFO - Receiver task for Address(host='127.0.0.1', port=48422) finished.
2025-05-27 04:39:01,439 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=35530)
2025-05-27 04:39:01,439 - INFO - Adding connection: 127.0.0.1:35530. Total connections: 2
2025-05-27 04:39:01,441 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=35530)
2025-05-27 04:39:01,441 - INFO - Sender task started for Address(host='127.0.0.1', port=35530)
2025-05-27 04:39:01,441 - INFO - Receiver task started for Address(host='127.0.0.1', port=35530)
2025-05-27 04:39:01,448 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=35530)
2025-05-27 04:39:01,449 - INFO - Processed 2 messages
2025-05-27 04:39:01,449 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=48422)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 04:39:01,451 - WARNING - WebSocket not connected, discarding message e11e3ef2-3107-46ca-857e-1fad76783f59
2025-05-27 04:39:01,451 - INFO - Sender task for Address(host='127.0.0.1', port=48422) finished
2025-05-27 04:39:01,451 - INFO - Initiating cleanup for connection: 127.0.0.1:48422
2025-05-27 04:39:01,452 - INFO - Starting cleanup for 127.0.0.1:48422
2025-05-27 04:39:01,452 - INFO - Connection cleanup completed for 127.0.0.1:48422. Remaining connections: 1
2025-05-27 04:39:01,452 - INFO - Cleanup finished for connection: 127.0.0.1:48422. Total connections: 1
2025-05-27 04:39:01,452 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=48422): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 04:39:01,453 - INFO - Cleanup finished for Address(host='127.0.0.1', port=48422) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 04:39:08,572 - INFO - Enqueuing valid message of type 'command' from Address(host='127.0.0.1', port=35530)
2025-05-27 04:39:08,573 - INFO - Processed 1 messages
2025-05-27 04:39:26,449 - ERROR - Failed to enqueue message: Invalid message format for queue from_frontend
Message: {'id': 'e546443a-4b9a-461f-b0af-f8ab263bbb95', 'type': 'ping', 'data': {}, 'timestamp': 1748313566447.0, 'client_id': "Address(host='127.0.0.1', port=35530)", 'processing_path': [], 'forwarding_path': [], 'source': 'websocket', 'status': 'pending'}
2025-05-27 04:39:51,448 - ERROR - Failed to enqueue message: Invalid message format for queue from_frontend
Message: {'id': 'fe80016c-c12b-4049-b5a6-1c8f57b712c8', 'type': 'ping', 'data': {}, 'timestamp': 1748313591446.0, 'client_id': "Address(host='127.0.0.1', port=35530)", 'processing_path': [], 'forwarding_path': [], 'source': 'websocket', 'status': 'pending'}
2025-05-27 04:39:51,449 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=35530): 1005
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 170, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1005
2025-05-27 04:39:51,450 - INFO - Receiver task for Address(host='127.0.0.1', port=35530) finished.
2025-05-27 04:39:51,452 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=42428)
2025-05-27 04:39:51,452 - INFO - Adding connection: 127.0.0.1:42428. Total connections: 2
2025-05-27 04:39:51,452 - INFO - Sent connection_ack to Address(host='127.0.0.1', port=42428)
2025-05-27 04:39:51,453 - INFO - Sender task started for Address(host='127.0.0.1', port=42428)
2025-05-27 04:39:51,453 - INFO - Receiver task started for Address(host='127.0.0.1', port=42428)
2025-05-27 04:39:51,456 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from Address(host='127.0.0.1', port=42428)
2025-05-27 04:39:51,457 - INFO - Processed 1 messages
2025-05-27 04:39:51,457 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=35530)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 04:39:51,458 - WARNING - WebSocket not connected, discarding message c2285364-2545-44b1-a8bb-e5d5465635ab
2025-05-27 04:39:51,459 - INFO - Sender task for Address(host='127.0.0.1', port=35530) finished
2025-05-27 04:39:51,459 - INFO - Initiating cleanup for connection: 127.0.0.1:35530
2025-05-27 04:39:51,459 - INFO - Starting cleanup for 127.0.0.1:35530
2025-05-27 04:39:51,459 - INFO - Connection cleanup completed for 127.0.0.1:35530. Remaining connections: 1
2025-05-27 04:39:51,459 - INFO - Cleanup finished for connection: 127.0.0.1:35530. Total connections: 1
2025-05-27 04:39:51,459 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=35530): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 04:39:51,460 - INFO - Cleanup finished for Address(host='127.0.0.1', port=35530) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 04:40:16,458 - ERROR - Failed to enqueue message: Invalid message format for queue from_frontend
Message: {'id': '1a920c97-b8e5-4820-bf63-280dded7ddd2', 'type': 'ping', 'data': {}, 'timestamp': 1748313616456.0, 'client_id': "Address(host='127.0.0.1', port=42428)", 'processing_path': [], 'forwarding_path': [], 'source': 'websocket', 'status': 'pending'}
2025-05-27 04:40:37,480 - ERROR - Receive/processing error for Address(host='127.0.0.1', port=42428): 1012
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 170, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 105, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"])
starlette.websockets.WebSocketDisconnect: 1012
2025-05-27 04:40:37,481 - INFO - Receiver task for Address(host='127.0.0.1', port=42428) finished.
2025-05-27 04:40:37,682 - INFO - Sender task for Address(host='127.0.0.1', port=42428) was cancelled normally
2025-05-27 04:40:37,682 - INFO - Sender task for Address(host='127.0.0.1', port=42428) finished
2025-05-27 04:40:37,682 - INFO - Application shutdown event triggered.
2025-05-27 04:40:37,682 - INFO - Stopping MessageProcessor...
2025-05-27 04:40:37,682 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 04:40:37,682 - INFO - All WebSocket connections attempted to close.
2025-05-27 04:40:37,682 - INFO - Application shutdown complete.
2025-05-27 04:40:37,683 - INFO - Message forwarding task for Address(host='127.0.0.1', port=42428) cancelled.
2025-05-27 04:40:37,684 - INFO - Initiating cleanup for connection: 127.0.0.1:42428
2025-05-27 04:40:37,684 - INFO - Starting cleanup for 127.0.0.1:42428
2025-05-27 04:40:37,684 - INFO - Connection cleanup completed for 127.0.0.1:42428. Remaining connections: 0
2025-05-27 04:40:37,684 - INFO - Cleanup finished for connection: 127.0.0.1:42428. Total connections: 0
2025-05-27 04:40:37,684 - INFO - Cleanup finished for Address(host='127.0.0.1', port=42428) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 04:48:33,624 - INFO - Application startup event triggered.
2025-05-27 04:48:33,624 - INFO - Initializing all queues...
2025-05-27 04:48:33,625 - INFO - All queues initialized on loop 495451680
2025-05-27 04:48:33,625 - INFO - Shared queues initialized.
2025-05-27 04:48:33,625 - INFO - Retrieved queue instances. Event loop ID: 495451680
2025-05-27 04:48:33,625 - INFO - SimulationManager ready state set to: True
2025-05-27 04:48:33,625 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 04:48:33,625 - INFO - MessageProcessor queues verified
2025-05-27 04:48:33,626 - INFO - MessageProcessor task started.
2025-05-27 04:48:33,626 - INFO - QueueForwarder initialized with all queues
2025-05-27 04:48:33,626 - INFO - QueueForwarder queues already initialized
2025-05-27 04:48:33,626 - INFO - QueueForwarder task started.
2025-05-27 04:48:33,626 - INFO - Application startup complete. All core services initialized.
2025-05-27 04:48:33,627 - INFO - Starting MessageProcessor
2025-05-27 04:48:33,627 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 04:48:35,011 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=34404)
2025-05-27 04:48:35,012 - INFO - Adding connection: 127.0.0.1:34404. Total connections: 1
2025-05-27 04:48:35,013 - INFO - Sent connection_ack to 127.0.0.1:34404
2025-05-27 04:48:35,013 - INFO - Sender task started for 127.0.0.1:34404
2025-05-27 04:48:35,014 - INFO - Receiver task started for 127.0.0.1:34404
2025-05-27 04:48:35,017 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:34404
2025-05-27 04:48:37,077 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:34404
2025-05-27 04:48:51,007 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:34404
2025-05-27 04:48:51,008 - INFO - Processed 3 messages
2025-05-27 04:49:00,018 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:34404
2025-05-27 04:49:00,018 - ERROR - Error processing received message from 127.0.0.1:34404: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 04:49:25,018 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:34404
2025-05-27 04:49:25,018 - ERROR - Error processing received message from 127.0.0.1:34404: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 04:49:25,022 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=39644)
2025-05-27 04:49:25,022 - INFO - Adding connection: 127.0.0.1:39644. Total connections: 2
2025-05-27 04:49:25,024 - INFO - Sent connection_ack to 127.0.0.1:39644
2025-05-27 04:49:25,024 - ERROR - Failed to send error message to 127.0.0.1:34404: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 332, in _send_error
    await websocket.send_text(error_ws_message.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 944, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 04:49:25,027 - INFO - Sender task started for 127.0.0.1:39644
2025-05-27 04:49:25,027 - INFO - Receiver task started for 127.0.0.1:39644
2025-05-27 04:49:25,028 - INFO - WebSocket disconnected from 127.0.0.1:34404 while receiving: Code 1005
2025-05-27 04:49:25,028 - INFO - Receiver task for 127.0.0.1:34404 finished.
2025-05-27 04:49:25,028 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:39644
2025-05-27 04:49:25,029 - INFO - Processed 1 messages
2025-05-27 04:49:25,029 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=34404)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 04:49:37,246 - INFO - WebSocket disconnected from 127.0.0.1:39644 while receiving: Code 1001
2025-05-27 04:49:37,246 - INFO - Receiver task for 127.0.0.1:39644 finished.
2025-05-27 04:50:22,304 - INFO - Application startup event triggered.
2025-05-27 04:50:22,304 - INFO - Initializing all queues...
2025-05-27 04:50:22,304 - INFO - All queues initialized on loop 889781792
2025-05-27 04:50:22,304 - INFO - Shared queues initialized.
2025-05-27 04:50:22,304 - INFO - Retrieved queue instances. Event loop ID: 889781792
2025-05-27 04:50:22,304 - INFO - SimulationManager ready state set to: True
2025-05-27 04:50:22,304 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 04:50:22,304 - INFO - MessageProcessor queues verified
2025-05-27 04:50:22,304 - INFO - MessageProcessor task started.
2025-05-27 04:50:22,305 - INFO - QueueForwarder initialized with all queues
2025-05-27 04:50:22,305 - INFO - QueueForwarder queues already initialized
2025-05-27 04:50:22,305 - INFO - QueueForwarder task started.
2025-05-27 04:50:22,305 - INFO - Application startup complete. All core services initialized.
2025-05-27 04:50:22,305 - INFO - Starting MessageProcessor
2025-05-27 04:50:22,305 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 04:50:23,665 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=56302)
2025-05-27 04:50:23,665 - INFO - Adding connection: 127.0.0.1:56302. Total connections: 1
2025-05-27 04:50:23,667 - INFO - Sent connection_ack to 127.0.0.1:56302
2025-05-27 04:50:23,667 - INFO - Sender task started for 127.0.0.1:56302
2025-05-27 04:50:23,667 - INFO - Receiver task started for 127.0.0.1:56302
2025-05-27 04:50:23,672 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:56302
2025-05-27 04:50:41,776 - INFO - WebSocket disconnected from 127.0.0.1:56302 while receiving: Code 1012
2025-05-27 04:50:41,776 - INFO - Receiver task for 127.0.0.1:56302 finished.
2025-05-27 04:50:42,078 - INFO - Application shutdown event triggered.
2025-05-27 04:50:42,079 - INFO - Stopping MessageProcessor...
2025-05-27 04:50:42,079 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 04:50:42,079 - INFO - All WebSocket connections attempted to close.
2025-05-27 04:50:42,079 - INFO - Application shutdown complete.
2025-05-27 04:50:42,080 - INFO - Sender task for 127.0.0.1:56302 was cancelled normally
2025-05-27 04:50:42,080 - INFO - Sender task for 127.0.0.1:56302 finished
2025-05-27 04:50:42,080 - INFO - Message forwarding task for Address(host='127.0.0.1', port=56302) cancelled.
2025-05-27 04:50:42,081 - INFO - Initiating cleanup for connection: 127.0.0.1:56302
2025-05-27 04:50:42,081 - INFO - Starting cleanup for 127.0.0.1:56302
2025-05-27 04:50:42,081 - INFO - Connection cleanup completed for 127.0.0.1:56302. Remaining connections: 0
2025-05-27 04:50:42,081 - INFO - Cleanup finished for connection: 127.0.0.1:56302. Total connections: 0
2025-05-27 04:50:42,081 - INFO - Cleanup finished for Address(host='127.0.0.1', port=56302) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:22:30,083 - INFO - Application startup event triggered.
2025-05-27 10:22:30,084 - INFO - Initializing all queues...
2025-05-27 10:22:30,084 - INFO - All queues initialized on loop 813481504
2025-05-27 10:22:30,084 - INFO - Shared queues initialized.
2025-05-27 10:22:30,084 - INFO - Retrieved queue instances. Event loop ID: 813481504
2025-05-27 10:22:30,084 - INFO - SimulationManager ready state set to: True
2025-05-27 10:22:30,084 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 10:22:30,084 - INFO - MessageProcessor queues verified
2025-05-27 10:22:30,084 - INFO - MessageProcessor task started.
2025-05-27 10:22:30,084 - INFO - QueueForwarder initialized with all queues
2025-05-27 10:22:30,084 - INFO - QueueForwarder queues already initialized
2025-05-27 10:22:30,084 - INFO - QueueForwarder task started.
2025-05-27 10:22:30,084 - INFO - Application startup complete. All core services initialized.
2025-05-27 10:22:30,084 - INFO - Starting MessageProcessor
2025-05-27 10:22:30,084 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 10:22:32,273 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=41210)
2025-05-27 10:22:32,273 - INFO - Adding connection: 127.0.0.1:41210. Total connections: 1
2025-05-27 10:22:32,274 - INFO - Sent connection_ack to 127.0.0.1:41210
2025-05-27 10:22:32,274 - INFO - Sender task started for 127.0.0.1:41210
2025-05-27 10:22:32,274 - INFO - Receiver task started for 127.0.0.1:41210
2025-05-27 10:22:32,282 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:41210
2025-05-27 10:22:34,103 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:41210
2025-05-27 10:22:43,923 - INFO - WebSocket disconnected from 127.0.0.1:41210 while receiving: Code 1012
2025-05-27 10:22:43,923 - INFO - Receiver task for 127.0.0.1:41210 finished.
2025-05-27 10:22:44,125 - INFO - Sender task for 127.0.0.1:41210 was cancelled normally
2025-05-27 10:22:44,125 - INFO - Sender task for 127.0.0.1:41210 finished
2025-05-27 10:22:44,125 - INFO - Application shutdown event triggered.
2025-05-27 10:22:44,126 - INFO - Stopping MessageProcessor...
2025-05-27 10:22:44,126 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 10:22:44,126 - INFO - All WebSocket connections attempted to close.
2025-05-27 10:22:44,126 - INFO - Application shutdown complete.
2025-05-27 10:22:44,128 - INFO - Message forwarding task for Address(host='127.0.0.1', port=41210) cancelled.
2025-05-27 10:22:44,128 - INFO - Initiating cleanup for connection: 127.0.0.1:41210
2025-05-27 10:22:44,128 - INFO - Starting cleanup for 127.0.0.1:41210
2025-05-27 10:22:44,128 - INFO - Connection cleanup completed for 127.0.0.1:41210. Remaining connections: 0
2025-05-27 10:22:44,128 - INFO - Cleanup finished for connection: 127.0.0.1:41210. Total connections: 0
2025-05-27 10:22:44,128 - INFO - Cleanup finished for Address(host='127.0.0.1', port=41210) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:27:09,178 - INFO - Application startup event triggered.
2025-05-27 10:27:09,178 - INFO - Initializing all queues...
2025-05-27 10:27:09,178 - INFO - All queues initialized on loop 747998752
2025-05-27 10:27:09,178 - INFO - Shared queues initialized.
2025-05-27 10:27:09,178 - INFO - Retrieved queue instances. Event loop ID: 747998752
2025-05-27 10:27:09,178 - INFO - SimulationManager ready state set to: True
2025-05-27 10:27:09,178 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 10:27:09,178 - INFO - MessageProcessor queues verified
2025-05-27 10:27:09,178 - INFO - MessageProcessor task started.
2025-05-27 10:27:09,179 - INFO - Starting MessageProcessor
2025-05-27 10:27:46,346 - INFO - Application startup event triggered.
2025-05-27 10:27:46,346 - INFO - Initializing all queues...
2025-05-27 10:27:46,346 - INFO - All queues initialized on loop 78503456
2025-05-27 10:27:46,346 - INFO - Shared queues initialized.
2025-05-27 10:27:46,346 - INFO - Retrieved queue instances. Event loop ID: 78503456
2025-05-27 10:27:46,346 - INFO - SimulationManager ready state set to: True
2025-05-27 10:27:46,346 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 10:27:46,346 - INFO - MessageProcessor queues verified
2025-05-27 10:27:46,346 - INFO - MessageProcessor task started.
2025-05-27 10:27:46,346 - INFO - QueueForwarder initialized with all queues
2025-05-27 10:27:46,346 - INFO - QueueForwarder queues already initialized
2025-05-27 10:27:46,346 - INFO - QueueForwarder task started.
2025-05-27 10:27:46,346 - INFO - Application startup complete. All core services initialized.
2025-05-27 10:27:46,346 - INFO - Starting MessageProcessor
2025-05-27 10:27:46,347 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 10:27:48,048 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=47054)
2025-05-27 10:27:48,048 - INFO - Adding connection: 127.0.0.1:47054. Total connections: 1
2025-05-27 10:27:48,048 - INFO - Sent connection_ack to 127.0.0.1:47054
2025-05-27 10:27:48,049 - INFO - Sender task started for 127.0.0.1:47054
2025-05-27 10:27:48,049 - INFO - Receiver task started for 127.0.0.1:47054
2025-05-27 10:27:48,050 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:47054
2025-05-27 10:27:53,360 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:47054
2025-05-27 10:27:53,361 - INFO - Processed 2 messages
2025-05-27 10:28:11,204 - INFO - WebSocket disconnected from 127.0.0.1:47054 while receiving: Code 1012
2025-05-27 10:28:11,204 - INFO - Receiver task for 127.0.0.1:47054 finished.
2025-05-27 10:28:11,404 - INFO - Application shutdown event triggered.
2025-05-27 10:28:11,405 - INFO - Stopping MessageProcessor...
2025-05-27 10:28:11,405 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 10:28:11,405 - INFO - All WebSocket connections attempted to close.
2025-05-27 10:28:11,405 - INFO - Application shutdown complete.
2025-05-27 10:28:11,406 - INFO - Sender task for 127.0.0.1:47054 was cancelled normally
2025-05-27 10:28:11,406 - INFO - Sender task for 127.0.0.1:47054 finished
2025-05-27 10:28:11,406 - INFO - Message forwarding task for Address(host='127.0.0.1', port=47054) cancelled.
2025-05-27 10:28:11,406 - INFO - Initiating cleanup for connection: 127.0.0.1:47054
2025-05-27 10:28:11,406 - INFO - Starting cleanup for 127.0.0.1:47054
2025-05-27 10:28:11,407 - INFO - Connection cleanup completed for 127.0.0.1:47054. Remaining connections: 0
2025-05-27 10:28:11,407 - INFO - Cleanup finished for connection: 127.0.0.1:47054. Total connections: 0
2025-05-27 10:28:11,407 - INFO - Cleanup finished for Address(host='127.0.0.1', port=47054) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:29:32,115 - INFO - Application startup event triggered.
2025-05-27 10:29:32,115 - INFO - Initializing all queues...
2025-05-27 10:29:32,115 - INFO - All queues initialized on loop 1022983712
2025-05-27 10:29:32,115 - INFO - Shared queues initialized.
2025-05-27 10:29:32,115 - INFO - Retrieved queue instances. Event loop ID: 1022983712
2025-05-27 10:29:32,115 - INFO - SimulationManager ready state set to: True
2025-05-27 10:29:32,116 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 10:29:32,116 - INFO - MessageProcessor queues verified
2025-05-27 10:29:32,116 - INFO - MessageProcessor task started.
2025-05-27 10:29:32,116 - INFO - QueueForwarder initialized with all queues
2025-05-27 10:29:32,116 - INFO - QueueForwarder queues already initialized
2025-05-27 10:29:32,116 - INFO - QueueForwarder task started.
2025-05-27 10:29:32,116 - INFO - Application startup complete. All core services initialized.
2025-05-27 10:29:32,116 - INFO - Starting MessageProcessor
2025-05-27 10:29:32,116 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 10:29:33,812 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=33254)
2025-05-27 10:29:33,812 - INFO - Adding connection: 127.0.0.1:33254. Total connections: 1
2025-05-27 10:29:33,813 - INFO - Sent connection_ack to 127.0.0.1:33254
2025-05-27 10:29:33,813 - INFO - Sender task started for 127.0.0.1:33254
2025-05-27 10:29:33,813 - INFO - Receiver task started for 127.0.0.1:33254
2025-05-27 10:29:33,820 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:33254
2025-05-27 10:29:38,287 - INFO - WebSocket disconnected from 127.0.0.1:33254 while receiving: Code 1001
2025-05-27 10:29:38,287 - INFO - Receiver task for 127.0.0.1:33254 finished.
2025-05-27 10:29:40,334 - INFO - Sender task for 127.0.0.1:33254 was cancelled normally
2025-05-27 10:29:40,335 - INFO - Sender task for 127.0.0.1:33254 finished
2025-05-27 10:29:40,335 - INFO - Application shutdown event triggered.
2025-05-27 10:29:40,335 - INFO - Stopping MessageProcessor...
2025-05-27 10:29:40,335 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 10:29:40,335 - INFO - All WebSocket connections attempted to close.
2025-05-27 10:29:40,335 - INFO - Application shutdown complete.
2025-05-27 10:29:40,336 - INFO - Message forwarding task for Address(host='127.0.0.1', port=33254) cancelled.
2025-05-27 10:29:40,337 - INFO - Initiating cleanup for connection: 127.0.0.1:33254
2025-05-27 10:29:40,337 - INFO - Starting cleanup for 127.0.0.1:33254
2025-05-27 10:29:40,337 - INFO - Connection cleanup completed for 127.0.0.1:33254. Remaining connections: 0
2025-05-27 10:29:40,337 - INFO - Cleanup finished for connection: 127.0.0.1:33254. Total connections: 0
2025-05-27 10:29:40,337 - INFO - Cleanup finished for Address(host='127.0.0.1', port=33254) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:30:03,222 - INFO - Application startup event triggered.
2025-05-27 10:30:03,222 - INFO - Initializing all queues...
2025-05-27 10:30:03,222 - INFO - All queues initialized on loop 289504800
2025-05-27 10:30:03,222 - INFO - Shared queues initialized.
2025-05-27 10:30:03,222 - INFO - Retrieved queue instances. Event loop ID: 289504800
2025-05-27 10:30:03,222 - INFO - SimulationManager ready state set to: True
2025-05-27 10:30:03,222 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 10:30:03,222 - INFO - MessageProcessor queues verified
2025-05-27 10:30:03,222 - INFO - MessageProcessor task started.
2025-05-27 10:30:03,223 - INFO - QueueForwarder initialized with all queues
2025-05-27 10:30:03,223 - INFO - QueueForwarder queues already initialized
2025-05-27 10:30:03,223 - INFO - QueueForwarder task started.
2025-05-27 10:30:03,223 - INFO - Application startup complete. All core services initialized.
2025-05-27 10:30:03,223 - INFO - Starting MessageProcessor
2025-05-27 10:30:03,223 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 10:30:04,940 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54040)
2025-05-27 10:30:04,940 - INFO - Adding connection: 127.0.0.1:54040. Total connections: 1
2025-05-27 10:30:04,941 - INFO - Sent connection_ack to 127.0.0.1:54040
2025-05-27 10:30:04,941 - INFO - Sender task started for 127.0.0.1:54040
2025-05-27 10:30:04,941 - INFO - Receiver task started for 127.0.0.1:54040
2025-05-27 10:30:04,943 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:54040
2025-05-27 10:30:06,530 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:54040
2025-05-27 10:30:10,526 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:54040
2025-05-27 10:30:10,526 - INFO - Processed 3 messages
2025-05-27 10:30:30,338 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:54040
2025-05-27 10:30:30,338 - ERROR - Error processing received message from 127.0.0.1:54040: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:30:55,338 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:54040
2025-05-27 10:30:55,338 - ERROR - Error processing received message from 127.0.0.1:54040: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:30:55,339 - ERROR - Failed to send error message to 127.0.0.1:54040: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 332, in _send_error
    await websocket.send_text(error_ws_message.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 944, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 10:30:55,341 - INFO - WebSocket disconnected from 127.0.0.1:54040 while receiving: Code 1005
2025-05-27 10:30:55,341 - INFO - Receiver task for 127.0.0.1:54040 finished.
2025-05-27 10:30:55,341 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=38464)
2025-05-27 10:30:55,341 - INFO - Adding connection: 127.0.0.1:38464. Total connections: 2
2025-05-27 10:30:55,342 - INFO - Sent connection_ack to 127.0.0.1:38464
2025-05-27 10:30:55,342 - INFO - Sender task started for 127.0.0.1:38464
2025-05-27 10:30:55,342 - INFO - Receiver task started for 127.0.0.1:38464
2025-05-27 10:30:55,343 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:38464
2025-05-27 10:30:55,343 - INFO - Processed 1 messages
2025-05-27 10:30:55,344 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=54040)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 10:30:55,344 - WARNING - WebSocket not connected for 127.0.0.1:54040, discarding message 35733de9-9e1e-45df-b356-d461878c3e37
2025-05-27 10:30:55,344 - INFO - Sender task for 127.0.0.1:54040 finished
2025-05-27 10:30:55,344 - INFO - Initiating cleanup for connection: 127.0.0.1:54040
2025-05-27 10:30:55,344 - INFO - Starting cleanup for 127.0.0.1:54040
2025-05-27 10:30:55,344 - INFO - Connection cleanup completed for 127.0.0.1:54040. Remaining connections: 1
2025-05-27 10:30:55,344 - INFO - Cleanup finished for connection: 127.0.0.1:54040. Total connections: 1
2025-05-27 10:30:55,345 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=54040): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 10:30:55,345 - INFO - Cleanup finished for Address(host='127.0.0.1', port=54040) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:31:21,338 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:38464
2025-05-27 10:31:21,338 - ERROR - Error processing received message from 127.0.0.1:38464: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:31:46,338 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:38464
2025-05-27 10:31:46,338 - ERROR - Error processing received message from 127.0.0.1:38464: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:31:46,340 - ERROR - Failed to send error message to 127.0.0.1:38464: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 332, in _send_error
    await websocket.send_text(error_ws_message.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 944, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 10:31:46,341 - INFO - WebSocket disconnected from 127.0.0.1:38464 while receiving: Code 1005
2025-05-27 10:31:46,341 - INFO - Receiver task for 127.0.0.1:38464 finished.
2025-05-27 10:31:46,341 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=60378)
2025-05-27 10:31:46,341 - INFO - Adding connection: 127.0.0.1:60378. Total connections: 2
2025-05-27 10:31:46,342 - INFO - Sent connection_ack to 127.0.0.1:60378
2025-05-27 10:31:46,342 - INFO - Sender task started for 127.0.0.1:60378
2025-05-27 10:31:46,342 - INFO - Receiver task started for 127.0.0.1:60378
2025-05-27 10:31:46,343 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:60378
2025-05-27 10:31:46,343 - INFO - Processed 1 messages
2025-05-27 10:31:46,343 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=38464)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 10:31:46,344 - WARNING - WebSocket not connected for 127.0.0.1:38464, discarding message 24d671c8-bc12-422f-a057-c834cf05f447
2025-05-27 10:31:46,344 - INFO - Sender task for 127.0.0.1:38464 finished
2025-05-27 10:31:46,344 - INFO - Initiating cleanup for connection: 127.0.0.1:38464
2025-05-27 10:31:46,344 - INFO - Starting cleanup for 127.0.0.1:38464
2025-05-27 10:31:46,344 - INFO - Connection cleanup completed for 127.0.0.1:38464. Remaining connections: 1
2025-05-27 10:31:46,344 - INFO - Cleanup finished for connection: 127.0.0.1:38464. Total connections: 1
2025-05-27 10:31:46,344 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=38464): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 10:31:46,344 - INFO - Cleanup finished for Address(host='127.0.0.1', port=38464) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:31:47,926 - INFO - WebSocket disconnected from 127.0.0.1:60378 while receiving: Code 1012
2025-05-27 10:31:47,926 - INFO - Receiver task for 127.0.0.1:60378 finished.
2025-05-27 10:31:48,728 - INFO - Sender task for 127.0.0.1:60378 was cancelled normally
2025-05-27 10:31:48,728 - INFO - Sender task for 127.0.0.1:60378 finished
2025-05-27 10:31:48,728 - INFO - Application shutdown event triggered.
2025-05-27 10:31:48,728 - INFO - Stopping MessageProcessor...
2025-05-27 10:31:48,728 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 10:31:48,728 - INFO - All WebSocket connections attempted to close.
2025-05-27 10:31:48,728 - INFO - Application shutdown complete.
2025-05-27 10:31:48,728 - INFO - Message forwarding task for Address(host='127.0.0.1', port=60378) cancelled.
2025-05-27 10:31:48,729 - INFO - Initiating cleanup for connection: 127.0.0.1:60378
2025-05-27 10:31:48,729 - INFO - Starting cleanup for 127.0.0.1:60378
2025-05-27 10:31:48,729 - INFO - Connection cleanup completed for 127.0.0.1:60378. Remaining connections: 0
2025-05-27 10:31:48,729 - INFO - Cleanup finished for connection: 127.0.0.1:60378. Total connections: 0
2025-05-27 10:31:48,729 - INFO - Cleanup finished for Address(host='127.0.0.1', port=60378) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:37:25,903 - INFO - Application startup event triggered.
2025-05-27 10:37:25,903 - INFO - Initializing all queues...
2025-05-27 10:37:25,903 - INFO - All queues initialized on loop 263917088
2025-05-27 10:37:25,903 - INFO - Shared queues initialized.
2025-05-27 10:37:25,903 - INFO - Retrieved queue instances. Event loop ID: 263917088
2025-05-27 10:37:25,903 - INFO - SimulationManager ready state set to: True
2025-05-27 10:37:25,903 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 10:37:25,903 - INFO - MessageProcessor queues verified
2025-05-27 10:37:25,903 - INFO - MessageProcessor task started.
2025-05-27 10:37:25,903 - INFO - QueueForwarder initialized with all queues
2025-05-27 10:37:25,903 - INFO - QueueForwarder queues already initialized
2025-05-27 10:37:25,903 - INFO - QueueForwarder task started.
2025-05-27 10:37:25,903 - INFO - Application startup complete. All core services initialized.
2025-05-27 10:37:25,903 - INFO - Starting MessageProcessor
2025-05-27 10:37:25,903 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 10:37:27,574 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=51360)
2025-05-27 10:37:27,574 - INFO - Adding connection: 127.0.0.1:51360. Total connections: 1
2025-05-27 10:37:27,574 - INFO - Sent connection_ack to 127.0.0.1:51360
2025-05-27 10:37:27,575 - INFO - Sender task started for 127.0.0.1:51360
2025-05-27 10:37:27,575 - INFO - Receiver task started for 127.0.0.1:51360
2025-05-27 10:37:27,584 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:51360
2025-05-27 10:37:31,007 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:51360
2025-05-27 10:37:31,007 - INFO - Processed 2 messages
2025-05-27 10:37:33,762 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:51360
2025-05-27 10:37:35,033 - INFO - WebSocket disconnected from 127.0.0.1:51360 while receiving: Code 1001
2025-05-27 10:37:35,033 - INFO - Receiver task for 127.0.0.1:51360 finished.
2025-05-27 10:37:35,059 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54460)
2025-05-27 10:37:35,059 - INFO - Adding connection: 127.0.0.1:54460. Total connections: 2
2025-05-27 10:37:35,060 - INFO - Sent connection_ack to 127.0.0.1:54460
2025-05-27 10:37:35,060 - INFO - Sender task started for 127.0.0.1:54460
2025-05-27 10:37:35,060 - INFO - Receiver task started for 127.0.0.1:54460
2025-05-27 10:37:35,061 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:54460
2025-05-27 10:37:35,062 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=51360)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 10:37:35,063 - WARNING - WebSocket not connected for 127.0.0.1:51360, discarding message f8bce584-1fd1-4d7e-bf37-db0bb28b0747
2025-05-27 10:37:35,063 - INFO - Sender task for 127.0.0.1:51360 finished
2025-05-27 10:37:35,063 - INFO - Initiating cleanup for connection: 127.0.0.1:51360
2025-05-27 10:37:35,063 - INFO - Starting cleanup for 127.0.0.1:51360
2025-05-27 10:37:35,063 - INFO - Connection cleanup completed for 127.0.0.1:51360. Remaining connections: 1
2025-05-27 10:37:35,063 - INFO - Cleanup finished for connection: 127.0.0.1:51360. Total connections: 1
2025-05-27 10:37:35,063 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=51360): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 10:37:35,064 - INFO - Cleanup finished for Address(host='127.0.0.1', port=51360) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:37:40,340 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54470)
2025-05-27 10:37:40,340 - INFO - Adding connection: 127.0.0.1:54470. Total connections: 2
2025-05-27 10:37:40,341 - INFO - Sent connection_ack to 127.0.0.1:54470
2025-05-27 10:37:40,341 - INFO - Sender task started for 127.0.0.1:54470
2025-05-27 10:37:40,341 - INFO - Receiver task started for 127.0.0.1:54470
2025-05-27 10:37:40,343 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:54470
2025-05-27 10:37:40,344 - INFO - Processed 3 messages
2025-05-27 10:38:00,062 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:54460
2025-05-27 10:38:00,062 - ERROR - Error processing received message from 127.0.0.1:54460: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:38:06,339 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:54470
2025-05-27 10:38:06,339 - ERROR - Error processing received message from 127.0.0.1:54470: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:38:07,075 - INFO - WebSocket disconnected from 127.0.0.1:54460 while receiving: Code 1001
2025-05-27 10:38:07,075 - INFO - Receiver task for 127.0.0.1:54460 finished.
2025-05-27 10:38:07,102 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=42904)
2025-05-27 10:38:07,103 - INFO - Adding connection: 127.0.0.1:42904. Total connections: 3
2025-05-27 10:38:07,103 - INFO - Sent connection_ack to 127.0.0.1:42904
2025-05-27 10:38:07,103 - INFO - Sender task started for 127.0.0.1:42904
2025-05-27 10:38:07,103 - INFO - Receiver task started for 127.0.0.1:42904
2025-05-27 10:38:07,112 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:42904
2025-05-27 10:38:07,112 - INFO - Processed 1 messages
2025-05-27 10:38:07,113 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=54460)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 10:38:17,563 - INFO - WebSocket disconnected from 127.0.0.1:42904 while receiving: Code 1001
2025-05-27 10:38:17,563 - INFO - Receiver task for 127.0.0.1:42904 finished.
2025-05-27 10:38:17,591 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50104)
2025-05-27 10:38:17,591 - INFO - Adding connection: 127.0.0.1:50104. Total connections: 4
2025-05-27 10:38:17,591 - INFO - Sent connection_ack to 127.0.0.1:50104
2025-05-27 10:38:17,591 - INFO - Sender task started for 127.0.0.1:50104
2025-05-27 10:38:17,592 - INFO - Receiver task started for 127.0.0.1:50104
2025-05-27 10:38:17,602 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:50104
2025-05-27 10:38:17,602 - INFO - Processed 1 messages
2025-05-27 10:38:17,602 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=42904)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 10:38:20,155 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:50104
2025-05-27 10:38:22,955 - INFO - WebSocket disconnected from 127.0.0.1:50104 while receiving: Code 1001
2025-05-27 10:38:22,955 - INFO - Receiver task for 127.0.0.1:50104 finished.
2025-05-27 10:38:22,978 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=60616)
2025-05-27 10:38:22,978 - INFO - Adding connection: 127.0.0.1:60616. Total connections: 5
2025-05-27 10:38:22,979 - INFO - Sent connection_ack to 127.0.0.1:60616
2025-05-27 10:38:22,979 - INFO - Sender task started for 127.0.0.1:60616
2025-05-27 10:38:22,979 - INFO - Receiver task started for 127.0.0.1:60616
2025-05-27 10:38:22,982 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:60616
2025-05-27 10:38:22,982 - INFO - Processed 2 messages
2025-05-27 10:38:22,982 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=50104)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 10:38:31,338 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:54470
2025-05-27 10:38:31,339 - ERROR - Error processing received message from 127.0.0.1:54470: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:38:31,340 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=36938)
2025-05-27 10:38:31,340 - INFO - Adding connection: 127.0.0.1:36938. Total connections: 6
2025-05-27 10:38:31,340 - INFO - Sent connection_ack to 127.0.0.1:36938
2025-05-27 10:38:31,341 - ERROR - Failed to send error message to 127.0.0.1:54470: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 332, in _send_error
    await websocket.send_text(error_ws_message.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 944, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 10:38:31,341 - INFO - Sender task started for 127.0.0.1:36938
2025-05-27 10:38:31,341 - INFO - Receiver task started for 127.0.0.1:36938
2025-05-27 10:38:31,341 - INFO - WebSocket disconnected from 127.0.0.1:54470 while receiving: Code 1005
2025-05-27 10:38:31,342 - INFO - Receiver task for 127.0.0.1:54470 finished.
2025-05-27 10:38:31,342 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:36938
2025-05-27 10:38:31,342 - INFO - Processed 1 messages
2025-05-27 10:38:31,342 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=54470)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 10:38:47,982 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:60616
2025-05-27 10:38:47,982 - ERROR - Error processing received message from 127.0.0.1:60616: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:38:57,338 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:36938
2025-05-27 10:38:57,339 - ERROR - Error processing received message from 127.0.0.1:36938: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:39:12,982 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:60616
2025-05-27 10:39:12,983 - ERROR - Error processing received message from 127.0.0.1:60616: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:39:12,985 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54794)
2025-05-27 10:39:12,985 - INFO - Adding connection: 127.0.0.1:54794. Total connections: 7
2025-05-27 10:39:12,986 - INFO - Sent connection_ack to 127.0.0.1:54794
2025-05-27 10:39:12,986 - ERROR - Failed to send error message to 127.0.0.1:60616: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 332, in _send_error
    await websocket.send_text(error_ws_message.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 944, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 10:39:12,987 - INFO - Sender task started for 127.0.0.1:54794
2025-05-27 10:39:12,987 - INFO - Receiver task started for 127.0.0.1:54794
2025-05-27 10:39:12,987 - INFO - WebSocket disconnected from 127.0.0.1:60616 while receiving: Code 1005
2025-05-27 10:39:12,987 - INFO - Receiver task for 127.0.0.1:60616 finished.
2025-05-27 10:39:12,987 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:54794
2025-05-27 10:39:12,988 - INFO - Processed 1 messages
2025-05-27 10:39:12,988 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=60616)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 10:39:22,338 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:36938
2025-05-27 10:39:22,339 - ERROR - Error processing received message from 127.0.0.1:36938: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:39:22,340 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=59152)
2025-05-27 10:39:22,341 - INFO - Adding connection: 127.0.0.1:59152. Total connections: 8
2025-05-27 10:39:22,341 - INFO - Sent connection_ack to 127.0.0.1:59152
2025-05-27 10:39:22,342 - ERROR - Failed to send error message to 127.0.0.1:36938: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 332, in _send_error
    await websocket.send_text(error_ws_message.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 944, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 10:39:22,342 - INFO - Sender task started for 127.0.0.1:59152
2025-05-27 10:39:22,342 - INFO - Receiver task started for 127.0.0.1:59152
2025-05-27 10:39:22,343 - INFO - WebSocket disconnected from 127.0.0.1:36938 while receiving: Code 1005
2025-05-27 10:39:22,343 - INFO - Receiver task for 127.0.0.1:36938 finished.
2025-05-27 10:39:22,343 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:59152
2025-05-27 10:39:22,343 - INFO - Processed 1 messages
2025-05-27 10:39:22,344 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=36938)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 10:39:37,988 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:54794
2025-05-27 10:39:37,988 - ERROR - Error processing received message from 127.0.0.1:54794: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:39:48,338 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:59152
2025-05-27 10:39:48,338 - ERROR - Error processing received message from 127.0.0.1:59152: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:40:02,988 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:54794
2025-05-27 10:40:02,988 - ERROR - Error processing received message from 127.0.0.1:54794: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:40:02,990 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=41828)
2025-05-27 10:40:02,990 - INFO - Adding connection: 127.0.0.1:41828. Total connections: 9
2025-05-27 10:40:02,991 - INFO - Sent connection_ack to 127.0.0.1:41828
2025-05-27 10:40:02,991 - ERROR - Failed to send error message to 127.0.0.1:54794: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 332, in _send_error
    await websocket.send_text(error_ws_message.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 944, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 10:40:02,992 - INFO - Sender task started for 127.0.0.1:41828
2025-05-27 10:40:02,992 - INFO - Receiver task started for 127.0.0.1:41828
2025-05-27 10:40:02,992 - INFO - WebSocket disconnected from 127.0.0.1:54794 while receiving: Code 1005
2025-05-27 10:40:02,992 - INFO - Receiver task for 127.0.0.1:54794 finished.
2025-05-27 10:40:02,993 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:41828
2025-05-27 10:40:02,993 - INFO - Processed 1 messages
2025-05-27 10:40:02,994 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=54794)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 10:40:13,338 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:59152
2025-05-27 10:40:13,339 - ERROR - Error processing received message from 127.0.0.1:59152: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:40:13,340 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=33804)
2025-05-27 10:40:13,340 - INFO - Adding connection: 127.0.0.1:33804. Total connections: 10
2025-05-27 10:40:13,341 - INFO - Sent connection_ack to 127.0.0.1:33804
2025-05-27 10:40:13,341 - ERROR - Failed to send error message to 127.0.0.1:59152: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 332, in _send_error
    await websocket.send_text(error_ws_message.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 944, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 10:40:13,342 - INFO - Sender task started for 127.0.0.1:33804
2025-05-27 10:40:13,342 - INFO - Receiver task started for 127.0.0.1:33804
2025-05-27 10:40:13,342 - INFO - WebSocket disconnected from 127.0.0.1:59152 while receiving: Code 1005
2025-05-27 10:40:13,342 - INFO - Receiver task for 127.0.0.1:59152 finished.
2025-05-27 10:40:13,343 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:33804
2025-05-27 10:40:13,343 - INFO - Processed 1 messages
2025-05-27 10:40:13,344 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=59152)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 10:40:27,993 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:41828
2025-05-27 10:40:27,994 - ERROR - Error processing received message from 127.0.0.1:41828: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:40:39,338 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:33804
2025-05-27 10:40:39,338 - ERROR - Error processing received message from 127.0.0.1:33804: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:40:52,994 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:41828
2025-05-27 10:40:52,994 - ERROR - Error processing received message from 127.0.0.1:41828: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:40:52,996 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=45424)
2025-05-27 10:40:52,996 - INFO - Adding connection: 127.0.0.1:45424. Total connections: 11
2025-05-27 10:40:52,997 - INFO - Sent connection_ack to 127.0.0.1:45424
2025-05-27 10:40:52,997 - ERROR - Failed to send error message to 127.0.0.1:41828: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 332, in _send_error
    await websocket.send_text(error_ws_message.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 944, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 10:40:52,998 - INFO - Sender task started for 127.0.0.1:45424
2025-05-27 10:40:52,998 - INFO - Receiver task started for 127.0.0.1:45424
2025-05-27 10:40:52,998 - INFO - WebSocket disconnected from 127.0.0.1:41828 while receiving: Code 1005
2025-05-27 10:40:52,998 - INFO - Receiver task for 127.0.0.1:41828 finished.
2025-05-27 10:40:52,999 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:45424
2025-05-27 10:40:52,999 - INFO - Processed 1 messages
2025-05-27 10:40:53,000 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=41828)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 10:41:04,338 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:33804
2025-05-27 10:41:04,338 - ERROR - Error processing received message from 127.0.0.1:33804: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:41:04,340 - ERROR - Failed to send error message to 127.0.0.1:33804: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 332, in _send_error
    await websocket.send_text(error_ws_message.json())
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 327, in asgi_send
    await self.send(data)  # type: ignore[arg-type]
    ^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 635, in send
    await self.ensure_open()
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 944, in ensure_open
    raise self.connection_closed_exc()
websockets.exceptions.ConnectionClosedOK: received 1005 (no status code [internal]); then sent 1005 (no status code [internal])
2025-05-27 10:41:04,343 - INFO - WebSocket disconnected from 127.0.0.1:33804 while receiving: Code 1005
2025-05-27 10:41:04,343 - INFO - Receiver task for 127.0.0.1:33804 finished.
2025-05-27 10:41:04,343 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54882)
2025-05-27 10:41:04,343 - INFO - Adding connection: 127.0.0.1:54882. Total connections: 12
2025-05-27 10:41:04,344 - INFO - Sent connection_ack to 127.0.0.1:54882
2025-05-27 10:41:04,344 - INFO - Sender task started for 127.0.0.1:54882
2025-05-27 10:41:04,344 - INFO - Receiver task started for 127.0.0.1:54882
2025-05-27 10:41:04,346 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:54882
2025-05-27 10:41:04,347 - INFO - Processed 1 messages
2025-05-27 10:41:04,347 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=33804)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 10:41:17,999 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:45424
2025-05-27 10:41:18,000 - ERROR - Error processing received message from 127.0.0.1:45424: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 238, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 10:41:21,648 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:45424
2025-05-27 10:41:21,648 - INFO - Processed 1 messages
2025-05-27 10:41:23,712 - INFO - WebSocket disconnected from 127.0.0.1:45424 while receiving: Code 1001
2025-05-27 10:41:23,712 - INFO - Receiver task for 127.0.0.1:45424 finished.
2025-05-27 10:41:24,983 - INFO - WebSocket disconnected from 127.0.0.1:54882 while receiving: Code 1001
2025-05-27 10:41:24,983 - INFO - Receiver task for 127.0.0.1:54882 finished.
2025-05-27 10:41:27,737 - INFO - Sender task for 127.0.0.1:54470 was cancelled normally
2025-05-27 10:41:27,737 - INFO - Sender task for 127.0.0.1:54470 finished
2025-05-27 10:41:27,737 - INFO - Sender task for 127.0.0.1:45424 was cancelled normally
2025-05-27 10:41:27,737 - INFO - Sender task for 127.0.0.1:45424 finished
2025-05-27 10:41:27,737 - INFO - Sender task for 127.0.0.1:41828 was cancelled normally
2025-05-27 10:41:27,737 - INFO - Sender task for 127.0.0.1:41828 finished
2025-05-27 10:41:27,737 - INFO - Sender task for 127.0.0.1:60616 was cancelled normally
2025-05-27 10:41:27,737 - INFO - Sender task for 127.0.0.1:60616 finished
2025-05-27 10:41:27,737 - INFO - Sender task for 127.0.0.1:33804 was cancelled normally
2025-05-27 10:41:27,737 - INFO - Sender task for 127.0.0.1:33804 finished
2025-05-27 10:41:27,737 - INFO - Sender task for 127.0.0.1:54460 was cancelled normally
2025-05-27 10:41:27,738 - INFO - Sender task for 127.0.0.1:54460 finished
2025-05-27 10:41:27,738 - INFO - Sender task for 127.0.0.1:54794 was cancelled normally
2025-05-27 10:41:27,738 - INFO - Sender task for 127.0.0.1:54794 finished
2025-05-27 10:41:27,738 - INFO - Sender task for 127.0.0.1:50104 was cancelled normally
2025-05-27 10:41:27,738 - INFO - Sender task for 127.0.0.1:50104 finished
2025-05-27 10:41:27,738 - INFO - Sender task for 127.0.0.1:36938 was cancelled normally
2025-05-27 10:41:27,738 - INFO - Sender task for 127.0.0.1:36938 finished
2025-05-27 10:41:27,738 - INFO - Sender task for 127.0.0.1:42904 was cancelled normally
2025-05-27 10:41:27,738 - INFO - Sender task for 127.0.0.1:42904 finished
2025-05-27 10:41:27,738 - INFO - Message forwarding task for Address(host='127.0.0.1', port=54882) cancelled.
2025-05-27 10:41:27,738 - INFO - Sender task for 127.0.0.1:54882 was cancelled normally
2025-05-27 10:41:27,738 - INFO - Sender task for 127.0.0.1:54882 finished
2025-05-27 10:41:27,738 - INFO - Sender task for 127.0.0.1:59152 was cancelled normally
2025-05-27 10:41:27,738 - INFO - Sender task for 127.0.0.1:59152 finished
2025-05-27 10:41:27,738 - INFO - Message forwarding task for Address(host='127.0.0.1', port=45424) cancelled.
2025-05-27 10:41:27,738 - INFO - Application shutdown event triggered.
2025-05-27 10:41:27,738 - INFO - Stopping MessageProcessor...
2025-05-27 10:41:27,738 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 10:41:27,738 - INFO - All WebSocket connections attempted to close.
2025-05-27 10:41:27,738 - INFO - Application shutdown complete.
2025-05-27 10:41:27,739 - INFO - Initiating cleanup for connection: 127.0.0.1:54470
2025-05-27 10:41:27,739 - INFO - Starting cleanup for 127.0.0.1:54470
2025-05-27 10:41:27,739 - INFO - Connection cleanup completed for 127.0.0.1:54470. Remaining connections: 11
2025-05-27 10:41:27,739 - INFO - Cleanup finished for connection: 127.0.0.1:54470. Total connections: 11
2025-05-27 10:41:27,739 - INFO - Cleanup finished for Address(host='127.0.0.1', port=54470) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:41:27,740 - INFO - Initiating cleanup for connection: 127.0.0.1:45424
2025-05-27 10:41:27,741 - INFO - Starting cleanup for 127.0.0.1:45424
2025-05-27 10:41:27,741 - INFO - Connection cleanup completed for 127.0.0.1:45424. Remaining connections: 10
2025-05-27 10:41:27,741 - INFO - Cleanup finished for connection: 127.0.0.1:45424. Total connections: 10
2025-05-27 10:41:27,741 - INFO - Cleanup finished for Address(host='127.0.0.1', port=45424) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:41:27,741 - INFO - Initiating cleanup for connection: 127.0.0.1:41828
2025-05-27 10:41:27,741 - INFO - Starting cleanup for 127.0.0.1:41828
2025-05-27 10:41:27,741 - INFO - Connection cleanup completed for 127.0.0.1:41828. Remaining connections: 9
2025-05-27 10:41:27,742 - INFO - Cleanup finished for connection: 127.0.0.1:41828. Total connections: 9
2025-05-27 10:41:27,742 - INFO - Cleanup finished for Address(host='127.0.0.1', port=41828) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:41:27,742 - INFO - Initiating cleanup for connection: 127.0.0.1:60616
2025-05-27 10:41:27,742 - INFO - Starting cleanup for 127.0.0.1:60616
2025-05-27 10:41:27,743 - INFO - Connection cleanup completed for 127.0.0.1:60616. Remaining connections: 8
2025-05-27 10:41:27,743 - INFO - Cleanup finished for connection: 127.0.0.1:60616. Total connections: 8
2025-05-27 10:41:27,743 - INFO - Cleanup finished for Address(host='127.0.0.1', port=60616) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:41:27,743 - INFO - Initiating cleanup for connection: 127.0.0.1:33804
2025-05-27 10:41:27,743 - INFO - Starting cleanup for 127.0.0.1:33804
2025-05-27 10:41:27,744 - INFO - Connection cleanup completed for 127.0.0.1:33804. Remaining connections: 7
2025-05-27 10:41:27,744 - INFO - Cleanup finished for connection: 127.0.0.1:33804. Total connections: 7
2025-05-27 10:41:27,744 - INFO - Cleanup finished for Address(host='127.0.0.1', port=33804) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:41:27,744 - INFO - Initiating cleanup for connection: 127.0.0.1:54460
2025-05-27 10:41:27,744 - INFO - Starting cleanup for 127.0.0.1:54460
2025-05-27 10:41:27,744 - INFO - Connection cleanup completed for 127.0.0.1:54460. Remaining connections: 6
2025-05-27 10:41:27,745 - INFO - Cleanup finished for connection: 127.0.0.1:54460. Total connections: 6
2025-05-27 10:41:27,745 - INFO - Cleanup finished for Address(host='127.0.0.1', port=54460) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:41:27,745 - INFO - Initiating cleanup for connection: 127.0.0.1:54794
2025-05-27 10:41:27,746 - INFO - Starting cleanup for 127.0.0.1:54794
2025-05-27 10:41:27,746 - INFO - Connection cleanup completed for 127.0.0.1:54794. Remaining connections: 5
2025-05-27 10:41:27,746 - INFO - Cleanup finished for connection: 127.0.0.1:54794. Total connections: 5
2025-05-27 10:41:27,746 - INFO - Cleanup finished for Address(host='127.0.0.1', port=54794) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:41:27,747 - INFO - Initiating cleanup for connection: 127.0.0.1:50104
2025-05-27 10:41:27,747 - INFO - Starting cleanup for 127.0.0.1:50104
2025-05-27 10:41:27,747 - INFO - Connection cleanup completed for 127.0.0.1:50104. Remaining connections: 4
2025-05-27 10:41:27,747 - INFO - Cleanup finished for connection: 127.0.0.1:50104. Total connections: 4
2025-05-27 10:41:27,747 - INFO - Cleanup finished for Address(host='127.0.0.1', port=50104) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:41:27,748 - INFO - Initiating cleanup for connection: 127.0.0.1:36938
2025-05-27 10:41:27,748 - INFO - Starting cleanup for 127.0.0.1:36938
2025-05-27 10:41:27,748 - INFO - Connection cleanup completed for 127.0.0.1:36938. Remaining connections: 3
2025-05-27 10:41:27,748 - INFO - Cleanup finished for connection: 127.0.0.1:36938. Total connections: 3
2025-05-27 10:41:27,748 - INFO - Cleanup finished for Address(host='127.0.0.1', port=36938) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:41:27,749 - INFO - Initiating cleanup for connection: 127.0.0.1:42904
2025-05-27 10:41:27,749 - INFO - Starting cleanup for 127.0.0.1:42904
2025-05-27 10:41:27,749 - INFO - Connection cleanup completed for 127.0.0.1:42904. Remaining connections: 2
2025-05-27 10:41:27,749 - INFO - Cleanup finished for connection: 127.0.0.1:42904. Total connections: 2
2025-05-27 10:41:27,749 - INFO - Cleanup finished for Address(host='127.0.0.1', port=42904) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:41:27,750 - INFO - Initiating cleanup for connection: 127.0.0.1:54882
2025-05-27 10:41:27,750 - INFO - Starting cleanup for 127.0.0.1:54882
2025-05-27 10:41:27,750 - INFO - Connection cleanup completed for 127.0.0.1:54882. Remaining connections: 1
2025-05-27 10:41:27,750 - INFO - Cleanup finished for connection: 127.0.0.1:54882. Total connections: 1
2025-05-27 10:41:27,750 - INFO - Cleanup finished for Address(host='127.0.0.1', port=54882) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 10:41:27,751 - INFO - Initiating cleanup for connection: 127.0.0.1:59152
2025-05-27 10:41:27,751 - INFO - Starting cleanup for 127.0.0.1:59152
2025-05-27 10:41:27,751 - INFO - Connection cleanup completed for 127.0.0.1:59152. Remaining connections: 0
2025-05-27 10:41:27,751 - INFO - Cleanup finished for connection: 127.0.0.1:59152. Total connections: 0
2025-05-27 10:41:27,751 - INFO - Cleanup finished for Address(host='127.0.0.1', port=59152) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:04:18,614 - INFO - Application startup event triggered.
2025-05-27 11:04:18,614 - INFO - Initializing all queues...
2025-05-27 11:04:18,614 - INFO - All queues initialized on loop 22367776
2025-05-27 11:04:18,614 - INFO - Shared queues initialized.
2025-05-27 11:04:18,614 - INFO - Retrieved queue instances. Event loop ID: 22367776
2025-05-27 11:04:18,614 - INFO - SimulationManager ready state set to: True
2025-05-27 11:04:18,614 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 11:04:18,614 - INFO - MessageProcessor queues verified
2025-05-27 11:04:18,614 - INFO - MessageProcessor task started.
2025-05-27 11:04:18,615 - INFO - QueueForwarder initialized with all queues
2025-05-27 11:04:18,615 - INFO - QueueForwarder queues already initialized
2025-05-27 11:04:18,615 - INFO - QueueForwarder task started.
2025-05-27 11:04:18,615 - INFO - Application startup complete. All core services initialized.
2025-05-27 11:04:18,615 - INFO - Starting MessageProcessor
2025-05-27 11:04:18,615 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 11:04:20,354 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=60278)
2025-05-27 11:04:20,354 - INFO - Adding connection: 127.0.0.1:60278. Total connections: 1
2025-05-27 11:04:20,355 - INFO - Sent connection_ack to 127.0.0.1:60278
2025-05-27 11:04:20,355 - INFO - Sender task started for 127.0.0.1:60278
2025-05-27 11:04:20,355 - INFO - Receiver task started for 127.0.0.1:60278
2025-05-27 11:04:20,356 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:60278
2025-05-27 11:04:21,943 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:60278
2025-05-27 11:04:35,077 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:60278
2025-05-27 11:04:35,078 - INFO - Processed 3 messages
2025-05-27 11:04:38,529 - INFO - WebSocket disconnected from 127.0.0.1:60278 while receiving: Code 1001
2025-05-27 11:04:38,529 - INFO - Receiver task for 127.0.0.1:60278 finished.
2025-05-27 11:04:40,674 - INFO - Sender task for 127.0.0.1:60278 was cancelled normally
2025-05-27 11:04:40,674 - INFO - Sender task for 127.0.0.1:60278 finished
2025-05-27 11:04:40,674 - INFO - Application shutdown event triggered.
2025-05-27 11:04:40,674 - INFO - Stopping MessageProcessor...
2025-05-27 11:04:40,674 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 11:04:40,674 - INFO - All WebSocket connections attempted to close.
2025-05-27 11:04:40,674 - INFO - Application shutdown complete.
2025-05-27 11:04:40,676 - INFO - Message forwarding task for Address(host='127.0.0.1', port=60278) cancelled.
2025-05-27 11:04:40,676 - INFO - Initiating cleanup for connection: 127.0.0.1:60278
2025-05-27 11:04:40,676 - INFO - Starting cleanup for 127.0.0.1:60278
2025-05-27 11:04:40,676 - INFO - Connection cleanup completed for 127.0.0.1:60278. Remaining connections: 0
2025-05-27 11:04:40,676 - INFO - Cleanup finished for connection: 127.0.0.1:60278. Total connections: 0
2025-05-27 11:04:40,676 - INFO - Cleanup finished for Address(host='127.0.0.1', port=60278) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:10:05,980 - INFO - Application startup event triggered.
2025-05-27 11:10:05,980 - INFO - Initializing all queues...
2025-05-27 11:10:05,980 - INFO - All queues initialized on loop 223616544
2025-05-27 11:10:05,980 - INFO - Shared queues initialized.
2025-05-27 11:10:05,980 - INFO - Retrieved queue instances. Event loop ID: 223616544
2025-05-27 11:10:05,980 - INFO - SimulationManager ready state set to: True
2025-05-27 11:10:05,980 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 11:10:05,980 - INFO - MessageProcessor queues verified
2025-05-27 11:10:05,980 - INFO - MessageProcessor task started.
2025-05-27 11:10:05,980 - INFO - QueueForwarder initialized with all queues
2025-05-27 11:10:05,980 - INFO - QueueForwarder queues already initialized
2025-05-27 11:10:05,980 - INFO - QueueForwarder task started.
2025-05-27 11:10:05,980 - INFO - Application startup complete. All core services initialized.
2025-05-27 11:10:05,980 - INFO - Starting MessageProcessor
2025-05-27 11:10:05,980 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 11:10:07,716 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=60460)
2025-05-27 11:10:07,716 - INFO - Adding connection: 127.0.0.1:60460. Total connections: 1
2025-05-27 11:10:07,717 - INFO - Sent connection_ack to 127.0.0.1:60460
2025-05-27 11:10:07,717 - INFO - Sender task started for 127.0.0.1:60460
2025-05-27 11:10:07,717 - INFO - Receiver task started for 127.0.0.1:60460
2025-05-27 11:10:07,726 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:60460
2025-05-27 11:10:09,456 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:60460
2025-05-27 11:10:23,269 - INFO - WebSocket disconnected from 127.0.0.1:60460 while receiving: Code 1001
2025-05-27 11:10:23,269 - INFO - Receiver task for 127.0.0.1:60460 finished.
2025-05-27 11:10:23,295 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37508)
2025-05-27 11:10:23,295 - INFO - Adding connection: 127.0.0.1:37508. Total connections: 2
2025-05-27 11:10:23,296 - INFO - Sent connection_ack to 127.0.0.1:37508
2025-05-27 11:10:23,296 - INFO - Sender task started for 127.0.0.1:37508
2025-05-27 11:10:23,296 - INFO - Receiver task started for 127.0.0.1:37508
2025-05-27 11:10:23,302 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:37508
2025-05-27 11:10:23,302 - INFO - Processed 3 messages
2025-05-27 11:10:23,302 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=60460)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 163, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 65, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-05-27 11:10:23,303 - WARNING - WebSocket not connected for 127.0.0.1:60460, discarding message b9803958-0887-4b1b-8604-f777be5ff29b
2025-05-27 11:10:23,303 - INFO - Sender task for 127.0.0.1:60460 finished
2025-05-27 11:10:23,303 - INFO - Initiating cleanup for connection: 127.0.0.1:60460
2025-05-27 11:10:23,303 - INFO - Starting cleanup for 127.0.0.1:60460
2025-05-27 11:10:23,303 - INFO - Connection cleanup completed for 127.0.0.1:60460. Remaining connections: 1
2025-05-27 11:10:23,303 - INFO - Cleanup finished for connection: 127.0.0.1:60460. Total connections: 1
2025-05-27 11:10:23,303 - ERROR - WebSocket receive/process error for Address(host='127.0.0.1', port=60460): Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 205, in websocket_endpoint
    data = await asyncio.wait_for(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 112, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError(
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-05-27 11:10:23,304 - INFO - Cleanup finished for Address(host='127.0.0.1', port=60460) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:10:26,128 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:37508
2025-05-27 11:10:36,347 - INFO - WebSocket disconnected from 127.0.0.1:37508 while receiving: Code 1001
2025-05-27 11:10:36,347 - INFO - Receiver task for 127.0.0.1:37508 finished.
2025-05-27 11:10:40,478 - INFO - Sender task for 127.0.0.1:37508 was cancelled normally
2025-05-27 11:10:40,478 - INFO - Sender task for 127.0.0.1:37508 finished
2025-05-27 11:10:40,478 - INFO - Message forwarding task for Address(host='127.0.0.1', port=37508) cancelled.
2025-05-27 11:10:40,478 - INFO - Application shutdown event triggered.
2025-05-27 11:10:40,479 - INFO - Stopping MessageProcessor...
2025-05-27 11:10:40,479 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 11:10:40,479 - INFO - All WebSocket connections attempted to close.
2025-05-27 11:10:40,479 - INFO - Application shutdown complete.
2025-05-27 11:10:40,480 - INFO - Initiating cleanup for connection: 127.0.0.1:37508
2025-05-27 11:10:40,480 - INFO - Starting cleanup for 127.0.0.1:37508
2025-05-27 11:10:40,480 - INFO - Connection cleanup completed for 127.0.0.1:37508. Remaining connections: 0
2025-05-27 11:10:40,480 - INFO - Cleanup finished for connection: 127.0.0.1:37508. Total connections: 0
2025-05-27 11:10:40,480 - INFO - Cleanup finished for Address(host='127.0.0.1', port=37508) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:13:01,730 - INFO - Application startup event triggered.
2025-05-27 11:13:01,730 - INFO - Initializing all queues...
2025-05-27 11:13:01,730 - INFO - All queues initialized on loop 386170400
2025-05-27 11:13:01,730 - INFO - Shared queues initialized.
2025-05-27 11:13:01,730 - INFO - Retrieved queue instances. Event loop ID: 386170400
2025-05-27 11:13:01,730 - INFO - SimulationManager ready state set to: True
2025-05-27 11:13:01,730 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 11:13:01,730 - INFO - MessageProcessor queues verified
2025-05-27 11:13:01,730 - INFO - MessageProcessor task started.
2025-05-27 11:13:01,730 - INFO - QueueForwarder initialized with all queues
2025-05-27 11:13:01,730 - INFO - QueueForwarder queues already initialized
2025-05-27 11:13:01,731 - INFO - QueueForwarder task started.
2025-05-27 11:13:01,731 - INFO - Application startup complete. All core services initialized.
2025-05-27 11:13:01,731 - INFO - Starting MessageProcessor
2025-05-27 11:13:01,731 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 11:13:03,444 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=43376)
2025-05-27 11:13:03,444 - INFO - Adding connection: 127.0.0.1:43376. Total connections: 1
2025-05-27 11:13:03,445 - INFO - Sent connection_ack to 127.0.0.1:43376
2025-05-27 11:13:03,445 - INFO - Sender task started for 127.0.0.1:43376
2025-05-27 11:13:03,445 - INFO - Receiver task started for 127.0.0.1:43376
2025-05-27 11:13:03,447 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:43376
2025-05-27 11:13:07,082 - INFO - WebSocket disconnected from 127.0.0.1:43376 while receiving: Code 1001
2025-05-27 11:13:07,082 - INFO - Receiver task for 127.0.0.1:43376 finished.
2025-05-27 11:13:24,501 - INFO - Application shutdown event triggered.
2025-05-27 11:13:24,501 - INFO - Stopping MessageProcessor...
2025-05-27 11:13:24,502 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 11:13:24,502 - INFO - All WebSocket connections attempted to close.
2025-05-27 11:13:24,502 - INFO - Application shutdown complete.
2025-05-27 11:13:24,503 - INFO - Sender task for 127.0.0.1:43376 was cancelled normally
2025-05-27 11:13:24,503 - INFO - Sender task for 127.0.0.1:43376 finished
2025-05-27 11:13:24,503 - INFO - Message forwarding task for Address(host='127.0.0.1', port=43376) cancelled.
2025-05-27 11:13:24,504 - INFO - Initiating cleanup for connection: 127.0.0.1:43376
2025-05-27 11:13:24,504 - INFO - Starting cleanup for 127.0.0.1:43376
2025-05-27 11:13:24,504 - INFO - Connection cleanup completed for 127.0.0.1:43376. Remaining connections: 0
2025-05-27 11:13:24,504 - INFO - Cleanup finished for connection: 127.0.0.1:43376. Total connections: 0
2025-05-27 11:13:24,504 - INFO - Cleanup finished for Address(host='127.0.0.1', port=43376) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:13:25,930 - INFO - Application startup event triggered.
2025-05-27 11:13:25,930 - INFO - Initializing all queues...
2025-05-27 11:13:25,930 - INFO - All queues initialized on loop 235286048
2025-05-27 11:13:25,930 - INFO - Shared queues initialized.
2025-05-27 11:13:25,930 - INFO - Retrieved queue instances. Event loop ID: 235286048
2025-05-27 11:13:25,930 - INFO - SimulationManager ready state set to: True
2025-05-27 11:13:25,930 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 11:13:25,930 - INFO - MessageProcessor queues verified
2025-05-27 11:13:25,930 - INFO - MessageProcessor task started.
2025-05-27 11:13:25,930 - INFO - QueueForwarder initialized with all queues
2025-05-27 11:13:25,930 - INFO - QueueForwarder queues already initialized
2025-05-27 11:13:25,930 - INFO - QueueForwarder task started.
2025-05-27 11:13:25,930 - INFO - Application startup complete. All core services initialized.
2025-05-27 11:13:25,930 - INFO - Starting MessageProcessor
2025-05-27 11:13:25,930 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 11:13:27,656 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53218)
2025-05-27 11:13:27,656 - INFO - Adding connection: 127.0.0.1:53218. Total connections: 1
2025-05-27 11:13:27,657 - INFO - Sent connection_ack to 127.0.0.1:53218
2025-05-27 11:13:27,657 - INFO - Sender task started for 127.0.0.1:53218
2025-05-27 11:13:27,657 - INFO - Receiver task started for 127.0.0.1:53218
2025-05-27 11:13:27,658 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:53218
2025-05-27 11:13:32,420 - INFO - WebSocket disconnected from 127.0.0.1:53218 while receiving: Code 1001
2025-05-27 11:13:32,420 - INFO - Receiver task for 127.0.0.1:53218 finished.
2025-05-27 11:33:00,989 - INFO - Sender task for 127.0.0.1:53218 was cancelled normally
2025-05-27 11:33:00,989 - INFO - Sender task for 127.0.0.1:53218 finished
2025-05-27 11:33:00,989 - INFO - Application shutdown event triggered.
2025-05-27 11:33:00,989 - INFO - Stopping MessageProcessor...
2025-05-27 11:33:00,989 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 11:33:00,989 - INFO - All WebSocket connections attempted to close.
2025-05-27 11:33:00,989 - INFO - Application shutdown complete.
2025-05-27 11:33:00,991 - INFO - Message forwarding task for Address(host='127.0.0.1', port=53218) cancelled.
2025-05-27 11:33:00,991 - INFO - Initiating cleanup for connection: 127.0.0.1:53218
2025-05-27 11:33:00,991 - INFO - Starting cleanup for 127.0.0.1:53218
2025-05-27 11:33:00,991 - INFO - Connection cleanup completed for 127.0.0.1:53218. Remaining connections: 0
2025-05-27 11:33:00,991 - INFO - Cleanup finished for connection: 127.0.0.1:53218. Total connections: 0
2025-05-27 11:33:00,991 - INFO - Cleanup finished for Address(host='127.0.0.1', port=53218) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:33:03,876 - INFO - Application startup event triggered.
2025-05-27 11:33:03,876 - INFO - Initializing all queues...
2025-05-27 11:33:03,877 - INFO - All queues initialized on loop 517766688
2025-05-27 11:33:03,877 - INFO - Shared queues initialized.
2025-05-27 11:33:03,877 - INFO - Retrieved queue instances. Event loop ID: 517766688
2025-05-27 11:33:03,877 - INFO - SimulationManager ready state set to: True
2025-05-27 11:33:03,877 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 11:33:03,877 - INFO - MessageProcessor queues verified and initialized.
2025-05-27 11:35:09,162 - INFO - Application startup event triggered.
2025-05-27 11:35:09,162 - INFO - Initializing all queues...
2025-05-27 11:35:09,162 - INFO - All queues initialized on loop 570126544
2025-05-27 11:35:09,162 - INFO - Shared queues initialized.
2025-05-27 11:35:09,162 - INFO - Retrieved queue instances. Event loop ID: 570126544
2025-05-27 11:35:09,162 - INFO - SimulationManager ready state set to: True
2025-05-27 11:35:09,163 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 11:35:09,163 - INFO - MessageProcessor queues verified and initialized.
2025-05-27 11:35:09,163 - INFO - MessageProcessor task started.
2025-05-27 11:35:09,163 - INFO - QueueForwarder initialized with all queues
2025-05-27 11:35:09,163 - INFO - QueueForwarder queues already initialized
2025-05-27 11:35:09,163 - INFO - QueueForwarder task started.
2025-05-27 11:35:09,163 - INFO - Application startup complete. All core services initialized.
2025-05-27 11:35:09,163 - INFO - MessageProcessor main loop started.
2025-05-27 11:35:09,163 - INFO - MessageProcessor main loop stopped.
2025-05-27 11:35:09,163 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 11:35:09,966 - INFO - Application shutdown event triggered.
2025-05-27 11:35:09,966 - INFO - Stopping MessageProcessor...
2025-05-27 11:35:09,966 - INFO - MessageProcessor was not running.
2025-05-27 11:35:09,967 - INFO - QueueForwarder task cancelled.
2025-05-27 11:35:09,967 - INFO - All WebSocket connections attempted to close.
2025-05-27 11:35:09,967 - INFO - Application shutdown complete.
2025-05-27 11:35:10,809 - INFO - Application startup event triggered.
2025-05-27 11:35:10,809 - INFO - Initializing all queues...
2025-05-27 11:35:10,809 - INFO - All queues initialized on loop 315916496
2025-05-27 11:35:10,809 - INFO - Shared queues initialized.
2025-05-27 11:35:10,809 - INFO - Retrieved queue instances. Event loop ID: 315916496
2025-05-27 11:35:10,809 - INFO - SimulationManager ready state set to: True
2025-05-27 11:35:10,810 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 11:35:10,810 - INFO - MessageProcessor queues verified and initialized.
2025-05-27 11:35:10,810 - INFO - MessageProcessor task started.
2025-05-27 11:35:10,810 - INFO - QueueForwarder initialized with all queues
2025-05-27 11:35:10,810 - INFO - QueueForwarder queues already initialized
2025-05-27 11:35:10,810 - INFO - QueueForwarder task started.
2025-05-27 11:35:10,810 - INFO - Application startup complete. All core services initialized.
2025-05-27 11:35:10,810 - INFO - MessageProcessor main loop started.
2025-05-27 11:35:10,810 - INFO - MessageProcessor main loop stopped.
2025-05-27 11:35:10,810 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 11:35:18,342 - INFO - Application shutdown event triggered.
2025-05-27 11:35:18,342 - INFO - Stopping MessageProcessor...
2025-05-27 11:35:18,342 - INFO - MessageProcessor was not running.
2025-05-27 11:35:18,342 - INFO - QueueForwarder task cancelled.
2025-05-27 11:35:18,342 - INFO - All WebSocket connections attempted to close.
2025-05-27 11:35:18,342 - INFO - Application shutdown complete.
2025-05-27 11:35:21,312 - INFO - Application startup event triggered.
2025-05-27 11:35:21,312 - INFO - Initializing all queues...
2025-05-27 11:35:21,312 - INFO - All queues initialized on loop 271019552
2025-05-27 11:35:21,313 - INFO - Shared queues initialized.
2025-05-27 11:35:21,313 - INFO - Retrieved queue instances. Event loop ID: 271019552
2025-05-27 11:35:21,313 - INFO - SimulationManager ready state set to: True
2025-05-27 11:35:21,313 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 11:35:21,313 - INFO - MessageProcessor queues verified and initialized.
2025-05-27 11:35:21,313 - INFO - MessageProcessor task started.
2025-05-27 11:35:21,313 - INFO - QueueForwarder initialized with all queues
2025-05-27 11:35:21,313 - INFO - QueueForwarder queues already initialized
2025-05-27 11:35:21,314 - INFO - QueueForwarder task started.
2025-05-27 11:35:21,314 - INFO - Application startup complete. All core services initialized.
2025-05-27 11:35:21,314 - INFO - MessageProcessor main loop started.
2025-05-27 11:35:21,314 - INFO - MessageProcessor main loop stopped.
2025-05-27 11:35:21,314 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 11:35:22,770 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37880)
2025-05-27 11:35:22,770 - INFO - Adding connection: 127.0.0.1:37880. Total connections: 1
2025-05-27 11:35:22,772 - INFO - Sent connection_ack to 127.0.0.1:37880
2025-05-27 11:35:22,772 - INFO - Sender task started for 127.0.0.1:37880
2025-05-27 11:35:22,773 - INFO - Receiver task started for 127.0.0.1:37880
2025-05-27 11:35:22,778 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:37880
2025-05-27 11:35:24,566 - INFO - WebSocket disconnected from 127.0.0.1:37880 while receiving: Code 1001
2025-05-27 11:35:24,567 - INFO - Receiver task for 127.0.0.1:37880 finished.
2025-05-27 11:35:24,629 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37882)
2025-05-27 11:35:24,629 - INFO - Adding connection: 127.0.0.1:37882. Total connections: 2
2025-05-27 11:35:24,631 - INFO - Sent connection_ack to 127.0.0.1:37882
2025-05-27 11:35:24,632 - INFO - Sender task started for 127.0.0.1:37882
2025-05-27 11:35:24,632 - INFO - Receiver task started for 127.0.0.1:37882
2025-05-27 11:35:24,635 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:37882
2025-05-27 11:35:28,560 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:37882
2025-05-27 11:35:29,071 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37894)
2025-05-27 11:35:29,072 - INFO - Adding connection: 127.0.0.1:37894. Total connections: 3
2025-05-27 11:35:29,073 - INFO - Sent connection_ack to 127.0.0.1:37894
2025-05-27 11:35:29,073 - INFO - Sender task started for 127.0.0.1:37894
2025-05-27 11:35:29,074 - INFO - Receiver task started for 127.0.0.1:37894
2025-05-27 11:35:29,094 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:37894
2025-05-27 11:35:32,607 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:37882
2025-05-27 11:35:38,497 - INFO - WebSocket disconnected from 127.0.0.1:37882 while receiving: Code 1001
2025-05-27 11:35:38,497 - INFO - Receiver task for 127.0.0.1:37882 finished.
2025-05-27 11:35:39,249 - INFO - WebSocket disconnected from 127.0.0.1:37894 while receiving: Code 1001
2025-05-27 11:35:39,249 - INFO - Receiver task for 127.0.0.1:37894 finished.
2025-05-27 11:35:51,233 - INFO - Sender task for 127.0.0.1:37882 was cancelled normally.
2025-05-27 11:35:51,234 - INFO - Sender task for 127.0.0.1:37882 finished.
2025-05-27 11:35:51,234 - INFO - Message forwarding task for Address(host='127.0.0.1', port=37894) cancelled.
2025-05-27 11:35:51,234 - INFO - Message forwarding task for Address(host='127.0.0.1', port=37882) cancelled.
2025-05-27 11:35:51,234 - INFO - Sender task for 127.0.0.1:37880 was cancelled normally.
2025-05-27 11:35:51,234 - INFO - Sender task for 127.0.0.1:37880 finished.
2025-05-27 11:35:51,234 - INFO - Application shutdown event triggered.
2025-05-27 11:35:51,234 - INFO - Stopping MessageProcessor...
2025-05-27 11:35:51,234 - INFO - MessageProcessor was not running.
2025-05-27 11:35:51,234 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 11:35:51,235 - INFO - All WebSocket connections attempted to close.
2025-05-27 11:35:51,235 - INFO - Application shutdown complete.
2025-05-27 11:35:51,236 - INFO - Sender task for 127.0.0.1:37894 was cancelled normally.
2025-05-27 11:35:51,236 - INFO - Sender task for 127.0.0.1:37894 finished.
2025-05-27 11:35:51,236 - INFO - Message forwarding task for Address(host='127.0.0.1', port=37880) cancelled.
2025-05-27 11:35:51,236 - INFO - Initiating cleanup for connection: 127.0.0.1:37882
2025-05-27 11:35:51,236 - INFO - Starting cleanup for 127.0.0.1:37882
2025-05-27 11:35:51,236 - INFO - Connection cleanup completed for 127.0.0.1:37882. Remaining connections: 2
2025-05-27 11:35:51,236 - INFO - Cleanup finished for connection: 127.0.0.1:37882. Total connections: 2
2025-05-27 11:35:51,236 - INFO - Cleanup finished for Address(host='127.0.0.1', port=37882) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:35:51,239 - INFO - Initiating cleanup for connection: 127.0.0.1:37880
2025-05-27 11:35:51,239 - INFO - Starting cleanup for 127.0.0.1:37880
2025-05-27 11:35:51,239 - INFO - Connection cleanup completed for 127.0.0.1:37880. Remaining connections: 1
2025-05-27 11:35:51,239 - INFO - Cleanup finished for connection: 127.0.0.1:37880. Total connections: 1
2025-05-27 11:35:51,239 - INFO - Cleanup finished for Address(host='127.0.0.1', port=37880) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:35:51,240 - INFO - Initiating cleanup for connection: 127.0.0.1:37894
2025-05-27 11:35:51,240 - INFO - Starting cleanup for 127.0.0.1:37894
2025-05-27 11:35:51,240 - INFO - Connection cleanup completed for 127.0.0.1:37894. Remaining connections: 0
2025-05-27 11:35:51,241 - INFO - Cleanup finished for connection: 127.0.0.1:37894. Total connections: 0
2025-05-27 11:35:51,241 - INFO - Cleanup finished for Address(host='127.0.0.1', port=37894) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:35:54,124 - INFO - Application startup event triggered.
2025-05-27 11:35:54,124 - INFO - Initializing all queues...
2025-05-27 11:35:54,124 - INFO - All queues initialized on loop 522673696
2025-05-27 11:35:54,124 - INFO - Shared queues initialized.
2025-05-27 11:35:54,124 - INFO - Retrieved queue instances. Event loop ID: 522673696
2025-05-27 11:35:54,124 - INFO - SimulationManager ready state set to: True
2025-05-27 11:35:54,124 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 11:35:54,124 - INFO - MessageProcessor queues verified and initialized.
2025-05-27 11:35:54,124 - INFO - MessageProcessor task started.
2025-05-27 11:35:54,124 - INFO - QueueForwarder initialized with all queues
2025-05-27 11:35:54,125 - INFO - QueueForwarder queues already initialized
2025-05-27 11:35:54,125 - INFO - QueueForwarder task started.
2025-05-27 11:35:54,125 - INFO - Application startup complete. All core services initialized.
2025-05-27 11:35:54,125 - INFO - MessageProcessor main loop started.
2025-05-27 11:35:54,125 - INFO - MessageProcessor main loop stopped.
2025-05-27 11:35:54,125 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 11:35:55,532 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=47970)
2025-05-27 11:35:55,533 - INFO - Adding connection: 127.0.0.1:47970. Total connections: 1
2025-05-27 11:35:55,534 - INFO - Sent connection_ack to 127.0.0.1:47970
2025-05-27 11:35:55,534 - INFO - Sender task started for 127.0.0.1:47970
2025-05-27 11:35:55,534 - INFO - Receiver task started for 127.0.0.1:47970
2025-05-27 11:35:55,540 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:47970
2025-05-27 11:35:58,079 - INFO - WebSocket disconnected from 127.0.0.1:47970 while receiving: Code 1001
2025-05-27 11:35:58,079 - INFO - Receiver task for 127.0.0.1:47970 finished.
2025-05-27 11:38:35,277 - INFO - Application shutdown event triggered.
2025-05-27 11:38:35,278 - INFO - Stopping MessageProcessor...
2025-05-27 11:38:35,278 - INFO - MessageProcessor was not running.
2025-05-27 11:38:35,278 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 11:38:35,278 - INFO - All WebSocket connections attempted to close.
2025-05-27 11:38:35,278 - INFO - Application shutdown complete.
2025-05-27 11:38:35,280 - INFO - Sender task for 127.0.0.1:47970 was cancelled normally.
2025-05-27 11:38:35,280 - INFO - Sender task for 127.0.0.1:47970 finished.
2025-05-27 11:38:35,280 - INFO - Message forwarding task for Address(host='127.0.0.1', port=47970) cancelled.
2025-05-27 11:38:35,280 - INFO - Initiating cleanup for connection: 127.0.0.1:47970
2025-05-27 11:38:35,280 - INFO - Starting cleanup for 127.0.0.1:47970
2025-05-27 11:38:35,280 - INFO - Connection cleanup completed for 127.0.0.1:47970. Remaining connections: 0
2025-05-27 11:38:35,280 - INFO - Cleanup finished for connection: 127.0.0.1:47970. Total connections: 0
2025-05-27 11:38:35,280 - INFO - Cleanup finished for Address(host='127.0.0.1', port=47970) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:38:37,871 - INFO - Application startup event triggered.
2025-05-27 11:38:37,871 - INFO - Initializing all queues...
2025-05-27 11:38:37,872 - INFO - All queues initialized on loop 373591584
2025-05-27 11:38:37,872 - INFO - Shared queues initialized.
2025-05-27 11:38:37,872 - INFO - Retrieved queue instances. Event loop ID: 373591584
2025-05-27 11:38:37,872 - INFO - SimulationManager ready state set to: True
2025-05-27 11:38:37,872 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 11:38:37,872 - INFO - MessageProcessor queues verified and initialized.
2025-05-27 11:38:37,872 - INFO - MessageProcessor task started.
2025-05-27 11:38:37,872 - INFO - QueueForwarder initialized with all queues
2025-05-27 11:38:37,872 - INFO - QueueForwarder queues already initialized
2025-05-27 11:38:37,872 - INFO - QueueForwarder task started.
2025-05-27 11:38:37,872 - INFO - Application startup complete. All core services initialized.
2025-05-27 11:38:37,872 - INFO - MessageProcessor main loop started.
2025-05-27 11:38:37,872 - INFO - MessageProcessor main loop stopped.
2025-05-27 11:38:37,873 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 11:38:39,295 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=34390)
2025-05-27 11:38:39,295 - INFO - Adding connection: 127.0.0.1:34390. Total connections: 1
2025-05-27 11:38:39,297 - INFO - Sent connection_ack to 127.0.0.1:34390
2025-05-27 11:38:39,297 - INFO - Sender task started for 127.0.0.1:34390
2025-05-27 11:38:39,297 - INFO - Receiver task started for 127.0.0.1:34390
2025-05-27 11:38:39,301 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:34390
2025-05-27 11:38:47,047 - INFO - WebSocket disconnected from 127.0.0.1:34390 while receiving: Code 1001
2025-05-27 11:38:47,047 - INFO - Receiver task for 127.0.0.1:34390 finished.
2025-05-27 11:38:47,122 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=43134)
2025-05-27 11:38:47,122 - INFO - Adding connection: 127.0.0.1:43134. Total connections: 2
2025-05-27 11:38:47,123 - INFO - Sent connection_ack to 127.0.0.1:43134
2025-05-27 11:38:47,124 - INFO - Sender task started for 127.0.0.1:43134
2025-05-27 11:38:47,124 - INFO - Receiver task started for 127.0.0.1:43134
2025-05-27 11:38:47,126 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:43134
2025-05-27 11:38:47,699 - INFO - WebSocket disconnected from 127.0.0.1:43134 while receiving: Code 1001
2025-05-27 11:38:47,700 - INFO - Receiver task for 127.0.0.1:43134 finished.
2025-05-27 11:38:47,762 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=43146)
2025-05-27 11:38:47,762 - INFO - Adding connection: 127.0.0.1:43146. Total connections: 3
2025-05-27 11:38:47,764 - INFO - Sent connection_ack to 127.0.0.1:43146
2025-05-27 11:38:47,765 - INFO - Sender task started for 127.0.0.1:43146
2025-05-27 11:38:47,765 - INFO - Receiver task started for 127.0.0.1:43146
2025-05-27 11:38:47,770 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:43146
2025-05-27 11:38:52,840 - INFO - WebSocket disconnected from 127.0.0.1:43146 while receiving: Code 1001
2025-05-27 11:38:52,840 - INFO - Receiver task for 127.0.0.1:43146 finished.
2025-05-27 11:38:58,053 - INFO - Sender task for 127.0.0.1:43146 was cancelled normally.
2025-05-27 11:38:58,053 - INFO - Sender task for 127.0.0.1:43146 finished.
2025-05-27 11:38:58,053 - INFO - Sender task for 127.0.0.1:43134 was cancelled normally.
2025-05-27 11:38:58,053 - INFO - Sender task for 127.0.0.1:43134 finished.
2025-05-27 11:38:58,053 - INFO - Sender task for 127.0.0.1:34390 was cancelled normally.
2025-05-27 11:38:58,053 - INFO - Sender task for 127.0.0.1:34390 finished.
2025-05-27 11:38:58,053 - INFO - Application shutdown event triggered.
2025-05-27 11:38:58,053 - INFO - Stopping MessageProcessor...
2025-05-27 11:38:58,054 - INFO - MessageProcessor was not running.
2025-05-27 11:38:58,054 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 11:38:58,054 - INFO - All WebSocket connections attempted to close.
2025-05-27 11:38:58,054 - INFO - Application shutdown complete.
2025-05-27 11:38:58,055 - INFO - Message forwarding task for Address(host='127.0.0.1', port=43134) cancelled.
2025-05-27 11:38:58,055 - INFO - Message forwarding task for Address(host='127.0.0.1', port=43146) cancelled.
2025-05-27 11:38:58,055 - INFO - Message forwarding task for Address(host='127.0.0.1', port=34390) cancelled.
2025-05-27 11:38:58,056 - INFO - Initiating cleanup for connection: 127.0.0.1:43146
2025-05-27 11:38:58,056 - INFO - Starting cleanup for 127.0.0.1:43146
2025-05-27 11:38:58,056 - INFO - Connection cleanup completed for 127.0.0.1:43146. Remaining connections: 2
2025-05-27 11:38:58,056 - INFO - Cleanup finished for connection: 127.0.0.1:43146. Total connections: 2
2025-05-27 11:38:58,056 - INFO - Cleanup finished for Address(host='127.0.0.1', port=43146) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:38:58,058 - INFO - Initiating cleanup for connection: 127.0.0.1:43134
2025-05-27 11:38:58,058 - INFO - Starting cleanup for 127.0.0.1:43134
2025-05-27 11:38:58,058 - INFO - Connection cleanup completed for 127.0.0.1:43134. Remaining connections: 1
2025-05-27 11:38:58,058 - INFO - Cleanup finished for connection: 127.0.0.1:43134. Total connections: 1
2025-05-27 11:38:58,059 - INFO - Cleanup finished for Address(host='127.0.0.1', port=43134) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:38:58,061 - INFO - Initiating cleanup for connection: 127.0.0.1:34390
2025-05-27 11:38:58,061 - INFO - Starting cleanup for 127.0.0.1:34390
2025-05-27 11:38:58,061 - INFO - Connection cleanup completed for 127.0.0.1:34390. Remaining connections: 0
2025-05-27 11:38:58,061 - INFO - Cleanup finished for connection: 127.0.0.1:34390. Total connections: 0
2025-05-27 11:38:58,061 - INFO - Cleanup finished for Address(host='127.0.0.1', port=34390) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:49:52,820 - INFO - Application startup event triggered.
2025-05-27 11:49:52,820 - INFO - Initializing all queues...
2025-05-27 11:49:52,821 - INFO - All queues initialized on loop 251883040
2025-05-27 11:49:52,821 - INFO - Shared queues initialized.
2025-05-27 11:49:52,821 - INFO - Retrieved queue instances. Event loop ID: 251883040
2025-05-27 11:49:52,821 - INFO - SimulationManager ready state set to: True
2025-05-27 11:49:52,821 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 11:49:52,821 - INFO - MessageProcessor queues verified and initialized.
2025-05-27 11:49:52,821 - INFO - MessageProcessor task started.
2025-05-27 11:49:52,822 - INFO - QueueForwarder initialized with all queues
2025-05-27 11:49:52,822 - INFO - QueueForwarder queues already initialized
2025-05-27 11:49:52,822 - INFO - QueueForwarder task started.
2025-05-27 11:49:52,822 - INFO - Application startup complete. All core services initialized.
2025-05-27 11:49:52,822 - INFO - Starting MessageProcessor main loop
2025-05-27 11:49:52,822 - INFO - MessageProcessor main loop ended
2025-05-27 11:49:52,822 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 11:49:54,230 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=55404)
2025-05-27 11:49:54,230 - INFO - Adding connection: 127.0.0.1:55404. Total connections: 1
2025-05-27 11:49:54,232 - INFO - Sent connection_ack to 127.0.0.1:55404
2025-05-27 11:49:54,232 - INFO - Sender task started for 127.0.0.1:55404
2025-05-27 11:49:54,232 - INFO - Receiver task started for 127.0.0.1:55404
2025-05-27 11:49:54,263 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:55404
2025-05-27 11:49:58,282 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:55404
2025-05-27 11:50:02,343 - INFO - WebSocket disconnected from 127.0.0.1:55404 while receiving: Code 1001
2025-05-27 11:50:02,343 - INFO - Receiver task for 127.0.0.1:55404 finished.
2025-05-27 11:50:02,401 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37956)
2025-05-27 11:50:02,401 - INFO - Adding connection: 127.0.0.1:37956. Total connections: 2
2025-05-27 11:50:02,402 - INFO - Sent connection_ack to 127.0.0.1:37956
2025-05-27 11:50:02,403 - INFO - Sender task started for 127.0.0.1:37956
2025-05-27 11:50:02,403 - INFO - Receiver task started for 127.0.0.1:37956
2025-05-27 11:50:02,409 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:37956
2025-05-27 11:50:02,780 - INFO - WebSocket disconnected from 127.0.0.1:37956 while receiving: Code 1001
2025-05-27 11:50:02,780 - INFO - Receiver task for 127.0.0.1:37956 finished.
2025-05-27 11:50:02,839 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37972)
2025-05-27 11:50:02,839 - INFO - Adding connection: 127.0.0.1:37972. Total connections: 3
2025-05-27 11:50:02,841 - INFO - Sent connection_ack to 127.0.0.1:37972
2025-05-27 11:50:02,842 - INFO - Sender task started for 127.0.0.1:37972
2025-05-27 11:50:02,842 - INFO - Receiver task started for 127.0.0.1:37972
2025-05-27 11:50:02,846 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:37972
2025-05-27 11:50:04,277 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:37972
2025-05-27 11:50:26,537 - INFO - WebSocket disconnected from 127.0.0.1:37972 while receiving: Code 1012
2025-05-27 11:50:26,537 - INFO - Receiver task for 127.0.0.1:37972 finished.
2025-05-27 11:50:26,637 - INFO - Sender task for 127.0.0.1:37956 was cancelled normally.
2025-05-27 11:50:26,637 - INFO - Sender task for 127.0.0.1:37956 finished.
2025-05-27 11:50:26,637 - INFO - Sender task for 127.0.0.1:55404 was cancelled normally.
2025-05-27 11:50:26,637 - INFO - Sender task for 127.0.0.1:55404 finished.
2025-05-27 11:50:26,638 - INFO - Application shutdown event triggered.
2025-05-27 11:50:26,638 - INFO - Stopping MessageProcessor...
2025-05-27 11:50:26,638 - INFO - MessageProcessor was not running.
2025-05-27 11:50:26,638 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 11:50:26,638 - INFO - All WebSocket connections attempted to close.
2025-05-27 11:50:26,638 - INFO - Application shutdown complete.
2025-05-27 11:50:26,639 - INFO - Sender task for 127.0.0.1:37972 was cancelled normally.
2025-05-27 11:50:26,640 - INFO - Sender task for 127.0.0.1:37972 finished.
2025-05-27 11:50:26,640 - INFO - Message forwarding task for Address(host='127.0.0.1', port=37956) cancelled.
2025-05-27 11:50:26,640 - INFO - Message forwarding task for Address(host='127.0.0.1', port=55404) cancelled.
2025-05-27 11:50:26,640 - INFO - Message forwarding task for Address(host='127.0.0.1', port=37972) cancelled.
2025-05-27 11:50:26,640 - INFO - Initiating cleanup for connection: 127.0.0.1:37956
2025-05-27 11:50:26,640 - INFO - Starting cleanup for 127.0.0.1:37956
2025-05-27 11:50:26,640 - INFO - Connection cleanup completed for 127.0.0.1:37956. Remaining connections: 2
2025-05-27 11:50:26,641 - INFO - Cleanup finished for connection: 127.0.0.1:37956. Total connections: 2
2025-05-27 11:50:26,641 - INFO - Cleanup finished for Address(host='127.0.0.1', port=37956) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:50:26,643 - INFO - Initiating cleanup for connection: 127.0.0.1:55404
2025-05-27 11:50:26,643 - INFO - Starting cleanup for 127.0.0.1:55404
2025-05-27 11:50:26,643 - INFO - Connection cleanup completed for 127.0.0.1:55404. Remaining connections: 1
2025-05-27 11:50:26,644 - INFO - Cleanup finished for connection: 127.0.0.1:55404. Total connections: 1
2025-05-27 11:50:26,644 - INFO - Cleanup finished for Address(host='127.0.0.1', port=55404) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:50:26,645 - INFO - Initiating cleanup for connection: 127.0.0.1:37972
2025-05-27 11:50:26,645 - INFO - Starting cleanup for 127.0.0.1:37972
2025-05-27 11:50:26,645 - INFO - Connection cleanup completed for 127.0.0.1:37972. Remaining connections: 0
2025-05-27 11:50:26,645 - INFO - Cleanup finished for connection: 127.0.0.1:37972. Total connections: 0
2025-05-27 11:50:26,645 - INFO - Cleanup finished for Address(host='127.0.0.1', port=37972) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 11:57:26,822 - INFO - Application startup event triggered.
2025-05-27 11:57:26,822 - INFO - Initializing all queues...
2025-05-27 11:57:26,822 - INFO - All queues initialized on loop 1034841632
2025-05-27 11:57:26,822 - INFO - Shared queues initialized.
2025-05-27 11:57:26,822 - INFO - Retrieved queue instances. Event loop ID: 1034841632
2025-05-27 11:57:26,822 - INFO - SimulationManager ready state set to: True
2025-05-27 11:57:26,822 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 11:57:26,823 - INFO - MessageProcessor queues verified and initialized.
2025-05-27 11:57:26,823 - INFO - MessageProcessor task started.
2025-05-27 11:57:26,823 - INFO - QueueForwarder initialized with all queues
2025-05-27 11:57:26,823 - INFO - QueueForwarder queues already initialized
2025-05-27 11:57:26,823 - INFO - QueueForwarder task started.
2025-05-27 11:57:26,823 - INFO - Application startup complete. All core services initialized.
2025-05-27 11:57:26,823 - INFO - Starting MessageProcessor main loop
2025-05-27 11:57:26,823 - INFO - MessageProcessor main loop ended
2025-05-27 11:57:26,823 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 11:57:28,231 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=38092)
2025-05-27 11:57:28,231 - INFO - Adding connection: 127.0.0.1:38092. Total connections: 1
2025-05-27 11:57:28,232 - INFO - Sent connection_ack to 127.0.0.1:38092
2025-05-27 11:57:28,233 - INFO - Sender task started for 127.0.0.1:38092
2025-05-27 11:57:28,233 - INFO - Receiver task started for 127.0.0.1:38092
2025-05-27 11:57:28,237 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:38092
2025-05-27 11:57:30,851 - INFO - WebSocket disconnected from 127.0.0.1:38092 while receiving: Code 1001
2025-05-27 11:57:30,852 - INFO - Receiver task for 127.0.0.1:38092 finished.
2025-05-27 11:57:31,527 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=46354)
2025-05-27 11:57:31,528 - INFO - Adding connection: 127.0.0.1:46354. Total connections: 2
2025-05-27 11:57:31,529 - INFO - Sent connection_ack to 127.0.0.1:46354
2025-05-27 11:57:31,530 - INFO - Sender task started for 127.0.0.1:46354
2025-05-27 11:57:31,530 - INFO - Receiver task started for 127.0.0.1:46354
2025-05-27 11:57:31,535 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:46354
2025-05-27 11:57:56,536 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:46354
2025-05-27 11:58:10,475 - INFO - WebSocket disconnected from 127.0.0.1:46354 while receiving: Code 1001
2025-05-27 11:58:10,475 - INFO - Receiver task for 127.0.0.1:46354 finished.
2025-05-27 12:00:44,021 - INFO - Sender task for 127.0.0.1:46354 was cancelled normally.
2025-05-27 12:00:44,021 - INFO - Sender task for 127.0.0.1:46354 finished.
2025-05-27 12:00:44,021 - INFO - Sender task for 127.0.0.1:38092 was cancelled normally.
2025-05-27 12:00:44,022 - INFO - Sender task for 127.0.0.1:38092 finished.
2025-05-27 12:00:44,022 - INFO - Application shutdown event triggered.
2025-05-27 12:00:44,022 - INFO - Stopping MessageProcessor...
2025-05-27 12:00:44,022 - INFO - MessageProcessor was not running.
2025-05-27 12:00:44,022 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 12:00:44,022 - INFO - All WebSocket connections attempted to close.
2025-05-27 12:00:44,022 - INFO - Application shutdown complete.
2025-05-27 12:00:44,024 - INFO - Message forwarding task for Address(host='127.0.0.1', port=46354) cancelled.
2025-05-27 12:00:44,024 - INFO - Message forwarding task for Address(host='127.0.0.1', port=38092) cancelled.
2025-05-27 12:00:44,024 - INFO - Initiating cleanup for connection: 127.0.0.1:46354
2025-05-27 12:00:44,024 - INFO - Starting cleanup for 127.0.0.1:46354
2025-05-27 12:00:44,024 - INFO - Connection cleanup completed for 127.0.0.1:46354. Remaining connections: 1
2025-05-27 12:00:44,024 - INFO - Cleanup finished for connection: 127.0.0.1:46354. Total connections: 1
2025-05-27 12:00:44,024 - INFO - Cleanup finished for Address(host='127.0.0.1', port=46354) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 12:00:44,027 - INFO - Initiating cleanup for connection: 127.0.0.1:38092
2025-05-27 12:00:44,027 - INFO - Starting cleanup for 127.0.0.1:38092
2025-05-27 12:00:44,027 - INFO - Connection cleanup completed for 127.0.0.1:38092. Remaining connections: 0
2025-05-27 12:00:44,027 - INFO - Cleanup finished for connection: 127.0.0.1:38092. Total connections: 0
2025-05-27 12:00:44,027 - INFO - Cleanup finished for Address(host='127.0.0.1', port=38092) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 12:00:46,920 - INFO - Application startup event triggered.
2025-05-27 12:00:46,920 - INFO - Initializing all queues...
2025-05-27 12:00:46,920 - INFO - All queues initialized on loop 699330080
2025-05-27 12:00:46,920 - INFO - Shared queues initialized.
2025-05-27 12:00:46,920 - INFO - Retrieved queue instances. Event loop ID: 699330080
2025-05-27 12:00:46,921 - INFO - SimulationManager ready state changed from False to True
2025-05-27 12:00:46,921 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 12:00:46,921 - INFO - MessageProcessor queues verified and initialized.
2025-05-27 12:00:46,921 - INFO - MessageProcessor task started.
2025-05-27 12:00:46,921 - INFO - QueueForwarder initialized with all queues
2025-05-27 12:00:46,921 - INFO - QueueForwarder queues already initialized
2025-05-27 12:00:46,921 - INFO - QueueForwarder task started.
2025-05-27 12:00:46,921 - INFO - Application startup complete. All core services initialized.
2025-05-27 12:00:46,921 - INFO - Starting MessageProcessor main loop
2025-05-27 12:00:46,921 - INFO - MessageProcessor main loop ended
2025-05-27 12:00:46,921 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 12:00:48,745 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53934)
2025-05-27 12:00:48,745 - INFO - Adding connection: 127.0.0.1:53934. Total connections: 1
2025-05-27 12:00:48,747 - INFO - Sent connection_ack to 127.0.0.1:53934
2025-05-27 12:00:48,747 - INFO - Sender task started for 127.0.0.1:53934
2025-05-27 12:00:48,748 - INFO - Receiver task started for 127.0.0.1:53934
2025-05-27 12:00:48,752 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:53934
2025-05-27 12:01:13,754 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53934
2025-05-27 12:01:39,599 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53934
2025-05-27 12:01:39,600 - INFO - WebSocket disconnected from 127.0.0.1:53934 while receiving: Code 1005
2025-05-27 12:01:39,600 - INFO - Receiver task for 127.0.0.1:53934 finished.
2025-05-27 12:01:39,604 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53212)
2025-05-27 12:01:39,604 - INFO - Adding connection: 127.0.0.1:53212. Total connections: 2
2025-05-27 12:01:39,606 - INFO - Sent connection_ack to 127.0.0.1:53212
2025-05-27 12:01:39,606 - INFO - Sender task started for 127.0.0.1:53212
2025-05-27 12:01:39,606 - INFO - Receiver task started for 127.0.0.1:53212
2025-05-27 12:01:39,610 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:53212
2025-05-27 12:02:05,599 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53212
2025-05-27 12:02:30,599 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53212
2025-05-27 12:02:30,600 - INFO - WebSocket disconnected from 127.0.0.1:53212 while receiving: Code 1005
2025-05-27 12:02:30,600 - INFO - Receiver task for 127.0.0.1:53212 finished.
2025-05-27 12:02:30,602 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=47026)
2025-05-27 12:02:30,602 - INFO - Adding connection: 127.0.0.1:47026. Total connections: 3
2025-05-27 12:02:30,603 - INFO - Sent connection_ack to 127.0.0.1:47026
2025-05-27 12:02:30,603 - INFO - Sender task started for 127.0.0.1:47026
2025-05-27 12:02:30,603 - INFO - Receiver task started for 127.0.0.1:47026
2025-05-27 12:02:30,606 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:47026
2025-05-27 12:02:56,599 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:47026
2025-05-27 12:03:21,598 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:47026
2025-05-27 12:03:21,599 - INFO - WebSocket disconnected from 127.0.0.1:47026 while receiving: Code 1005
2025-05-27 12:03:21,599 - INFO - Receiver task for 127.0.0.1:47026 finished.
2025-05-27 12:03:21,600 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=52932)
2025-05-27 12:03:21,600 - INFO - Adding connection: 127.0.0.1:52932. Total connections: 4
2025-05-27 12:03:21,601 - INFO - Sent connection_ack to 127.0.0.1:52932
2025-05-27 12:03:21,601 - INFO - Sender task started for 127.0.0.1:52932
2025-05-27 12:03:21,601 - INFO - Receiver task started for 127.0.0.1:52932
2025-05-27 12:03:21,603 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:52932
2025-05-27 12:03:47,600 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:52932
2025-05-27 12:04:10,663 - INFO - WebSocket disconnected from 127.0.0.1:52932 while receiving: Code 1012
2025-05-27 12:04:10,663 - INFO - Receiver task for 127.0.0.1:52932 finished.
2025-05-27 12:04:10,865 - INFO - Message forwarding task for Address(host='127.0.0.1', port=52932) cancelled.
2025-05-27 12:04:10,865 - INFO - Sender task for 127.0.0.1:47026 was cancelled normally.
2025-05-27 12:04:10,865 - INFO - Sender task for 127.0.0.1:47026 finished.
2025-05-27 12:04:10,866 - INFO - Message forwarding task for Address(host='127.0.0.1', port=53212) cancelled.
2025-05-27 12:04:10,866 - INFO - Sender task for 127.0.0.1:53934 was cancelled normally.
2025-05-27 12:04:10,866 - INFO - Sender task for 127.0.0.1:53934 finished.
2025-05-27 12:04:10,866 - INFO - Application shutdown event triggered.
2025-05-27 12:04:10,866 - INFO - Stopping MessageProcessor...
2025-05-27 12:04:10,866 - INFO - MessageProcessor was not running.
2025-05-27 12:04:10,866 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 12:04:10,866 - INFO - All WebSocket connections attempted to close.
2025-05-27 12:04:10,866 - INFO - Application shutdown complete.
2025-05-27 12:04:10,867 - INFO - Message forwarding task for Address(host='127.0.0.1', port=47026) cancelled.
2025-05-27 12:04:10,868 - INFO - Sender task for 127.0.0.1:53212 was cancelled normally.
2025-05-27 12:04:10,868 - INFO - Sender task for 127.0.0.1:53212 finished.
2025-05-27 12:04:10,868 - INFO - Message forwarding task for Address(host='127.0.0.1', port=53934) cancelled.
2025-05-27 12:04:10,868 - INFO - Sender task for 127.0.0.1:52932 was cancelled normally.
2025-05-27 12:04:10,868 - INFO - Sender task for 127.0.0.1:52932 finished.
2025-05-27 12:04:10,868 - INFO - Initiating cleanup for connection: 127.0.0.1:47026
2025-05-27 12:04:10,868 - INFO - Starting cleanup for 127.0.0.1:47026
2025-05-27 12:04:10,868 - INFO - Connection cleanup completed for 127.0.0.1:47026. Remaining connections: 3
2025-05-27 12:04:10,868 - INFO - Cleanup finished for connection: 127.0.0.1:47026. Total connections: 3
2025-05-27 12:04:10,868 - INFO - Cleanup finished for Address(host='127.0.0.1', port=47026) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 12:04:10,871 - INFO - Initiating cleanup for connection: 127.0.0.1:53934
2025-05-27 12:04:10,871 - INFO - Starting cleanup for 127.0.0.1:53934
2025-05-27 12:04:10,871 - INFO - Connection cleanup completed for 127.0.0.1:53934. Remaining connections: 2
2025-05-27 12:04:10,871 - INFO - Cleanup finished for connection: 127.0.0.1:53934. Total connections: 2
2025-05-27 12:04:10,871 - INFO - Cleanup finished for Address(host='127.0.0.1', port=53934) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 12:04:10,872 - INFO - Initiating cleanup for connection: 127.0.0.1:53212
2025-05-27 12:04:10,872 - INFO - Starting cleanup for 127.0.0.1:53212
2025-05-27 12:04:10,872 - INFO - Connection cleanup completed for 127.0.0.1:53212. Remaining connections: 1
2025-05-27 12:04:10,872 - INFO - Cleanup finished for connection: 127.0.0.1:53212. Total connections: 1
2025-05-27 12:04:10,872 - INFO - Cleanup finished for Address(host='127.0.0.1', port=53212) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 12:04:10,873 - INFO - Initiating cleanup for connection: 127.0.0.1:52932
2025-05-27 12:04:10,873 - INFO - Starting cleanup for 127.0.0.1:52932
2025-05-27 12:04:10,873 - INFO - Connection cleanup completed for 127.0.0.1:52932. Remaining connections: 0
2025-05-27 12:04:10,874 - INFO - Cleanup finished for connection: 127.0.0.1:52932. Total connections: 0
2025-05-27 12:04:10,874 - INFO - Cleanup finished for Address(host='127.0.0.1', port=52932) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 12:04:18,026 - INFO - Application startup event triggered.
2025-05-27 12:04:18,026 - INFO - Initializing all queues...
2025-05-27 12:04:18,026 - INFO - All queues initialized on loop 1021980192
2025-05-27 12:04:18,026 - INFO - Shared queues initialized.
2025-05-27 12:04:18,026 - INFO - Retrieved queue instances. Event loop ID: 1021980192
2025-05-27 12:04:18,027 - INFO - SimulationManager ready state changed from False to True
2025-05-27 12:04:18,027 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 12:04:18,027 - INFO - MessageProcessor queues verified and initialized.
2025-05-27 12:04:18,027 - INFO - MessageProcessor task started.
2025-05-27 12:04:18,027 - INFO - QueueForwarder initialized with all queues
2025-05-27 12:04:18,027 - INFO - QueueForwarder queues already initialized
2025-05-27 12:04:18,027 - INFO - QueueForwarder task started.
2025-05-27 12:04:18,027 - INFO - Application startup complete. All core services initialized.
2025-05-27 12:04:18,027 - INFO - Starting MessageProcessor main loop
2025-05-27 12:04:18,027 - INFO - MessageProcessor main loop ended
2025-05-27 12:04:18,027 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 12:04:19,855 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=41250)
2025-05-27 12:04:19,856 - INFO - Adding connection: 127.0.0.1:41250. Total connections: 1
2025-05-27 12:04:19,857 - INFO - Sent connection_ack to 127.0.0.1:41250
2025-05-27 12:04:19,857 - INFO - Sender task started for 127.0.0.1:41250
2025-05-27 12:04:19,858 - INFO - Receiver task started for 127.0.0.1:41250
2025-05-27 12:04:19,862 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:41250
2025-05-27 12:04:22,602 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=41266)
2025-05-27 12:04:22,602 - INFO - Adding connection: 127.0.0.1:41266. Total connections: 2
2025-05-27 12:04:22,603 - INFO - Sent connection_ack to 127.0.0.1:41266
2025-05-27 12:04:22,603 - INFO - Sender task started for 127.0.0.1:41266
2025-05-27 12:04:22,603 - INFO - Receiver task started for 127.0.0.1:41266
2025-05-27 12:04:22,608 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:41266
2025-05-27 12:04:40,454 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:41250
2025-05-27 12:04:44,863 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:41250
2025-05-27 12:04:48,599 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:41266
2025-05-27 12:05:04,682 - INFO - WebSocket disconnected from 127.0.0.1:41266 while receiving: Code 1001
2025-05-27 12:05:04,682 - INFO - Receiver task for 127.0.0.1:41266 finished.
2025-05-27 12:05:06,048 - INFO - WebSocket disconnected from 127.0.0.1:41250 while receiving: Code 1001
2025-05-27 12:05:06,048 - INFO - Receiver task for 127.0.0.1:41250 finished.
2025-05-27 12:06:13,773 - INFO - Message forwarding task for Address(host='127.0.0.1', port=41266) cancelled.
2025-05-27 12:06:13,774 - INFO - Sender task for 127.0.0.1:41250 was cancelled normally.
2025-05-27 12:06:13,774 - INFO - Sender task for 127.0.0.1:41250 finished.
2025-05-27 12:06:13,774 - INFO - Application shutdown event triggered.
2025-05-27 12:06:13,774 - INFO - Stopping MessageProcessor...
2025-05-27 12:06:13,774 - INFO - MessageProcessor was not running.
2025-05-27 12:06:13,774 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 12:06:13,774 - INFO - All WebSocket connections attempted to close.
2025-05-27 12:06:13,774 - INFO - Application shutdown complete.
2025-05-27 12:06:13,776 - INFO - Sender task for 127.0.0.1:41266 was cancelled normally.
2025-05-27 12:06:13,776 - INFO - Sender task for 127.0.0.1:41266 finished.
2025-05-27 12:06:13,776 - INFO - Message forwarding task for Address(host='127.0.0.1', port=41250) cancelled.
2025-05-27 12:06:13,776 - INFO - Initiating cleanup for connection: 127.0.0.1:41250
2025-05-27 12:06:13,776 - INFO - Starting cleanup for 127.0.0.1:41250
2025-05-27 12:06:13,776 - INFO - Connection cleanup completed for 127.0.0.1:41250. Remaining connections: 1
2025-05-27 12:06:13,776 - INFO - Cleanup finished for connection: 127.0.0.1:41250. Total connections: 1
2025-05-27 12:06:13,776 - INFO - Cleanup finished for Address(host='127.0.0.1', port=41250) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 12:06:13,778 - INFO - Initiating cleanup for connection: 127.0.0.1:41266
2025-05-27 12:06:13,779 - INFO - Starting cleanup for 127.0.0.1:41266
2025-05-27 12:06:13,779 - INFO - Connection cleanup completed for 127.0.0.1:41266. Remaining connections: 0
2025-05-27 12:06:13,779 - INFO - Cleanup finished for connection: 127.0.0.1:41266. Total connections: 0
2025-05-27 12:06:13,779 - INFO - Cleanup finished for Address(host='127.0.0.1', port=41266) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 12:06:45,980 - INFO - Application startup event triggered.
2025-05-27 12:06:45,981 - INFO - Initializing all queues...
2025-05-27 12:06:45,981 - INFO - All queues initialized on loop 1016450592
2025-05-27 12:06:45,981 - INFO - Shared queues initialized.
2025-05-27 12:06:45,981 - INFO - Retrieved queue instances. Event loop ID: 1016450592
2025-05-27 12:06:45,981 - INFO - SimulationManager ready state changed from False to True
2025-05-27 12:06:45,981 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 12:06:45,981 - INFO - MessageProcessor queues verified and initialized.
2025-05-27 12:06:45,981 - INFO - MessageProcessor task started.
2025-05-27 12:06:45,981 - INFO - QueueForwarder initialized with all queues
2025-05-27 12:06:45,982 - INFO - QueueForwarder queues already initialized
2025-05-27 12:06:45,982 - INFO - QueueForwarder task started.
2025-05-27 12:06:45,982 - INFO - Application startup complete. All core services initialized.
2025-05-27 12:06:45,982 - INFO - Starting MessageProcessor main loop
2025-05-27 12:06:45,982 - INFO - MessageProcessor main loop ended
2025-05-27 12:06:45,982 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 12:06:47,836 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54428)
2025-05-27 12:06:47,836 - INFO - Adding connection: 127.0.0.1:54428. Total connections: 1
2025-05-27 12:06:47,838 - INFO - Sent connection_ack to 127.0.0.1:54428
2025-05-27 12:06:47,838 - INFO - Sender task started for 127.0.0.1:54428
2025-05-27 12:06:47,838 - INFO - Receiver task started for 127.0.0.1:54428
2025-05-27 12:06:47,846 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:54428
2025-05-27 12:07:01,687 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:54428
2025-05-27 12:07:12,847 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:54428
2025-05-27 12:07:37,847 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:54428
2025-05-27 12:07:37,848 - INFO - WebSocket disconnected from 127.0.0.1:54428 while receiving: Code 1005
2025-05-27 12:07:37,848 - INFO - Receiver task for 127.0.0.1:54428 finished.
2025-05-27 12:07:37,850 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37176)
2025-05-27 12:07:37,850 - INFO - Adding connection: 127.0.0.1:37176. Total connections: 2
2025-05-27 12:07:37,851 - INFO - Sent connection_ack to 127.0.0.1:37176
2025-05-27 12:07:37,851 - INFO - Sender task started for 127.0.0.1:37176
2025-05-27 12:07:37,852 - INFO - Receiver task started for 127.0.0.1:37176
2025-05-27 12:07:37,856 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:37176
2025-05-27 12:07:44,871 - INFO - WebSocket disconnected from 127.0.0.1:37176 while receiving: Code 1001
2025-05-27 12:07:44,871 - INFO - Receiver task for 127.0.0.1:37176 finished.
2025-05-27 12:07:46,386 - INFO - Message forwarding task for Address(host='127.0.0.1', port=37176) cancelled.
2025-05-27 12:07:46,386 - INFO - Sender task for 127.0.0.1:54428 was cancelled normally.
2025-05-27 12:07:46,386 - INFO - Sender task for 127.0.0.1:54428 finished.
2025-05-27 12:07:46,386 - INFO - Application shutdown event triggered.
2025-05-27 12:07:46,386 - INFO - Stopping MessageProcessor...
2025-05-27 12:07:46,387 - INFO - MessageProcessor was not running.
2025-05-27 12:07:46,387 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 12:07:46,387 - INFO - All WebSocket connections attempted to close.
2025-05-27 12:07:46,387 - INFO - Application shutdown complete.
2025-05-27 12:07:46,388 - INFO - Sender task for 127.0.0.1:37176 was cancelled normally.
2025-05-27 12:07:46,388 - INFO - Sender task for 127.0.0.1:37176 finished.
2025-05-27 12:07:46,388 - INFO - Message forwarding task for Address(host='127.0.0.1', port=54428) cancelled.
2025-05-27 12:07:46,388 - INFO - Initiating cleanup for connection: 127.0.0.1:54428
2025-05-27 12:07:46,388 - INFO - Starting cleanup for 127.0.0.1:54428
2025-05-27 12:07:46,388 - INFO - Connection cleanup completed for 127.0.0.1:54428. Remaining connections: 1
2025-05-27 12:07:46,388 - INFO - Cleanup finished for connection: 127.0.0.1:54428. Total connections: 1
2025-05-27 12:07:46,388 - INFO - Cleanup finished for Address(host='127.0.0.1', port=54428) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 12:07:46,391 - INFO - Initiating cleanup for connection: 127.0.0.1:37176
2025-05-27 12:07:46,391 - INFO - Starting cleanup for 127.0.0.1:37176
2025-05-27 12:07:46,391 - INFO - Connection cleanup completed for 127.0.0.1:37176. Remaining connections: 0
2025-05-27 12:07:46,391 - INFO - Cleanup finished for connection: 127.0.0.1:37176. Total connections: 0
2025-05-27 12:07:46,391 - INFO - Cleanup finished for Address(host='127.0.0.1', port=37176) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 12:31:33,740 - INFO - Application startup event triggered.
2025-05-27 12:31:33,741 - INFO - Initializing all queues...
2025-05-27 12:31:33,741 - INFO - All queues initialized on loop 696544800
2025-05-27 12:31:33,741 - INFO - Shared queues initialized.
2025-05-27 12:31:33,741 - INFO - Retrieved queue instances. Event loop ID: 696544800
2025-05-27 12:31:33,741 - INFO - SimulationManager ready state changed from False to True
2025-05-27 12:31:33,741 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 12:31:33,741 - INFO - MessageProcessor queues verified and initialized.
2025-05-27 12:31:33,741 - INFO - MessageProcessor task started.
2025-05-27 12:31:33,742 - INFO - QueueForwarder initialized with all queues
2025-05-27 12:31:33,742 - INFO - QueueForwarder queues already initialized
2025-05-27 12:31:33,742 - INFO - QueueForwarder task started.
2025-05-27 12:31:33,742 - INFO - Application startup complete. All core services initialized.
2025-05-27 12:31:33,742 - INFO - MessageProcessor main loop started.
2025-05-27 12:31:33,742 - INFO - MessageProcessor main loop stopped.
2025-05-27 12:31:33,742 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-27 12:31:35,538 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50126)
2025-05-27 12:31:35,538 - INFO - Adding connection: 127.0.0.1:50126. Total connections: 1
2025-05-27 12:31:35,540 - INFO - Sent connection_ack to 127.0.0.1:50126
2025-05-27 12:31:35,540 - INFO - Sender task started for 127.0.0.1:50126
2025-05-27 12:31:35,540 - INFO - Receiver task started for 127.0.0.1:50126
2025-05-27 12:31:35,556 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:50126
2025-05-27 12:31:36,616 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:50126
2025-05-27 12:31:57,811 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:50126
2025-05-27 12:32:00,556 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:50126
2025-05-27 12:32:00,557 - ERROR - Error processing received message from 127.0.0.1:50126: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 12:32:00,559 - ERROR - Receive error for 127.0.0.1:50126: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-05-27 12:32:00,559 - INFO - Receiver task for 127.0.0.1:50126 finished.
2025-05-27 12:32:25,559 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=56012)
2025-05-27 12:32:25,560 - INFO - Adding connection: 127.0.0.1:56012. Total connections: 2
2025-05-27 12:32:25,561 - INFO - Sent connection_ack to 127.0.0.1:56012
2025-05-27 12:32:25,561 - INFO - Sender task started for 127.0.0.1:56012
2025-05-27 12:32:25,561 - INFO - Receiver task started for 127.0.0.1:56012
2025-05-27 12:32:25,563 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:56012
2025-05-27 12:32:50,593 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56012
2025-05-27 12:32:50,594 - ERROR - Error processing received message from 127.0.0.1:56012: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 12:32:50,595 - ERROR - Receive error for 127.0.0.1:56012: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-05-27 12:32:50,595 - INFO - Receiver task for 127.0.0.1:56012 finished.
2025-05-27 12:33:15,596 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=36316)
2025-05-27 12:33:15,596 - INFO - Adding connection: 127.0.0.1:36316. Total connections: 3
2025-05-27 12:33:15,597 - INFO - Sent connection_ack to 127.0.0.1:36316
2025-05-27 12:33:15,597 - INFO - Sender task started for 127.0.0.1:36316
2025-05-27 12:33:15,597 - INFO - Receiver task started for 127.0.0.1:36316
2025-05-27 12:33:15,600 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:36316
2025-05-27 12:33:41,593 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:36316
2025-05-27 12:33:41,593 - ERROR - Error processing received message from 127.0.0.1:36316: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 12:33:41,595 - ERROR - Receive error for 127.0.0.1:36316: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-05-27 12:33:41,595 - INFO - Receiver task for 127.0.0.1:36316 finished.
2025-05-27 12:34:06,594 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=45490)
2025-05-27 12:34:06,594 - INFO - Adding connection: 127.0.0.1:45490. Total connections: 4
2025-05-27 12:34:06,594 - INFO - Sent connection_ack to 127.0.0.1:45490
2025-05-27 12:34:06,594 - INFO - Sender task started for 127.0.0.1:45490
2025-05-27 12:34:06,594 - INFO - Receiver task started for 127.0.0.1:45490
2025-05-27 12:34:06,596 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:45490
2025-05-27 12:34:32,595 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:45490
2025-05-27 12:34:32,595 - ERROR - Error processing received message from 127.0.0.1:45490: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-27 12:34:32,597 - ERROR - Receive error for 127.0.0.1:45490: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-05-27 12:34:32,597 - INFO - Receiver task for 127.0.0.1:45490 finished.
2025-05-27 12:34:41,504 - INFO - Message forwarding task for Address(host='127.0.0.1', port=36316) cancelled.
2025-05-27 12:34:41,504 - INFO - Message forwarding task for Address(host='127.0.0.1', port=45490) cancelled.
2025-05-27 12:34:41,505 - INFO - Sender task for 127.0.0.1:56012 was cancelled normally.
2025-05-27 12:34:41,505 - INFO - Sender task for 127.0.0.1:56012 finished.
2025-05-27 12:34:41,505 - INFO - Sender task for 127.0.0.1:50126 was cancelled normally.
2025-05-27 12:34:41,505 - INFO - Sender task for 127.0.0.1:50126 finished.
2025-05-27 12:34:41,505 - INFO - Application shutdown event triggered.
2025-05-27 12:34:41,505 - INFO - Stopping MessageProcessor...
2025-05-27 12:34:41,505 - INFO - MessageProcessor was not running.
2025-05-27 12:34:41,505 - WARNING - QueueForwarder instance or task not available for graceful shutdown.
2025-05-27 12:34:41,505 - INFO - All WebSocket connections attempted to close.
2025-05-27 12:34:41,506 - INFO - Application shutdown complete.
2025-05-27 12:34:41,507 - INFO - Sender task for 127.0.0.1:36316 was cancelled normally.
2025-05-27 12:34:41,507 - INFO - Sender task for 127.0.0.1:36316 finished.
2025-05-27 12:34:41,507 - INFO - Message forwarding task for Address(host='127.0.0.1', port=56012) cancelled.
2025-05-27 12:34:41,507 - INFO - Sender task for 127.0.0.1:45490 was cancelled normally.
2025-05-27 12:34:41,507 - INFO - Sender task for 127.0.0.1:45490 finished.
2025-05-27 12:34:41,507 - INFO - Message forwarding task for Address(host='127.0.0.1', port=50126) cancelled.
2025-05-27 12:34:41,507 - INFO - Initiating cleanup for connection: 127.0.0.1:56012
2025-05-27 12:34:41,507 - INFO - Starting cleanup for 127.0.0.1:56012
2025-05-27 12:34:41,507 - INFO - Closed WebSocket connection for 127.0.0.1:56012
2025-05-27 12:34:41,507 - INFO - Connection cleanup completed for 127.0.0.1:56012. Remaining connections: 3
2025-05-27 12:34:41,508 - INFO - Cleanup finished for connection: 127.0.0.1:56012. Total connections: 3
2025-05-27 12:34:41,508 - INFO - Cleanup finished for Address(host='127.0.0.1', port=56012) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 12:34:41,510 - INFO - Initiating cleanup for connection: 127.0.0.1:50126
2025-05-27 12:34:41,510 - INFO - Starting cleanup for 127.0.0.1:50126
2025-05-27 12:34:41,510 - INFO - Closed WebSocket connection for 127.0.0.1:50126
2025-05-27 12:34:41,510 - INFO - Connection cleanup completed for 127.0.0.1:50126. Remaining connections: 2
2025-05-27 12:34:41,510 - INFO - Cleanup finished for connection: 127.0.0.1:50126. Total connections: 2
2025-05-27 12:34:41,510 - INFO - Cleanup finished for Address(host='127.0.0.1', port=50126) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 12:34:41,511 - INFO - Initiating cleanup for connection: 127.0.0.1:36316
2025-05-27 12:34:41,511 - INFO - Starting cleanup for 127.0.0.1:36316
2025-05-27 12:34:41,512 - INFO - Closed WebSocket connection for 127.0.0.1:36316
2025-05-27 12:34:41,512 - INFO - Connection cleanup completed for 127.0.0.1:36316. Remaining connections: 1
2025-05-27 12:34:41,512 - INFO - Cleanup finished for connection: 127.0.0.1:36316. Total connections: 1
2025-05-27 12:34:41,512 - INFO - Cleanup finished for Address(host='127.0.0.1', port=36316) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 12:34:41,513 - INFO - Initiating cleanup for connection: 127.0.0.1:45490
2025-05-27 12:34:41,513 - INFO - Starting cleanup for 127.0.0.1:45490
2025-05-27 12:34:41,513 - INFO - Closed WebSocket connection for 127.0.0.1:45490
2025-05-27 12:34:41,513 - INFO - Connection cleanup completed for 127.0.0.1:45490. Remaining connections: 0
2025-05-27 12:34:41,513 - INFO - Cleanup finished for connection: 127.0.0.1:45490. Total connections: 0
2025-05-27 12:34:41,513 - INFO - Cleanup finished for Address(host='127.0.0.1', port=45490) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-05-27 12:40:05,626 - INFO - Application startup event triggered.
2025-05-27 12:40:05,626 - INFO - Initializing all queues...
2025-05-27 12:40:05,626 - INFO - All queues initialized on loop 629808672
2025-05-27 12:40:05,626 - INFO - Shared queues initialized.
2025-05-27 12:40:05,626 - INFO - Retrieved queue instances. Event loop ID: 629808672
2025-05-27 12:40:05,626 - INFO - SimulationManager ready state changed from False to True
2025-05-27 12:40:05,626 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-27 12:40:05,626 - INFO - MessageProcessor queues verified and initialized.
2025-05-27 12:40:05,626 - INFO - MessageProcessor task started.
2025-05-27 12:40:05,626 - INFO - QueueForwarder initialized with all queues
2025-05-27 12:40:05,626 - INFO - QueueForwarder queues already initialized
2025-05-27 12:40:05,626 - INFO - QueueForwarder task started.
2025-05-27 12:40:05,626 - INFO - Application startup complete. All core services initialized.
2025-05-27 12:40:05,627 - INFO - MessageProcessor main loop started.
2025-05-27 12:40:05,627 - INFO - MessageProcessor main loop stopped.
2025-05-27 12:40:05,627 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:13:21,237 - INFO - Application startup event triggered.
2025-05-30 19:13:21,237 - INFO - Initializing all queues...
2025-05-30 19:13:21,238 - INFO - All queues initialized on loop 140274185200432
2025-05-30 19:13:21,238 - INFO - Shared queues initialized.
2025-05-30 19:13:21,238 - INFO - Retrieved queue instances. Event loop ID: 140274185200432
2025-05-30 19:13:21,238 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:13:21,238 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:13:21,238 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:13:21,238 - INFO - Starting MessageProcessor task.
2025-05-30 19:13:21,238 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:13:21,238 - INFO - MessageProcessor task started.
2025-05-30 19:13:21,238 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:13:21,238 - INFO - QueueForwarder queues already initialized
2025-05-30 19:13:21,239 - INFO - QueueForwarder task started.
2025-05-30 19:13:21,239 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:13:21,239 - INFO - MessageProcessor main loop started.
2025-05-30 19:13:21,239 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:13:28,950 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=59012)
2025-05-30 19:13:28,950 - INFO - Adding connection: 127.0.0.1:59012. Total connections: 1
2025-05-30 19:13:28,951 - INFO - Sent connection_ack to 127.0.0.1:59012
2025-05-30 19:13:28,951 - INFO - Sender task started for 127.0.0.1:59012
2025-05-30 19:13:28,951 - INFO - Receiver task started for 127.0.0.1:59012
2025-05-30 19:13:28,961 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:59012
2025-05-30 19:13:29,963 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:59012. Status: Frontend ready to receive
2025-05-30 19:13:29,964 - INFO - Processed 1 messages in the last 5 seconds.
2025-05-30 19:13:42,589 - INFO - WebSocket disconnected from 127.0.0.1:59012 while receiving: Code 1001
2025-05-30 19:13:42,589 - INFO - Receiver task for 127.0.0.1:59012 finished.
2025-05-30 19:15:58,207 - INFO - Application startup event triggered.
2025-05-30 19:15:58,207 - INFO - Initializing all queues...
2025-05-30 19:15:58,207 - INFO - All queues initialized on loop 140347251586880
2025-05-30 19:15:58,207 - INFO - Shared queues initialized.
2025-05-30 19:15:58,207 - INFO - Retrieved queue instances. Event loop ID: 140347251586880
2025-05-30 19:15:58,207 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:15:58,207 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:15:58,207 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:15:58,207 - INFO - Starting MessageProcessor task.
2025-05-30 19:15:58,207 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:15:58,208 - INFO - MessageProcessor task started.
2025-05-30 19:15:58,208 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:15:58,208 - INFO - QueueForwarder queues already initialized
2025-05-30 19:15:58,208 - INFO - QueueForwarder task started.
2025-05-30 19:15:58,208 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:15:58,208 - INFO - MessageProcessor main loop started.
2025-05-30 19:15:58,208 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:16:06,055 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53062)
2025-05-30 19:16:06,055 - INFO - Adding connection: 127.0.0.1:53062. Total connections: 1
2025-05-30 19:16:06,056 - INFO - Sent connection_ack to 127.0.0.1:53062
2025-05-30 19:16:06,056 - INFO - Sender task started for 127.0.0.1:53062
2025-05-30 19:16:06,056 - INFO - Receiver task started for 127.0.0.1:53062
2025-05-30 19:16:06,064 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:53062
2025-05-30 19:16:07,066 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:53062. Status: Frontend ready to receive
2025-05-30 19:16:07,066 - INFO - Processed 1 messages in the last 5 seconds.
2025-05-30 19:16:15,439 - INFO - WebSocket disconnected from 127.0.0.1:53062 while receiving: Code 1001
2025-05-30 19:16:15,439 - INFO - Receiver task for 127.0.0.1:53062 finished.
2025-05-30 19:17:02,576 - INFO - Application startup event triggered.
2025-05-30 19:17:02,576 - INFO - Initializing all queues...
2025-05-30 19:17:02,576 - INFO - All queues initialized on loop 140539115482736
2025-05-30 19:17:02,576 - INFO - Shared queues initialized.
2025-05-30 19:17:02,577 - INFO - Retrieved queue instances. Event loop ID: 140539115482736
2025-05-30 19:17:02,577 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:17:02,577 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:17:02,577 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:17:02,577 - INFO - Starting MessageProcessor task.
2025-05-30 19:17:02,577 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:17:02,577 - INFO - MessageProcessor task started.
2025-05-30 19:17:02,577 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:17:02,577 - INFO - QueueForwarder queues already initialized
2025-05-30 19:17:02,577 - INFO - QueueForwarder task started.
2025-05-30 19:17:02,577 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:17:02,578 - INFO - MessageProcessor main loop started.
2025-05-30 19:17:02,578 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:17:10,588 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50172)
2025-05-30 19:17:10,588 - INFO - Adding connection: 127.0.0.1:50172. Total connections: 1
2025-05-30 19:17:10,589 - INFO - Sent connection_ack to 127.0.0.1:50172
2025-05-30 19:17:10,589 - INFO - Sender task started for 127.0.0.1:50172
2025-05-30 19:17:10,589 - INFO - Receiver task started for 127.0.0.1:50172
2025-05-30 19:17:10,597 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:50172
2025-05-30 19:17:11,460 - INFO - WebSocket disconnected from 127.0.0.1:50172 while receiving: Code 1001
2025-05-30 19:17:11,461 - INFO - Receiver task for 127.0.0.1:50172 finished.
2025-05-30 19:17:11,598 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:50172. Status: Frontend ready to receive
2025-05-30 19:17:11,598 - INFO - Processed 1 messages in the last 5 seconds.
2025-05-30 19:17:11,692 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50178)
2025-05-30 19:17:11,692 - INFO - Adding connection: 127.0.0.1:50178. Total connections: 2
2025-05-30 19:17:11,694 - ERROR - Error sending connection_ack to 127.0.0.1:50178: 
2025-05-30 19:17:11,694 - INFO - Sender task started for 127.0.0.1:50178
2025-05-30 19:17:11,695 - INFO - Receiver task started for 127.0.0.1:50178
2025-05-30 19:17:11,695 - ERROR - Receive error for 127.0.0.1:50178: WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 199, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/.venv/lib/python3.12/site-packages/starlette/websockets.py", line 117, in receive_text
    raise RuntimeError('WebSocket is not connected. Need to call "accept" first.')
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-05-30 19:17:11,695 - INFO - Receiver task for 127.0.0.1:50178 finished.
2025-05-30 19:17:11,704 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50186)
2025-05-30 19:17:11,704 - INFO - Adding connection: 127.0.0.1:50186. Total connections: 3
2025-05-30 19:17:11,705 - INFO - Sent connection_ack to 127.0.0.1:50186
2025-05-30 19:17:11,705 - INFO - Sender task started for 127.0.0.1:50186
2025-05-30 19:17:11,705 - INFO - Receiver task started for 127.0.0.1:50186
2025-05-30 19:17:11,706 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:50186
2025-05-30 19:17:12,707 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:50186. Status: Frontend ready to receive
2025-05-30 19:17:13,693 - INFO - WebSocket disconnected from 127.0.0.1:50186 while receiving: Code 1005
2025-05-30 19:17:13,693 - INFO - Receiver task for 127.0.0.1:50186 finished.
2025-05-30 19:17:13,695 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50202)
2025-05-30 19:17:13,695 - INFO - Adding connection: 127.0.0.1:50202. Total connections: 4
2025-05-30 19:17:13,696 - INFO - Sent connection_ack to 127.0.0.1:50202
2025-05-30 19:17:13,696 - INFO - Sender task started for 127.0.0.1:50202
2025-05-30 19:17:13,696 - INFO - Receiver task started for 127.0.0.1:50202
2025-05-30 19:17:13,698 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:50202
2025-05-30 19:17:14,700 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:50202. Status: Frontend ready to receive
2025-05-30 19:17:23,260 - INFO - WebSocket disconnected from 127.0.0.1:50202 while receiving: Code 1001
2025-05-30 19:17:23,260 - INFO - Receiver task for 127.0.0.1:50202 finished.
2025-05-30 19:19:23,147 - INFO - Application startup event triggered.
2025-05-30 19:19:23,147 - INFO - Initializing all queues...
2025-05-30 19:19:23,147 - INFO - All queues initialized on loop 140008104632032
2025-05-30 19:19:23,147 - INFO - Shared queues initialized.
2025-05-30 19:19:23,147 - INFO - Retrieved queue instances. Event loop ID: 140008104632032
2025-05-30 19:19:23,147 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:19:23,148 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:19:23,148 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:19:23,148 - INFO - Starting MessageProcessor task.
2025-05-30 19:19:23,148 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:19:23,148 - INFO - MessageProcessor task started.
2025-05-30 19:19:23,148 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:19:23,148 - INFO - QueueForwarder queues already initialized
2025-05-30 19:19:23,148 - INFO - QueueForwarder task started.
2025-05-30 19:19:23,148 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:19:23,148 - INFO - MessageProcessor main loop started.
2025-05-30 19:19:23,148 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:19:30,611 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=34538)
2025-05-30 19:19:30,611 - INFO - Adding connection: 127.0.0.1:34538. Total connections: 1
2025-05-30 19:19:30,612 - INFO - Sent connection_ack to 127.0.0.1:34538
2025-05-30 19:19:30,612 - INFO - Sender task started for 127.0.0.1:34538
2025-05-30 19:19:30,612 - INFO - Receiver task started for 127.0.0.1:34538
2025-05-30 19:19:30,621 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:34538
2025-05-30 19:19:31,622 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:34538. Status: Frontend ready to receive
2025-05-30 19:19:31,622 - INFO - Processed 1 messages in the last 5 seconds.
2025-05-30 19:19:48,572 - INFO - WebSocket disconnected from 127.0.0.1:34538 while receiving: Code 1001
2025-05-30 19:19:48,572 - INFO - Receiver task for 127.0.0.1:34538 finished.
2025-05-30 19:21:41,304 - INFO - Application startup event triggered.
2025-05-30 19:21:41,304 - INFO - Initializing all queues...
2025-05-30 19:21:41,305 - INFO - All queues initialized on loop 140227816326496
2025-05-30 19:21:41,305 - INFO - Shared queues initialized.
2025-05-30 19:21:41,305 - INFO - Retrieved queue instances. Event loop ID: 140227816326496
2025-05-30 19:21:41,305 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:21:41,305 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:21:41,305 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:21:41,305 - INFO - Starting MessageProcessor task.
2025-05-30 19:21:41,305 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:21:41,305 - INFO - MessageProcessor task started.
2025-05-30 19:21:41,305 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:21:41,306 - INFO - QueueForwarder queues already initialized
2025-05-30 19:21:41,306 - INFO - QueueForwarder task started.
2025-05-30 19:21:41,306 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:21:41,306 - INFO - MessageProcessor main loop started.
2025-05-30 19:21:41,306 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:21:48,495 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=41128)
2025-05-30 19:21:48,495 - INFO - Adding connection: 127.0.0.1:41128. Total connections: 1
2025-05-30 19:21:48,495 - INFO - Sent connection_ack to 127.0.0.1:41128
2025-05-30 19:21:48,496 - INFO - Sender task started for 127.0.0.1:41128
2025-05-30 19:21:48,496 - INFO - Receiver task started for 127.0.0.1:41128
2025-05-30 19:21:48,505 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:41128
2025-05-30 19:21:49,506 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:41128. Status: Frontend ready to receive
2025-05-30 19:21:49,507 - INFO - Processed 1 messages in the last 5 seconds.
2025-05-30 19:22:14,279 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:41128
2025-05-30 19:22:14,279 - ERROR - Error processing received message from 127.0.0.1:41128: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-05-30 19:22:14,280 - ERROR - Receive error for 127.0.0.1:41128: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-05-30 19:22:14,281 - INFO - Receiver task for 127.0.0.1:41128 finished.
2025-05-30 19:22:39,282 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=45676)
2025-05-30 19:22:39,282 - INFO - Adding connection: 127.0.0.1:45676. Total connections: 2
2025-05-30 19:22:39,283 - INFO - Sent connection_ack to 127.0.0.1:45676
2025-05-30 19:22:39,284 - INFO - Sender task started for 127.0.0.1:45676
2025-05-30 19:22:39,284 - INFO - Receiver task started for 127.0.0.1:45676
2025-05-30 19:22:39,286 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:45676
2025-05-30 19:22:40,287 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:45676. Status: Frontend ready to receive
2025-05-30 19:22:40,287 - INFO - Processed 1 messages in the last 5 seconds.
2025-05-30 19:22:53,089 - INFO - WebSocket disconnected from 127.0.0.1:45676 while receiving: Code 1001
2025-05-30 19:22:53,090 - INFO - Receiver task for 127.0.0.1:45676 finished.
2025-05-30 19:23:42,304 - INFO - Application startup event triggered.
2025-05-30 19:23:42,304 - INFO - Initializing all queues...
2025-05-30 19:23:42,305 - INFO - All queues initialized on loop 139912999266656
2025-05-30 19:23:42,305 - INFO - Shared queues initialized.
2025-05-30 19:23:42,305 - INFO - Retrieved queue instances. Event loop ID: 139912999266656
2025-05-30 19:23:42,305 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:23:42,305 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:23:42,305 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:23:42,305 - INFO - Starting MessageProcessor task.
2025-05-30 19:23:42,305 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:23:42,305 - INFO - MessageProcessor task started.
2025-05-30 19:23:42,305 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:23:42,305 - INFO - QueueForwarder queues already initialized
2025-05-30 19:23:42,306 - INFO - QueueForwarder task started.
2025-05-30 19:23:42,306 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:23:42,306 - INFO - MessageProcessor main loop started.
2025-05-30 19:23:42,306 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:24:40,162 - INFO - Application startup event triggered.
2025-05-30 19:24:40,162 - INFO - Initializing all queues...
2025-05-30 19:24:40,162 - INFO - All queues initialized on loop 140595051032080
2025-05-30 19:24:40,162 - INFO - Shared queues initialized.
2025-05-30 19:24:40,162 - INFO - Retrieved queue instances. Event loop ID: 140595051032080
2025-05-30 19:24:40,162 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:24:40,162 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:24:40,162 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:24:40,162 - INFO - Starting MessageProcessor task.
2025-05-30 19:24:40,162 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:24:40,162 - INFO - MessageProcessor task started.
2025-05-30 19:24:40,162 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:24:40,162 - INFO - QueueForwarder queues already initialized
2025-05-30 19:24:40,163 - INFO - QueueForwarder task started.
2025-05-30 19:24:40,163 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:24:40,163 - INFO - MessageProcessor main loop started.
2025-05-30 19:24:40,163 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:25:49,218 - INFO - Application startup event triggered.
2025-05-30 19:25:49,218 - INFO - Initializing all queues...
2025-05-30 19:25:49,218 - INFO - All queues initialized on loop 140016670121696
2025-05-30 19:25:49,218 - INFO - Shared queues initialized.
2025-05-30 19:25:49,218 - INFO - Retrieved queue instances. Event loop ID: 140016670121696
2025-05-30 19:25:49,218 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:25:49,218 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:25:49,218 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:25:49,219 - INFO - Starting MessageProcessor task.
2025-05-30 19:25:49,219 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:25:49,219 - INFO - MessageProcessor task started.
2025-05-30 19:25:49,219 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:25:49,219 - INFO - QueueForwarder queues already initialized
2025-05-30 19:25:49,219 - INFO - QueueForwarder task started.
2025-05-30 19:25:49,219 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:25:49,220 - INFO - MessageProcessor main loop started.
2025-05-30 19:25:49,220 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:27:24,300 - INFO - Application startup event triggered.
2025-05-30 19:27:24,300 - INFO - Initializing all queues...
2025-05-30 19:27:24,300 - INFO - All queues initialized on loop 139671226639776
2025-05-30 19:27:24,301 - INFO - Shared queues initialized.
2025-05-30 19:27:24,301 - INFO - Retrieved queue instances. Event loop ID: 139671226639776
2025-05-30 19:27:24,301 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:27:24,301 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:27:24,301 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:27:24,301 - INFO - Starting MessageProcessor task.
2025-05-30 19:27:24,301 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:27:24,301 - INFO - MessageProcessor task started.
2025-05-30 19:27:24,301 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:27:24,301 - INFO - QueueForwarder queues already initialized
2025-05-30 19:27:24,301 - INFO - QueueForwarder task started.
2025-05-30 19:27:24,301 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:27:24,301 - INFO - MessageProcessor main loop started.
2025-05-30 19:27:24,302 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:29:12,451 - INFO - Application startup event triggered.
2025-05-30 19:29:12,451 - INFO - Initializing all queues...
2025-05-30 19:29:12,452 - INFO - All queues initialized on loop 140126454341344
2025-05-30 19:29:12,452 - INFO - Shared queues initialized.
2025-05-30 19:29:12,452 - INFO - Retrieved queue instances. Event loop ID: 140126454341344
2025-05-30 19:29:12,452 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:29:12,452 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:29:12,452 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:29:12,452 - INFO - Starting MessageProcessor task.
2025-05-30 19:29:12,452 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:29:12,452 - INFO - MessageProcessor task started.
2025-05-30 19:29:12,453 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:29:12,453 - INFO - QueueForwarder queues already initialized
2025-05-30 19:29:12,453 - INFO - QueueForwarder task started.
2025-05-30 19:29:12,453 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:29:12,453 - INFO - MessageProcessor main loop started.
2025-05-30 19:29:12,453 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:33:55,126 - INFO - Application startup event triggered.
2025-05-30 19:33:55,126 - INFO - Initializing all queues...
2025-05-30 19:33:55,126 - INFO - All queues initialized on loop 140387679379168
2025-05-30 19:33:55,126 - INFO - Shared queues initialized.
2025-05-30 19:33:55,126 - INFO - Retrieved queue instances. Event loop ID: 140387679379168
2025-05-30 19:33:55,126 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:33:55,126 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:33:55,126 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:33:55,126 - INFO - Starting MessageProcessor task.
2025-05-30 19:33:55,126 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:33:55,126 - INFO - MessageProcessor task started.
2025-05-30 19:33:55,126 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:33:55,127 - INFO - QueueForwarder queues already initialized
2025-05-30 19:33:55,127 - INFO - QueueForwarder task started.
2025-05-30 19:33:55,127 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:33:55,127 - INFO - MessageProcessor main loop started.
2025-05-30 19:33:55,127 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:35:57,382 - INFO - Application startup event triggered.
2025-05-30 19:35:57,383 - INFO - Initializing all queues...
2025-05-30 19:35:57,383 - INFO - All queues initialized on loop 140631863031904
2025-05-30 19:35:57,383 - INFO - Shared queues initialized.
2025-05-30 19:35:57,383 - INFO - Retrieved queue instances. Event loop ID: 140631863031904
2025-05-30 19:35:57,383 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:35:57,383 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:35:57,383 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:35:57,383 - INFO - Starting MessageProcessor task.
2025-05-30 19:35:57,383 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:35:57,383 - INFO - MessageProcessor task started.
2025-05-30 19:35:57,383 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:35:57,383 - INFO - QueueForwarder queues already initialized
2025-05-30 19:35:57,383 - INFO - QueueForwarder task started.
2025-05-30 19:35:57,383 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:35:57,383 - INFO - MessageProcessor main loop started.
2025-05-30 19:35:57,384 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:36:18,056 - INFO - Application startup event triggered.
2025-05-30 19:36:18,056 - INFO - Initializing all queues...
2025-05-30 19:36:18,056 - INFO - All queues initialized on loop 140234603751488
2025-05-30 19:36:18,056 - INFO - Shared queues initialized.
2025-05-30 19:36:18,056 - INFO - Retrieved queue instances. Event loop ID: 140234603751488
2025-05-30 19:36:18,057 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:36:18,057 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:36:18,057 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:36:18,057 - INFO - Starting MessageProcessor task.
2025-05-30 19:36:18,057 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:36:18,057 - INFO - MessageProcessor task started.
2025-05-30 19:36:18,057 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:36:18,057 - INFO - QueueForwarder queues already initialized
2025-05-30 19:36:18,057 - INFO - QueueForwarder task started.
2025-05-30 19:36:18,057 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:36:18,057 - INFO - MessageProcessor main loop started.
2025-05-30 19:36:18,057 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:37:25,974 - INFO - Application startup event triggered.
2025-05-30 19:37:25,974 - INFO - Initializing all queues...
2025-05-30 19:37:25,974 - INFO - All queues initialized on loop 140032996651808
2025-05-30 19:37:25,974 - INFO - Shared queues initialized.
2025-05-30 19:37:25,974 - INFO - Retrieved queue instances. Event loop ID: 140032996651808
2025-05-30 19:37:25,974 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:37:25,975 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:37:25,975 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:37:25,975 - INFO - Starting MessageProcessor task.
2025-05-30 19:37:25,975 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:37:25,975 - INFO - MessageProcessor task started.
2025-05-30 19:37:25,975 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:37:25,975 - INFO - QueueForwarder queues already initialized
2025-05-30 19:37:25,975 - INFO - QueueForwarder task started.
2025-05-30 19:37:25,975 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:37:25,975 - INFO - MessageProcessor main loop started.
2025-05-30 19:37:25,976 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:38:27,337 - INFO - Application startup event triggered.
2025-05-30 19:38:27,337 - INFO - Initializing all queues...
2025-05-30 19:38:27,338 - INFO - All queues initialized on loop 139986878486080
2025-05-30 19:38:27,338 - INFO - Shared queues initialized.
2025-05-30 19:38:27,338 - INFO - Retrieved queue instances. Event loop ID: 139986878486080
2025-05-30 19:38:27,338 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:38:27,338 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:38:27,338 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:38:27,338 - INFO - Starting MessageProcessor task.
2025-05-30 19:38:27,338 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:38:27,338 - INFO - MessageProcessor task started.
2025-05-30 19:38:27,338 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:38:27,338 - INFO - QueueForwarder queues already initialized
2025-05-30 19:38:27,338 - INFO - QueueForwarder task started.
2025-05-30 19:38:27,338 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:38:27,338 - INFO - MessageProcessor main loop started.
2025-05-30 19:38:27,338 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-05-30 19:40:10,728 - INFO - Application startup event triggered.
2025-05-30 19:40:10,728 - INFO - Initializing all queues...
2025-05-30 19:40:10,728 - INFO - All queues initialized on loop 139680224561200
2025-05-30 19:40:10,728 - INFO - Shared queues initialized.
2025-05-30 19:40:10,728 - INFO - Retrieved queue instances. Event loop ID: 139680224561200
2025-05-30 19:40:10,728 - INFO - SimulationManager ready state changed from False to True
2025-05-30 19:40:10,728 - INFO - SimulationManager initialized and stored in dependencies.
2025-05-30 19:40:10,728 - INFO - MessageProcessor queues verified and initialized.
2025-05-30 19:40:10,728 - INFO - Starting MessageProcessor task.
2025-05-30 19:40:10,729 - INFO - MessageProcessor task created and running in background.
2025-05-30 19:40:10,729 - INFO - MessageProcessor task started.
2025-05-30 19:40:10,729 - INFO - QueueForwarder initialized with all queues
2025-05-30 19:40:10,729 - INFO - QueueForwarder queues already initialized
2025-05-30 19:40:10,729 - INFO - QueueForwarder task started.
2025-05-30 19:40:10,729 - INFO - Application startup complete. All core services initialized.
2025-05-30 19:40:10,729 - INFO - MessageProcessor main loop started.
2025-05-30 19:40:10,729 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-06-01 11:30:21,938 - INFO - Application shutdown event triggered.
2025-06-01 11:30:21,939 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 11:30:21,939 - INFO - Simulation is not running. No action needed.
2025-06-01 11:30:21,939 - INFO - SimulationManager stop method called.
2025-06-01 11:30:21,939 - INFO - Stopping MessageProcessor...
2025-06-01 11:30:21,940 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 11:30:21,940 - INFO - MessageProcessor main loop stopped.
2025-06-01 11:30:21,940 - INFO - MessageProcessor shutdown complete.
2025-06-01 11:30:21,940 - INFO - Stopping QueueForwarder...
2025-06-01 11:30:21,941 - INFO - QueueForwarder task cancelled gracefully.
2025-06-01 11:30:21,941 - INFO - Calling SimulationManager instance stop method...
2025-06-01 11:30:21,941 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 11:30:21,941 - INFO - Simulation is not running. No action needed.
2025-06-01 11:30:21,942 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 11:30:21,942 - INFO - Application shutdown complete.
2025-06-01 11:30:53,186 - INFO - Application startup event triggered.
2025-06-01 11:30:53,187 - INFO - Initializing all queues...
2025-06-01 11:30:53,187 - INFO - All queues initialized on loop 139960833924976
2025-06-01 11:30:53,187 - INFO - Shared queues initialized.
2025-06-01 11:30:53,187 - INFO - Retrieved queue instances. Event loop ID: 139960833924976
2025-06-01 11:30:53,187 - INFO - SimulationManager ready state changed from False to True
2025-06-01 11:30:53,187 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 11:30:53,187 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 11:30:53,188 - INFO - Starting MessageProcessor task.
2025-06-01 11:30:53,188 - INFO - MessageProcessor task created and running in background.
2025-06-01 11:30:53,188 - INFO - MessageProcessor task started.
2025-06-01 11:30:53,188 - INFO - QueueForwarder initialized with all queues
2025-06-01 11:30:53,188 - INFO - QueueForwarder queues already initialized
2025-06-01 11:30:53,188 - INFO - QueueForwarder task started.
2025-06-01 11:30:53,188 - INFO - Application startup complete. All core services initialized.
2025-06-01 11:30:53,188 - INFO - MessageProcessor main loop started.
2025-06-01 11:30:53,189 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-06-01 11:40:11,259 - INFO - Application startup event triggered.
2025-06-01 11:40:11,259 - INFO - Initializing all queues...
2025-06-01 11:40:11,260 - INFO - All queues initialized on loop 140472547049936
2025-06-01 11:40:11,260 - INFO - Shared queues initialized.
2025-06-01 11:40:11,260 - INFO - Retrieved queue instances. Event loop ID: 140472547049936
2025-06-01 11:40:11,260 - INFO - SimulationManager ready state changed from False to True
2025-06-01 11:40:11,261 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 11:40:11,261 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 11:40:11,261 - INFO - Starting MessageProcessor task.
2025-06-01 11:40:11,261 - INFO - MessageProcessor task created and running in background.
2025-06-01 11:40:11,261 - INFO - MessageProcessor task started.
2025-06-01 11:40:11,261 - INFO - QueueForwarder initialized with all queues
2025-06-01 11:40:11,262 - INFO - QueueForwarder queues already initialized
2025-06-01 11:40:11,262 - INFO - QueueForwarder task started.
2025-06-01 11:40:11,262 - INFO - Application startup complete. All core services initialized.
2025-06-01 11:40:11,262 - INFO - MessageProcessor main loop started.
2025-06-01 11:40:11,262 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-06-01 11:40:16,203 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=52622)
2025-06-01 11:40:16,204 - INFO - Adding connection: 127.0.0.1:52622. Total connections: 1
2025-06-01 11:40:16,206 - INFO - Sent connection_ack to 127.0.0.1:52622
2025-06-01 11:40:16,206 - INFO - Sender task started for 127.0.0.1:52622
2025-06-01 11:40:16,206 - INFO - Receiver task started for 127.0.0.1:52622
2025-06-01 11:40:16,210 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:52622
2025-06-01 11:40:17,212 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:52622. Status: Frontend ready to receive
2025-06-01 11:40:17,212 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 11:40:41,210 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:52622
2025-06-01 11:40:41,211 - ERROR - Error processing received message from 127.0.0.1:52622: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-06-01 11:40:41,213 - ERROR - Receive error for 127.0.0.1:52622: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 11:40:41,214 - INFO - Receiver task for 127.0.0.1:52622 finished.
2025-06-01 11:41:07,042 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=60808)
2025-06-01 11:41:07,043 - INFO - Adding connection: 127.0.0.1:60808. Total connections: 2
2025-06-01 11:41:07,044 - INFO - Sent connection_ack to 127.0.0.1:60808
2025-06-01 11:41:07,044 - INFO - Sender task started for 127.0.0.1:60808
2025-06-01 11:41:07,044 - INFO - Receiver task started for 127.0.0.1:60808
2025-06-01 11:41:07,046 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:60808
2025-06-01 11:41:08,047 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:60808. Status: Frontend ready to receive
2025-06-01 11:41:08,047 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 11:41:33,038 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:60808
2025-06-01 11:41:33,039 - ERROR - Error processing received message from 127.0.0.1:60808: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-06-01 11:41:33,040 - ERROR - Receive error for 127.0.0.1:60808: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 11:41:33,041 - INFO - Receiver task for 127.0.0.1:60808 finished.
2025-06-01 11:41:58,041 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=55848)
2025-06-01 11:41:58,041 - INFO - Adding connection: 127.0.0.1:55848. Total connections: 3
2025-06-01 11:41:58,041 - INFO - Sent connection_ack to 127.0.0.1:55848
2025-06-01 11:41:58,042 - INFO - Sender task started for 127.0.0.1:55848
2025-06-01 11:41:58,042 - INFO - Receiver task started for 127.0.0.1:55848
2025-06-01 11:41:58,043 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:55848
2025-06-01 11:41:59,044 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:55848. Status: Frontend ready to receive
2025-06-01 11:41:59,044 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 11:42:24,038 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:55848
2025-06-01 11:42:24,039 - ERROR - Error processing received message from 127.0.0.1:55848: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-06-01 11:42:24,039 - ERROR - Receive error for 127.0.0.1:55848: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 11:42:24,040 - INFO - Receiver task for 127.0.0.1:55848 finished.
2025-06-01 11:42:49,043 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=46850)
2025-06-01 11:42:49,043 - INFO - Adding connection: 127.0.0.1:46850. Total connections: 4
2025-06-01 11:42:49,044 - INFO - Sent connection_ack to 127.0.0.1:46850
2025-06-01 11:42:49,045 - INFO - Sender task started for 127.0.0.1:46850
2025-06-01 11:42:49,045 - INFO - Receiver task started for 127.0.0.1:46850
2025-06-01 11:42:49,047 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:46850
2025-06-01 11:42:50,047 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:46850. Status: Frontend ready to receive
2025-06-01 11:42:50,048 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 11:43:15,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:46850
2025-06-01 11:43:15,039 - ERROR - Error processing received message from 127.0.0.1:46850: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-06-01 11:43:15,040 - ERROR - Receive error for 127.0.0.1:46850: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 11:43:15,041 - INFO - Receiver task for 127.0.0.1:46850 finished.
2025-06-01 11:43:40,042 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=47384)
2025-06-01 11:43:40,043 - INFO - Adding connection: 127.0.0.1:47384. Total connections: 5
2025-06-01 11:43:40,044 - INFO - Sent connection_ack to 127.0.0.1:47384
2025-06-01 11:43:40,044 - INFO - Sender task started for 127.0.0.1:47384
2025-06-01 11:43:40,044 - INFO - Receiver task started for 127.0.0.1:47384
2025-06-01 11:43:40,047 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:47384
2025-06-01 11:43:41,048 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:47384. Status: Frontend ready to receive
2025-06-01 11:43:41,048 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 11:44:06,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:47384
2025-06-01 11:44:06,039 - ERROR - Error processing received message from 127.0.0.1:47384: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-06-01 11:44:06,040 - ERROR - Receive error for 127.0.0.1:47384: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 11:44:06,041 - INFO - Receiver task for 127.0.0.1:47384 finished.
2025-06-01 11:44:31,042 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=47218)
2025-06-01 11:44:31,042 - INFO - Adding connection: 127.0.0.1:47218. Total connections: 6
2025-06-01 11:44:31,044 - INFO - Sent connection_ack to 127.0.0.1:47218
2025-06-01 11:44:31,044 - INFO - Sender task started for 127.0.0.1:47218
2025-06-01 11:44:31,045 - INFO - Receiver task started for 127.0.0.1:47218
2025-06-01 11:44:31,046 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:47218
2025-06-01 11:44:32,048 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:47218. Status: Frontend ready to receive
2025-06-01 11:44:32,048 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 11:44:57,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:47218
2025-06-01 11:44:57,039 - ERROR - Error processing received message from 127.0.0.1:47218: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-06-01 11:44:57,040 - ERROR - Receive error for 127.0.0.1:47218: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 11:44:57,041 - INFO - Receiver task for 127.0.0.1:47218 finished.
2025-06-01 11:45:43,659 - INFO - Application startup event triggered.
2025-06-01 11:45:43,660 - INFO - Initializing all queues...
2025-06-01 11:45:43,660 - INFO - All queues initialized on loop 140287212297952
2025-06-01 11:45:43,660 - INFO - Shared queues initialized.
2025-06-01 11:45:43,660 - INFO - Retrieved queue instances. Event loop ID: 140287212297952
2025-06-01 11:45:43,660 - INFO - SimulationManager ready state changed from False to True
2025-06-01 11:45:43,660 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 11:45:43,660 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 11:45:43,661 - INFO - Starting MessageProcessor task.
2025-06-01 11:45:43,661 - INFO - MessageProcessor task created and running in background.
2025-06-01 11:45:43,661 - INFO - MessageProcessor task started.
2025-06-01 11:45:43,661 - INFO - QueueForwarder initialized with all queues
2025-06-01 11:45:43,661 - INFO - QueueForwarder queues already initialized
2025-06-01 11:45:43,661 - INFO - QueueForwarder task started.
2025-06-01 11:45:43,661 - INFO - Application startup complete. All core services initialized.
2025-06-01 11:45:43,661 - INFO - MessageProcessor main loop started.
2025-06-01 11:45:43,661 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-06-01 11:45:46,418 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50514)
2025-06-01 11:45:46,419 - INFO - Adding connection: 127.0.0.1:50514. Total connections: 1
2025-06-01 11:45:46,420 - INFO - Sent connection_ack to 127.0.0.1:50514
2025-06-01 11:45:46,421 - INFO - Sender task started for 127.0.0.1:50514
2025-06-01 11:45:46,421 - INFO - Receiver task started for 127.0.0.1:50514
2025-06-01 11:45:46,423 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:50514
2025-06-01 11:45:47,425 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:50514. Status: Frontend ready to receive
2025-06-01 11:45:47,984 - INFO - WebSocket disconnected from 127.0.0.1:50514 while receiving: Code 1001
2025-06-01 11:45:47,984 - INFO - Receiver task for 127.0.0.1:50514 finished.
2025-06-01 11:45:48,350 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50524)
2025-06-01 11:45:48,351 - INFO - Adding connection: 127.0.0.1:50524. Total connections: 2
2025-06-01 11:45:48,352 - INFO - Sent connection_ack to 127.0.0.1:50524
2025-06-01 11:45:48,352 - INFO - Sender task started for 127.0.0.1:50524
2025-06-01 11:45:48,353 - INFO - Receiver task started for 127.0.0.1:50524
2025-06-01 11:45:48,355 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:50524
2025-06-01 11:45:49,357 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:50524. Status: Frontend ready to receive
2025-06-01 11:45:49,357 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 11:46:13,355 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:50524
2025-06-01 11:46:13,356 - ERROR - Error processing received message from 127.0.0.1:50524: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-06-01 11:46:13,359 - ERROR - Receive error for 127.0.0.1:50524: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 11:46:13,359 - INFO - Receiver task for 127.0.0.1:50524 finished.
2025-06-01 11:46:38,359 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50454)
2025-06-01 11:46:38,359 - INFO - Adding connection: 127.0.0.1:50454. Total connections: 3
2025-06-01 11:46:38,361 - INFO - Sent connection_ack to 127.0.0.1:50454
2025-06-01 11:46:38,361 - INFO - Sender task started for 127.0.0.1:50454
2025-06-01 11:46:38,361 - INFO - Receiver task started for 127.0.0.1:50454
2025-06-01 11:46:38,363 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:50454
2025-06-01 11:46:39,364 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:50454. Status: Frontend ready to receive
2025-06-01 11:46:39,365 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 11:47:03,365 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:50454
2025-06-01 11:47:03,365 - ERROR - Error processing received message from 127.0.0.1:50454: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-06-01 11:47:03,366 - ERROR - Receive error for 127.0.0.1:50454: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 11:47:03,367 - INFO - Receiver task for 127.0.0.1:50454 finished.
2025-06-01 11:47:28,367 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=41794)
2025-06-01 11:47:28,368 - INFO - Adding connection: 127.0.0.1:41794. Total connections: 4
2025-06-01 11:47:28,369 - INFO - Sent connection_ack to 127.0.0.1:41794
2025-06-01 11:47:28,370 - INFO - Sender task started for 127.0.0.1:41794
2025-06-01 11:47:28,370 - INFO - Receiver task started for 127.0.0.1:41794
2025-06-01 11:47:28,376 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:41794
2025-06-01 11:47:29,378 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:41794. Status: Frontend ready to receive
2025-06-01 11:47:29,378 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 11:47:53,377 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:41794
2025-06-01 11:47:53,377 - ERROR - Error processing received message from 127.0.0.1:41794: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-06-01 11:47:53,378 - ERROR - Receive error for 127.0.0.1:41794: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 11:47:53,379 - INFO - Receiver task for 127.0.0.1:41794 finished.
2025-06-01 11:48:18,383 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=57168)
2025-06-01 11:48:18,383 - INFO - Adding connection: 127.0.0.1:57168. Total connections: 5
2025-06-01 11:48:18,384 - INFO - Sent connection_ack to 127.0.0.1:57168
2025-06-01 11:48:18,385 - INFO - Sender task started for 127.0.0.1:57168
2025-06-01 11:48:18,385 - INFO - Receiver task started for 127.0.0.1:57168
2025-06-01 11:48:18,396 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:57168
2025-06-01 11:48:19,398 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:57168. Status: Frontend ready to receive
2025-06-01 11:48:19,399 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 11:48:43,397 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:57168
2025-06-01 11:48:43,397 - ERROR - Error processing received message from 127.0.0.1:57168: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-06-01 11:48:43,399 - ERROR - Receive error for 127.0.0.1:57168: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 11:48:43,400 - INFO - Receiver task for 127.0.0.1:57168 finished.
2025-06-01 11:54:44,460 - INFO - Application startup event triggered.
2025-06-01 11:54:44,460 - INFO - Initializing all queues...
2025-06-01 11:54:44,461 - INFO - All queues initialized on loop 140002952882192
2025-06-01 11:54:44,461 - INFO - Shared queues initialized.
2025-06-01 11:54:44,461 - INFO - Retrieved queue instances. Event loop ID: 140002952882192
2025-06-01 11:54:44,461 - INFO - SimulationManager ready state changed from False to True
2025-06-01 11:54:44,461 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 11:54:44,461 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 11:54:44,461 - INFO - Starting MessageProcessor task.
2025-06-01 11:54:44,461 - INFO - MessageProcessor task created and running in background.
2025-06-01 11:54:44,462 - INFO - MessageProcessor task started.
2025-06-01 11:54:44,462 - INFO - QueueForwarder initialized with all queues
2025-06-01 11:54:44,462 - INFO - QueueForwarder queues already initialized
2025-06-01 11:54:44,462 - INFO - QueueForwarder task started.
2025-06-01 11:54:44,462 - INFO - Application startup complete. All core services initialized.
2025-06-01 11:54:44,462 - INFO - MessageProcessor main loop started.
2025-06-01 11:54:44,462 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-06-01 11:54:46,275 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=38264)
2025-06-01 11:54:46,275 - INFO - Adding connection: 127.0.0.1:38264. Total connections: 1
2025-06-01 11:54:46,277 - INFO - Sent connection_ack to 127.0.0.1:38264
2025-06-01 11:54:46,277 - INFO - Sender task started for 127.0.0.1:38264
2025-06-01 11:54:46,277 - INFO - Receiver task started for 127.0.0.1:38264
2025-06-01 11:54:46,279 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:38264
2025-06-01 11:54:47,281 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:38264. Status: Frontend ready to receive
2025-06-01 11:55:11,280 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:38264
2025-06-01 11:55:11,281 - ERROR - Error processing received message from 127.0.0.1:38264: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-06-01 11:55:11,284 - ERROR - Receive error for 127.0.0.1:38264: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 11:55:11,285 - INFO - Receiver task for 127.0.0.1:38264 finished.
2025-06-01 11:57:15,357 - INFO - Application startup event triggered.
2025-06-01 11:57:15,357 - INFO - Initializing all queues...
2025-06-01 11:57:15,357 - INFO - All queues initialized on loop 1009196576
2025-06-01 11:57:15,357 - INFO - Shared queues initialized.
2025-06-01 11:57:15,358 - INFO - Retrieved queue instances. Event loop ID: 1009196576
2025-06-01 11:57:15,358 - INFO - SimulationManager ready state changed from False to True
2025-06-01 11:57:15,358 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 11:57:15,358 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 11:57:15,358 - INFO - Starting MessageProcessor task.
2025-06-01 11:57:15,358 - INFO - MessageProcessor task created and running in background.
2025-06-01 11:57:15,358 - INFO - MessageProcessor task started.
2025-06-01 11:57:15,358 - INFO - QueueForwarder initialized with all queues
2025-06-01 11:57:15,358 - INFO - QueueForwarder queues already initialized
2025-06-01 11:57:15,358 - INFO - QueueForwarder task started.
2025-06-01 11:57:15,358 - INFO - Application startup complete. All core services initialized.
2025-06-01 11:57:15,358 - INFO - MessageProcessor main loop started.
2025-06-01 11:57:15,358 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-06-01 11:57:17,197 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=33350)
2025-06-01 11:57:17,197 - INFO - Adding connection: 127.0.0.1:33350. Total connections: 1
2025-06-01 11:57:17,199 - INFO - Sent connection_ack to 127.0.0.1:33350
2025-06-01 11:57:17,200 - INFO - Sender task started for 127.0.0.1:33350
2025-06-01 11:57:17,200 - INFO - Receiver task started for 127.0.0.1:33350
2025-06-01 11:57:17,209 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:33350
2025-06-01 11:57:18,210 - ERROR - Critical error during message processing for message d076eaf9-2916-4c52-aecd-9c3744d39dfa: type object 'WebSocketMessage' has no attribute 'model_validate'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 111, in _process_single_message
    msg = WebSocketMessage.model_validate(message)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'WebSocketMessage' has no attribute 'model_validate'
2025-06-01 11:57:18,213 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 11:57:42,210 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:33350
2025-06-01 11:57:42,210 - ERROR - Error processing received message from 127.0.0.1:33350: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-06-01 11:57:42,211 - ERROR - Receive error for 127.0.0.1:33350: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 11:57:42,212 - INFO - Receiver task for 127.0.0.1:33350 finished.
2025-06-01 11:57:42,564 - INFO - Sender task for 127.0.0.1:33350 was cancelled normally.
2025-06-01 11:57:42,564 - INFO - Sender task for 127.0.0.1:33350 finished.
2025-06-01 11:57:42,565 - INFO - Message forwarding task for Address(host='127.0.0.1', port=33350) cancelled.
2025-06-01 11:57:42,565 - INFO - Application shutdown event triggered.
2025-06-01 11:57:42,565 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 11:57:42,565 - INFO - Simulation is not running. No action needed.
2025-06-01 11:57:42,565 - INFO - SimulationManager stop method called.
2025-06-01 11:57:42,565 - INFO - Stopping MessageProcessor...
2025-06-01 11:57:42,565 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 11:57:42,565 - INFO - MessageProcessor main loop stopped.
2025-06-01 11:57:42,566 - INFO - MessageProcessor shutdown complete.
2025-06-01 11:57:42,566 - INFO - Stopping QueueForwarder...
2025-06-01 11:57:42,566 - INFO - Calling SimulationManager instance stop method...
2025-06-01 11:57:42,566 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 11:57:42,566 - INFO - Simulation is not running. No action needed.
2025-06-01 11:57:42,566 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 11:57:42,566 - INFO - Application shutdown complete.
2025-06-01 11:57:42,568 - INFO - Initiating cleanup for connection: 127.0.0.1:33350
2025-06-01 11:57:42,568 - INFO - Starting cleanup for 127.0.0.1:33350
2025-06-01 11:57:42,568 - INFO - Closed WebSocket connection for 127.0.0.1:33350
2025-06-01 11:57:42,568 - INFO - Connection cleanup completed for 127.0.0.1:33350. Remaining connections: 0
2025-06-01 11:57:42,569 - INFO - Cleanup finished for connection: 127.0.0.1:33350. Total connections: 0
2025-06-01 11:57:42,569 - INFO - Cleanup finished for Address(host='127.0.0.1', port=33350) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:04:32,524 - INFO - Application startup event triggered.
2025-06-01 12:04:32,524 - INFO - Initializing all queues...
2025-06-01 12:04:32,525 - INFO - All queues initialized on loop 986258976
2025-06-01 12:04:32,525 - INFO - Shared queues initialized.
2025-06-01 12:04:32,525 - INFO - Retrieved queue instances. Event loop ID: 986258976
2025-06-01 12:04:32,525 - INFO - SimulationManager ready state changed from False to True
2025-06-01 12:04:32,525 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 12:04:32,525 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 12:04:32,525 - INFO - Starting MessageProcessor task.
2025-06-01 12:04:32,525 - INFO - MessageProcessor task created and running in background.
2025-06-01 12:04:32,526 - INFO - MessageProcessor task started.
2025-06-01 12:04:32,526 - INFO - QueueForwarder initialized with all queues
2025-06-01 12:04:32,526 - INFO - QueueForwarder queues already initialized
2025-06-01 12:04:32,526 - INFO - QueueForwarder task started.
2025-06-01 12:04:32,526 - INFO - Application startup complete. All core services initialized.
2025-06-01 12:04:32,526 - INFO - MessageProcessor main loop started.
2025-06-01 12:04:32,526 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-06-01 12:04:34,301 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=60486)
2025-06-01 12:04:34,301 - INFO - Adding connection: 127.0.0.1:60486. Total connections: 1
2025-06-01 12:04:34,302 - ERROR - Error sending connection_ack to 127.0.0.1:60486: keys must be str, int, float, bool or None, not type
2025-06-01 12:04:34,303 - INFO - Sender task started for 127.0.0.1:60486
2025-06-01 12:04:34,303 - INFO - Receiver task started for 127.0.0.1:60486
2025-06-01 12:04:34,312 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:60486
2025-06-01 12:04:35,313 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:60486. Status: Frontend ready to receive
2025-06-01 12:04:59,313 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:60486
2025-06-01 12:04:59,313 - ERROR - Error processing received message from 127.0.0.1:60486: Invalid message format for queue from_frontend
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend
2025-06-01 12:04:59,314 - ERROR - Failed to send error message to 127.0.0.1:60486: keys must be str, int, float, bool or None, not type
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 335, in send_error
    await websocket.send_text(error_ws_message.json())
                              ^^^^^^^^^^^^^^^^^^^^^^^
  File "pydantic/main.py", line 510, in pydantic.main.BaseModel.json
  File "/usr/lib/python3.12/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
TypeError: keys must be str, int, float, bool or None, not type
2025-06-01 12:04:59,316 - ERROR - Receive error for 127.0.0.1:60486: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 223, in _receiver
    await get_from_frontend_queue().enqueue(queue_msg)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue from_frontend

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 250, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 12:04:59,317 - INFO - Receiver task for 127.0.0.1:60486 finished.
2025-06-01 12:05:00,136 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=57442)
2025-06-01 12:05:00,136 - INFO - Adding connection: 127.0.0.1:57442. Total connections: 2
2025-06-01 12:05:00,137 - ERROR - Error sending connection_ack to 127.0.0.1:57442: keys must be str, int, float, bool or None, not type
2025-06-01 12:05:00,138 - INFO - Sender task started for 127.0.0.1:57442
2025-06-01 12:05:00,138 - INFO - Receiver task started for 127.0.0.1:57442
2025-06-01 12:05:00,145 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:57442
2025-06-01 12:05:00,563 - INFO - WebSocket disconnected from 127.0.0.1:57442 while receiving: Code 1001
2025-06-01 12:05:00,563 - INFO - Receiver task for 127.0.0.1:57442 finished.
2025-06-01 12:05:01,011 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=57456)
2025-06-01 12:05:01,011 - INFO - Adding connection: 127.0.0.1:57456. Total connections: 3
2025-06-01 12:05:01,012 - ERROR - Error sending connection_ack to 127.0.0.1:57456: keys must be str, int, float, bool or None, not type
2025-06-01 12:05:01,013 - INFO - Sender task started for 127.0.0.1:57456
2025-06-01 12:05:01,013 - INFO - Receiver task started for 127.0.0.1:57456
2025-06-01 12:05:01,017 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:57456
2025-06-01 12:05:01,147 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:57442. Status: Frontend ready to receive
2025-06-01 12:05:01,148 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:05:02,147 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:57456. Status: Frontend ready to receive
2025-06-01 12:05:26,018 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:57456
2025-06-01 12:05:27,019 - INFO - MessageProcessor: Received ping from 127.0.0.1:57456. Responding with pong.
2025-06-01 12:05:27,020 - ERROR - Critical error during message processing for message ce415c78-51d7-4f41-93a0-bfd9506ebac9: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:05:27,022 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:05:27,022 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:05:51,019 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:57456
2025-06-01 12:05:51,021 - INFO - WebSocket disconnected from 127.0.0.1:57456 while receiving: Code 1005
2025-06-01 12:05:51,021 - INFO - Receiver task for 127.0.0.1:57456 finished.
2025-06-01 12:05:51,023 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=51696)
2025-06-01 12:05:51,023 - INFO - Adding connection: 127.0.0.1:51696. Total connections: 4
2025-06-01 12:05:51,023 - ERROR - Error sending connection_ack to 127.0.0.1:51696: keys must be str, int, float, bool or None, not type
2025-06-01 12:05:51,024 - INFO - Sender task started for 127.0.0.1:51696
2025-06-01 12:05:51,025 - INFO - Receiver task started for 127.0.0.1:51696
2025-06-01 12:05:51,028 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:51696
2025-06-01 12:05:52,020 - INFO - MessageProcessor: Received ping from 127.0.0.1:57456. Responding with pong.
2025-06-01 12:05:52,020 - ERROR - Critical error during message processing for message fd1395f1-5b2b-47b1-8abf-9d3b4e19b125: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:05:52,022 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:05:52,022 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:05:53,019 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:51696. Status: Frontend ready to receive
2025-06-01 12:06:16,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:51696
2025-06-01 12:06:17,039 - INFO - MessageProcessor: Received ping from 127.0.0.1:51696. Responding with pong.
2025-06-01 12:06:17,039 - ERROR - Critical error during message processing for message e981b432-f2be-4595-8fd4-49bb3ca02ff2: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:06:17,041 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:06:17,041 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:06:41,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:51696
2025-06-01 12:06:41,040 - INFO - WebSocket disconnected from 127.0.0.1:51696 while receiving: Code 1005
2025-06-01 12:06:41,041 - INFO - Receiver task for 127.0.0.1:51696 finished.
2025-06-01 12:06:41,043 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=56044)
2025-06-01 12:06:41,043 - INFO - Adding connection: 127.0.0.1:56044. Total connections: 5
2025-06-01 12:06:41,043 - ERROR - Error sending connection_ack to 127.0.0.1:56044: keys must be str, int, float, bool or None, not type
2025-06-01 12:06:41,044 - INFO - Sender task started for 127.0.0.1:56044
2025-06-01 12:06:41,044 - INFO - Receiver task started for 127.0.0.1:56044
2025-06-01 12:06:41,048 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:56044
2025-06-01 12:06:42,040 - INFO - MessageProcessor: Received ping from 127.0.0.1:51696. Responding with pong.
2025-06-01 12:06:42,041 - ERROR - Critical error during message processing for message 1e00f156-238d-49ef-9f52-78872bc0064e: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:06:42,043 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:06:42,043 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:06:43,041 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:56044. Status: Frontend ready to receive
2025-06-01 12:07:07,042 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56044
2025-06-01 12:07:08,044 - INFO - MessageProcessor: Received ping from 127.0.0.1:56044. Responding with pong.
2025-06-01 12:07:08,044 - ERROR - Critical error during message processing for message 06f07238-c092-4c17-8ca5-82f63ee97003: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:07:08,046 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:07:08,046 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:07:32,040 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56044
2025-06-01 12:07:32,041 - INFO - WebSocket disconnected from 127.0.0.1:56044 while receiving: Code 1005
2025-06-01 12:07:32,041 - INFO - Receiver task for 127.0.0.1:56044 finished.
2025-06-01 12:07:32,043 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=58244)
2025-06-01 12:07:32,043 - INFO - Adding connection: 127.0.0.1:58244. Total connections: 6
2025-06-01 12:07:32,044 - ERROR - Error sending connection_ack to 127.0.0.1:58244: keys must be str, int, float, bool or None, not type
2025-06-01 12:07:32,045 - INFO - Sender task started for 127.0.0.1:58244
2025-06-01 12:07:32,045 - INFO - Receiver task started for 127.0.0.1:58244
2025-06-01 12:07:32,049 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:58244
2025-06-01 12:07:33,041 - INFO - MessageProcessor: Received ping from 127.0.0.1:56044. Responding with pong.
2025-06-01 12:07:33,041 - ERROR - Critical error during message processing for message 301d134a-693e-4547-a86b-a43d856dda62: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:07:33,043 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:07:33,043 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:07:34,042 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:58244. Status: Frontend ready to receive
2025-06-01 12:07:58,040 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:58244
2025-06-01 12:07:59,041 - INFO - MessageProcessor: Received ping from 127.0.0.1:58244. Responding with pong.
2025-06-01 12:07:59,042 - ERROR - Critical error during message processing for message 9a4b7747-7cf4-4e5d-82d4-be1c09a91329: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:07:59,043 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:07:59,044 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:08:23,040 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:58244
2025-06-01 12:08:23,041 - INFO - WebSocket disconnected from 127.0.0.1:58244 while receiving: Code 1005
2025-06-01 12:08:23,041 - INFO - Receiver task for 127.0.0.1:58244 finished.
2025-06-01 12:08:23,043 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53824)
2025-06-01 12:08:23,043 - INFO - Adding connection: 127.0.0.1:53824. Total connections: 7
2025-06-01 12:08:23,044 - ERROR - Error sending connection_ack to 127.0.0.1:53824: keys must be str, int, float, bool or None, not type
2025-06-01 12:08:23,045 - INFO - Sender task started for 127.0.0.1:53824
2025-06-01 12:08:23,045 - INFO - Receiver task started for 127.0.0.1:53824
2025-06-01 12:08:23,049 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:53824
2025-06-01 12:08:24,041 - INFO - MessageProcessor: Received ping from 127.0.0.1:58244. Responding with pong.
2025-06-01 12:08:24,041 - ERROR - Critical error during message processing for message 9edc57bf-3bcd-4cfe-9f5e-98479f0fc880: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:08:24,043 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:08:24,043 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:08:25,040 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:53824. Status: Frontend ready to receive
2025-06-01 12:08:49,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53824
2025-06-01 12:08:50,040 - INFO - MessageProcessor: Received ping from 127.0.0.1:53824. Responding with pong.
2025-06-01 12:08:50,041 - ERROR - Critical error during message processing for message 7cc5728b-b063-47a5-87b9-50c7f0c68bc6: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:08:50,042 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:08:50,042 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:09:14,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53824
2025-06-01 12:09:14,040 - INFO - WebSocket disconnected from 127.0.0.1:53824 while receiving: Code 1005
2025-06-01 12:09:14,040 - INFO - Receiver task for 127.0.0.1:53824 finished.
2025-06-01 12:09:14,042 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=57240)
2025-06-01 12:09:14,042 - INFO - Adding connection: 127.0.0.1:57240. Total connections: 8
2025-06-01 12:09:14,043 - ERROR - Error sending connection_ack to 127.0.0.1:57240: keys must be str, int, float, bool or None, not type
2025-06-01 12:09:14,043 - INFO - Sender task started for 127.0.0.1:57240
2025-06-01 12:09:14,044 - INFO - Receiver task started for 127.0.0.1:57240
2025-06-01 12:09:14,047 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:57240
2025-06-01 12:09:15,040 - INFO - MessageProcessor: Received ping from 127.0.0.1:53824. Responding with pong.
2025-06-01 12:09:15,040 - ERROR - Critical error during message processing for message 56dd582e-8fdc-455a-afbc-bc88ac0871ff: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:09:15,042 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:09:15,042 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:09:16,040 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:57240. Status: Frontend ready to receive
2025-06-01 12:09:40,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:57240
2025-06-01 12:09:41,041 - INFO - MessageProcessor: Received ping from 127.0.0.1:57240. Responding with pong.
2025-06-01 12:09:41,041 - ERROR - Critical error during message processing for message 4ea9ca67-3c83-49ce-a1b5-451e6f3e3156: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:09:41,043 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:09:41,043 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:10:05,038 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:57240
2025-06-01 12:10:05,039 - INFO - WebSocket disconnected from 127.0.0.1:57240 while receiving: Code 1005
2025-06-01 12:10:05,039 - INFO - Receiver task for 127.0.0.1:57240 finished.
2025-06-01 12:10:05,040 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53672)
2025-06-01 12:10:05,040 - INFO - Adding connection: 127.0.0.1:53672. Total connections: 9
2025-06-01 12:10:05,041 - ERROR - Error sending connection_ack to 127.0.0.1:53672: keys must be str, int, float, bool or None, not type
2025-06-01 12:10:05,041 - INFO - Sender task started for 127.0.0.1:53672
2025-06-01 12:10:05,041 - INFO - Receiver task started for 127.0.0.1:53672
2025-06-01 12:10:05,043 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:53672
2025-06-01 12:10:06,040 - INFO - MessageProcessor: Received ping from 127.0.0.1:57240. Responding with pong.
2025-06-01 12:10:06,040 - ERROR - Critical error during message processing for message c4893f89-c2b1-441e-866a-7adf1de9f0cd: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:10:06,041 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:10:06,041 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:10:07,040 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:53672. Status: Frontend ready to receive
2025-06-01 12:10:31,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53672
2025-06-01 12:10:32,041 - INFO - MessageProcessor: Received ping from 127.0.0.1:53672. Responding with pong.
2025-06-01 12:10:32,041 - ERROR - Critical error during message processing for message 72304945-6ffa-453a-873b-76585e07e240: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:10:32,043 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:10:32,043 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:10:56,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53672
2025-06-01 12:10:56,040 - INFO - WebSocket disconnected from 127.0.0.1:53672 while receiving: Code 1005
2025-06-01 12:10:56,041 - INFO - Receiver task for 127.0.0.1:53672 finished.
2025-06-01 12:10:56,042 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=42780)
2025-06-01 12:10:56,043 - INFO - Adding connection: 127.0.0.1:42780. Total connections: 10
2025-06-01 12:10:56,043 - ERROR - Error sending connection_ack to 127.0.0.1:42780: keys must be str, int, float, bool or None, not type
2025-06-01 12:10:56,044 - INFO - Sender task started for 127.0.0.1:42780
2025-06-01 12:10:56,044 - INFO - Receiver task started for 127.0.0.1:42780
2025-06-01 12:10:56,047 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:42780
2025-06-01 12:10:57,040 - INFO - MessageProcessor: Received ping from 127.0.0.1:53672. Responding with pong.
2025-06-01 12:10:57,041 - ERROR - Critical error during message processing for message 3a66fadc-9dcd-4d41-ba66-0b2d7d8b641c: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:10:57,043 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:10:57,043 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:10:58,041 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:42780. Status: Frontend ready to receive
2025-06-01 12:11:22,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:42780
2025-06-01 12:11:23,041 - INFO - MessageProcessor: Received ping from 127.0.0.1:42780. Responding with pong.
2025-06-01 12:11:23,042 - ERROR - Critical error during message processing for message 2e77830d-6330-4532-b1d0-8692fb5ce940: 'WebSocketMessage' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 153, in _process_single_message
    ).model_dump()
      ^^^^^^^^^^
AttributeError: 'WebSocketMessage' object has no attribute 'model_dump'
2025-06-01 12:11:23,043 - WARNING - Safe Enqueue failed in MessageProcessor: Invalid message format for queue dead_letter
2025-06-01 12:11:23,043 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:11:44,215 - INFO - WebSocket disconnected from 127.0.0.1:42780 while receiving: Code 1012
2025-06-01 12:11:44,215 - INFO - Receiver task for 127.0.0.1:42780 finished.
2025-06-01 12:11:44,517 - INFO - Sender task for 127.0.0.1:53672 was cancelled normally.
2025-06-01 12:11:44,517 - INFO - Sender task for 127.0.0.1:53672 finished.
2025-06-01 12:11:44,517 - INFO - Sender task for 127.0.0.1:57456 was cancelled normally.
2025-06-01 12:11:44,517 - INFO - Sender task for 127.0.0.1:57456 finished.
2025-06-01 12:11:44,517 - INFO - Sender task for 127.0.0.1:58244 was cancelled normally.
2025-06-01 12:11:44,517 - INFO - Sender task for 127.0.0.1:58244 finished.
2025-06-01 12:11:44,517 - INFO - Message forwarding task for Address(host='127.0.0.1', port=42780) cancelled.
2025-06-01 12:11:44,517 - INFO - Sender task for 127.0.0.1:57442 was cancelled normally.
2025-06-01 12:11:44,517 - INFO - Sender task for 127.0.0.1:57442 finished.
2025-06-01 12:11:44,518 - INFO - Sender task for 127.0.0.1:56044 was cancelled normally.
2025-06-01 12:11:44,518 - INFO - Sender task for 127.0.0.1:56044 finished.
2025-06-01 12:11:44,518 - INFO - Sender task for 127.0.0.1:42780 was cancelled normally.
2025-06-01 12:11:44,518 - INFO - Sender task for 127.0.0.1:42780 finished.
2025-06-01 12:11:44,518 - INFO - Sender task for 127.0.0.1:51696 was cancelled normally.
2025-06-01 12:11:44,518 - INFO - Sender task for 127.0.0.1:51696 finished.
2025-06-01 12:11:44,518 - INFO - Message forwarding task for Address(host='127.0.0.1', port=57442) cancelled.
2025-06-01 12:11:44,518 - INFO - Message forwarding task for Address(host='127.0.0.1', port=56044) cancelled.
2025-06-01 12:11:44,518 - INFO - Message forwarding task for Address(host='127.0.0.1', port=51696) cancelled.
2025-06-01 12:11:44,518 - INFO - Sender task for 127.0.0.1:60486 was cancelled normally.
2025-06-01 12:11:44,518 - INFO - Sender task for 127.0.0.1:60486 finished.
2025-06-01 12:11:44,518 - INFO - Message forwarding task for Address(host='127.0.0.1', port=58244) cancelled.
2025-06-01 12:11:44,519 - INFO - Sender task for 127.0.0.1:57240 was cancelled normally.
2025-06-01 12:11:44,519 - INFO - Sender task for 127.0.0.1:57240 finished.
2025-06-01 12:11:44,519 - INFO - Message forwarding task for Address(host='127.0.0.1', port=60486) cancelled.
2025-06-01 12:11:44,519 - INFO - Message forwarding task for Address(host='127.0.0.1', port=53672) cancelled.
2025-06-01 12:11:44,519 - INFO - Sender task for 127.0.0.1:53824 was cancelled normally.
2025-06-01 12:11:44,519 - INFO - Sender task for 127.0.0.1:53824 finished.
2025-06-01 12:11:44,519 - INFO - Application shutdown event triggered.
2025-06-01 12:11:44,519 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 12:11:44,519 - INFO - Simulation is not running. No action needed.
2025-06-01 12:11:44,519 - INFO - SimulationManager stop method called.
2025-06-01 12:11:44,519 - INFO - Stopping MessageProcessor...
2025-06-01 12:11:44,519 - INFO - Message forwarding task for Address(host='127.0.0.1', port=57240) cancelled.
2025-06-01 12:11:44,519 - INFO - Message forwarding task for Address(host='127.0.0.1', port=57456) cancelled.
2025-06-01 12:11:44,519 - INFO - Message forwarding task for Address(host='127.0.0.1', port=53824) cancelled.
2025-06-01 12:11:44,520 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 12:11:44,520 - INFO - MessageProcessor main loop stopped.
2025-06-01 12:11:44,520 - INFO - MessageProcessor shutdown complete.
2025-06-01 12:11:44,520 - INFO - Stopping QueueForwarder...
2025-06-01 12:11:44,520 - INFO - Calling SimulationManager instance stop method...
2025-06-01 12:11:44,520 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 12:11:44,520 - INFO - Simulation is not running. No action needed.
2025-06-01 12:11:44,520 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 12:11:44,520 - INFO - Application shutdown complete.
2025-06-01 12:11:44,521 - INFO - Initiating cleanup for connection: 127.0.0.1:53672
2025-06-01 12:11:44,521 - INFO - Starting cleanup for 127.0.0.1:53672
2025-06-01 12:11:44,521 - INFO - Connection cleanup completed for 127.0.0.1:53672. Remaining connections: 9
2025-06-01 12:11:44,522 - INFO - Cleanup finished for connection: 127.0.0.1:53672. Total connections: 9
2025-06-01 12:11:44,522 - INFO - Cleanup finished for Address(host='127.0.0.1', port=53672) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:11:44,524 - INFO - Initiating cleanup for connection: 127.0.0.1:57456
2025-06-01 12:11:44,524 - INFO - Starting cleanup for 127.0.0.1:57456
2025-06-01 12:11:44,524 - INFO - Connection cleanup completed for 127.0.0.1:57456. Remaining connections: 8
2025-06-01 12:11:44,524 - INFO - Cleanup finished for connection: 127.0.0.1:57456. Total connections: 8
2025-06-01 12:11:44,524 - INFO - Cleanup finished for Address(host='127.0.0.1', port=57456) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:11:44,525 - INFO - Initiating cleanup for connection: 127.0.0.1:58244
2025-06-01 12:11:44,525 - INFO - Starting cleanup for 127.0.0.1:58244
2025-06-01 12:11:44,525 - INFO - Connection cleanup completed for 127.0.0.1:58244. Remaining connections: 7
2025-06-01 12:11:44,525 - INFO - Cleanup finished for connection: 127.0.0.1:58244. Total connections: 7
2025-06-01 12:11:44,525 - INFO - Cleanup finished for Address(host='127.0.0.1', port=58244) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:11:44,526 - INFO - Initiating cleanup for connection: 127.0.0.1:57442
2025-06-01 12:11:44,526 - INFO - Starting cleanup for 127.0.0.1:57442
2025-06-01 12:11:44,526 - INFO - Connection cleanup completed for 127.0.0.1:57442. Remaining connections: 6
2025-06-01 12:11:44,526 - INFO - Cleanup finished for connection: 127.0.0.1:57442. Total connections: 6
2025-06-01 12:11:44,527 - INFO - Cleanup finished for Address(host='127.0.0.1', port=57442) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:11:44,527 - INFO - Initiating cleanup for connection: 127.0.0.1:56044
2025-06-01 12:11:44,528 - INFO - Starting cleanup for 127.0.0.1:56044
2025-06-01 12:11:44,528 - INFO - Connection cleanup completed for 127.0.0.1:56044. Remaining connections: 5
2025-06-01 12:11:44,528 - INFO - Cleanup finished for connection: 127.0.0.1:56044. Total connections: 5
2025-06-01 12:11:44,528 - INFO - Cleanup finished for Address(host='127.0.0.1', port=56044) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:11:44,529 - INFO - Initiating cleanup for connection: 127.0.0.1:42780
2025-06-01 12:11:44,529 - INFO - Starting cleanup for 127.0.0.1:42780
2025-06-01 12:11:44,529 - INFO - Connection cleanup completed for 127.0.0.1:42780. Remaining connections: 4
2025-06-01 12:11:44,529 - INFO - Cleanup finished for connection: 127.0.0.1:42780. Total connections: 4
2025-06-01 12:11:44,529 - INFO - Cleanup finished for Address(host='127.0.0.1', port=42780) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:11:44,530 - INFO - Initiating cleanup for connection: 127.0.0.1:51696
2025-06-01 12:11:44,530 - INFO - Starting cleanup for 127.0.0.1:51696
2025-06-01 12:11:44,530 - INFO - Connection cleanup completed for 127.0.0.1:51696. Remaining connections: 3
2025-06-01 12:11:44,530 - INFO - Cleanup finished for connection: 127.0.0.1:51696. Total connections: 3
2025-06-01 12:11:44,530 - INFO - Cleanup finished for Address(host='127.0.0.1', port=51696) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:11:44,531 - INFO - Initiating cleanup for connection: 127.0.0.1:60486
2025-06-01 12:11:44,531 - INFO - Starting cleanup for 127.0.0.1:60486
2025-06-01 12:11:44,531 - INFO - Closed WebSocket connection for 127.0.0.1:60486
2025-06-01 12:11:44,532 - INFO - Connection cleanup completed for 127.0.0.1:60486. Remaining connections: 2
2025-06-01 12:11:44,532 - INFO - Cleanup finished for connection: 127.0.0.1:60486. Total connections: 2
2025-06-01 12:11:44,532 - INFO - Cleanup finished for Address(host='127.0.0.1', port=60486) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:11:44,533 - INFO - Initiating cleanup for connection: 127.0.0.1:57240
2025-06-01 12:11:44,533 - INFO - Starting cleanup for 127.0.0.1:57240
2025-06-01 12:11:44,533 - INFO - Connection cleanup completed for 127.0.0.1:57240. Remaining connections: 1
2025-06-01 12:11:44,533 - INFO - Cleanup finished for connection: 127.0.0.1:57240. Total connections: 1
2025-06-01 12:11:44,533 - INFO - Cleanup finished for Address(host='127.0.0.1', port=57240) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:11:44,534 - INFO - Initiating cleanup for connection: 127.0.0.1:53824
2025-06-01 12:11:44,534 - INFO - Starting cleanup for 127.0.0.1:53824
2025-06-01 12:11:44,534 - INFO - Connection cleanup completed for 127.0.0.1:53824. Remaining connections: 0
2025-06-01 12:11:44,534 - INFO - Cleanup finished for connection: 127.0.0.1:53824. Total connections: 0
2025-06-01 12:11:44,534 - INFO - Cleanup finished for Address(host='127.0.0.1', port=53824) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:25:17,344 - INFO - Application startup event triggered.
2025-06-01 12:25:17,345 - INFO - Initializing all queues...
2025-06-01 12:25:17,345 - INFO - All queues initialized on loop 355401248
2025-06-01 12:25:17,345 - INFO - Shared queues initialized.
2025-06-01 12:25:17,345 - INFO - Retrieved queue instances. Event loop ID: 355401248
2025-06-01 12:25:17,345 - INFO - SimulationManager ready state changed from False to True
2025-06-01 12:25:17,345 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 12:25:17,345 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 12:25:17,345 - INFO - Starting MessageProcessor task.
2025-06-01 12:25:17,345 - INFO - MessageProcessor task created and running in background.
2025-06-01 12:25:17,346 - INFO - MessageProcessor task started.
2025-06-01 12:25:17,346 - INFO - QueueForwarder initialized with all queues
2025-06-01 12:25:17,346 - INFO - QueueForwarder queues already initialized
2025-06-01 12:25:17,346 - INFO - QueueForwarder task started.
2025-06-01 12:25:17,346 - INFO - Application startup complete. All core services initialized.
2025-06-01 12:25:17,346 - INFO - MessageProcessor main loop started.
2025-06-01 12:25:17,346 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-06-01 12:25:18,885 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37564)
2025-06-01 12:25:18,885 - INFO - Adding connection: 127.0.0.1:37564. Total connections: 1
2025-06-01 12:25:18,887 - INFO - Sent connection_ack to 127.0.0.1:37564
2025-06-01 12:25:18,887 - INFO - Sender task started for 127.0.0.1:37564
2025-06-01 12:25:18,887 - INFO - Receiver task started for 127.0.0.1:37564
2025-06-01 12:25:18,897 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:37564
2025-06-01 12:25:19,897 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:37564. Status: Frontend ready to receive
2025-06-01 12:25:43,898 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:37564
2025-06-01 12:25:44,900 - INFO - MessageProcessor: Received ping from 127.0.0.1:37564. Responding with pong.
2025-06-01 12:25:44,901 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:37564.
2025-06-01 12:25:44,901 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:26:04,695 - INFO - WebSocket disconnected from 127.0.0.1:37564 while receiving: Code 1001
2025-06-01 12:26:04,695 - INFO - Receiver task for 127.0.0.1:37564 finished.
2025-06-01 12:26:32,707 - INFO - Application shutdown event triggered.
2025-06-01 12:26:32,708 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 12:26:32,708 - INFO - Simulation is not running. No action needed.
2025-06-01 12:26:32,708 - INFO - SimulationManager stop method called.
2025-06-01 12:26:32,708 - INFO - Stopping MessageProcessor...
2025-06-01 12:26:32,708 - INFO - Sender task for 127.0.0.1:37564 was cancelled normally.
2025-06-01 12:26:32,708 - INFO - Sender task for 127.0.0.1:37564 finished.
2025-06-01 12:26:32,708 - INFO - Message forwarding task for Address(host='127.0.0.1', port=37564) cancelled.
2025-06-01 12:26:32,708 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 12:26:32,708 - INFO - MessageProcessor main loop stopped.
2025-06-01 12:26:32,709 - INFO - MessageProcessor shutdown complete.
2025-06-01 12:26:32,709 - INFO - Stopping QueueForwarder...
2025-06-01 12:26:32,709 - INFO - Calling SimulationManager instance stop method...
2025-06-01 12:26:32,709 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 12:26:32,709 - INFO - Simulation is not running. No action needed.
2025-06-01 12:26:32,709 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 12:26:32,709 - INFO - Application shutdown complete.
2025-06-01 12:26:32,710 - INFO - Initiating cleanup for connection: 127.0.0.1:37564
2025-06-01 12:26:32,710 - INFO - Starting cleanup for 127.0.0.1:37564
2025-06-01 12:26:32,711 - INFO - Connection cleanup completed for 127.0.0.1:37564. Remaining connections: 0
2025-06-01 12:26:32,711 - INFO - Cleanup finished for connection: 127.0.0.1:37564. Total connections: 0
2025-06-01 12:26:32,711 - INFO - Cleanup finished for Address(host='127.0.0.1', port=37564) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:26:36,659 - INFO - Application startup event triggered.
2025-06-01 12:26:36,659 - INFO - Initializing all queues...
2025-06-01 12:26:36,659 - INFO - All queues initialized on loop 699600416
2025-06-01 12:26:36,659 - INFO - Shared queues initialized.
2025-06-01 12:26:36,659 - INFO - Retrieved queue instances. Event loop ID: 699600416
2025-06-01 12:26:36,659 - INFO - SimulationManager ready state changed from False to True
2025-06-01 12:26:36,659 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 12:26:36,659 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 12:26:36,660 - INFO - Starting MessageProcessor task.
2025-06-01 12:26:36,660 - INFO - MessageProcessor task created and running in background.
2025-06-01 12:26:36,660 - INFO - MessageProcessor task started.
2025-06-01 12:26:36,660 - INFO - QueueForwarder initialized with all queues
2025-06-01 12:26:36,660 - INFO - QueueForwarder queues already initialized
2025-06-01 12:26:36,660 - INFO - QueueForwarder task started.
2025-06-01 12:26:36,660 - INFO - Application startup complete. All core services initialized.
2025-06-01 12:26:36,660 - INFO - MessageProcessor main loop started.
2025-06-01 12:26:36,660 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-06-01 12:26:38,258 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=42214)
2025-06-01 12:26:38,258 - INFO - Adding connection: 127.0.0.1:42214. Total connections: 1
2025-06-01 12:26:38,259 - INFO - Sent connection_ack to 127.0.0.1:42214
2025-06-01 12:26:38,260 - INFO - Sender task started for 127.0.0.1:42214
2025-06-01 12:26:38,260 - INFO - Receiver task started for 127.0.0.1:42214
2025-06-01 12:26:38,268 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:42214
2025-06-01 12:26:39,269 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:42214. Status: Frontend ready to receive
2025-06-01 12:27:03,269 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:42214
2025-06-01 12:27:04,270 - INFO - MessageProcessor: Received ping from 127.0.0.1:42214. Responding with pong.
2025-06-01 12:27:04,271 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:42214.
2025-06-01 12:27:04,271 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:27:28,270 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:42214
2025-06-01 12:27:29,270 - INFO - MessageProcessor: Received ping from 127.0.0.1:42214. Responding with pong.
2025-06-01 12:27:29,270 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:42214.
2025-06-01 12:27:29,271 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:27:54,040 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:42214
2025-06-01 12:27:55,041 - INFO - MessageProcessor: Received ping from 127.0.0.1:42214. Responding with pong.
2025-06-01 12:27:55,041 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:42214.
2025-06-01 12:27:55,042 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:28:19,040 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:42214
2025-06-01 12:28:20,041 - INFO - MessageProcessor: Received ping from 127.0.0.1:42214. Responding with pong.
2025-06-01 12:28:20,041 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:42214.
2025-06-01 12:28:20,041 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:28:44,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:42214
2025-06-01 12:28:45,039 - INFO - MessageProcessor: Received ping from 127.0.0.1:42214. Responding with pong.
2025-06-01 12:28:45,039 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:42214.
2025-06-01 12:28:45,040 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:29:09,040 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:42214
2025-06-01 12:29:10,040 - INFO - MessageProcessor: Received ping from 127.0.0.1:42214. Responding with pong.
2025-06-01 12:29:10,041 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:42214.
2025-06-01 12:29:10,041 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:29:34,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:42214
2025-06-01 12:29:35,040 - INFO - MessageProcessor: Received ping from 127.0.0.1:42214. Responding with pong.
2025-06-01 12:29:35,041 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:42214.
2025-06-01 12:29:35,041 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:30:35,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:42214
2025-06-01 12:30:35,040 - INFO - WebSocket disconnected from 127.0.0.1:42214 while receiving: Code 1005
2025-06-01 12:30:35,040 - INFO - Receiver task for 127.0.0.1:42214 finished.
2025-06-01 12:30:35,042 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=36218)
2025-06-01 12:30:35,042 - INFO - Adding connection: 127.0.0.1:36218. Total connections: 2
2025-06-01 12:30:35,044 - INFO - Sent connection_ack to 127.0.0.1:36218
2025-06-01 12:30:35,045 - INFO - Sender task started for 127.0.0.1:36218
2025-06-01 12:30:35,045 - INFO - Receiver task started for 127.0.0.1:36218
2025-06-01 12:30:35,047 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:36218
2025-06-01 12:30:36,040 - INFO - MessageProcessor: Received ping from 127.0.0.1:42214. Responding with pong.
2025-06-01 12:30:36,040 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:42214.
2025-06-01 12:30:36,040 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:30:36,041 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=42214)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 165, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 39, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-06-01 12:30:37,040 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:36218. Status: Frontend ready to receive
2025-06-01 12:31:01,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:36218
2025-06-01 12:31:02,039 - INFO - MessageProcessor: Received ping from 127.0.0.1:36218. Responding with pong.
2025-06-01 12:31:02,039 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:36218.
2025-06-01 12:31:02,039 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:31:26,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:36218
2025-06-01 12:31:27,039 - INFO - MessageProcessor: Received ping from 127.0.0.1:36218. Responding with pong.
2025-06-01 12:31:27,039 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:36218.
2025-06-01 12:31:27,039 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:31:51,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:36218
2025-06-01 12:31:52,039 - INFO - MessageProcessor: Received ping from 127.0.0.1:36218. Responding with pong.
2025-06-01 12:31:52,040 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:36218.
2025-06-01 12:31:52,040 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:32:04,843 - INFO - WebSocket disconnected from 127.0.0.1:36218 while receiving: Code 1012
2025-06-01 12:32:04,843 - INFO - Receiver task for 127.0.0.1:36218 finished.
2025-06-01 12:32:05,145 - INFO - Message forwarding task for Address(host='127.0.0.1', port=36218) cancelled.
2025-06-01 12:32:05,146 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 12:32:05,146 - INFO - MessageProcessor main loop stopped.
2025-06-01 12:32:05,146 - INFO - Sender task for 127.0.0.1:42214 was cancelled normally.
2025-06-01 12:32:05,146 - INFO - Sender task for 127.0.0.1:42214 finished.
2025-06-01 12:32:05,146 - INFO - Application shutdown event triggered.
2025-06-01 12:32:05,146 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 12:32:05,147 - INFO - Simulation is not running. No action needed.
2025-06-01 12:32:05,147 - INFO - SimulationManager stop method called.
2025-06-01 12:32:05,147 - INFO - Stopping MessageProcessor...
2025-06-01 12:32:05,147 - INFO - MessageProcessor shutdown complete.
2025-06-01 12:32:05,147 - INFO - Stopping QueueForwarder...
2025-06-01 12:32:05,147 - INFO - Calling SimulationManager instance stop method...
2025-06-01 12:32:05,147 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 12:32:05,147 - INFO - Simulation is not running. No action needed.
2025-06-01 12:32:05,147 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 12:32:05,147 - INFO - Application shutdown complete.
2025-06-01 12:32:05,148 - INFO - Sender task for 127.0.0.1:36218 was cancelled normally.
2025-06-01 12:32:05,149 - INFO - Sender task for 127.0.0.1:36218 finished.
2025-06-01 12:32:05,149 - INFO - Initiating cleanup for connection: 127.0.0.1:42214
2025-06-01 12:32:05,149 - INFO - Starting cleanup for 127.0.0.1:42214
2025-06-01 12:32:05,149 - INFO - Connection cleanup completed for 127.0.0.1:42214. Remaining connections: 1
2025-06-01 12:32:05,149 - INFO - Cleanup finished for connection: 127.0.0.1:42214. Total connections: 1
2025-06-01 12:32:05,149 - INFO - Cleanup finished for Address(host='127.0.0.1', port=42214) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:32:05,153 - INFO - Initiating cleanup for connection: 127.0.0.1:36218
2025-06-01 12:32:05,153 - INFO - Starting cleanup for 127.0.0.1:36218
2025-06-01 12:32:05,153 - INFO - Connection cleanup completed for 127.0.0.1:36218. Remaining connections: 0
2025-06-01 12:32:05,153 - INFO - Cleanup finished for connection: 127.0.0.1:36218. Total connections: 0
2025-06-01 12:32:05,153 - INFO - Cleanup finished for Address(host='127.0.0.1', port=36218) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:46:50,496 - INFO - Application startup event triggered.
2025-06-01 12:46:50,496 - INFO - Initializing all queues...
2025-06-01 12:46:50,497 - INFO - All queues initialized on loop 358641184
2025-06-01 12:46:50,497 - INFO - Shared queues initialized.
2025-06-01 12:46:50,497 - INFO - Retrieved queue instances. Event loop ID: 358641184
2025-06-01 12:46:50,497 - INFO - SimulationManager ready state changed from False to True
2025-06-01 12:46:50,497 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 12:46:50,497 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 12:46:50,498 - INFO - Starting MessageProcessor task.
2025-06-01 12:46:50,498 - INFO - MessageProcessor task created and running in background.
2025-06-01 12:46:50,498 - INFO - MessageProcessor task started.
2025-06-01 12:46:50,498 - INFO - QueueForwarder initialized with all queues
2025-06-01 12:46:50,498 - INFO - QueueForwarder queues already initialized
2025-06-01 12:46:50,498 - INFO - QueueForwarder task started.
2025-06-01 12:46:50,498 - INFO - Application startup complete. All core services initialized.
2025-06-01 12:46:50,498 - INFO - MessageProcessor main loop started.
2025-06-01 12:46:50,498 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-06-01 12:46:52,067 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=47178)
2025-06-01 12:46:52,068 - INFO - Adding connection: 127.0.0.1:47178. Total connections: 1
2025-06-01 12:46:52,069 - INFO - Sent connection_ack to 127.0.0.1:47178
2025-06-01 12:46:52,069 - INFO - Sender task started for 127.0.0.1:47178
2025-06-01 12:46:52,070 - INFO - Receiver task started for 127.0.0.1:47178
2025-06-01 12:46:52,078 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:47178
2025-06-01 12:46:53,079 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:47178. Status: Frontend ready to receive
2025-06-01 12:47:15,041 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=57544)
2025-06-01 12:47:15,042 - INFO - Adding connection: 127.0.0.1:57544. Total connections: 2
2025-06-01 12:47:15,043 - INFO - Sent connection_ack to 127.0.0.1:57544
2025-06-01 12:47:15,043 - INFO - Sender task started for 127.0.0.1:57544
2025-06-01 12:47:15,043 - INFO - Receiver task started for 127.0.0.1:57544
2025-06-01 12:47:15,047 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:57544
2025-06-01 12:47:16,048 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:57544. Status: Frontend ready to receive
2025-06-01 12:47:16,049 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:47:17,081 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:47178
2025-06-01 12:47:18,083 - INFO - MessageProcessor: Received ping from 127.0.0.1:47178. Responding with pong.
2025-06-01 12:47:18,083 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:47178.
2025-06-01 12:47:41,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:57544
2025-06-01 12:47:42,041 - INFO - MessageProcessor: Received ping from 127.0.0.1:57544. Responding with pong.
2025-06-01 12:47:42,041 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:57544.
2025-06-01 12:47:42,041 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:47:42,080 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:47178
2025-06-01 12:47:43,081 - INFO - MessageProcessor: Received ping from 127.0.0.1:47178. Responding with pong.
2025-06-01 12:47:43,081 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:47178.
2025-06-01 12:48:06,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:57544
2025-06-01 12:48:07,041 - INFO - MessageProcessor: Received ping from 127.0.0.1:57544. Responding with pong.
2025-06-01 12:48:07,041 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:57544.
2025-06-01 12:48:07,041 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:48:07,079 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:47178
2025-06-01 12:48:08,080 - INFO - MessageProcessor: Received ping from 127.0.0.1:47178. Responding with pong.
2025-06-01 12:48:08,081 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:47178.
2025-06-01 12:48:20,110 - INFO - WebSocket disconnected from 127.0.0.1:47178 while receiving: Code 1001
2025-06-01 12:48:20,110 - INFO - Receiver task for 127.0.0.1:47178 finished.
2025-06-01 12:48:21,310 - INFO - WebSocket disconnected from 127.0.0.1:57544 while receiving: Code 1001
2025-06-01 12:48:21,310 - INFO - Receiver task for 127.0.0.1:57544 finished.
2025-06-01 12:51:08,065 - INFO - Message forwarding task for Address(host='127.0.0.1', port=47178) cancelled.
2025-06-01 12:51:08,065 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 12:51:08,065 - INFO - MessageProcessor main loop stopped.
2025-06-01 12:51:08,065 - INFO - Sender task for 127.0.0.1:47178 was cancelled normally.
2025-06-01 12:51:08,065 - INFO - Sender task for 127.0.0.1:47178 finished.
2025-06-01 12:51:08,065 - INFO - Application shutdown event triggered.
2025-06-01 12:51:08,065 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 12:51:08,065 - INFO - Simulation is not running. No action needed.
2025-06-01 12:51:08,065 - INFO - SimulationManager stop method called.
2025-06-01 12:51:08,065 - INFO - Stopping MessageProcessor...
2025-06-01 12:51:08,066 - INFO - MessageProcessor shutdown complete.
2025-06-01 12:51:08,066 - INFO - Stopping QueueForwarder...
2025-06-01 12:51:08,066 - INFO - Calling SimulationManager instance stop method...
2025-06-01 12:51:08,066 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 12:51:08,066 - INFO - Simulation is not running. No action needed.
2025-06-01 12:51:08,066 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 12:51:08,066 - INFO - Application shutdown complete.
2025-06-01 12:51:08,067 - INFO - Sender task for 127.0.0.1:57544 was cancelled normally.
2025-06-01 12:51:08,067 - INFO - Sender task for 127.0.0.1:57544 finished.
2025-06-01 12:51:08,067 - INFO - Message forwarding task for Address(host='127.0.0.1', port=57544) cancelled.
2025-06-01 12:51:08,067 - INFO - Initiating cleanup for connection: 127.0.0.1:47178
2025-06-01 12:51:08,067 - INFO - Starting cleanup for 127.0.0.1:47178
2025-06-01 12:51:08,068 - INFO - Connection cleanup completed for 127.0.0.1:47178. Remaining connections: 1
2025-06-01 12:51:08,068 - INFO - Cleanup finished for connection: 127.0.0.1:47178. Total connections: 1
2025-06-01 12:51:08,068 - INFO - Cleanup finished for Address(host='127.0.0.1', port=47178) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:51:08,071 - INFO - Initiating cleanup for connection: 127.0.0.1:57544
2025-06-01 12:51:08,071 - INFO - Starting cleanup for 127.0.0.1:57544
2025-06-01 12:51:08,071 - INFO - Connection cleanup completed for 127.0.0.1:57544. Remaining connections: 0
2025-06-01 12:51:08,071 - INFO - Cleanup finished for connection: 127.0.0.1:57544. Total connections: 0
2025-06-01 12:51:08,071 - INFO - Cleanup finished for Address(host='127.0.0.1', port=57544) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 12:56:46,217 - INFO - Application startup event triggered.
2025-06-01 12:56:46,217 - INFO - Initializing all queues...
2025-06-01 12:56:46,217 - INFO - All queues initialized on loop 451022368
2025-06-01 12:56:46,218 - INFO - Shared queues initialized.
2025-06-01 12:56:46,218 - INFO - Retrieved queue instances. Event loop ID: 451022368
2025-06-01 12:56:46,218 - INFO - SimulationManager ready state changed from False to True
2025-06-01 12:56:46,218 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 12:56:46,218 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 12:56:46,218 - INFO - Starting MessageProcessor task.
2025-06-01 12:56:46,218 - INFO - MessageProcessor task created and running in background.
2025-06-01 12:56:46,218 - INFO - MessageProcessor task started.
2025-06-01 12:56:46,218 - INFO - QueueForwarder initialized with all queues
2025-06-01 12:56:46,218 - INFO - QueueForwarder queues already initialized
2025-06-01 12:56:46,218 - INFO - QueueForwarder task started.
2025-06-01 12:56:46,218 - INFO - Application startup complete. All core services initialized.
2025-06-01 12:56:46,219 - INFO - MessageProcessor main loop started.
2025-06-01 12:56:46,219 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-06-01 12:56:47,842 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=54276)
2025-06-01 12:56:47,842 - INFO - Adding connection: 127.0.0.1:54276. Total connections: 1
2025-06-01 12:56:47,844 - INFO - Sent connection_ack to 127.0.0.1:54276
2025-06-01 12:56:47,844 - INFO - Sender task started for 127.0.0.1:54276
2025-06-01 12:56:47,844 - INFO - Receiver task started for 127.0.0.1:54276
2025-06-01 12:56:47,854 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:54276
2025-06-01 12:56:48,854 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:54276. Status: Frontend ready to receive
2025-06-01 12:57:00,059 - INFO - WebSocket disconnected from 127.0.0.1:54276 while receiving: Code 1001
2025-06-01 12:57:00,059 - INFO - Receiver task for 127.0.0.1:54276 finished.
2025-06-01 12:57:00,485 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=35998)
2025-06-01 12:57:00,486 - INFO - Adding connection: 127.0.0.1:35998. Total connections: 2
2025-06-01 12:57:00,487 - INFO - Sent connection_ack to 127.0.0.1:35998
2025-06-01 12:57:00,488 - INFO - Sender task started for 127.0.0.1:35998
2025-06-01 12:57:00,488 - INFO - Receiver task started for 127.0.0.1:35998
2025-06-01 12:57:00,493 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:35998
2025-06-01 12:57:01,493 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:35998. Status: Frontend ready to receive
2025-06-01 12:57:01,494 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 12:57:25,493 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:35998
2025-06-01 12:57:26,493 - INFO - MessageProcessor: Received ping from 127.0.0.1:35998. Responding with pong.
2025-06-01 12:57:26,494 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:35998.
2025-06-01 12:57:26,494 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:57:26,494 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=54276)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 165, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 39, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-06-01 12:57:50,493 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:35998
2025-06-01 12:57:50,493 - INFO - WebSocket disconnected from 127.0.0.1:35998 while receiving: Code 1005
2025-06-01 12:57:50,494 - INFO - Receiver task for 127.0.0.1:35998 finished.
2025-06-01 12:57:50,495 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=56936)
2025-06-01 12:57:50,496 - INFO - Adding connection: 127.0.0.1:56936. Total connections: 3
2025-06-01 12:57:50,496 - INFO - Sent connection_ack to 127.0.0.1:56936
2025-06-01 12:57:50,497 - INFO - Sender task started for 127.0.0.1:56936
2025-06-01 12:57:50,497 - INFO - Receiver task started for 127.0.0.1:56936
2025-06-01 12:57:50,500 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:56936
2025-06-01 12:57:51,494 - INFO - MessageProcessor: Received ping from 127.0.0.1:35998. Responding with pong.
2025-06-01 12:57:51,494 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:35998.
2025-06-01 12:57:51,494 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 12:57:51,495 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=35998)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 165, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 39, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 345, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close'.
2025-06-01 12:57:52,494 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:56936. Status: Frontend ready to receive
2025-06-01 12:58:15,502 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56936
2025-06-01 12:58:16,503 - INFO - MessageProcessor: Received ping from 127.0.0.1:56936. Responding with pong.
2025-06-01 12:58:16,504 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:56936.
2025-06-01 12:58:16,504 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 13:46:04,723 - INFO - Application startup event triggered.
2025-06-01 13:46:04,723 - INFO - Initializing all queues...
2025-06-01 13:46:04,724 - INFO - All queues initialized on loop 140476858985040
2025-06-01 13:46:04,724 - INFO - Shared queues initialized.
2025-06-01 13:46:04,724 - INFO - Retrieved queue instances. Event loop ID: 140476858985040
2025-06-01 13:46:04,724 - INFO - SimulationManager ready state changed from False to True
2025-06-01 13:46:04,724 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 13:46:04,724 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 13:46:04,724 - INFO - Starting MessageProcessor task.
2025-06-01 13:46:04,725 - INFO - MessageProcessor task created and running in background.
2025-06-01 13:46:04,725 - INFO - MessageProcessor task started.
2025-06-01 13:46:04,725 - INFO - QueueForwarder initialized with all queues
2025-06-01 13:46:04,725 - INFO - QueueForwarder queues already initialized
2025-06-01 13:46:04,725 - INFO - QueueForwarder task started.
2025-06-01 13:46:04,725 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 13:46:04,726 - INFO - MessageProcessor main loop started.
2025-06-01 13:46:04,726 - INFO - Starting QueueForwarder with input=from_frontend, output=to_backend
2025-06-01 13:46:04,726 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 13:46:05,885 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=58604)
2025-06-01 13:46:05,886 - INFO - Adding connection: 127.0.0.1:58604. Total connections: 1
2025-06-01 13:46:05,888 - INFO - Sent connection_ack to 127.0.0.1:58604
2025-06-01 13:46:05,888 - INFO - Sender task started for 127.0.0.1:58604
2025-06-01 13:46:05,889 - INFO - Receiver task started for 127.0.0.1:58604
2025-06-01 13:46:05,891 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:58604
2025-06-01 13:46:06,893 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:58604. Status: Frontend ready to receive
2025-06-01 13:46:30,892 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:58604
2025-06-01 13:46:31,895 - INFO - MessageProcessor: Received ping from 127.0.0.1:58604. Responding with pong.
2025-06-01 13:46:31,895 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:58604.
2025-06-01 13:46:31,895 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 13:46:35,849 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:58604
2025-06-01 13:46:36,852 - INFO - MessageProcessor: Processing command 'set_translation_settings' from 127.0.0.1:58604
2025-06-01 13:46:36,852 - INFO - Generated error response for command 'set_translation_settings'
2025-06-01 13:46:36,853 - INFO - Enqueued response type 'error' to to_frontend_queue for client 127.0.0.1:58604.
2025-06-01 13:46:55,892 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:58604
2025-06-01 13:46:56,894 - INFO - MessageProcessor: Received ping from 127.0.0.1:58604. Responding with pong.
2025-06-01 13:46:56,894 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:58604.
2025-06-01 13:46:56,894 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 13:47:20,892 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:58604
2025-06-01 13:47:21,893 - INFO - MessageProcessor: Received ping from 127.0.0.1:58604. Responding with pong.
2025-06-01 13:47:21,894 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:58604.
2025-06-01 13:47:21,894 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 13:47:46,039 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:58604
2025-06-01 13:47:47,041 - INFO - MessageProcessor: Received ping from 127.0.0.1:58604. Responding with pong.
2025-06-01 13:47:47,042 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:58604.
2025-06-01 13:47:47,042 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 13:48:11,038 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:58604
2025-06-01 13:48:12,041 - INFO - MessageProcessor: Received ping from 127.0.0.1:58604. Responding with pong.
2025-06-01 13:48:12,042 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:58604.
2025-06-01 13:48:12,042 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 13:48:35,892 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:58604
2025-06-01 13:48:36,893 - INFO - MessageProcessor: Received ping from 127.0.0.1:58604. Responding with pong.
2025-06-01 13:48:36,893 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:58604.
2025-06-01 13:48:36,893 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 13:49:01,038 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:58604
2025-06-01 13:49:02,039 - INFO - MessageProcessor: Received ping from 127.0.0.1:58604. Responding with pong.
2025-06-01 13:49:02,040 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:58604.
2025-06-01 13:49:02,040 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 13:49:20,110 - INFO - WebSocket disconnected from 127.0.0.1:58604 while receiving: Code 1001
2025-06-01 13:49:20,110 - INFO - Receiver task for 127.0.0.1:58604 finished.
2025-06-01 13:57:38,393 - INFO - Application startup event triggered.
2025-06-01 13:57:38,393 - INFO - Initializing all queues...
2025-06-01 13:57:38,393 - INFO - All queues initialized on loop 139649898756144
2025-06-01 13:57:38,393 - INFO - Shared queues initialized.
2025-06-01 13:57:38,394 - INFO - Retrieved queue instances. Event loop ID: 139649898756144
2025-06-01 13:57:38,394 - INFO - SimulationManager ready state changed from False to True
2025-06-01 13:57:38,394 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 13:57:38,394 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 13:57:38,394 - INFO - Starting MessageProcessor task.
2025-06-01 13:57:38,395 - INFO - MessageProcessor task created and running in background.
2025-06-01 13:57:38,395 - INFO - MessageProcessor task started.
2025-06-01 13:57:38,395 - INFO - QueueForwarder initialized with all queues
2025-06-01 13:57:38,395 - INFO - QueueForwarder queues already initialized
2025-06-01 13:57:38,395 - INFO - QueueForwarder task started.
2025-06-01 13:57:38,396 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 13:57:38,396 - INFO - MessageProcessor main loop started.
2025-06-01 13:57:38,396 - DEBUG - Queue 'to_backend' empty, waiting to dequeue...
2025-06-01 13:57:38,397 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 13:57:38,397 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:57:40,551 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53954)
2025-06-01 13:57:40,551 - INFO - Adding connection: 127.0.0.1:53954. Total connections: 1
2025-06-01 13:57:40,553 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:40,553 - INFO - Sent connection_ack to 127.0.0.1:53954
2025-06-01 13:57:40,554 - INFO - Sender task started for 127.0.0.1:53954
2025-06-01 13:57:40,554 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:40,554 - INFO - Starting receiver for 127.0.0.1:53954 with message tracing
2025-06-01 13:57:40,569 - DEBUG - Received raw WebSocket data from 127.0.0.1:53954: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748779060555,"id":"frontend-init-1748779060555"}
2025-06-01 13:57:40,570 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:53954
2025-06-01 13:57:40,570 - ERROR - Error processing received message from 127.0.0.1:53954: 'WebSocketMessage' object is not subscriptable
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 228, in _receiver
    f"Enqueuing {message['type']} (ID: {message.get('id')})"
                 ~~~~~~~^^^^^^^^
TypeError: 'WebSocketMessage' object is not subscriptable
2025-06-01 13:57:40,572 - ERROR - Receive error for 127.0.0.1:53954: Invalid message format for queue dead_letter
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 228, in _receiver
    f"Enqueuing {message['type']} (ID: {message.get('id')})"
                 ~~~~~~~^^^^^^^^
TypeError: 'WebSocketMessage' object is not subscriptable

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 266, in _receiver
    await get_dead_letter_queue().enqueue({ # Enqueue to DLQ on general error
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 13:57:40,573 - INFO - Receiver task for 127.0.0.1:53954 finished.
2025-06-01 13:57:41,556 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:42,557 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:43,399 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:57:43,558 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:44,559 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:45,561 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:46,561 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:47,563 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:48,400 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:57:48,564 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:49,564 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:50,565 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:51,567 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:52,568 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:53,401 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:57:53,568 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:54,569 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:55,570 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:56,570 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:57,571 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:58,402 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:57:58,573 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:57:59,574 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:00,575 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:01,576 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:02,577 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:03,403 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:58:03,578 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:04,579 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:05,580 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:06,581 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:07,583 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:08,403 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:58:08,584 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:09,585 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:10,587 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:11,588 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:12,589 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:13,404 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:58:13,589 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:14,590 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:15,591 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:16,592 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:17,593 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:18,405 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:58:18,595 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:19,596 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:20,597 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:21,598 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:22,598 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:23,405 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:58:23,599 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:24,600 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:25,601 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:26,602 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:27,604 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:28,406 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:58:28,604 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:29,606 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:30,607 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:31,608 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:32,609 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:33,407 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:58:33,609 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:34,610 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:35,611 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:36,611 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:37,613 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:38,408 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:58:38,614 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:39,615 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:40,617 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:41,618 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:42,620 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:43,409 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:58:43,621 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:44,622 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:45,623 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:46,624 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:47,626 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:48,410 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:58:48,626 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:49,627 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:50,628 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:51,629 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:52,630 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:53,412 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:58:53,631 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:54,632 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:55,635 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:56,635 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:57,637 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:58,412 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:58:58,639 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:58:59,641 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:00,642 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:01,643 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:02,644 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:03,413 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:59:03,645 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:04,645 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:05,646 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:06,647 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:07,648 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:08,414 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:59:08,650 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:09,652 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:10,653 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:11,654 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:12,656 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:13,415 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:59:13,657 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:14,659 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:15,660 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:16,661 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:17,662 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:18,415 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:59:18,664 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:19,665 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:20,667 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:21,668 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:22,669 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:23,416 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:59:23,671 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:24,672 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:25,673 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:26,674 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:27,675 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:28,417 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:59:28,677 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:29,678 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:30,678 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:31,679 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:32,680 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:33,419 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:59:33,680 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:34,681 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:35,682 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:36,683 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:37,684 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:38,420 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:59:38,685 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:39,686 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:40,687 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:41,688 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:42,689 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:43,421 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:59:43,690 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:44,690 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:45,691 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:46,692 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:47,693 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:48,422 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:59:48,694 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:49,694 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:50,695 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:51,695 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:52,696 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:53,423 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:59:53,698 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:54,698 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:55,699 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:56,700 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:57,701 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:58,423 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 13:59:58,702 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 13:59:59,703 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:00,704 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:01,705 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:02,706 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:03,425 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:00:03,706 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:04,708 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:05,709 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:06,710 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:07,710 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:08,426 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:00:08,711 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:09,712 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:10,714 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:11,715 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:12,716 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:13,427 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:00:13,717 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:14,718 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:15,719 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:16,720 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:17,720 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:18,429 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:00:18,722 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:19,722 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:20,723 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:21,723 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:22,724 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:23,430 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:00:23,725 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:24,726 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:25,727 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:26,728 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:27,730 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:28,432 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:00:28,731 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:29,732 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:00:30,734 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:28,586 - INFO - Application startup event triggered.
2025-06-01 14:03:28,586 - INFO - Initializing all queues...
2025-06-01 14:03:28,587 - INFO - All queues initialized on loop 399175200
2025-06-01 14:03:28,587 - INFO - Shared queues initialized.
2025-06-01 14:03:28,587 - INFO - Retrieved queue instances. Event loop ID: 399175200
2025-06-01 14:03:28,587 - INFO - SimulationManager ready state changed from False to True
2025-06-01 14:03:28,587 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 14:03:28,587 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 14:03:28,587 - INFO - Starting MessageProcessor task.
2025-06-01 14:03:28,587 - INFO - MessageProcessor task created and running in background.
2025-06-01 14:03:28,587 - INFO - MessageProcessor task started.
2025-06-01 14:03:28,588 - INFO - QueueForwarder initialized with all queues
2025-06-01 14:03:28,588 - INFO - QueueForwarder queues already initialized
2025-06-01 14:03:28,588 - INFO - QueueForwarder task started.
2025-06-01 14:03:28,588 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 14:03:28,588 - INFO - MessageProcessor main loop started.
2025-06-01 14:03:28,588 - DEBUG - Queue 'to_backend' empty, waiting to dequeue...
2025-06-01 14:03:28,588 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 14:03:28,589 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:03:30,628 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53948)
2025-06-01 14:03:30,628 - INFO - Adding connection: 127.0.0.1:53948. Total connections: 1
2025-06-01 14:03:30,629 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:30,629 - INFO - Sent connection_ack to 127.0.0.1:53948
2025-06-01 14:03:30,630 - INFO - Sender task started for 127.0.0.1:53948
2025-06-01 14:03:30,630 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:30,630 - INFO - Starting receiver for 127.0.0.1:53948 with message tracing
2025-06-01 14:03:30,639 - DEBUG - Received raw WebSocket data from 127.0.0.1:53948: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748779410638,"id":"frontend-init-1748779410638"}
2025-06-01 14:03:30,639 - DEBUG - Successfully parsed JSON to dict: {'type': 'frontend_ready_ack', 'data': {'message': 'Frontend ready to receive', 'version': '1.0', 'status': 'ready', 'capabilities': ['ping-pong']}, 'timestamp': 1748779410638, 'id': 'frontend-init-1748779410638'}
2025-06-01 14:03:30,639 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:53948
2025-06-01 14:03:30,639 - DEBUG - Receiver #1 for 127.0.0.1:53948 - Enqueuing frontend_ready_ack (ID: frontend-init-1748779410638)
2025-06-01 14:03:30,639 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:03:31,631 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:32,631 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:33,589 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:03:33,631 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:34,632 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:35,633 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:36,634 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:37,315 - INFO - WebSocket disconnected from 127.0.0.1:53948 while receiving: Code 1001
2025-06-01 14:03:37,315 - INFO - Receiver task for 127.0.0.1:53948 finished.
2025-06-01 14:03:37,634 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:37,777 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=53950)
2025-06-01 14:03:37,777 - INFO - Adding connection: 127.0.0.1:53950. Total connections: 2
2025-06-01 14:03:37,778 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:37,778 - INFO - Sent connection_ack to 127.0.0.1:53950
2025-06-01 14:03:37,778 - INFO - Sender task started for 127.0.0.1:53950
2025-06-01 14:03:37,779 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:37,779 - INFO - Starting receiver for 127.0.0.1:53950 with message tracing
2025-06-01 14:03:37,783 - DEBUG - Received raw WebSocket data from 127.0.0.1:53950: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748779417782,"id":"frontend-init-1748779417782"}
2025-06-01 14:03:37,783 - DEBUG - Successfully parsed JSON to dict: {'type': 'frontend_ready_ack', 'data': {'message': 'Frontend ready to receive', 'version': '1.0', 'status': 'ready', 'capabilities': ['ping-pong']}, 'timestamp': 1748779417782, 'id': 'frontend-init-1748779417782'}
2025-06-01 14:03:37,784 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:53950
2025-06-01 14:03:37,784 - DEBUG - Receiver #1 for 127.0.0.1:53950 - Enqueuing frontend_ready_ack (ID: frontend-init-1748779417782)
2025-06-01 14:03:37,784 - DEBUG - Enqueued to 'from_frontend', size: 2
2025-06-01 14:03:38,589 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:03:38,634 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:38,779 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:39,635 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:39,779 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:40,635 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:40,780 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:41,635 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:41,781 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:42,635 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:42,781 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:43,590 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:03:43,635 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:43,781 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:44,635 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:44,781 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:45,636 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:45,781 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:46,636 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:46,781 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:47,637 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:47,781 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:48,589 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:03:48,637 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:48,781 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:49,639 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:49,781 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:50,640 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:50,781 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:51,639 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:51,782 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:52,640 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:52,782 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:03:52,976 - INFO - WebSocket disconnected from 127.0.0.1:53950 while receiving: Code 1012
2025-06-01 14:03:52,977 - INFO - Receiver task for 127.0.0.1:53950 finished.
2025-06-01 14:03:53,178 - INFO - Application shutdown event triggered.
2025-06-01 14:03:53,178 - DEBUG - Retrieved SimulationManager instance
2025-06-01 14:03:53,179 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 14:03:53,179 - INFO - Simulation is not running. No action needed.
2025-06-01 14:03:53,179 - INFO - SimulationManager stop method called.
2025-06-01 14:03:53,179 - INFO - Stopping MessageProcessor...
2025-06-01 14:03:53,179 - INFO - Message forwarding task for Address(host='127.0.0.1', port=53950) cancelled.
2025-06-01 14:03:53,179 - INFO - Sender task for 127.0.0.1:53948 was cancelled normally.
2025-06-01 14:03:53,179 - INFO - Sender task for 127.0.0.1:53948 finished.
2025-06-01 14:03:53,179 - INFO - Dead Letter Queue monitor task cancelled gracefully.
2025-06-01 14:03:53,179 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 14:03:53,179 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 14:03:53,180 - INFO - MessageProcessor main loop stopped.
2025-06-01 14:03:53,180 - INFO - Sender task for 127.0.0.1:53950 was cancelled normally.
2025-06-01 14:03:53,180 - INFO - Sender task for 127.0.0.1:53950 finished.
2025-06-01 14:03:53,180 - INFO - Message forwarding task for Address(host='127.0.0.1', port=53948) cancelled.
2025-06-01 14:03:53,180 - INFO - MessageProcessor shutdown complete.
2025-06-01 14:03:53,180 - INFO - Stopping QueueForwarder...
2025-06-01 14:03:53,180 - DEBUG - QueueForwarder shutdown initiated
2025-06-01 14:03:53,180 - INFO - Calling SimulationManager instance stop method...
2025-06-01 14:03:53,180 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 14:03:53,180 - INFO - Simulation is not running. No action needed.
2025-06-01 14:03:53,180 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 14:03:53,180 - INFO - Application shutdown complete.
2025-06-01 14:03:53,182 - INFO - Initiating cleanup for connection: 127.0.0.1:53948
2025-06-01 14:03:53,182 - INFO - Starting cleanup for 127.0.0.1:53948
2025-06-01 14:03:53,182 - DEBUG - WebSocket for 127.0.0.1:53948 was already disconnected (client_state: WebSocketState.DISCONNECTED)
2025-06-01 14:03:53,182 - INFO - Connection cleanup completed for 127.0.0.1:53948. Remaining connections: 1
2025-06-01 14:03:53,182 - INFO - Cleanup finished for connection: 127.0.0.1:53948. Total connections: 1
2025-06-01 14:03:53,182 - INFO - Cleanup finished for Address(host='127.0.0.1', port=53948) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 14:03:53,186 - INFO - Initiating cleanup for connection: 127.0.0.1:53950
2025-06-01 14:03:53,186 - INFO - Starting cleanup for 127.0.0.1:53950
2025-06-01 14:03:53,186 - DEBUG - WebSocket for 127.0.0.1:53950 was already disconnected (client_state: WebSocketState.DISCONNECTED)
2025-06-01 14:03:53,186 - INFO - Connection cleanup completed for 127.0.0.1:53950. Remaining connections: 0
2025-06-01 14:03:53,186 - INFO - Cleanup finished for connection: 127.0.0.1:53950. Total connections: 0
2025-06-01 14:03:53,186 - INFO - Cleanup finished for Address(host='127.0.0.1', port=53950) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 14:10:25,197 - INFO - Application startup event triggered.
2025-06-01 14:10:25,198 - INFO - Initializing all queues...
2025-06-01 14:10:25,198 - INFO - All queues initialized on loop 139741911295200
2025-06-01 14:10:25,198 - INFO - Shared queues initialized.
2025-06-01 14:10:25,199 - INFO - Retrieved queue instances. Event loop ID: 139741911295200
2025-06-01 14:10:25,199 - INFO - SimulationManager ready state changed from False to True
2025-06-01 14:10:25,199 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 14:10:25,199 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 14:10:25,199 - INFO - Starting MessageProcessor task.
2025-06-01 14:10:25,200 - INFO - MessageProcessor task created and running in background.
2025-06-01 14:10:25,200 - INFO - MessageProcessor task started.
2025-06-01 14:10:25,200 - INFO - QueueForwarder initialized with all queues
2025-06-01 14:10:25,200 - INFO - QueueForwarder queues already initialized
2025-06-01 14:10:25,200 - INFO - QueueForwarder task started.
2025-06-01 14:10:25,200 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 14:10:25,200 - INFO - MessageProcessor main loop started.
2025-06-01 14:10:25,201 - DEBUG - Queue 'to_backend' empty, waiting to dequeue...
2025-06-01 14:10:25,201 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 14:10:25,201 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:10:27,228 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50418)
2025-06-01 14:10:27,228 - INFO - Adding connection: 127.0.0.1:50418. Total connections: 1
2025-06-01 14:10:27,231 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:27,231 - INFO - Sent connection_ack to 127.0.0.1:50418
2025-06-01 14:10:27,232 - INFO - Sender task started for 127.0.0.1:50418
2025-06-01 14:10:27,233 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:27,233 - INFO - Starting receiver for 127.0.0.1:50418 with message tracing
2025-06-01 14:10:27,250 - DEBUG - Received raw WebSocket data from 127.0.0.1:50418: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748779827233,"id":"frontend-init-1748779827233"}
2025-06-01 14:10:27,251 - DEBUG - Successfully parsed JSON to dict: {'type': 'frontend_ready_ack', 'data': {'message': 'Frontend ready to receive', 'version': '1.0', 'status': 'ready', 'capabilities': ['ping-pong']}, 'timestamp': 1748779827233, 'id': 'frontend-init-1748779827233'}
2025-06-01 14:10:27,251 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:50418
2025-06-01 14:10:27,252 - DEBUG - Receiver #1 for 127.0.0.1:50418 - Enqueuing frontend_ready_ack (ID: frontend-init-1748779827233)
2025-06-01 14:10:27,252 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:10:28,234 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:29,235 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:30,202 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:10:30,237 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:31,238 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:32,239 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:33,240 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:34,241 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:35,203 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:10:35,242 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:36,243 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:37,244 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:38,246 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:39,247 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:40,204 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:10:40,248 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:41,249 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:42,251 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:43,253 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:44,254 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:45,205 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:10:45,255 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:46,256 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:47,257 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:48,258 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:49,259 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:50,206 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:10:50,260 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:51,262 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:52,263 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:53,040 - DEBUG - Received raw WebSocket data from 127.0.0.1:50418: {"type":"ping","data":{"ping":true},"timestamp":1748779853037}
2025-06-01 14:10:53,040 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748779853037}
2025-06-01 14:10:53,040 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:50418
2025-06-01 14:10:53,041 - DEBUG - Receiver #2 for 127.0.0.1:50418 - Enqueuing ping (ID: 8b621aeb-17ab-41be-8884-ac55c71320f7)
2025-06-01 14:10:53,041 - DEBUG - Enqueued to 'from_frontend', size: 2
2025-06-01 14:10:53,264 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:54,265 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:55,207 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:10:55,266 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:56,267 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:57,268 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:58,270 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:10:59,270 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:00,209 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:11:00,271 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:01,272 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:02,273 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:03,275 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:04,277 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:05,211 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:11:05,278 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:06,278 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:07,279 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:08,280 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:09,282 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:10,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:11:10,283 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:11,285 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:12,286 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:13,287 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:14,290 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:15,213 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:11:15,291 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:16,291 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:17,235 - DEBUG - Received raw WebSocket data from 127.0.0.1:50418: {"type":"ping","data":{"ping":true},"timestamp":1748779877233}
2025-06-01 14:11:17,235 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748779877233}
2025-06-01 14:11:17,235 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:50418
2025-06-01 14:11:17,235 - DEBUG - Receiver #3 for 127.0.0.1:50418 - Enqueuing ping (ID: 2392d134-c22c-4130-931f-75fc710dea17)
2025-06-01 14:11:17,236 - DEBUG - Enqueued to 'from_frontend', size: 3
2025-06-01 14:11:17,239 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=52722)
2025-06-01 14:11:17,239 - INFO - Adding connection: 127.0.0.1:52722. Total connections: 2
2025-06-01 14:11:17,241 - INFO - WebSocket disconnected from 127.0.0.1:50418 while receiving: Code 1005
2025-06-01 14:11:17,241 - INFO - Receiver task for 127.0.0.1:50418 finished.
2025-06-01 14:11:17,242 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:17,242 - INFO - Sent connection_ack to 127.0.0.1:52722
2025-06-01 14:11:17,243 - INFO - Sender task started for 127.0.0.1:52722
2025-06-01 14:11:17,243 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:17,243 - INFO - Starting receiver for 127.0.0.1:52722 with message tracing
2025-06-01 14:11:17,245 - DEBUG - Received raw WebSocket data from 127.0.0.1:52722: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748779877244,"id":"frontend-init-1748779877244"}
2025-06-01 14:11:17,245 - DEBUG - Successfully parsed JSON to dict: {'type': 'frontend_ready_ack', 'data': {'message': 'Frontend ready to receive', 'version': '1.0', 'status': 'ready', 'capabilities': ['ping-pong']}, 'timestamp': 1748779877244, 'id': 'frontend-init-1748779877244'}
2025-06-01 14:11:17,245 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:52722
2025-06-01 14:11:17,246 - DEBUG - Receiver #1 for 127.0.0.1:52722 - Enqueuing frontend_ready_ack (ID: frontend-init-1748779877244)
2025-06-01 14:11:17,246 - DEBUG - Enqueued to 'from_frontend', size: 4
2025-06-01 14:11:17,292 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:18,243 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:18,292 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:19,244 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:19,293 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:20,213 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:11:20,245 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:20,294 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:21,246 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:21,295 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:22,247 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:22,295 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:23,249 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:23,296 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:24,249 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:24,296 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:25,214 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:11:25,250 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:25,297 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:26,251 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:26,298 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:27,252 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:27,299 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:28,253 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:28,300 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:29,254 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:29,301 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:30,216 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:11:30,254 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:30,301 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:31,109 - INFO - WebSocket disconnected from 127.0.0.1:52722 while receiving: Code 1001
2025-06-01 14:11:31,109 - INFO - Receiver task for 127.0.0.1:52722 finished.
2025-06-01 14:11:31,256 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:31,303 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:32,256 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:32,303 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:33,257 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:33,304 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:34,259 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:34,305 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:35,217 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:11:35,259 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:35,305 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:36,260 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:36,306 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:37,261 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:37,307 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:38,262 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:38,308 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:39,263 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:39,309 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:40,218 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:11:40,265 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:40,310 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:41,266 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:41,311 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:42,268 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:42,312 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:43,269 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:43,313 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:44,270 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:44,314 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:45,219 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:11:45,270 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:45,315 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:46,271 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:46,316 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:47,272 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:47,317 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:48,273 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:48,318 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:49,273 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:49,319 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:50,220 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:11:50,274 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:50,320 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:51,275 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:51,321 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:52,276 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:52,323 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:53,277 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:53,324 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:54,278 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:54,325 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:55,221 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:11:55,278 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:55,326 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:56,279 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:56,327 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:57,281 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:57,327 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:58,282 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:58,329 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:59,283 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:11:59,329 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:00,222 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:12:00,284 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:00,330 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:01,285 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:01,331 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:02,286 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:02,332 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:03,286 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:03,332 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:04,288 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:04,334 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:05,222 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:12:05,288 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:05,334 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:06,289 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:06,335 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:07,291 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:07,336 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:08,291 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:08,338 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:09,292 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:09,338 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:10,223 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:12:10,293 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:10,340 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:11,296 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:11,341 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:12,297 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:12,342 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:13,298 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:13,342 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:14,300 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:14,343 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:15,224 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:12:15,301 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:15,345 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:16,302 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:16,346 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:17,303 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:17,348 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:18,304 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:18,349 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:19,305 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:19,350 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:20,225 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:12:20,306 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:20,351 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:21,307 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:21,353 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:22,310 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:22,354 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:23,311 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:23,356 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:24,312 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:24,357 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:25,226 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:12:25,314 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:25,358 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:26,316 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:26,360 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:27,317 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:27,361 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:28,318 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:28,361 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:29,319 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:29,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:30,226 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:12:30,320 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:30,364 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:31,321 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:31,365 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:32,322 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:32,365 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:33,322 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:33,367 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:34,323 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:34,367 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:35,227 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:12:35,324 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:35,369 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:36,325 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:36,370 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:37,327 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:37,372 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:38,328 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:38,373 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:39,329 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:39,374 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:40,228 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:12:40,331 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:40,375 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:41,332 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:41,377 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:42,333 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:42,378 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:43,334 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:43,380 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:44,334 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:44,381 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:45,229 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:12:45,335 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:45,382 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:46,336 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:46,382 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:47,337 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:47,384 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:48,338 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:48,386 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:49,340 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:49,387 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:50,230 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:12:50,341 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:50,388 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:51,342 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:51,389 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:52,343 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:52,390 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:53,343 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:53,391 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:54,345 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:54,392 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:55,231 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:12:55,347 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:55,394 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:56,348 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:56,394 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:57,349 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:57,396 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:58,350 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:58,397 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:59,352 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:12:59,398 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:00,232 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:13:00,352 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:00,399 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:01,353 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:01,400 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:02,354 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:02,401 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:03,355 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:03,402 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:04,356 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:04,403 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:05,233 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:13:05,358 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:05,403 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:06,358 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:06,404 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:07,359 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:07,405 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:08,359 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:08,406 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:09,359 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:09,406 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:10,234 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:13:10,361 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:10,407 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:11,362 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:11,408 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:12,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:12,409 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:13,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:13,410 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:14,364 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:14,411 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:15,234 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:13:15,365 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:15,413 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:16,367 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:16,414 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:17,369 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:17,416 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:18,370 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:18,417 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:19,371 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:19,418 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:20,235 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:13:20,372 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:20,419 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:21,372 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:21,420 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:22,374 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:22,421 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:23,375 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:23,422 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:24,376 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:24,423 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:25,236 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:13:25,377 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:25,424 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:26,379 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:26,425 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:27,379 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:27,425 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:28,381 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:28,426 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:29,383 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:29,427 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:30,237 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:13:30,384 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:30,428 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:31,385 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:31,429 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:32,386 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:32,431 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:33,388 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:33,432 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:34,388 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:34,433 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:35,239 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:13:35,389 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:35,434 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:36,390 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:36,435 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:37,390 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:37,436 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:38,391 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:38,438 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:39,393 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:39,439 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:40,239 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:13:40,393 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:40,439 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:41,394 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:41,441 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:42,395 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:42,442 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:43,396 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:43,443 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:44,396 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:44,444 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:45,241 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:13:45,397 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:45,444 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:46,399 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:46,445 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:47,400 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:47,446 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:48,401 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:13:48,446 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:16:56,764 - INFO - Application startup event triggered.
2025-06-01 14:16:56,765 - INFO - Initializing all queues...
2025-06-01 14:16:56,765 - INFO - All queues initialized on loop 140461574102896
2025-06-01 14:16:56,765 - INFO - Shared queues initialized.
2025-06-01 14:16:56,766 - INFO - Retrieved queue instances. Event loop ID: 140461574102896
2025-06-01 14:16:56,766 - INFO - SimulationManager ready state changed from False to True
2025-06-01 14:16:56,766 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 14:16:56,766 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 14:16:56,766 - INFO - Starting MessageProcessor task.
2025-06-01 14:16:56,767 - INFO - MessageProcessor task created and running in background.
2025-06-01 14:16:56,767 - INFO - MessageProcessor task started.
2025-06-01 14:16:56,767 - INFO - QueueForwarder initialized with all queues
2025-06-01 14:16:56,767 - INFO - QueueForwarder queues already initialized
2025-06-01 14:16:56,767 - INFO - QueueForwarder task started.
2025-06-01 14:16:56,768 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 14:16:56,768 - INFO - MessageProcessor main loop started.
2025-06-01 14:16:56,768 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:16:56,770 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 14:16:56,770 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:16:57,770 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:16:58,771 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:16:59,774 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:16:59,872 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=38216)
2025-06-01 14:16:59,872 - INFO - Adding connection: 127.0.0.1:38216. Total connections: 1
2025-06-01 14:16:59,873 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:16:59,874 - INFO - Sent connection_ack to 127.0.0.1:38216
2025-06-01 14:16:59,874 - INFO - Sender task started for 127.0.0.1:38216
2025-06-01 14:16:59,874 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:16:59,874 - INFO - Starting receiver for 127.0.0.1:38216 with message tracing
2025-06-01 14:16:59,891 - DEBUG - Received raw WebSocket data from 127.0.0.1:38216: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748780219876,"id":"frontend-init-1748780219876"}
2025-06-01 14:16:59,892 - DEBUG - Successfully parsed JSON to dict: {'type': 'frontend_ready_ack', 'data': {'message': 'Frontend ready to receive', 'version': '1.0', 'status': 'ready', 'capabilities': ['ping-pong']}, 'timestamp': 1748780219876, 'id': 'frontend-init-1748780219876'}
2025-06-01 14:16:59,892 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:38216
2025-06-01 14:16:59,892 - DEBUG - Receiver #1 for 127.0.0.1:38216 - Enqueuing frontend_ready_ack (ID: frontend-init-1748780219876)
2025-06-01 14:16:59,892 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:17:00,172 - INFO - WebSocket disconnected from 127.0.0.1:38216 while receiving: Code 1001
2025-06-01 14:17:00,173 - INFO - Receiver task for 127.0.0.1:38216 finished.
2025-06-01 14:17:00,628 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=38222)
2025-06-01 14:17:00,628 - INFO - Adding connection: 127.0.0.1:38222. Total connections: 2
2025-06-01 14:17:00,629 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:00,630 - INFO - Sent connection_ack to 127.0.0.1:38222
2025-06-01 14:17:00,630 - INFO - Sender task started for 127.0.0.1:38222
2025-06-01 14:17:00,630 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:00,630 - INFO - Starting receiver for 127.0.0.1:38222 with message tracing
2025-06-01 14:17:00,633 - DEBUG - Received raw WebSocket data from 127.0.0.1:38222: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748780220632,"id":"frontend-init-1748780220632"}
2025-06-01 14:17:00,633 - DEBUG - Successfully parsed JSON to dict: {'type': 'frontend_ready_ack', 'data': {'message': 'Frontend ready to receive', 'version': '1.0', 'status': 'ready', 'capabilities': ['ping-pong']}, 'timestamp': 1748780220632, 'id': 'frontend-init-1748780220632'}
2025-06-01 14:17:00,634 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:38222
2025-06-01 14:17:00,634 - DEBUG - Receiver #1 for 127.0.0.1:38222 - Enqueuing frontend_ready_ack (ID: frontend-init-1748780220632)
2025-06-01 14:17:00,634 - DEBUG - Enqueued to 'from_frontend', size: 2
2025-06-01 14:17:00,776 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:00,876 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:01,632 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:01,771 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:17:01,778 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:01,877 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:02,633 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:02,780 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:02,878 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:03,634 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:03,782 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:03,879 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:04,635 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:04,783 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:04,880 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:05,637 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:05,785 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:05,881 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:06,638 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:06,772 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:17:06,787 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:06,882 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:07,639 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:07,790 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:07,884 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:08,640 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:08,792 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:08,885 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:09,641 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:09,794 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:09,886 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:10,641 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:10,796 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:10,888 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:11,642 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:11,773 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:17:11,797 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:11,889 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:12,643 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:12,800 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:12,891 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:13,644 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:13,802 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:13,891 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:14,646 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:14,804 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:14,892 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:15,647 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:15,806 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:15,893 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:16,648 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:16,774 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:17:16,808 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:16,894 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:17,649 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:17,810 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:17,895 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:18,651 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:18,812 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:18,896 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:19,652 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:19,814 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:19,897 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:20,653 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:20,817 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:20,897 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:21,654 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:21,774 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:17:21,818 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:21,898 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:22,655 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:22,820 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:22,899 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:23,656 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:23,822 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:23,900 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:24,658 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:24,824 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:24,901 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:25,634 - DEBUG - Received raw WebSocket data from 127.0.0.1:38222: {"type":"ping","data":{"ping":true},"timestamp":1748780245632}
2025-06-01 14:17:25,634 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748780245632}
2025-06-01 14:17:25,635 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:38222
2025-06-01 14:17:25,635 - DEBUG - Receiver #2 for 127.0.0.1:38222 - Enqueuing ping (ID: c4b06b25-4875-49d5-8ae6-9dcbde77fb3f)
2025-06-01 14:17:25,635 - DEBUG - Enqueued to 'from_frontend', size: 3
2025-06-01 14:17:25,659 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:25,826 - ERROR - Error during MessageProcessor main loop: 'function' object has no attribute 'dequeue'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 73, in _process_messages
    message = await self._input_queue.dequeue()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'function' object has no attribute 'dequeue'
2025-06-01 14:17:25,903 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:17:26,332 - INFO - WebSocket disconnected from 127.0.0.1:38222 while receiving: Code 1012
2025-06-01 14:17:26,332 - INFO - Receiver task for 127.0.0.1:38222 finished.
2025-06-01 14:19:55,774 - INFO - Application startup event triggered.
2025-06-01 14:19:55,775 - INFO - Initializing all queues...
2025-06-01 14:19:55,775 - INFO - All queues initialized on loop 53329440
2025-06-01 14:19:55,775 - INFO - Shared queues initialized.
2025-06-01 14:19:55,775 - INFO - Retrieved queue instances. Event loop ID: 53329440
2025-06-01 14:19:55,775 - INFO - SimulationManager ready state changed from False to True
2025-06-01 14:19:55,775 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 14:19:55,775 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 14:19:55,775 - INFO - Starting MessageProcessor task.
2025-06-01 14:19:55,775 - INFO - MessageProcessor task created and running in background.
2025-06-01 14:19:55,775 - INFO - MessageProcessor task started.
2025-06-01 14:19:55,776 - INFO - QueueForwarder initialized with all queues
2025-06-01 14:19:55,776 - INFO - QueueForwarder queues already initialized
2025-06-01 14:19:55,776 - INFO - QueueForwarder task started.
2025-06-01 14:19:55,776 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 14:19:55,776 - INFO - MessageProcessor main loop started.
2025-06-01 14:19:55,776 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:19:55,776 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 14:19:55,776 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:19:57,358 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=42102)
2025-06-01 14:19:57,358 - INFO - Adding connection: 127.0.0.1:42102. Total connections: 1
2025-06-01 14:19:57,359 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:19:57,360 - INFO - Sent connection_ack to 127.0.0.1:42102
2025-06-01 14:19:57,360 - INFO - Sender task started for 127.0.0.1:42102
2025-06-01 14:19:57,360 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:19:57,360 - INFO - Starting receiver for 127.0.0.1:42102 with message tracing
2025-06-01 14:19:57,369 - DEBUG - Received raw WebSocket data from 127.0.0.1:42102: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748780397368,"id":"frontend-init-1748780397368"}
2025-06-01 14:19:57,369 - DEBUG - Successfully parsed JSON to dict: {'type': 'frontend_ready_ack', 'data': {'message': 'Frontend ready to receive', 'version': '1.0', 'status': 'ready', 'capabilities': ['ping-pong']}, 'timestamp': 1748780397368, 'id': 'frontend-init-1748780397368'}
2025-06-01 14:19:57,370 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:42102
2025-06-01 14:19:57,370 - DEBUG - Receiver #1 for 127.0.0.1:42102 - Enqueuing frontend_ready_ack (ID: frontend-init-1748780397368)
2025-06-01 14:19:57,370 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:19:57,370 - DEBUG - MessageProcessor dequeued message frontend-init-1748780397368 of type 'frontend_ready_ack'.
2025-06-01 14:19:57,370 - DEBUG - Processing message frontend-init-1748780397368 (type: frontend_ready_ack, client: 127.0.0.1:42102)
2025-06-01 14:19:57,370 - DEBUG - Processing frontend_ready_ack message from 127.0.0.1:42102
2025-06-01 14:19:57,371 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:42102. Status: Frontend ready to receive
2025-06-01 14:19:57,371 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:19:58,360 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:19:59,360 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:00,361 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:00,776 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:20:01,361 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:02,361 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:03,361 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:04,361 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:05,361 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:05,777 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:20:06,361 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:07,362 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:08,362 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:09,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:10,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:10,777 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:20:11,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:12,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:13,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:14,364 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:15,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:15,777 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:20:16,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:17,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:17,572 - DEBUG - Received raw WebSocket data from 127.0.0.1:42102: {"type":"command","data":{"command":"set_translation_settings","mode":"formal","context_level":3},"timestamp":1748780417.571}
2025-06-01 14:20:17,572 - DEBUG - Successfully parsed JSON to dict: {'type': 'command', 'data': {'command': 'set_translation_settings', 'mode': 'formal', 'context_level': 3}, 'timestamp': 1748780417.571}
2025-06-01 14:20:17,573 - INFO - Enqueuing valid message of type 'command' from 127.0.0.1:42102
2025-06-01 14:20:17,573 - DEBUG - Receiver #2 for 127.0.0.1:42102 - Enqueuing command (ID: 343cebcc-6368-4cb3-b3cc-01169fe1de66)
2025-06-01 14:20:17,573 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:20:17,573 - DEBUG - MessageProcessor dequeued message 343cebcc-6368-4cb3-b3cc-01169fe1de66 of type 'command'.
2025-06-01 14:20:17,573 - DEBUG - Processing message 343cebcc-6368-4cb3-b3cc-01169fe1de66 (type: command, client: 127.0.0.1:42102)
2025-06-01 14:20:17,573 - DEBUG - Processing command message from 127.0.0.1:42102
2025-06-01 14:20:17,573 - INFO - MessageProcessor: Processing command 'set_translation_settings' from 127.0.0.1:42102
2025-06-01 14:20:17,574 - DEBUG - Retrieved SimulationManager instance
2025-06-01 14:20:17,574 - INFO - Generated error response for command 'set_translation_settings'
2025-06-01 14:20:17,574 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:20:17,574 - INFO - Enqueued response type 'error' to to_frontend_queue for client 127.0.0.1:42102.
2025-06-01 14:20:17,574 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 14:20:17,574 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:20:17,574 - DEBUG - Forwarded message from queue to client: error
2025-06-01 14:20:17,585 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:18,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:19,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:20,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:20,777 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:20:21,363 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:22,364 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:22,370 - DEBUG - Received raw WebSocket data from 127.0.0.1:42102: {"type":"ping","data":{"ping":true},"timestamp":1748780422369}
2025-06-01 14:20:22,371 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748780422369}
2025-06-01 14:20:22,371 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:42102
2025-06-01 14:20:22,371 - DEBUG - Receiver #3 for 127.0.0.1:42102 - Enqueuing ping (ID: 6cf03d6d-fe10-49a1-9e08-5c65caa70818)
2025-06-01 14:20:22,371 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:20:22,371 - DEBUG - MessageProcessor dequeued message 6cf03d6d-fe10-49a1-9e08-5c65caa70818 of type 'ping'.
2025-06-01 14:20:22,371 - DEBUG - Processing message 6cf03d6d-fe10-49a1-9e08-5c65caa70818 (type: ping, client: 127.0.0.1:42102)
2025-06-01 14:20:22,371 - DEBUG - Processing ping message from 127.0.0.1:42102
2025-06-01 14:20:22,372 - INFO - MessageProcessor: Received ping from 127.0.0.1:42102. Responding with pong.
2025-06-01 14:20:22,372 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:20:22,372 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:42102.
2025-06-01 14:20:22,372 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:20:22,372 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:20:22,383 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:23,365 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:24,365 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:25,366 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:25,777 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:20:26,367 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:27,367 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:28,367 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:29,367 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:30,367 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:30,778 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:20:31,368 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:32,368 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:33,368 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:34,369 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:35,369 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:35,779 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:20:36,369 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:37,369 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:38,370 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:39,370 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:40,371 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:40,779 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:20:41,371 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:20:41,633 - INFO - WebSocket disconnected from 127.0.0.1:42102 while receiving: Code 1012
2025-06-01 14:20:41,633 - INFO - Receiver task for 127.0.0.1:42102 finished.
2025-06-01 14:20:42,235 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 14:20:42,236 - INFO - MessageProcessor main loop stopped.
2025-06-01 14:20:42,236 - INFO - Message forwarding task for Address(host='127.0.0.1', port=42102) cancelled.
2025-06-01 14:20:42,236 - INFO - Application shutdown event triggered.
2025-06-01 14:20:42,236 - DEBUG - Retrieved SimulationManager instance
2025-06-01 14:20:42,237 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 14:20:42,237 - INFO - Simulation is not running. No action needed.
2025-06-01 14:20:42,237 - INFO - SimulationManager stop method called.
2025-06-01 14:20:42,237 - INFO - Stopping MessageProcessor...
2025-06-01 14:20:42,237 - INFO - MessageProcessor shutdown complete.
2025-06-01 14:20:42,237 - INFO - Stopping QueueForwarder...
2025-06-01 14:20:42,237 - DEBUG - QueueForwarder shutdown initiated
2025-06-01 14:20:42,237 - INFO - Calling SimulationManager instance stop method...
2025-06-01 14:20:42,237 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 14:20:42,238 - INFO - Simulation is not running. No action needed.
2025-06-01 14:20:42,238 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 14:20:42,238 - INFO - Application shutdown complete.
2025-06-01 14:20:42,239 - INFO - Dead Letter Queue monitor task cancelled gracefully.
2025-06-01 14:20:42,239 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 14:20:42,239 - INFO - Sender task for 127.0.0.1:42102 was cancelled normally.
2025-06-01 14:20:42,239 - INFO - Sender task for 127.0.0.1:42102 finished.
2025-06-01 14:20:42,239 - INFO - Initiating cleanup for connection: 127.0.0.1:42102
2025-06-01 14:20:42,240 - INFO - Starting cleanup for 127.0.0.1:42102
2025-06-01 14:20:42,240 - DEBUG - WebSocket for 127.0.0.1:42102 was already disconnected (client_state: WebSocketState.DISCONNECTED)
2025-06-01 14:20:42,240 - INFO - Connection cleanup completed for 127.0.0.1:42102. Remaining connections: 0
2025-06-01 14:20:42,240 - INFO - Cleanup finished for connection: 127.0.0.1:42102. Total connections: 0
2025-06-01 14:20:42,240 - INFO - Cleanup finished for Address(host='127.0.0.1', port=42102) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 14:23:03,813 - INFO - Application startup event triggered.
2025-06-01 14:23:03,813 - INFO - Initializing all queues...
2025-06-01 14:23:03,813 - INFO - All queues initialized on loop 275619360
2025-06-01 14:23:03,813 - INFO - Shared queues initialized.
2025-06-01 14:23:03,814 - INFO - Retrieved queue instances. Event loop ID: 275619360
2025-06-01 14:23:03,814 - INFO - SimulationManager ready state changed from False to True
2025-06-01 14:23:03,814 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 14:23:03,814 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 14:23:03,814 - INFO - Starting MessageProcessor task.
2025-06-01 14:23:03,814 - INFO - MessageProcessor task created and running in background.
2025-06-01 14:23:03,814 - INFO - MessageProcessor task started.
2025-06-01 14:23:03,814 - INFO - QueueForwarder initialized with all queues
2025-06-01 14:23:03,814 - INFO - QueueForwarder queues already initialized
2025-06-01 14:23:03,814 - INFO - QueueForwarder task started.
2025-06-01 14:23:03,815 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 14:23:03,815 - INFO - MessageProcessor main loop started.
2025-06-01 14:23:03,815 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:23:03,815 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 14:23:03,815 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:23:05,423 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=37264)
2025-06-01 14:23:05,423 - INFO - Adding connection: 127.0.0.1:37264. Total connections: 1
2025-06-01 14:23:05,424 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:05,425 - INFO - Sent connection_ack to 127.0.0.1:37264
2025-06-01 14:23:05,425 - INFO - Sender task started for 127.0.0.1:37264
2025-06-01 14:23:05,425 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:05,425 - INFO - Starting receiver for 127.0.0.1:37264 with message tracing
2025-06-01 14:23:05,434 - DEBUG - Received raw WebSocket data from 127.0.0.1:37264: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748780585433,"id":"frontend-init-1748780585433"}
2025-06-01 14:23:05,435 - DEBUG - Successfully parsed JSON to dict: {'type': 'frontend_ready_ack', 'data': {'message': 'Frontend ready to receive', 'version': '1.0', 'status': 'ready', 'capabilities': ['ping-pong']}, 'timestamp': 1748780585433, 'id': 'frontend-init-1748780585433'}
2025-06-01 14:23:05,435 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:37264
2025-06-01 14:23:05,435 - DEBUG - Receiver #1 for 127.0.0.1:37264 - Enqueuing frontend_ready_ack (ID: frontend-init-1748780585433)
2025-06-01 14:23:05,435 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:23:05,435 - DEBUG - MessageProcessor dequeued message frontend-init-1748780585433 of type 'frontend_ready_ack'.
2025-06-01 14:23:05,435 - DEBUG - Processing message frontend-init-1748780585433 (type: frontend_ready_ack, client: 127.0.0.1:37264)
2025-06-01 14:23:05,436 - DEBUG - Processing frontend_ready_ack message from 127.0.0.1:37264
2025-06-01 14:23:05,436 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:37264. Status: Frontend ready to receive
2025-06-01 14:23:05,436 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:23:06,425 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:07,426 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:08,427 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:08,816 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:23:09,427 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:10,427 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:11,427 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:12,427 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:13,428 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:13,817 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:23:14,428 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:15,429 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:16,429 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:17,429 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:18,429 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:18,817 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:23:19,429 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:20,429 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:21,430 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:22,431 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:23,431 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:23,817 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:23:24,431 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:25,431 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:26,432 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:27,041 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=50178)
2025-06-01 14:23:27,042 - INFO - Adding connection: 127.0.0.1:50178. Total connections: 2
2025-06-01 14:23:27,042 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:27,043 - INFO - Sent connection_ack to 127.0.0.1:50178
2025-06-01 14:23:27,043 - INFO - Sender task started for 127.0.0.1:50178
2025-06-01 14:23:27,043 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:27,044 - INFO - Starting receiver for 127.0.0.1:50178 with message tracing
2025-06-01 14:23:27,047 - DEBUG - Received raw WebSocket data from 127.0.0.1:50178: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748780607045,"id":"frontend-init-1748780607045"}
2025-06-01 14:23:27,047 - DEBUG - Successfully parsed JSON to dict: {'type': 'frontend_ready_ack', 'data': {'message': 'Frontend ready to receive', 'version': '1.0', 'status': 'ready', 'capabilities': ['ping-pong']}, 'timestamp': 1748780607045, 'id': 'frontend-init-1748780607045'}
2025-06-01 14:23:27,047 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:50178
2025-06-01 14:23:27,047 - DEBUG - Receiver #1 for 127.0.0.1:50178 - Enqueuing frontend_ready_ack (ID: frontend-init-1748780607045)
2025-06-01 14:23:27,048 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:23:27,048 - DEBUG - MessageProcessor dequeued message frontend-init-1748780607045 of type 'frontend_ready_ack'.
2025-06-01 14:23:27,048 - DEBUG - Processing message frontend-init-1748780607045 (type: frontend_ready_ack, client: 127.0.0.1:50178)
2025-06-01 14:23:27,048 - DEBUG - Processing frontend_ready_ack message from 127.0.0.1:50178
2025-06-01 14:23:27,048 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:50178. Status: Frontend ready to receive
2025-06-01 14:23:27,048 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 14:23:27,048 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:23:27,432 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:28,043 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:28,432 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:28,817 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:23:29,043 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:29,432 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:30,043 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:30,433 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:30,435 - DEBUG - Received raw WebSocket data from 127.0.0.1:37264: {"type":"ping","data":{"ping":true},"timestamp":1748780610434}
2025-06-01 14:23:30,435 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748780610434}
2025-06-01 14:23:30,435 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:37264
2025-06-01 14:23:30,436 - DEBUG - Receiver #2 for 127.0.0.1:37264 - Enqueuing ping (ID: 88673a76-9068-4d7d-9fa6-e6349fb619a1)
2025-06-01 14:23:30,436 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:23:30,436 - DEBUG - MessageProcessor dequeued message 88673a76-9068-4d7d-9fa6-e6349fb619a1 of type 'ping'.
2025-06-01 14:23:30,436 - DEBUG - Processing message 88673a76-9068-4d7d-9fa6-e6349fb619a1 (type: ping, client: 127.0.0.1:37264)
2025-06-01 14:23:30,436 - DEBUG - Processing ping message from 127.0.0.1:37264
2025-06-01 14:23:30,436 - INFO - MessageProcessor: Received ping from 127.0.0.1:37264. Responding with pong.
2025-06-01 14:23:30,436 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:23:30,437 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:37264.
2025-06-01 14:23:30,437 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:23:30,437 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:23:30,448 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:31,044 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:31,433 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:32,044 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:32,433 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:33,044 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:33,433 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:33,817 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:23:34,045 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:34,434 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:35,046 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:35,434 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:36,046 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:36,434 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:37,046 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:37,434 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:23:37,740 - INFO - WebSocket disconnected from 127.0.0.1:37264 while receiving: Code 1012
2025-06-01 14:23:37,740 - INFO - Receiver task for 127.0.0.1:37264 finished.
2025-06-01 14:23:37,740 - INFO - WebSocket disconnected from 127.0.0.1:50178 while receiving: Code 1012
2025-06-01 14:23:37,740 - INFO - Receiver task for 127.0.0.1:50178 finished.
2025-06-01 14:23:37,841 - INFO - Message forwarding task for Address(host='127.0.0.1', port=37264) cancelled.
2025-06-01 14:23:37,841 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 14:23:37,841 - INFO - MessageProcessor main loop stopped.
2025-06-01 14:23:37,841 - INFO - Application shutdown event triggered.
2025-06-01 14:23:37,841 - DEBUG - Retrieved SimulationManager instance
2025-06-01 14:23:37,842 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 14:23:37,842 - INFO - Simulation is not running. No action needed.
2025-06-01 14:23:37,842 - INFO - SimulationManager stop method called.
2025-06-01 14:23:37,842 - INFO - Stopping MessageProcessor...
2025-06-01 14:23:37,842 - INFO - MessageProcessor shutdown complete.
2025-06-01 14:23:37,842 - INFO - Stopping QueueForwarder...
2025-06-01 14:23:37,842 - DEBUG - QueueForwarder shutdown initiated
2025-06-01 14:23:37,842 - INFO - Calling SimulationManager instance stop method...
2025-06-01 14:23:37,842 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 14:23:37,842 - INFO - Simulation is not running. No action needed.
2025-06-01 14:23:37,842 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 14:23:37,842 - INFO - Application shutdown complete.
2025-06-01 14:23:37,844 - INFO - Message forwarding task for Address(host='127.0.0.1', port=50178) cancelled.
2025-06-01 14:23:37,844 - INFO - Sender task for 127.0.0.1:37264 was cancelled normally.
2025-06-01 14:23:37,844 - INFO - Sender task for 127.0.0.1:37264 finished.
2025-06-01 14:23:37,844 - INFO - Dead Letter Queue monitor task cancelled gracefully.
2025-06-01 14:23:37,844 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 14:23:37,844 - INFO - Sender task for 127.0.0.1:50178 was cancelled normally.
2025-06-01 14:23:37,844 - INFO - Sender task for 127.0.0.1:50178 finished.
2025-06-01 14:23:37,844 - INFO - Initiating cleanup for connection: 127.0.0.1:37264
2025-06-01 14:23:37,844 - INFO - Starting cleanup for 127.0.0.1:37264
2025-06-01 14:23:37,844 - DEBUG - WebSocket for 127.0.0.1:37264 was already disconnected (client_state: WebSocketState.DISCONNECTED)
2025-06-01 14:23:37,844 - INFO - Connection cleanup completed for 127.0.0.1:37264. Remaining connections: 1
2025-06-01 14:23:37,845 - INFO - Cleanup finished for connection: 127.0.0.1:37264. Total connections: 1
2025-06-01 14:23:37,845 - INFO - Cleanup finished for Address(host='127.0.0.1', port=37264) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 14:23:37,848 - INFO - Initiating cleanup for connection: 127.0.0.1:50178
2025-06-01 14:23:37,848 - INFO - Starting cleanup for 127.0.0.1:50178
2025-06-01 14:23:37,848 - DEBUG - WebSocket for 127.0.0.1:50178 was already disconnected (client_state: WebSocketState.DISCONNECTED)
2025-06-01 14:23:37,848 - INFO - Connection cleanup completed for 127.0.0.1:50178. Remaining connections: 0
2025-06-01 14:23:37,848 - INFO - Cleanup finished for connection: 127.0.0.1:50178. Total connections: 0
2025-06-01 14:23:37,848 - INFO - Cleanup finished for Address(host='127.0.0.1', port=50178) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 14:28:25,486 - INFO - Application startup event triggered.
2025-06-01 14:28:25,486 - INFO - Initializing all queues...
2025-06-01 14:28:25,486 - INFO - All queues initialized on loop 140148636694960
2025-06-01 14:28:25,487 - INFO - Shared queues initialized.
2025-06-01 14:28:25,487 - INFO - Retrieved queue instances. Event loop ID: 140148636694960
2025-06-01 14:28:25,487 - INFO - SimulationManager ready state changed from False to True
2025-06-01 14:28:25,487 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 14:28:25,487 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 14:28:25,488 - INFO - Starting MessageProcessor task.
2025-06-01 14:28:25,488 - INFO - MessageProcessor task created and running in background.
2025-06-01 14:28:25,488 - INFO - MessageProcessor task started.
2025-06-01 14:28:25,488 - INFO - QueueForwarder initialized with all queues
2025-06-01 14:28:25,488 - INFO - QueueForwarder queues already initialized
2025-06-01 14:28:25,489 - INFO - QueueForwarder task started.
2025-06-01 14:28:25,489 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 14:28:25,489 - INFO - MessageProcessor main loop started.
2025-06-01 14:28:25,489 - DEBUG - Queue 'to_backend' empty, waiting to dequeue...
2025-06-01 14:28:25,490 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 14:28:25,490 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:28:27,777 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=32810)
2025-06-01 14:28:27,778 - INFO - Adding connection: 127.0.0.1:32810. Total connections: 1
2025-06-01 14:28:27,779 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:27,779 - INFO - Sent connection_ack to 127.0.0.1:32810
2025-06-01 14:28:27,780 - INFO - Sender task started for 127.0.0.1:32810
2025-06-01 14:28:27,780 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:27,780 - INFO - Starting receiver for 127.0.0.1:32810 with message tracing
2025-06-01 14:28:27,796 - DEBUG - Received raw WebSocket data from 127.0.0.1:32810: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748780907781,"id":"frontend-init-1748780907781"}
2025-06-01 14:28:27,796 - DEBUG - Successfully parsed JSON to dict: {'type': 'frontend_ready_ack', 'data': {'message': 'Frontend ready to receive', 'version': '1.0', 'status': 'ready', 'capabilities': ['ping-pong']}, 'timestamp': 1748780907781, 'id': 'frontend-init-1748780907781'}
2025-06-01 14:28:27,797 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:32810
2025-06-01 14:28:27,797 - DEBUG - Receiver #1 for 127.0.0.1:32810 - Enqueuing frontend_ready_ack (ID: frontend-init-1748780907781)
2025-06-01 14:28:27,797 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:28:28,782 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:29,783 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:30,283 - DEBUG - Received raw WebSocket data from 127.0.0.1:32810: {"type":"ping","data":{"ping":true},"timestamp":1748780910281}
2025-06-01 14:28:30,283 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748780910281}
2025-06-01 14:28:30,284 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:32810
2025-06-01 14:28:30,284 - DEBUG - Receiver #2 for 127.0.0.1:32810 - Enqueuing ping (ID: 655f9a4c-5585-4c28-bc19-fe570655a6d3)
2025-06-01 14:28:30,284 - DEBUG - Enqueued to 'from_frontend', size: 2
2025-06-01 14:28:30,491 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:28:30,784 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:31,786 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:32,783 - DEBUG - Received raw WebSocket data from 127.0.0.1:32810: {"type":"ping","data":{"ping":true},"timestamp":1748780912781}
2025-06-01 14:28:32,784 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748780912781}
2025-06-01 14:28:32,784 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:32810
2025-06-01 14:28:32,785 - DEBUG - Receiver #3 for 127.0.0.1:32810 - Enqueuing ping (ID: 2bcfcd2d-c990-4618-b8d0-6b1956b461f9)
2025-06-01 14:28:32,785 - DEBUG - Enqueued to 'from_frontend', size: 3
2025-06-01 14:28:32,786 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:33,787 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:34,789 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:35,283 - DEBUG - Received raw WebSocket data from 127.0.0.1:32810: {"type":"ping","data":{"ping":true},"timestamp":1748780915281}
2025-06-01 14:28:35,283 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748780915281}
2025-06-01 14:28:35,284 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:32810
2025-06-01 14:28:35,284 - DEBUG - Receiver #4 for 127.0.0.1:32810 - Enqueuing ping (ID: 2ef2791d-0514-4101-9cf1-fccd050ea44e)
2025-06-01 14:28:35,284 - DEBUG - Enqueued to 'from_frontend', size: 4
2025-06-01 14:28:35,493 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:28:35,790 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:36,792 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:37,783 - DEBUG - Received raw WebSocket data from 127.0.0.1:32810: {"type":"ping","data":{"ping":true},"timestamp":1748780917781}
2025-06-01 14:28:37,784 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748780917781}
2025-06-01 14:28:37,784 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:32810
2025-06-01 14:28:37,784 - DEBUG - Receiver #5 for 127.0.0.1:32810 - Enqueuing ping (ID: b57de1c6-0b18-4925-860b-59c9e96083a0)
2025-06-01 14:28:37,785 - DEBUG - Enqueued to 'from_frontend', size: 5
2025-06-01 14:28:37,792 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:38,793 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:39,795 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:40,283 - DEBUG - Received raw WebSocket data from 127.0.0.1:32810: {"type":"ping","data":{"ping":true},"timestamp":1748780920281}
2025-06-01 14:28:40,283 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748780920281}
2025-06-01 14:28:40,284 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:32810
2025-06-01 14:28:40,284 - DEBUG - Receiver #6 for 127.0.0.1:32810 - Enqueuing ping (ID: c223c0a2-e9f1-4e0e-9565-01518372f86b)
2025-06-01 14:28:40,284 - DEBUG - Enqueued to 'from_frontend', size: 6
2025-06-01 14:28:40,494 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:28:40,797 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:41,798 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:42,784 - DEBUG - Received raw WebSocket data from 127.0.0.1:32810: {"type":"ping","data":{"ping":true},"timestamp":1748780922781}
2025-06-01 14:28:42,784 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748780922781}
2025-06-01 14:28:42,785 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:32810
2025-06-01 14:28:42,785 - DEBUG - Receiver #7 for 127.0.0.1:32810 - Enqueuing ping (ID: 7ac49a01-4640-495e-bb69-3b63a2d616e6)
2025-06-01 14:28:42,785 - DEBUG - Enqueued to 'from_frontend', size: 7
2025-06-01 14:28:42,798 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:43,800 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:44,368 - INFO - WebSocket disconnected from 127.0.0.1:32810 while receiving: Code 1001
2025-06-01 14:28:44,369 - INFO - Receiver task for 127.0.0.1:32810 finished.
2025-06-01 14:28:44,801 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:45,496 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:28:45,802 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:46,803 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:47,804 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:48,805 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:49,808 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:50,497 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:28:50,809 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:51,810 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:52,811 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:53,811 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:54,812 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:55,498 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:28:55,814 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:56,816 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:57,817 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:58,818 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:28:59,819 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:00,499 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:29:00,820 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:01,821 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:02,822 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:03,824 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:04,825 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:05,500 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:29:05,826 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:06,828 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:07,829 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:08,830 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:09,830 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:10,501 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:29:10,831 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:11,832 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:12,832 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:13,833 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:14,835 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:15,502 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:29:15,836 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:16,837 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:17,839 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:18,840 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:19,840 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:20,503 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:29:20,841 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:21,842 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:22,844 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:23,845 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:24,846 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:25,504 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:29:25,847 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:26,848 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:27,849 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:28,850 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:29,851 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:30,505 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:29:30,852 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:31,853 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:32,854 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:33,855 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:34,857 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:35,507 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:29:35,858 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:36,861 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:37,863 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:38,863 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:39,865 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:40,508 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:29:40,868 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:41,869 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:42,870 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:43,871 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:44,872 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:45,510 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:29:45,873 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:46,874 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:47,875 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:48,875 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:49,877 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:50,511 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:29:50,878 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:51,879 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:52,880 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:53,882 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:54,883 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:55,512 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:29:55,883 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:56,884 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:57,886 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:58,886 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:29:59,887 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:00,513 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:30:00,889 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:01,890 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:02,891 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:03,891 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:04,892 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:05,514 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:30:05,894 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:06,896 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:07,897 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:08,898 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:09,899 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:10,515 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:30:10,900 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:11,901 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:12,901 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:13,902 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:14,902 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:15,516 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:30:15,903 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:16,905 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:17,906 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:18,906 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:19,907 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:20,517 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:30:20,908 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:21,909 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:22,910 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:23,912 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:24,913 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:25,519 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:30:25,914 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:26,915 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:27,916 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:28,917 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:29,918 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:30,520 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:30:30,919 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:31,920 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:32,921 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:33,923 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:34,923 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:35,521 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:30:35,925 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:36,926 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:37,926 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:30:38,927 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:27,599 - INFO - Application startup event triggered.
2025-06-01 14:37:27,599 - INFO - Initializing all queues...
2025-06-01 14:37:27,599 - INFO - All queues initialized on loop 850906656
2025-06-01 14:37:27,599 - INFO - Shared queues initialized.
2025-06-01 14:37:27,599 - INFO - Retrieved queue instances. Event loop ID: 850906656
2025-06-01 14:37:27,599 - INFO - SimulationManager ready state changed from False to True
2025-06-01 14:37:27,599 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 14:37:27,599 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 14:37:27,599 - INFO - Starting MessageProcessor task.
2025-06-01 14:37:27,599 - INFO - MessageProcessor task created and running in background.
2025-06-01 14:37:27,600 - INFO - MessageProcessor task started.
2025-06-01 14:37:27,600 - INFO - QueueForwarder initialized with all queues
2025-06-01 14:37:27,600 - INFO - QueueForwarder queues already initialized
2025-06-01 14:37:27,600 - INFO - QueueForwarder task started.
2025-06-01 14:37:27,600 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 14:37:27,600 - INFO - MessageProcessor main loop started.
2025-06-01 14:37:27,600 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:37:27,600 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 14:37:27,600 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:37:29,291 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=40188)
2025-06-01 14:37:29,291 - INFO - Adding connection: 127.0.0.1:40188. Total connections: 1
2025-06-01 14:37:29,292 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:29,292 - INFO - Sent connection_ack to 127.0.0.1:40188
2025-06-01 14:37:29,292 - INFO - Sender task started for 127.0.0.1:40188
2025-06-01 14:37:29,293 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:29,293 - INFO - Starting receiver for 127.0.0.1:40188 with message tracing
2025-06-01 14:37:29,300 - DEBUG - Received raw WebSocket data from 127.0.0.1:40188: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748781449299,"id":"frontend-init-1748781449299"}
2025-06-01 14:37:29,300 - DEBUG - Successfully parsed JSON to dict: {'type': 'frontend_ready_ack', 'data': {'message': 'Frontend ready to receive', 'version': '1.0', 'status': 'ready', 'capabilities': ['ping-pong']}, 'timestamp': 1748781449299, 'id': 'frontend-init-1748781449299'}
2025-06-01 14:37:29,300 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:40188
2025-06-01 14:37:29,300 - DEBUG - Receiver #1 for 127.0.0.1:40188 - Enqueuing frontend_ready_ack (ID: frontend-init-1748781449299)
2025-06-01 14:37:29,301 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:37:29,301 - DEBUG - MessageProcessor dequeued message frontend-init-1748781449299 of type 'frontend_ready_ack'.
2025-06-01 14:37:29,301 - DEBUG - Processing message frontend-init-1748781449299 (type: frontend_ready_ack, client: 127.0.0.1:40188)
2025-06-01 14:37:29,301 - DEBUG - Processing frontend_ready_ack message from 127.0.0.1:40188
2025-06-01 14:37:29,301 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:40188. Status: Frontend ready to receive
2025-06-01 14:37:29,301 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:37:30,294 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:31,294 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:31,801 - DEBUG - Received raw WebSocket data from 127.0.0.1:40188: {"type":"ping","data":{"ping":true},"timestamp":1748781451799}
2025-06-01 14:37:31,801 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781451799}
2025-06-01 14:37:31,801 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:40188
2025-06-01 14:37:31,802 - DEBUG - Receiver #2 for 127.0.0.1:40188 - Enqueuing ping (ID: d31fd2af-59dd-4b67-9e6d-033f5f207c04)
2025-06-01 14:37:31,802 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:37:31,802 - DEBUG - MessageProcessor dequeued message d31fd2af-59dd-4b67-9e6d-033f5f207c04 of type 'ping'.
2025-06-01 14:37:31,802 - DEBUG - Processing message d31fd2af-59dd-4b67-9e6d-033f5f207c04 (type: ping, client: 127.0.0.1:40188)
2025-06-01 14:37:31,802 - DEBUG - Processing ping message from 127.0.0.1:40188
2025-06-01 14:37:31,802 - INFO - MessageProcessor: Received ping from 127.0.0.1:40188. Responding with pong.
2025-06-01 14:37:31,803 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:37:31,803 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:40188.
2025-06-01 14:37:31,803 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:37:31,803 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:37:31,814 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:32,295 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:32,600 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:37:33,295 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:34,296 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:34,300 - DEBUG - Received raw WebSocket data from 127.0.0.1:40188: {"type":"ping","data":{"ping":true},"timestamp":1748781454299}
2025-06-01 14:37:34,300 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781454299}
2025-06-01 14:37:34,301 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:40188
2025-06-01 14:37:34,301 - DEBUG - Receiver #3 for 127.0.0.1:40188 - Enqueuing ping (ID: 170270e9-373a-47ad-ad4b-87b663983a0e)
2025-06-01 14:37:34,301 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:37:34,301 - DEBUG - MessageProcessor dequeued message 170270e9-373a-47ad-ad4b-87b663983a0e of type 'ping'.
2025-06-01 14:37:34,301 - DEBUG - Processing message 170270e9-373a-47ad-ad4b-87b663983a0e (type: ping, client: 127.0.0.1:40188)
2025-06-01 14:37:34,301 - DEBUG - Processing ping message from 127.0.0.1:40188
2025-06-01 14:37:34,302 - INFO - MessageProcessor: Received ping from 127.0.0.1:40188. Responding with pong.
2025-06-01 14:37:34,302 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:37:34,302 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:40188.
2025-06-01 14:37:34,302 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 14:37:34,302 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:37:34,302 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:37:34,313 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:35,296 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:36,296 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:36,801 - DEBUG - Received raw WebSocket data from 127.0.0.1:40188: {"type":"ping","data":{"ping":true},"timestamp":1748781456799}
2025-06-01 14:37:36,801 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781456799}
2025-06-01 14:37:36,801 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:40188
2025-06-01 14:37:36,802 - DEBUG - Receiver #4 for 127.0.0.1:40188 - Enqueuing ping (ID: 1a1f6833-7610-4a33-94fd-0dfe9291f049)
2025-06-01 14:37:36,802 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:37:36,802 - DEBUG - MessageProcessor dequeued message 1a1f6833-7610-4a33-94fd-0dfe9291f049 of type 'ping'.
2025-06-01 14:37:36,802 - DEBUG - Processing message 1a1f6833-7610-4a33-94fd-0dfe9291f049 (type: ping, client: 127.0.0.1:40188)
2025-06-01 14:37:36,802 - DEBUG - Processing ping message from 127.0.0.1:40188
2025-06-01 14:37:36,802 - INFO - MessageProcessor: Received ping from 127.0.0.1:40188. Responding with pong.
2025-06-01 14:37:36,802 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:37:36,802 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:40188.
2025-06-01 14:37:36,803 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:37:36,803 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:37:36,813 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:37,297 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:37,601 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:37:38,298 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:39,298 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:39,301 - DEBUG - Received raw WebSocket data from 127.0.0.1:40188: {"type":"ping","data":{"ping":true},"timestamp":1748781459299}
2025-06-01 14:37:39,301 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781459299}
2025-06-01 14:37:39,301 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:40188
2025-06-01 14:37:39,301 - DEBUG - Receiver #5 for 127.0.0.1:40188 - Enqueuing ping (ID: d4228837-1d38-4b29-b2ee-bb6673a9647d)
2025-06-01 14:37:39,301 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:37:39,302 - DEBUG - MessageProcessor dequeued message d4228837-1d38-4b29-b2ee-bb6673a9647d of type 'ping'.
2025-06-01 14:37:39,302 - DEBUG - Processing message d4228837-1d38-4b29-b2ee-bb6673a9647d (type: ping, client: 127.0.0.1:40188)
2025-06-01 14:37:39,302 - DEBUG - Processing ping message from 127.0.0.1:40188
2025-06-01 14:37:39,302 - INFO - MessageProcessor: Received ping from 127.0.0.1:40188. Responding with pong.
2025-06-01 14:37:39,302 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:37:39,302 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:40188.
2025-06-01 14:37:39,302 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 14:37:39,302 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:37:39,303 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:37:39,313 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:40,299 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:41,300 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:41,801 - DEBUG - Received raw WebSocket data from 127.0.0.1:40188: {"type":"ping","data":{"ping":true},"timestamp":1748781461799}
2025-06-01 14:37:41,802 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781461799}
2025-06-01 14:37:41,802 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:40188
2025-06-01 14:37:41,802 - DEBUG - Receiver #6 for 127.0.0.1:40188 - Enqueuing ping (ID: 5d99c8cb-0394-4a42-9dcb-04f6b949bcf1)
2025-06-01 14:37:41,802 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:37:41,802 - DEBUG - MessageProcessor dequeued message 5d99c8cb-0394-4a42-9dcb-04f6b949bcf1 of type 'ping'.
2025-06-01 14:37:41,803 - DEBUG - Processing message 5d99c8cb-0394-4a42-9dcb-04f6b949bcf1 (type: ping, client: 127.0.0.1:40188)
2025-06-01 14:37:41,803 - DEBUG - Processing ping message from 127.0.0.1:40188
2025-06-01 14:37:41,803 - INFO - MessageProcessor: Received ping from 127.0.0.1:40188. Responding with pong.
2025-06-01 14:37:41,803 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:37:41,803 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:40188.
2025-06-01 14:37:41,803 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:37:41,804 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:37:41,814 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:42,300 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:42,601 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:37:43,300 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:44,300 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:44,302 - DEBUG - Received raw WebSocket data from 127.0.0.1:40188: {"type":"ping","data":{"ping":true},"timestamp":1748781464299}
2025-06-01 14:37:44,302 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781464299}
2025-06-01 14:37:44,302 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:40188
2025-06-01 14:37:44,302 - DEBUG - Receiver #7 for 127.0.0.1:40188 - Enqueuing ping (ID: 533cb9cc-a0f6-44e5-b29f-4af34314fe82)
2025-06-01 14:37:44,302 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:37:44,302 - DEBUG - MessageProcessor dequeued message 533cb9cc-a0f6-44e5-b29f-4af34314fe82 of type 'ping'.
2025-06-01 14:37:44,303 - DEBUG - Processing message 533cb9cc-a0f6-44e5-b29f-4af34314fe82 (type: ping, client: 127.0.0.1:40188)
2025-06-01 14:37:44,303 - DEBUG - Processing ping message from 127.0.0.1:40188
2025-06-01 14:37:44,303 - INFO - MessageProcessor: Received ping from 127.0.0.1:40188. Responding with pong.
2025-06-01 14:37:44,303 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:37:44,303 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:40188.
2025-06-01 14:37:44,303 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 14:37:44,303 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:37:44,304 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:37:44,314 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:45,301 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:46,302 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:46,801 - DEBUG - Received raw WebSocket data from 127.0.0.1:40188: {"type":"ping","data":{"ping":true},"timestamp":1748781466799}
2025-06-01 14:37:46,802 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781466799}
2025-06-01 14:37:46,802 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:40188
2025-06-01 14:37:46,802 - DEBUG - Receiver #8 for 127.0.0.1:40188 - Enqueuing ping (ID: f1d5fa82-48df-4b5d-8096-b2a650668f8a)
2025-06-01 14:37:46,802 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:37:46,803 - DEBUG - MessageProcessor dequeued message f1d5fa82-48df-4b5d-8096-b2a650668f8a of type 'ping'.
2025-06-01 14:37:46,803 - DEBUG - Processing message f1d5fa82-48df-4b5d-8096-b2a650668f8a (type: ping, client: 127.0.0.1:40188)
2025-06-01 14:37:46,803 - DEBUG - Processing ping message from 127.0.0.1:40188
2025-06-01 14:37:46,803 - INFO - MessageProcessor: Received ping from 127.0.0.1:40188. Responding with pong.
2025-06-01 14:37:46,803 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:37:46,803 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:40188.
2025-06-01 14:37:46,804 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:37:46,804 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:37:46,814 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:47,303 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:47,602 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:37:48,303 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:49,301 - DEBUG - Received raw WebSocket data from 127.0.0.1:40188: {"type":"ping","data":{"ping":true},"timestamp":1748781469299}
2025-06-01 14:37:49,301 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781469299}
2025-06-01 14:37:49,302 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:40188
2025-06-01 14:37:49,302 - DEBUG - Receiver #9 for 127.0.0.1:40188 - Enqueuing ping (ID: ef5859bf-685c-4959-abcc-cb51d8561bb3)
2025-06-01 14:37:49,302 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:37:49,302 - DEBUG - MessageProcessor dequeued message ef5859bf-685c-4959-abcc-cb51d8561bb3 of type 'ping'.
2025-06-01 14:37:49,302 - DEBUG - Processing message ef5859bf-685c-4959-abcc-cb51d8561bb3 (type: ping, client: 127.0.0.1:40188)
2025-06-01 14:37:49,302 - DEBUG - Processing ping message from 127.0.0.1:40188
2025-06-01 14:37:49,303 - INFO - MessageProcessor: Received ping from 127.0.0.1:40188. Responding with pong.
2025-06-01 14:37:49,303 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:37:49,303 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:40188.
2025-06-01 14:37:49,303 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:37:49,303 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:37:49,303 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:49,313 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:37:49,368 - INFO - WebSocket disconnected from 127.0.0.1:40188 while receiving: Code 1012
2025-06-01 14:37:49,368 - INFO - Receiver task for 127.0.0.1:40188 finished.
2025-06-01 14:37:49,569 - INFO - Sender task for 127.0.0.1:40188 was cancelled normally.
2025-06-01 14:37:49,570 - INFO - Sender task for 127.0.0.1:40188 finished.
2025-06-01 14:37:49,570 - INFO - Message forwarding task for Address(host='127.0.0.1', port=40188) cancelled.
2025-06-01 14:37:49,570 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 14:37:49,570 - INFO - MessageProcessor main loop stopped.
2025-06-01 14:37:49,570 - INFO - Application shutdown event triggered.
2025-06-01 14:37:49,570 - DEBUG - Retrieved SimulationManager instance
2025-06-01 14:37:49,570 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 14:37:49,570 - INFO - Simulation is not running. No action needed.
2025-06-01 14:37:49,570 - INFO - SimulationManager stop method called.
2025-06-01 14:37:49,571 - INFO - Stopping MessageProcessor...
2025-06-01 14:37:49,571 - INFO - MessageProcessor shutdown complete.
2025-06-01 14:37:49,571 - INFO - Stopping QueueForwarder...
2025-06-01 14:37:49,571 - DEBUG - QueueForwarder shutdown initiated
2025-06-01 14:37:49,571 - INFO - Calling SimulationManager instance stop method...
2025-06-01 14:37:49,571 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 14:37:49,571 - INFO - Simulation is not running. No action needed.
2025-06-01 14:37:49,571 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 14:37:49,571 - INFO - Application shutdown complete.
2025-06-01 14:37:49,572 - INFO - Dead Letter Queue monitor task cancelled gracefully.
2025-06-01 14:37:49,572 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 14:37:49,572 - INFO - Initiating cleanup for connection: 127.0.0.1:40188
2025-06-01 14:37:49,573 - INFO - Starting cleanup for 127.0.0.1:40188
2025-06-01 14:37:49,573 - DEBUG - WebSocket for 127.0.0.1:40188 was already disconnected (client_state: WebSocketState.DISCONNECTED)
2025-06-01 14:37:49,573 - INFO - Connection cleanup completed for 127.0.0.1:40188. Remaining connections: 0
2025-06-01 14:37:49,573 - INFO - Cleanup finished for connection: 127.0.0.1:40188. Total connections: 0
2025-06-01 14:37:49,573 - INFO - Cleanup finished for Address(host='127.0.0.1', port=40188) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 14:40:44,884 - INFO - Application startup event triggered.
2025-06-01 14:40:44,885 - INFO - Initializing all queues...
2025-06-01 14:40:44,885 - INFO - All queues initialized on loop 140433467386400
2025-06-01 14:40:44,885 - INFO - Shared queues initialized.
2025-06-01 14:40:44,885 - INFO - Retrieved queue instances. Event loop ID: 140433467386400
2025-06-01 14:40:44,886 - INFO - SimulationManager ready state changed from False to True
2025-06-01 14:40:44,886 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 14:40:44,886 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 14:40:44,886 - INFO - Starting MessageProcessor task.
2025-06-01 14:40:44,886 - INFO - MessageProcessor task created and running in background.
2025-06-01 14:40:44,886 - INFO - MessageProcessor task started.
2025-06-01 14:40:44,886 - INFO - QueueForwarder initialized with all queues
2025-06-01 14:40:44,886 - INFO - QueueForwarder queues already initialized
2025-06-01 14:40:44,886 - INFO - QueueForwarder task started.
2025-06-01 14:40:44,887 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 14:40:44,887 - INFO - MessageProcessor main loop started.
2025-06-01 14:40:44,887 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:40:44,888 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 14:40:44,888 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:40:47,497 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=46630)
2025-06-01 14:40:47,497 - INFO - Adding connection: 127.0.0.1:46630. Total connections: 1
2025-06-01 14:40:47,498 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:47,499 - INFO - Sent connection_ack to 127.0.0.1:46630
2025-06-01 14:40:47,499 - INFO - Sender task started for 127.0.0.1:46630
2025-06-01 14:40:47,499 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:47,499 - INFO - Starting receiver for 127.0.0.1:46630 with message tracing
2025-06-01 14:40:47,516 - DEBUG - Received raw WebSocket data from 127.0.0.1:46630: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748781647501,"id":"frontend-init-1748781647501"}
2025-06-01 14:40:47,517 - DEBUG - Successfully parsed JSON to dict: {'type': 'frontend_ready_ack', 'data': {'message': 'Frontend ready to receive', 'version': '1.0', 'status': 'ready', 'capabilities': ['ping-pong']}, 'timestamp': 1748781647501, 'id': 'frontend-init-1748781647501'}
2025-06-01 14:40:47,517 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:46630
2025-06-01 14:40:47,517 - DEBUG - Receiver #1 for 127.0.0.1:46630 - Enqueuing frontend_ready_ack (ID: frontend-init-1748781647501)
2025-06-01 14:40:47,517 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:40:47,518 - DEBUG - MessageProcessor dequeued message frontend-init-1748781647501 of type 'frontend_ready_ack'.
2025-06-01 14:40:47,518 - DEBUG - Processing message frontend-init-1748781647501 (type: frontend_ready_ack, client: 127.0.0.1:46630)
2025-06-01 14:40:47,518 - DEBUG - Processing frontend_ready_ack message from 127.0.0.1:46630
2025-06-01 14:40:47,518 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:46630. Status: Frontend ready to receive
2025-06-01 14:40:47,518 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:40:48,500 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:49,501 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:49,889 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:40:50,002 - DEBUG - Received raw WebSocket data from 127.0.0.1:46630: {"type":"ping","data":{"ping":true},"timestamp":1748781650001}
2025-06-01 14:40:50,003 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781650001}
2025-06-01 14:40:50,003 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:46630
2025-06-01 14:40:50,003 - DEBUG - Receiver #2 for 127.0.0.1:46630 - Enqueuing ping (ID: 09355f6f-cf04-4671-bb8a-98f3dd2c30c8)
2025-06-01 14:40:50,004 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:40:50,004 - DEBUG - MessageProcessor dequeued message 09355f6f-cf04-4671-bb8a-98f3dd2c30c8 of type 'ping'.
2025-06-01 14:40:50,004 - DEBUG - Processing message 09355f6f-cf04-4671-bb8a-98f3dd2c30c8 (type: ping, client: 127.0.0.1:46630)
2025-06-01 14:40:50,004 - DEBUG - Processing ping message from 127.0.0.1:46630
2025-06-01 14:40:50,005 - INFO - MessageProcessor: Received ping from 127.0.0.1:46630. Responding with pong.
2025-06-01 14:40:50,005 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:40:50,005 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:46630.
2025-06-01 14:40:50,005 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 14:40:50,005 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:40:50,006 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:40:50,017 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:50,502 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:51,504 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:52,503 - DEBUG - Received raw WebSocket data from 127.0.0.1:46630: {"type":"ping","data":{"ping":true},"timestamp":1748781652501}
2025-06-01 14:40:52,503 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781652501}
2025-06-01 14:40:52,503 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:46630
2025-06-01 14:40:52,504 - DEBUG - Receiver #3 for 127.0.0.1:46630 - Enqueuing ping (ID: 9caefb9c-af05-4841-b72e-96491aebaa42)
2025-06-01 14:40:52,504 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:40:52,504 - DEBUG - MessageProcessor dequeued message 9caefb9c-af05-4841-b72e-96491aebaa42 of type 'ping'.
2025-06-01 14:40:52,504 - DEBUG - Processing message 9caefb9c-af05-4841-b72e-96491aebaa42 (type: ping, client: 127.0.0.1:46630)
2025-06-01 14:40:52,505 - DEBUG - Processing ping message from 127.0.0.1:46630
2025-06-01 14:40:52,505 - INFO - MessageProcessor: Received ping from 127.0.0.1:46630. Responding with pong.
2025-06-01 14:40:52,505 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:40:52,506 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:46630.
2025-06-01 14:40:52,506 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:40:52,506 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:40:52,507 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:52,517 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:53,508 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:54,509 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:54,890 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:40:55,002 - DEBUG - Received raw WebSocket data from 127.0.0.1:46630: {"type":"ping","data":{"ping":true},"timestamp":1748781655001}
2025-06-01 14:40:55,003 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781655001}
2025-06-01 14:40:55,003 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:46630
2025-06-01 14:40:55,003 - DEBUG - Receiver #4 for 127.0.0.1:46630 - Enqueuing ping (ID: ca625c01-b92e-4ddf-94a3-6afe2a9d8206)
2025-06-01 14:40:55,003 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:40:55,004 - DEBUG - MessageProcessor dequeued message ca625c01-b92e-4ddf-94a3-6afe2a9d8206 of type 'ping'.
2025-06-01 14:40:55,004 - DEBUG - Processing message ca625c01-b92e-4ddf-94a3-6afe2a9d8206 (type: ping, client: 127.0.0.1:46630)
2025-06-01 14:40:55,004 - DEBUG - Processing ping message from 127.0.0.1:46630
2025-06-01 14:40:55,004 - INFO - MessageProcessor: Received ping from 127.0.0.1:46630. Responding with pong.
2025-06-01 14:40:55,004 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:40:55,005 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:46630.
2025-06-01 14:40:55,005 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:40:55,005 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:40:55,016 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:55,510 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:56,511 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:57,502 - DEBUG - Received raw WebSocket data from 127.0.0.1:46630: {"type":"ping","data":{"ping":true},"timestamp":1748781657501}
2025-06-01 14:40:57,503 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781657501}
2025-06-01 14:40:57,503 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:46630
2025-06-01 14:40:57,503 - DEBUG - Receiver #5 for 127.0.0.1:46630 - Enqueuing ping (ID: 874a76d4-38a0-425f-9dfd-7397837792e5)
2025-06-01 14:40:57,503 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:40:57,503 - DEBUG - MessageProcessor dequeued message 874a76d4-38a0-425f-9dfd-7397837792e5 of type 'ping'.
2025-06-01 14:40:57,504 - DEBUG - Processing message 874a76d4-38a0-425f-9dfd-7397837792e5 (type: ping, client: 127.0.0.1:46630)
2025-06-01 14:40:57,504 - DEBUG - Processing ping message from 127.0.0.1:46630
2025-06-01 14:40:57,504 - INFO - MessageProcessor: Received ping from 127.0.0.1:46630. Responding with pong.
2025-06-01 14:40:57,504 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:40:57,504 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:46630.
2025-06-01 14:40:57,505 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 14:40:57,505 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:40:57,506 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:40:57,512 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:57,517 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:58,513 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:59,514 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:40:59,891 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:41:00,003 - DEBUG - Received raw WebSocket data from 127.0.0.1:46630: {"type":"ping","data":{"ping":true},"timestamp":1748781660001}
2025-06-01 14:41:00,003 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781660001}
2025-06-01 14:41:00,004 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:46630
2025-06-01 14:41:00,004 - DEBUG - Receiver #6 for 127.0.0.1:46630 - Enqueuing ping (ID: 407d3486-1fd5-4c86-8626-187012df34b2)
2025-06-01 14:41:00,004 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:41:00,004 - DEBUG - MessageProcessor dequeued message 407d3486-1fd5-4c86-8626-187012df34b2 of type 'ping'.
2025-06-01 14:41:00,004 - DEBUG - Processing message 407d3486-1fd5-4c86-8626-187012df34b2 (type: ping, client: 127.0.0.1:46630)
2025-06-01 14:41:00,004 - DEBUG - Processing ping message from 127.0.0.1:46630
2025-06-01 14:41:00,005 - INFO - MessageProcessor: Received ping from 127.0.0.1:46630. Responding with pong.
2025-06-01 14:41:00,005 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:41:00,005 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:46630.
2025-06-01 14:41:00,005 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:41:00,006 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:41:00,016 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:00,515 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:01,516 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:02,503 - DEBUG - Received raw WebSocket data from 127.0.0.1:46630: {"type":"ping","data":{"ping":true},"timestamp":1748781662501}
2025-06-01 14:41:02,503 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781662501}
2025-06-01 14:41:02,504 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:46630
2025-06-01 14:41:02,504 - DEBUG - Receiver #7 for 127.0.0.1:46630 - Enqueuing ping (ID: ff990fd3-e08f-43d7-8813-43cb21b08380)
2025-06-01 14:41:02,504 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:41:02,505 - DEBUG - MessageProcessor dequeued message ff990fd3-e08f-43d7-8813-43cb21b08380 of type 'ping'.
2025-06-01 14:41:02,505 - DEBUG - Processing message ff990fd3-e08f-43d7-8813-43cb21b08380 (type: ping, client: 127.0.0.1:46630)
2025-06-01 14:41:02,505 - DEBUG - Processing ping message from 127.0.0.1:46630
2025-06-01 14:41:02,505 - INFO - MessageProcessor: Received ping from 127.0.0.1:46630. Responding with pong.
2025-06-01 14:41:02,505 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:41:02,506 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:46630.
2025-06-01 14:41:02,506 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 14:41:02,506 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:41:02,507 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:41:02,517 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:02,518 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:03,518 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:04,519 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:04,892 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:41:05,003 - DEBUG - Received raw WebSocket data from 127.0.0.1:46630: {"type":"ping","data":{"ping":true},"timestamp":1748781665001}
2025-06-01 14:41:05,004 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781665001}
2025-06-01 14:41:05,004 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:46630
2025-06-01 14:41:05,005 - DEBUG - Receiver #8 for 127.0.0.1:46630 - Enqueuing ping (ID: 716dc1b5-90ca-40f2-95df-61c08a5392b3)
2025-06-01 14:41:05,005 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:41:05,005 - DEBUG - MessageProcessor dequeued message 716dc1b5-90ca-40f2-95df-61c08a5392b3 of type 'ping'.
2025-06-01 14:41:05,006 - DEBUG - Processing message 716dc1b5-90ca-40f2-95df-61c08a5392b3 (type: ping, client: 127.0.0.1:46630)
2025-06-01 14:41:05,006 - DEBUG - Processing ping message from 127.0.0.1:46630
2025-06-01 14:41:05,006 - INFO - MessageProcessor: Received ping from 127.0.0.1:46630. Responding with pong.
2025-06-01 14:41:05,006 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:41:05,007 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:46630.
2025-06-01 14:41:05,007 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:41:05,007 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:41:05,018 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:05,520 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:06,521 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:07,504 - DEBUG - Received raw WebSocket data from 127.0.0.1:46630: {"type":"ping","data":{"ping":true},"timestamp":1748781667501}
2025-06-01 14:41:07,504 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781667501}
2025-06-01 14:41:07,505 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:46630
2025-06-01 14:41:07,505 - DEBUG - Receiver #9 for 127.0.0.1:46630 - Enqueuing ping (ID: 30596aee-1811-4c1b-b8a1-926a77bd82c8)
2025-06-01 14:41:07,505 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:41:07,505 - DEBUG - MessageProcessor dequeued message 30596aee-1811-4c1b-b8a1-926a77bd82c8 of type 'ping'.
2025-06-01 14:41:07,506 - DEBUG - Processing message 30596aee-1811-4c1b-b8a1-926a77bd82c8 (type: ping, client: 127.0.0.1:46630)
2025-06-01 14:41:07,506 - DEBUG - Processing ping message from 127.0.0.1:46630
2025-06-01 14:41:07,506 - INFO - MessageProcessor: Received ping from 127.0.0.1:46630. Responding with pong.
2025-06-01 14:41:07,506 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:41:07,507 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:46630.
2025-06-01 14:41:07,507 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 14:41:07,507 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:41:07,507 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:41:07,518 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:07,522 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:08,523 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:09,524 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:09,893 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:41:10,004 - DEBUG - Received raw WebSocket data from 127.0.0.1:46630: {"type":"ping","data":{"ping":true},"timestamp":1748781670001}
2025-06-01 14:41:10,004 - DEBUG - Successfully parsed JSON to dict: {'type': 'ping', 'data': {'ping': True}, 'timestamp': 1748781670001}
2025-06-01 14:41:10,004 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:46630
2025-06-01 14:41:10,004 - DEBUG - Receiver #10 for 127.0.0.1:46630 - Enqueuing ping (ID: ed8d1eb1-7e0e-435a-8467-f59fb71b9ea3)
2025-06-01 14:41:10,005 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 14:41:10,005 - DEBUG - MessageProcessor dequeued message ed8d1eb1-7e0e-435a-8467-f59fb71b9ea3 of type 'ping'.
2025-06-01 14:41:10,005 - DEBUG - Processing message ed8d1eb1-7e0e-435a-8467-f59fb71b9ea3 (type: ping, client: 127.0.0.1:46630)
2025-06-01 14:41:10,005 - DEBUG - Processing ping message from 127.0.0.1:46630
2025-06-01 14:41:10,006 - INFO - MessageProcessor: Received ping from 127.0.0.1:46630. Responding with pong.
2025-06-01 14:41:10,006 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 14:41:10,006 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:46630.
2025-06-01 14:41:10,006 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 14:41:10,007 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 14:41:10,017 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:10,525 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:10,701 - INFO - WebSocket disconnected from 127.0.0.1:46630 while receiving: Code 1001
2025-06-01 14:41:10,702 - INFO - Receiver task for 127.0.0.1:46630 finished.
2025-06-01 14:41:11,527 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:12,528 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:13,529 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:14,530 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:14,894 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 14:41:15,530 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:16,531 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:17,533 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:18,533 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:19,534 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 14:41:19,895 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:05:18,210 - INFO - Application startup event triggered.
2025-06-01 15:05:18,211 - INFO - Initializing all queues...
2025-06-01 15:05:18,211 - INFO - All queues initialized on loop 74440224
2025-06-01 15:05:18,211 - INFO - Shared queues initialized.
2025-06-01 15:05:18,211 - INFO - Retrieved queue instances. Event loop ID: 74440224
2025-06-01 15:05:18,211 - INFO - SimulationManager ready state changed from False to True
2025-06-01 15:05:18,211 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 15:05:18,211 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 15:05:18,211 - INFO - Starting MessageProcessor task.
2025-06-01 15:05:18,211 - INFO - MessageProcessor task created and running in background.
2025-06-01 15:05:18,211 - INFO - MessageProcessor task started.
2025-06-01 15:05:18,211 - INFO - QueueForwarder initialized with all queues
2025-06-01 15:05:18,211 - INFO - QueueForwarder queues already initialized
2025-06-01 15:05:18,211 - INFO - QueueForwarder task started.
2025-06-01 15:05:18,211 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 15:05:18,211 - INFO - MessageProcessor main loop started.
2025-06-01 15:05:18,212 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:05:18,212 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 15:05:18,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:05:23,211 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:05:28,211 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:05:33,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:05:38,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:05:43,211 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:05:48,211 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:05:53,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:05:58,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:06:03,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:06:08,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:06:13,213 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:06:18,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:06:23,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:06:28,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:06:33,213 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:06:38,213 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:06:43,213 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:06:48,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:06:53,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:06:58,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:07:03,212 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:07:08,213 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:07:13,213 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:07:18,213 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:07:23,213 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:07:28,214 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:07:28,931 - INFO - Application shutdown event triggered.
2025-06-01 15:07:28,931 - DEBUG - Retrieved SimulationManager instance
2025-06-01 15:07:28,932 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 15:07:28,932 - INFO - Simulation is not running. No action needed.
2025-06-01 15:07:28,932 - INFO - SimulationManager stop method called.
2025-06-01 15:07:28,932 - INFO - Stopping MessageProcessor...
2025-06-01 15:07:28,932 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 15:07:28,932 - INFO - MessageProcessor main loop stopped.
2025-06-01 15:07:28,932 - INFO - MessageProcessor shutdown complete.
2025-06-01 15:07:28,932 - INFO - Stopping QueueForwarder...
2025-06-01 15:07:28,932 - DEBUG - QueueForwarder shutdown initiated
2025-06-01 15:07:28,932 - INFO - Calling SimulationManager instance stop method...
2025-06-01 15:07:28,932 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 15:07:28,933 - INFO - Simulation is not running. No action needed.
2025-06-01 15:07:28,933 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 15:07:28,933 - INFO - Application shutdown complete.
2025-06-01 15:07:28,933 - INFO - Dead Letter Queue monitor task cancelled gracefully.
2025-06-01 15:07:28,933 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 15:07:44,125 - INFO - Application startup event triggered.
2025-06-01 15:07:44,125 - INFO - Initializing all queues...
2025-06-01 15:07:44,125 - INFO - All queues initialized on loop 458083872
2025-06-01 15:07:44,126 - INFO - Shared queues initialized.
2025-06-01 15:07:44,126 - INFO - Retrieved queue instances. Event loop ID: 458083872
2025-06-01 15:07:44,126 - INFO - SimulationManager ready state changed from False to True
2025-06-01 15:07:44,126 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 15:07:44,126 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 15:07:44,126 - INFO - Starting MessageProcessor task.
2025-06-01 15:07:44,126 - INFO - MessageProcessor task created and running in background.
2025-06-01 15:07:44,126 - INFO - MessageProcessor task started.
2025-06-01 15:07:44,126 - INFO - QueueForwarder initialized with all queues
2025-06-01 15:07:44,126 - INFO - QueueForwarder queues already initialized
2025-06-01 15:07:44,126 - INFO - QueueForwarder task started.
2025-06-01 15:07:44,126 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 15:07:44,126 - INFO - MessageProcessor main loop started.
2025-06-01 15:07:44,126 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:07:44,126 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 15:07:44,126 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:07:49,126 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:07:54,127 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:07:59,128 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:08:04,127 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:08:09,128 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:08:14,129 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:08:19,130 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:08:24,129 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:08:29,129 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:08:34,130 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:08:39,129 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:08:44,129 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:08:49,129 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:08:54,129 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:08:59,130 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:09:04,130 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:09:09,129 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:09:14,131 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:09:19,132 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:09:24,132 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:09:29,133 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:09:34,133 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:09:34,703 - INFO - Application shutdown event triggered.
2025-06-01 15:09:34,703 - DEBUG - Retrieved SimulationManager instance
2025-06-01 15:09:34,703 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 15:09:34,703 - INFO - Simulation is not running. No action needed.
2025-06-01 15:09:34,703 - INFO - SimulationManager stop method called.
2025-06-01 15:09:34,703 - INFO - Stopping MessageProcessor...
2025-06-01 15:09:34,703 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 15:09:34,703 - INFO - MessageProcessor main loop stopped.
2025-06-01 15:09:34,703 - INFO - MessageProcessor shutdown complete.
2025-06-01 15:09:34,703 - INFO - Stopping QueueForwarder...
2025-06-01 15:09:34,704 - DEBUG - QueueForwarder shutdown initiated
2025-06-01 15:09:34,704 - INFO - Calling SimulationManager instance stop method...
2025-06-01 15:09:34,704 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 15:09:34,704 - INFO - Simulation is not running. No action needed.
2025-06-01 15:09:34,704 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 15:09:34,704 - INFO - Application shutdown complete.
2025-06-01 15:09:34,704 - INFO - Dead Letter Queue monitor task cancelled gracefully.
2025-06-01 15:09:34,705 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 15:09:35,306 - INFO - Application startup event triggered.
2025-06-01 15:09:35,306 - INFO - Initializing all queues...
2025-06-01 15:09:35,306 - INFO - All queues initialized on loop 114565328
2025-06-01 15:09:35,306 - INFO - Shared queues initialized.
2025-06-01 15:09:35,306 - INFO - Retrieved queue instances. Event loop ID: 114565328
2025-06-01 15:09:35,306 - INFO - SimulationManager ready state changed from False to True
2025-06-01 15:09:35,306 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 15:09:35,306 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 15:09:35,306 - INFO - Starting MessageProcessor task.
2025-06-01 15:09:35,306 - INFO - MessageProcessor task created and running in background.
2025-06-01 15:09:35,306 - INFO - MessageProcessor task started.
2025-06-01 15:09:35,306 - INFO - QueueForwarder initialized with all queues
2025-06-01 15:09:35,306 - INFO - QueueForwarder queues already initialized
2025-06-01 15:09:35,306 - INFO - QueueForwarder task started.
2025-06-01 15:09:35,306 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 15:09:35,306 - INFO - MessageProcessor main loop started.
2025-06-01 15:09:35,307 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:09:35,307 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 15:09:35,307 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:09:40,306 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:09:45,307 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:09:47,233 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 15:09:47,233 - INFO - MessageProcessor main loop stopped.
2025-06-01 15:09:47,233 - INFO - Application shutdown event triggered.
2025-06-01 15:09:47,233 - DEBUG - Retrieved SimulationManager instance
2025-06-01 15:09:47,233 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 15:09:47,233 - INFO - Simulation is not running. No action needed.
2025-06-01 15:09:47,233 - INFO - SimulationManager stop method called.
2025-06-01 15:09:47,234 - INFO - Stopping MessageProcessor...
2025-06-01 15:09:47,234 - INFO - MessageProcessor shutdown complete.
2025-06-01 15:09:47,234 - INFO - Stopping QueueForwarder...
2025-06-01 15:09:47,234 - DEBUG - QueueForwarder shutdown initiated
2025-06-01 15:09:47,234 - INFO - Calling SimulationManager instance stop method...
2025-06-01 15:09:47,234 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 15:09:47,234 - INFO - Simulation is not running. No action needed.
2025-06-01 15:09:47,234 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 15:09:47,234 - INFO - Application shutdown complete.
2025-06-01 15:09:47,236 - INFO - Dead Letter Queue monitor task cancelled gracefully.
2025-06-01 15:09:47,236 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 15:11:44,063 - INFO - Application startup event triggered.
2025-06-01 15:11:44,063 - INFO - Initializing all queues...
2025-06-01 15:11:44,063 - INFO - All queues initialized on loop 140589531455056
2025-06-01 15:11:44,063 - INFO - Shared queues initialized.
2025-06-01 15:11:44,063 - INFO - Retrieved queue instances. Event loop ID: 140589531455056
2025-06-01 15:11:44,063 - INFO - SimulationManager ready state changed from False to True
2025-06-01 15:11:44,063 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 15:11:44,063 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 15:11:44,064 - INFO - Starting MessageProcessor task.
2025-06-01 15:11:44,064 - INFO - MessageProcessor task created and running in background.
2025-06-01 15:11:44,064 - INFO - MessageProcessor task started.
2025-06-01 15:11:44,064 - INFO - QueueForwarder initialized with all queues
2025-06-01 15:11:44,064 - INFO - QueueForwarder queues already initialized
2025-06-01 15:11:44,064 - INFO - QueueForwarder task started.
2025-06-01 15:11:44,064 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 15:11:44,064 - INFO - MessageProcessor main loop started.
2025-06-01 15:11:44,064 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:11:44,064 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 15:11:44,064 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:11:49,066 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:11:54,067 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:11:59,067 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:12:04,068 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:12:09,069 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:12:14,069 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:12:19,070 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:12:24,070 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:12:29,072 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:12:34,073 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:12:39,074 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:12:44,075 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:12:49,076 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:12:54,076 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:12:59,077 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:13:04,078 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:13:09,078 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:13:14,079 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:13:19,080 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:13:24,081 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:13:29,082 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:13:34,083 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:13:39,084 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:13:44,084 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:13:49,085 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:13:54,085 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:13:59,086 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:14:04,087 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:16:15,051 - INFO - Application startup event triggered.
2025-06-01 15:16:15,051 - INFO - Initializing all queues...
2025-06-01 15:16:15,051 - INFO - All queues initialized on loop 140044966649760
2025-06-01 15:16:15,051 - INFO - Shared queues initialized.
2025-06-01 15:16:15,051 - INFO - Retrieved queue instances. Event loop ID: 140044966649760
2025-06-01 15:16:15,051 - INFO - SimulationManager ready state changed from False to True
2025-06-01 15:16:15,052 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 15:16:15,052 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 15:16:15,052 - INFO - Starting MessageProcessor task.
2025-06-01 15:16:15,052 - INFO - MessageProcessor task created and running in background.
2025-06-01 15:16:15,052 - INFO - MessageProcessor task started.
2025-06-01 15:16:15,052 - INFO - QueueForwarder initialized with all queues
2025-06-01 15:16:15,052 - INFO - QueueForwarder queues already initialized
2025-06-01 15:16:15,052 - INFO - QueueForwarder task started.
2025-06-01 15:16:15,052 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 15:16:15,052 - INFO - MessageProcessor main loop started.
2025-06-01 15:16:15,052 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:16:15,052 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 15:16:15,052 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:16:20,054 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:16:25,054 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:16:30,055 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:16:35,056 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:16:40,056 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:16:45,057 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:16:49,768 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=41072)
2025-06-01 15:16:49,768 - INFO - Adding connection: 127.0.0.1:41072. Total connections: 1
2025-06-01 15:16:49,769 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:16:49,769 - INFO - Sent connection_ack to 127.0.0.1:41072
2025-06-01 15:16:49,770 - INFO - Sender task started for 127.0.0.1:41072
2025-06-01 15:16:49,770 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:16:49,770 - INFO - Starting receiver for 127.0.0.1:41072 with message tracing
2025-06-01 15:16:49,776 - DEBUG - Received raw WebSocket data from 127.0.0.1:41072: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748783809775,"id":"frontend-init-1748783809775"}
2025-06-01 15:16:49,776 - DEBUG - Successfully parsed JSON to dict: {'type': 'frontend_ready_ack', 'data': {'message': 'Frontend ready to receive', 'version': '1.0', 'status': 'ready', 'capabilities': ['ping-pong']}, 'timestamp': 1748783809775, 'id': 'frontend-init-1748783809775'}
2025-06-01 15:16:49,777 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:41072
2025-06-01 15:16:49,777 - DEBUG - Receiver #1 for 127.0.0.1:41072 - Enqueuing frontend_ready_ack (ID: frontend-init-1748783809775)
2025-06-01 15:16:49,777 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:16:49,777 - DEBUG - MessageProcessor dequeued message frontend-init-1748783809775 of type 'frontend_ready_ack'.
2025-06-01 15:16:50,058 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:16:50,770 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:16:50,778 - DEBUG - Processing message frontend-init-1748783809775 (type: frontend_ready_ack, client: 127.0.0.1:41072)
2025-06-01 15:16:50,778 - DEBUG - Processing frontend_ready_ack message from 127.0.0.1:41072
2025-06-01 15:16:50,778 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:41072. Status: Frontend ready to receive
2025-06-01 15:16:50,778 - INFO - Processed 1 messages in the last 5 seconds.
2025-06-01 15:16:50,778 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:16:51,771 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:16:52,277 - DEBUG - Received raw WebSocket data from 127.0.0.1:41072: {"id":"ping-1748783812275","type":"ping","data":{"timestamp":1748783812275},"timestamp":1748783812275}
2025-06-01 15:16:52,277 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748783812275', 'type': 'ping', 'data': {'timestamp': 1748783812275}, 'timestamp': 1748783812275}
2025-06-01 15:16:52,277 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:41072
2025-06-01 15:16:52,277 - DEBUG - Receiver #2 for 127.0.0.1:41072 - Enqueuing ping (ID: ping-1748783812275)
2025-06-01 15:16:52,277 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:16:52,278 - DEBUG - MessageProcessor dequeued message ping-1748783812275 of type 'ping'.
2025-06-01 15:16:52,771 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:16:53,278 - DEBUG - Processing message ping-1748783812275 (type: ping, client: 127.0.0.1:41072)
2025-06-01 15:16:53,279 - DEBUG - Processing ping message from 127.0.0.1:41072
2025-06-01 15:16:53,279 - INFO - MessageProcessor: Received ping from 127.0.0.1:41072. Responding with pong.
2025-06-01 15:16:53,279 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:16:53,279 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:41072.
2025-06-01 15:16:53,279 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:16:53,280 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:16:53,291 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:16:53,772 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:16:54,773 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:16:54,776 - DEBUG - Received raw WebSocket data from 127.0.0.1:41072: {"id":"ping-1748783814775","type":"ping","data":{"timestamp":1748783814775},"timestamp":1748783814775}
2025-06-01 15:16:54,776 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748783814775', 'type': 'ping', 'data': {'timestamp': 1748783814775}, 'timestamp': 1748783814775}
2025-06-01 15:16:54,776 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:41072
2025-06-01 15:16:54,776 - DEBUG - Receiver #3 for 127.0.0.1:41072 - Enqueuing ping (ID: ping-1748783814775)
2025-06-01 15:16:54,776 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:16:54,776 - DEBUG - MessageProcessor dequeued message ping-1748783814775 of type 'ping'.
2025-06-01 15:16:55,060 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:16:55,774 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:16:55,777 - DEBUG - Processing message ping-1748783814775 (type: ping, client: 127.0.0.1:41072)
2025-06-01 15:16:55,777 - DEBUG - Processing ping message from 127.0.0.1:41072
2025-06-01 15:16:55,777 - INFO - MessageProcessor: Received ping from 127.0.0.1:41072. Responding with pong.
2025-06-01 15:16:55,777 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:16:55,778 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:41072.
2025-06-01 15:16:55,778 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:16:55,778 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:16:55,788 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:16:56,775 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:16:57,277 - DEBUG - Received raw WebSocket data from 127.0.0.1:41072: {"id":"ping-1748783817275","type":"ping","data":{"timestamp":1748783817275},"timestamp":1748783817275}
2025-06-01 15:16:57,277 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748783817275', 'type': 'ping', 'data': {'timestamp': 1748783817275}, 'timestamp': 1748783817275}
2025-06-01 15:16:57,277 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:41072
2025-06-01 15:16:57,278 - DEBUG - Receiver #4 for 127.0.0.1:41072 - Enqueuing ping (ID: ping-1748783817275)
2025-06-01 15:16:57,278 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:16:57,278 - DEBUG - MessageProcessor dequeued message ping-1748783817275 of type 'ping'.
2025-06-01 15:16:57,776 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:16:58,279 - DEBUG - Processing message ping-1748783817275 (type: ping, client: 127.0.0.1:41072)
2025-06-01 15:16:58,279 - DEBUG - Processing ping message from 127.0.0.1:41072
2025-06-01 15:16:58,279 - INFO - MessageProcessor: Received ping from 127.0.0.1:41072. Responding with pong.
2025-06-01 15:16:58,280 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:16:58,280 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:41072.
2025-06-01 15:16:58,280 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 15:16:58,280 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:16:58,280 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:16:58,291 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:16:58,777 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:16:59,776 - DEBUG - Received raw WebSocket data from 127.0.0.1:41072: {"id":"ping-1748783819775","type":"ping","data":{"timestamp":1748783819775},"timestamp":1748783819775}
2025-06-01 15:16:59,776 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748783819775', 'type': 'ping', 'data': {'timestamp': 1748783819775}, 'timestamp': 1748783819775}
2025-06-01 15:16:59,776 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:41072
2025-06-01 15:16:59,776 - DEBUG - Receiver #5 for 127.0.0.1:41072 - Enqueuing ping (ID: ping-1748783819775)
2025-06-01 15:16:59,776 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:16:59,777 - DEBUG - MessageProcessor dequeued message ping-1748783819775 of type 'ping'.
2025-06-01 15:16:59,777 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:17:00,060 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:17:00,778 - DEBUG - Processing message ping-1748783819775 (type: ping, client: 127.0.0.1:41072)
2025-06-01 15:17:00,778 - DEBUG - Processing ping message from 127.0.0.1:41072
2025-06-01 15:17:00,778 - INFO - MessageProcessor: Received ping from 127.0.0.1:41072. Responding with pong.
2025-06-01 15:17:00,778 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:17:00,778 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:41072.
2025-06-01 15:17:00,778 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:17:00,779 - DEBUG - WebSocketManager sender dequeued message 4a4a85d1-8272-4b8d-b389-a1feb1b0a3e6 of type 'pong'. Delaying for 1s.
2025-06-01 15:17:00,779 - DEBUG - Prepared WebSocket message of type 'pong' for client 127.0.0.1:41072
2025-06-01 15:17:00,779 - DEBUG - Sent message 4a4a85d1-8272-4b8d-b389-a1feb1b0a3e6 (type: pong) to 127.0.0.1:41072
2025-06-01 15:17:00,779 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:17:00,779 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:17:01,503 - INFO - WebSocket disconnected from 127.0.0.1:41072 while receiving: Code 1001
2025-06-01 15:17:01,503 - INFO - Receiver task for 127.0.0.1:41072 finished.
2025-06-01 15:17:01,780 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:17:02,781 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:17:03,782 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:17:04,783 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:17:05,062 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:20:38,271 - INFO - Application startup event triggered.
2025-06-01 15:20:38,271 - INFO - Initializing all queues...
2025-06-01 15:20:38,271 - INFO - All queues initialized on loop 140397879404368
2025-06-01 15:20:38,271 - INFO - Shared queues initialized.
2025-06-01 15:20:38,271 - INFO - Retrieved queue instances. Event loop ID: 140397879404368
2025-06-01 15:20:38,271 - INFO - SimulationManager ready state changed from False to True
2025-06-01 15:20:38,271 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 15:20:38,271 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 15:20:38,271 - INFO - Starting MessageProcessor task.
2025-06-01 15:20:38,271 - INFO - MessageProcessor task created and running in background.
2025-06-01 15:20:38,271 - INFO - MessageProcessor task started.
2025-06-01 15:20:38,271 - INFO - QueueForwarder initialized with all queues
2025-06-01 15:20:38,271 - INFO - QueueForwarder queues already initialized
2025-06-01 15:20:38,271 - INFO - QueueForwarder task started.
2025-06-01 15:20:38,271 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 15:20:38,271 - INFO - MessageProcessor main loop started.
2025-06-01 15:20:38,271 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:20:38,271 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 15:20:38,272 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:20:40,117 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=56550)
2025-06-01 15:20:40,117 - INFO - Adding connection: 127.0.0.1:56550. Total connections: 1
2025-06-01 15:20:40,118 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:40,119 - INFO - Sent connection_ack to 127.0.0.1:56550
2025-06-01 15:20:40,119 - INFO - Sender task started for 127.0.0.1:56550
2025-06-01 15:20:40,119 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:40,119 - INFO - Starting receiver for 127.0.0.1:56550 with message tracing
2025-06-01 15:20:40,143 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"type":"frontend_ready_ack","data":{"message":"Frontend ready to receive","version":"1.0","status":"ready","capabilities":["ping-pong"]},"timestamp":1748784040142,"id":"frontend-init-1748784040142"}
2025-06-01 15:20:40,143 - DEBUG - Successfully parsed JSON to dict: {'type': 'frontend_ready_ack', 'data': {'message': 'Frontend ready to receive', 'version': '1.0', 'status': 'ready', 'capabilities': ['ping-pong']}, 'timestamp': 1748784040142, 'id': 'frontend-init-1748784040142'}
2025-06-01 15:20:40,144 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:56550
2025-06-01 15:20:40,144 - DEBUG - Receiver #1 for 127.0.0.1:56550 - Enqueuing frontend_ready_ack (ID: frontend-init-1748784040142)
2025-06-01 15:20:40,144 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:20:40,144 - DEBUG - MessageProcessor dequeued message frontend-init-1748784040142 of type 'frontend_ready_ack'.
2025-06-01 15:20:41,120 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:41,144 - DEBUG - Processing message frontend-init-1748784040142 (type: frontend_ready_ack, client: 127.0.0.1:56550)
2025-06-01 15:20:41,144 - DEBUG - Processing frontend_ready_ack message from 127.0.0.1:56550
2025-06-01 15:20:41,144 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:56550. Status: Frontend ready to receive
2025-06-01 15:20:41,144 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:20:42,121 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:42,644 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"id":"ping-1748784042643","type":"ping","data":{"timestamp":1748784042643},"timestamp":1748784042643}
2025-06-01 15:20:42,644 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748784042643', 'type': 'ping', 'data': {'timestamp': 1748784042643}, 'timestamp': 1748784042643}
2025-06-01 15:20:42,644 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56550
2025-06-01 15:20:42,644 - DEBUG - Receiver #2 for 127.0.0.1:56550 - Enqueuing ping (ID: ping-1748784042643)
2025-06-01 15:20:42,644 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:20:42,644 - DEBUG - MessageProcessor dequeued message ping-1748784042643 of type 'ping'.
2025-06-01 15:20:43,123 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:43,273 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:20:43,645 - DEBUG - Processing message ping-1748784042643 (type: ping, client: 127.0.0.1:56550)
2025-06-01 15:20:43,646 - DEBUG - Processing ping message from 127.0.0.1:56550
2025-06-01 15:20:43,646 - INFO - MessageProcessor: Received ping from 127.0.0.1:56550. Responding with pong.
2025-06-01 15:20:43,646 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:20:43,646 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:56550.
2025-06-01 15:20:43,646 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 15:20:43,646 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:20:43,647 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:20:43,657 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:44,123 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:45,125 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:45,143 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"id":"ping-1748784045142","type":"ping","data":{"timestamp":1748784045142},"timestamp":1748784045142}
2025-06-01 15:20:45,143 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748784045142', 'type': 'ping', 'data': {'timestamp': 1748784045142}, 'timestamp': 1748784045142}
2025-06-01 15:20:45,143 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56550
2025-06-01 15:20:45,144 - DEBUG - Receiver #3 for 127.0.0.1:56550 - Enqueuing ping (ID: ping-1748784045142)
2025-06-01 15:20:45,144 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:20:45,144 - DEBUG - MessageProcessor dequeued message ping-1748784045142 of type 'ping'.
2025-06-01 15:20:46,125 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:46,144 - DEBUG - Processing message ping-1748784045142 (type: ping, client: 127.0.0.1:56550)
2025-06-01 15:20:46,145 - DEBUG - Processing ping message from 127.0.0.1:56550
2025-06-01 15:20:46,145 - INFO - MessageProcessor: Received ping from 127.0.0.1:56550. Responding with pong.
2025-06-01 15:20:46,145 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:20:46,145 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:56550.
2025-06-01 15:20:46,145 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:20:46,146 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:20:46,156 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:47,126 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:47,644 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"id":"ping-1748784047643","type":"ping","data":{"timestamp":1748784047643},"timestamp":1748784047643}
2025-06-01 15:20:47,644 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748784047643', 'type': 'ping', 'data': {'timestamp': 1748784047643}, 'timestamp': 1748784047643}
2025-06-01 15:20:47,645 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56550
2025-06-01 15:20:47,645 - DEBUG - Receiver #4 for 127.0.0.1:56550 - Enqueuing ping (ID: ping-1748784047643)
2025-06-01 15:20:47,645 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:20:47,645 - DEBUG - MessageProcessor dequeued message ping-1748784047643 of type 'ping'.
2025-06-01 15:20:48,127 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:48,273 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:20:48,646 - DEBUG - Processing message ping-1748784047643 (type: ping, client: 127.0.0.1:56550)
2025-06-01 15:20:48,647 - DEBUG - Processing ping message from 127.0.0.1:56550
2025-06-01 15:20:48,647 - INFO - MessageProcessor: Received ping from 127.0.0.1:56550. Responding with pong.
2025-06-01 15:20:48,647 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:20:48,647 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:56550.
2025-06-01 15:20:48,647 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 15:20:48,647 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:20:48,648 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:20:48,658 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:49,128 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:50,129 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:50,143 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"id":"ping-1748784050142","type":"ping","data":{"timestamp":1748784050143},"timestamp":1748784050143}
2025-06-01 15:20:50,143 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748784050142', 'type': 'ping', 'data': {'timestamp': 1748784050143}, 'timestamp': 1748784050143}
2025-06-01 15:20:50,144 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56550
2025-06-01 15:20:50,144 - DEBUG - Receiver #5 for 127.0.0.1:56550 - Enqueuing ping (ID: ping-1748784050142)
2025-06-01 15:20:50,144 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:20:50,144 - DEBUG - MessageProcessor dequeued message ping-1748784050142 of type 'ping'.
2025-06-01 15:20:51,130 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:51,145 - DEBUG - Processing message ping-1748784050142 (type: ping, client: 127.0.0.1:56550)
2025-06-01 15:20:51,145 - DEBUG - Processing ping message from 127.0.0.1:56550
2025-06-01 15:20:51,145 - INFO - MessageProcessor: Received ping from 127.0.0.1:56550. Responding with pong.
2025-06-01 15:20:51,145 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:20:51,146 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:56550.
2025-06-01 15:20:51,146 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:20:51,146 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:20:51,156 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:52,131 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:52,644 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"id":"ping-1748784052642","type":"ping","data":{"timestamp":1748784052643},"timestamp":1748784052643}
2025-06-01 15:20:52,644 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748784052642', 'type': 'ping', 'data': {'timestamp': 1748784052643}, 'timestamp': 1748784052643}
2025-06-01 15:20:52,644 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56550
2025-06-01 15:20:52,644 - DEBUG - Receiver #6 for 127.0.0.1:56550 - Enqueuing ping (ID: ping-1748784052642)
2025-06-01 15:20:52,644 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:20:52,645 - DEBUG - MessageProcessor dequeued message ping-1748784052642 of type 'ping'.
2025-06-01 15:20:53,132 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:53,274 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:20:53,646 - DEBUG - Processing message ping-1748784052642 (type: ping, client: 127.0.0.1:56550)
2025-06-01 15:20:53,646 - DEBUG - Processing ping message from 127.0.0.1:56550
2025-06-01 15:20:53,646 - INFO - MessageProcessor: Received ping from 127.0.0.1:56550. Responding with pong.
2025-06-01 15:20:53,647 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:20:53,647 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:56550.
2025-06-01 15:20:53,647 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:20:53,647 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:20:53,658 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:54,133 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:55,134 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:55,144 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"id":"ping-1748784055143","type":"ping","data":{"timestamp":1748784055143},"timestamp":1748784055143}
2025-06-01 15:20:55,144 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748784055143', 'type': 'ping', 'data': {'timestamp': 1748784055143}, 'timestamp': 1748784055143}
2025-06-01 15:20:55,144 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56550
2025-06-01 15:20:55,144 - DEBUG - Receiver #7 for 127.0.0.1:56550 - Enqueuing ping (ID: ping-1748784055143)
2025-06-01 15:20:55,145 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:20:55,145 - DEBUG - MessageProcessor dequeued message ping-1748784055143 of type 'ping'.
2025-06-01 15:20:56,135 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:56,146 - DEBUG - Processing message ping-1748784055143 (type: ping, client: 127.0.0.1:56550)
2025-06-01 15:20:56,146 - DEBUG - Processing ping message from 127.0.0.1:56550
2025-06-01 15:20:56,146 - INFO - MessageProcessor: Received ping from 127.0.0.1:56550. Responding with pong.
2025-06-01 15:20:56,146 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:20:56,146 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:56550.
2025-06-01 15:20:56,146 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 15:20:56,147 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:20:56,147 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:20:56,157 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:57,135 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:57,643 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"id":"ping-1748784057643","type":"ping","data":{"timestamp":1748784057643},"timestamp":1748784057643}
2025-06-01 15:20:57,643 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748784057643', 'type': 'ping', 'data': {'timestamp': 1748784057643}, 'timestamp': 1748784057643}
2025-06-01 15:20:57,644 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56550
2025-06-01 15:20:57,644 - DEBUG - Receiver #8 for 127.0.0.1:56550 - Enqueuing ping (ID: ping-1748784057643)
2025-06-01 15:20:57,644 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:20:57,644 - DEBUG - MessageProcessor dequeued message ping-1748784057643 of type 'ping'.
2025-06-01 15:20:58,136 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:58,274 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:20:58,644 - DEBUG - Processing message ping-1748784057643 (type: ping, client: 127.0.0.1:56550)
2025-06-01 15:20:58,645 - DEBUG - Processing ping message from 127.0.0.1:56550
2025-06-01 15:20:58,645 - INFO - MessageProcessor: Received ping from 127.0.0.1:56550. Responding with pong.
2025-06-01 15:20:58,645 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:20:58,645 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:56550.
2025-06-01 15:20:58,645 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:20:58,646 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:20:58,656 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:20:59,137 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:00,140 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:00,144 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"id":"ping-1748784060143","type":"ping","data":{"timestamp":1748784060143},"timestamp":1748784060143}
2025-06-01 15:21:00,144 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748784060143', 'type': 'ping', 'data': {'timestamp': 1748784060143}, 'timestamp': 1748784060143}
2025-06-01 15:21:00,144 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56550
2025-06-01 15:21:00,144 - DEBUG - Receiver #9 for 127.0.0.1:56550 - Enqueuing ping (ID: ping-1748784060143)
2025-06-01 15:21:00,144 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:21:00,144 - DEBUG - MessageProcessor dequeued message ping-1748784060143 of type 'ping'.
2025-06-01 15:21:01,140 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:01,145 - DEBUG - Processing message ping-1748784060143 (type: ping, client: 127.0.0.1:56550)
2025-06-01 15:21:01,145 - DEBUG - Processing ping message from 127.0.0.1:56550
2025-06-01 15:21:01,145 - INFO - MessageProcessor: Received ping from 127.0.0.1:56550. Responding with pong.
2025-06-01 15:21:01,145 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:21:01,145 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:56550.
2025-06-01 15:21:01,145 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:21:01,145 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:21:01,156 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:02,141 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:02,644 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"id":"ping-1748784062643","type":"ping","data":{"timestamp":1748784062643},"timestamp":1748784062643}
2025-06-01 15:21:02,645 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748784062643', 'type': 'ping', 'data': {'timestamp': 1748784062643}, 'timestamp': 1748784062643}
2025-06-01 15:21:02,645 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56550
2025-06-01 15:21:02,645 - DEBUG - Receiver #10 for 127.0.0.1:56550 - Enqueuing ping (ID: ping-1748784062643)
2025-06-01 15:21:02,645 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:21:02,645 - DEBUG - MessageProcessor dequeued message ping-1748784062643 of type 'ping'.
2025-06-01 15:21:03,142 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:03,275 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:21:03,646 - DEBUG - Processing message ping-1748784062643 (type: ping, client: 127.0.0.1:56550)
2025-06-01 15:21:03,646 - DEBUG - Processing ping message from 127.0.0.1:56550
2025-06-01 15:21:03,646 - INFO - MessageProcessor: Received ping from 127.0.0.1:56550. Responding with pong.
2025-06-01 15:21:03,646 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:21:03,646 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:56550.
2025-06-01 15:21:03,647 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 15:21:03,647 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:21:03,647 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:21:03,657 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:04,143 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:05,143 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:05,144 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"id":"ping-1748784065143","type":"ping","data":{"timestamp":1748784065143},"timestamp":1748784065143}
2025-06-01 15:21:05,144 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748784065143', 'type': 'ping', 'data': {'timestamp': 1748784065143}, 'timestamp': 1748784065143}
2025-06-01 15:21:05,144 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56550
2025-06-01 15:21:05,144 - DEBUG - Receiver #11 for 127.0.0.1:56550 - Enqueuing ping (ID: ping-1748784065143)
2025-06-01 15:21:05,144 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:21:05,145 - DEBUG - MessageProcessor dequeued message ping-1748784065143 of type 'ping'.
2025-06-01 15:21:06,144 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:06,146 - DEBUG - Processing message ping-1748784065143 (type: ping, client: 127.0.0.1:56550)
2025-06-01 15:21:06,146 - DEBUG - Processing ping message from 127.0.0.1:56550
2025-06-01 15:21:06,146 - INFO - MessageProcessor: Received ping from 127.0.0.1:56550. Responding with pong.
2025-06-01 15:21:06,146 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:21:06,146 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:56550.
2025-06-01 15:21:06,146 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:21:06,147 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:21:06,157 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:07,145 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:07,643 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"id":"ping-1748784067642","type":"ping","data":{"timestamp":1748784067642},"timestamp":1748784067642}
2025-06-01 15:21:07,643 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748784067642', 'type': 'ping', 'data': {'timestamp': 1748784067642}, 'timestamp': 1748784067642}
2025-06-01 15:21:07,644 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56550
2025-06-01 15:21:07,644 - DEBUG - Receiver #12 for 127.0.0.1:56550 - Enqueuing ping (ID: ping-1748784067642)
2025-06-01 15:21:07,644 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:21:07,644 - DEBUG - MessageProcessor dequeued message ping-1748784067642 of type 'ping'.
2025-06-01 15:21:08,146 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:08,275 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:21:08,646 - DEBUG - Processing message ping-1748784067642 (type: ping, client: 127.0.0.1:56550)
2025-06-01 15:21:08,646 - DEBUG - Processing ping message from 127.0.0.1:56550
2025-06-01 15:21:08,646 - INFO - MessageProcessor: Received ping from 127.0.0.1:56550. Responding with pong.
2025-06-01 15:21:08,646 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:21:08,646 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:56550.
2025-06-01 15:21:08,646 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:21:08,646 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:21:08,657 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:09,148 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:10,144 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"id":"ping-1748784070142","type":"ping","data":{"timestamp":1748784070142},"timestamp":1748784070142}
2025-06-01 15:21:10,144 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748784070142', 'type': 'ping', 'data': {'timestamp': 1748784070142}, 'timestamp': 1748784070142}
2025-06-01 15:21:10,144 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56550
2025-06-01 15:21:10,144 - DEBUG - Receiver #13 for 127.0.0.1:56550 - Enqueuing ping (ID: ping-1748784070142)
2025-06-01 15:21:10,144 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:21:10,144 - DEBUG - MessageProcessor dequeued message ping-1748784070142 of type 'ping'.
2025-06-01 15:21:10,149 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:11,145 - DEBUG - Processing message ping-1748784070142 (type: ping, client: 127.0.0.1:56550)
2025-06-01 15:21:11,145 - DEBUG - Processing ping message from 127.0.0.1:56550
2025-06-01 15:21:11,146 - INFO - MessageProcessor: Received ping from 127.0.0.1:56550. Responding with pong.
2025-06-01 15:21:11,146 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:21:11,146 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:56550.
2025-06-01 15:21:11,146 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 15:21:11,146 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:21:11,146 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:21:11,150 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:11,157 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:12,151 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:12,644 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"id":"ping-1748784072642","type":"ping","data":{"timestamp":1748784072642},"timestamp":1748784072642}
2025-06-01 15:21:12,644 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748784072642', 'type': 'ping', 'data': {'timestamp': 1748784072642}, 'timestamp': 1748784072642}
2025-06-01 15:21:12,644 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56550
2025-06-01 15:21:12,644 - DEBUG - Receiver #14 for 127.0.0.1:56550 - Enqueuing ping (ID: ping-1748784072642)
2025-06-01 15:21:12,644 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:21:12,645 - DEBUG - MessageProcessor dequeued message ping-1748784072642 of type 'ping'.
2025-06-01 15:21:13,151 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:13,276 - DEBUG - Queue 'dead_letter' empty, waiting to dequeue...
2025-06-01 15:21:13,645 - DEBUG - Processing message ping-1748784072642 (type: ping, client: 127.0.0.1:56550)
2025-06-01 15:21:13,645 - DEBUG - Processing ping message from 127.0.0.1:56550
2025-06-01 15:21:13,645 - INFO - MessageProcessor: Received ping from 127.0.0.1:56550. Responding with pong.
2025-06-01 15:21:13,645 - DEBUG - Enqueued to 'to_frontend', size: 1
2025-06-01 15:21:13,646 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:56550.
2025-06-01 15:21:13,646 - DEBUG - Queue 'from_frontend' empty, waiting to dequeue...
2025-06-01 15:21:13,646 - DEBUG - Forwarded message from queue to client: pong
2025-06-01 15:21:13,657 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:14,152 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:15,144 - DEBUG - Received raw WebSocket data from 127.0.0.1:56550: {"id":"ping-1748784075142","type":"ping","data":{"timestamp":1748784075142},"timestamp":1748784075142}
2025-06-01 15:21:15,144 - DEBUG - Successfully parsed JSON to dict: {'id': 'ping-1748784075142', 'type': 'ping', 'data': {'timestamp': 1748784075142}, 'timestamp': 1748784075142}
2025-06-01 15:21:15,144 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56550
2025-06-01 15:21:15,144 - DEBUG - Receiver #15 for 127.0.0.1:56550 - Enqueuing ping (ID: ping-1748784075142)
2025-06-01 15:21:15,144 - DEBUG - Enqueued to 'from_frontend', size: 1
2025-06-01 15:21:15,145 - DEBUG - MessageProcessor dequeued message ping-1748784075142 of type 'ping'.
2025-06-01 15:21:15,153 - DEBUG - Queue 'to_frontend' empty, waiting to dequeue...
2025-06-01 15:21:15,921 - INFO - WebSocket disconnected from 127.0.0.1:56550 while receiving: Code 1012
2025-06-01 15:21:15,921 - INFO - Receiver task for 127.0.0.1:56550 finished.
2025-06-01 15:33:06,128 - INFO - Application startup event triggered.
2025-06-01 15:33:06,128 - INFO - Initializing all queues...
2025-06-01 15:33:06,128 - INFO - All queues initialized on loop 140163278022960
2025-06-01 15:33:06,128 - INFO - Shared queues initialized.
2025-06-01 15:33:06,128 - INFO - Retrieved queue instances. Event loop ID: 140163278022960
2025-06-01 15:33:06,128 - INFO - SimulationManager ready state changed from False to True
2025-06-01 15:33:06,128 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 15:33:06,128 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 15:33:06,128 - INFO - Starting MessageProcessor task.
2025-06-01 15:33:06,129 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 15:33:06,129 - INFO - MessageProcessor task started.
2025-06-01 15:33:06,129 - INFO - QueueForwarder initialized with all queues
2025-06-01 15:33:06,129 - INFO - QueueForwarder queues already initialized
2025-06-01 15:33:06,129 - INFO - QueueForwarder task started.
2025-06-01 15:33:06,129 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 15:33:06,129 - INFO - MessageProcessor main loop started.
2025-06-01 15:33:06,129 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 15:33:06,129 - ERROR - Error in Dead Letter Queue monitor task: MessageQueue.dequeue() got an unexpected keyword argument 'timeout'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 129, in monitor_dead_letter_queue_task
    message = await self._dead_letter_queue.dequeue(timeout=5)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: MessageQueue.dequeue() got an unexpected keyword argument 'timeout'
2025-06-01 15:33:06,129 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 15:33:06,130 - ERROR - Error in Dead Letter Queue monitor task: MessageQueue.dequeue() got an unexpected keyword argument 'timeout'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 129, in monitor_dead_letter_queue_task
    message = await self._dead_letter_queue.dequeue(timeout=5)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: MessageQueue.dequeue() got an unexpected keyword argument 'timeout'
2025-06-01 15:33:07,875 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=58284)
2025-06-01 15:33:07,875 - INFO - Adding connection: 127.0.0.1:58284. Total connections: 1
2025-06-01 15:33:07,876 - INFO - Sent connection_ack to 127.0.0.1:58284
2025-06-01 15:33:07,876 - INFO - Sender task started for 127.0.0.1:58284
2025-06-01 15:33:07,877 - INFO - Starting receiver for 127.0.0.1:58284 with message tracing
2025-06-01 15:33:07,894 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:58284
2025-06-01 15:33:08,896 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:58284. Status: Frontend ready to receive
2025-06-01 15:33:10,395 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:58284
2025-06-01 15:33:11,131 - ERROR - Error in Dead Letter Queue monitor task: MessageQueue.dequeue() got an unexpected keyword argument 'timeout'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 129, in monitor_dead_letter_queue_task
    message = await self._dead_letter_queue.dequeue(timeout=5)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: MessageQueue.dequeue() got an unexpected keyword argument 'timeout'
2025-06-01 15:33:11,131 - ERROR - Error in Dead Letter Queue monitor task: MessageQueue.dequeue() got an unexpected keyword argument 'timeout'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 129, in monitor_dead_letter_queue_task
    message = await self._dead_letter_queue.dequeue(timeout=5)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: MessageQueue.dequeue() got an unexpected keyword argument 'timeout'
2025-06-01 15:33:11,396 - INFO - MessageProcessor: Received ping from 127.0.0.1:58284. Responding with pong.
2025-06-01 15:33:11,396 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:58284.
2025-06-01 15:33:11,396 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 15:33:12,896 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:58284
2025-06-01 15:33:13,897 - INFO - MessageProcessor: Received ping from 127.0.0.1:58284. Responding with pong.
2025-06-01 15:33:13,898 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:58284.
2025-06-01 15:33:15,396 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:58284
2025-06-01 15:33:16,133 - ERROR - Error in Dead Letter Queue monitor task: MessageQueue.dequeue() got an unexpected keyword argument 'timeout'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 129, in monitor_dead_letter_queue_task
    message = await self._dead_letter_queue.dequeue(timeout=5)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: MessageQueue.dequeue() got an unexpected keyword argument 'timeout'
2025-06-01 15:33:16,134 - ERROR - Error in Dead Letter Queue monitor task: MessageQueue.dequeue() got an unexpected keyword argument 'timeout'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 129, in monitor_dead_letter_queue_task
    message = await self._dead_letter_queue.dequeue(timeout=5)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: MessageQueue.dequeue() got an unexpected keyword argument 'timeout'
2025-06-01 15:33:16,397 - INFO - MessageProcessor: Received ping from 127.0.0.1:58284. Responding with pong.
2025-06-01 15:33:16,397 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:58284.
2025-06-01 15:33:16,397 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 15:33:17,894 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:58284
2025-06-01 15:33:18,888 - INFO - WebSocket disconnected from 127.0.0.1:58284 while receiving: Code 1012
2025-06-01 15:33:18,888 - INFO - Receiver task for 127.0.0.1:58284 finished.
2025-06-01 15:33:18,896 - INFO - MessageProcessor: Received ping from 127.0.0.1:58284. Responding with pong.
2025-06-01 15:33:18,896 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:58284.
2025-06-01 15:33:18,896 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=58284)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/.venv/lib/python3.12/site-packages/starlette/websockets.py", line 165, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/.venv/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 39, in sender
    await send(message)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/.venv/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 359, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-06-01 15:34:58,425 - INFO - Application startup event triggered.
2025-06-01 15:34:58,425 - INFO - Initializing all queues...
2025-06-01 15:34:58,425 - INFO - All queues initialized on loop 139741803728960
2025-06-01 15:34:58,425 - INFO - Shared queues initialized.
2025-06-01 15:34:58,425 - INFO - Retrieved queue instances. Event loop ID: 139741803728960
2025-06-01 15:34:58,425 - INFO - SimulationManager ready state changed from False to True
2025-06-01 15:34:58,425 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 15:34:58,426 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 15:34:58,426 - INFO - Starting MessageProcessor task.
2025-06-01 15:34:58,426 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 15:34:58,426 - INFO - MessageProcessor task started.
2025-06-01 15:34:58,426 - INFO - QueueForwarder initialized with all queues
2025-06-01 15:34:58,426 - INFO - QueueForwarder queues already initialized
2025-06-01 15:34:58,426 - INFO - QueueForwarder task started.
2025-06-01 15:34:58,426 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 15:34:58,426 - INFO - MessageProcessor main loop started.
2025-06-01 15:34:58,426 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 15:34:58,426 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 15:35:00,278 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=33432)
2025-06-01 15:35:00,278 - INFO - Adding connection: 127.0.0.1:33432. Total connections: 1
2025-06-01 15:35:00,279 - INFO - Sent connection_ack to 127.0.0.1:33432
2025-06-01 15:35:00,279 - INFO - Sender task started for 127.0.0.1:33432
2025-06-01 15:35:00,279 - INFO - Starting receiver for 127.0.0.1:33432 with message tracing
2025-06-01 15:35:00,299 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:33432
2025-06-01 15:35:01,300 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:33432. Status: Frontend ready to receive
2025-06-01 15:35:02,800 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:33432
2025-06-01 15:35:03,801 - INFO - MessageProcessor: Received ping from 127.0.0.1:33432. Responding with pong.
2025-06-01 15:35:03,801 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:33432.
2025-06-01 15:35:03,801 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 15:35:05,300 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:33432
2025-06-01 15:35:06,301 - INFO - MessageProcessor: Received ping from 127.0.0.1:33432. Responding with pong.
2025-06-01 15:35:06,302 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:33432.
2025-06-01 15:35:07,799 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:33432
2025-06-01 15:35:08,764 - INFO - WebSocket disconnected from 127.0.0.1:33432 while receiving: Code 1012
2025-06-01 15:35:08,764 - INFO - Receiver task for 127.0.0.1:33432 finished.
2025-06-01 15:35:08,800 - INFO - MessageProcessor: Received ping from 127.0.0.1:33432. Responding with pong.
2025-06-01 15:35:08,800 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:33432.
2025-06-01 15:35:08,801 - ERROR - Failed to send message from queue to websocket (Address(host='127.0.0.1', port=33432)): Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 49, in forward_messages_to_websocket
    await websocket.send_text(json.dumps(message_to_send))
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/.venv/lib/python3.12/site-packages/starlette/websockets.py", line 165, in send_text
    await self.send({"type": "websocket.send", "text": data})
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/.venv/lib/python3.12/site-packages/starlette/websockets.py", line 85, in send
    await self._send(message)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 39, in sender
    await send(message)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/.venv/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 359, in asgi_send
    raise RuntimeError(msg % message_type)
RuntimeError: Unexpected ASGI message 'websocket.send', after sending 'websocket.close' or response already completed.
2025-06-01 15:51:25,694 - INFO - Application startup event triggered.
2025-06-01 15:51:25,694 - INFO - Initializing all queues...
2025-06-01 15:51:25,694 - INFO - All queues initialized on loop 162979360
2025-06-01 15:51:25,694 - INFO - Shared queues initialized.
2025-06-01 15:51:25,694 - INFO - Retrieved queue instances. Event loop ID: 162979360
2025-06-01 15:51:25,694 - INFO - WebSocketManager initialized.
2025-06-01 15:51:25,694 - INFO - SimulationManager ready state changed from False to True
2025-06-01 15:51:25,694 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 15:51:25,694 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 15:51:25,694 - INFO - Starting MessageProcessor task.
2025-06-01 15:51:25,694 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 15:51:25,694 - INFO - MessageProcessor task started.
2025-06-01 15:51:25,694 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 15:51:25,694 - INFO - QueueForwarder queues already initialized
2025-06-01 15:51:25,694 - INFO - QueueForwarder task started.
2025-06-01 15:51:25,694 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 15:51:25,694 - INFO - MessageProcessor main loop started.
2025-06-01 15:51:25,694 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 15:51:25,694 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 15:51:25,695 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 15:51:27,441 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=38228)
2025-06-01 15:51:27,441 - ERROR - Unexpected WebSocket error for Address(host='127.0.0.1', port=38228) in /ws endpoint: WebSocketManager.handle_connection() missing 1 required positional argument: 'client_id'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 199, in websocket_endpoint
    await ws_manager.handle_connection(websocket)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: WebSocketManager.handle_connection() missing 1 required positional argument: 'client_id'
2025-06-01 15:51:27,442 - INFO - Cleanup finished for Address(host='127.0.0.1', port=38228) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 15:51:33,356 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=40078)
2025-06-01 15:51:33,356 - ERROR - Unexpected WebSocket error for Address(host='127.0.0.1', port=40078) in /ws endpoint: WebSocketManager.handle_connection() missing 1 required positional argument: 'client_id'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 199, in websocket_endpoint
    await ws_manager.handle_connection(websocket)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: WebSocketManager.handle_connection() missing 1 required positional argument: 'client_id'
2025-06-01 15:51:33,357 - INFO - Cleanup finished for Address(host='127.0.0.1', port=40078) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 15:51:44,168 - INFO - WebSocket connection established from Address(host='127.0.0.1', port=33396)
2025-06-01 15:51:44,168 - ERROR - Unexpected WebSocket error for Address(host='127.0.0.1', port=33396) in /ws endpoint: WebSocketManager.handle_connection() missing 1 required positional argument: 'client_id'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/api/endpoints.py", line 199, in websocket_endpoint
    await ws_manager.handle_connection(websocket)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: WebSocketManager.handle_connection() missing 1 required positional argument: 'client_id'
2025-06-01 15:51:44,169 - INFO - Cleanup finished for Address(host='127.0.0.1', port=33396) at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 15:51:56,171 - INFO - Application shutdown event triggered.
2025-06-01 15:51:56,171 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 15:51:56,171 - INFO - Simulation is not running. No action needed.
2025-06-01 15:51:56,171 - INFO - SimulationManager stop method called.
2025-06-01 15:51:56,171 - INFO - Stopping MessageProcessor...
2025-06-01 15:51:56,172 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 15:51:56,172 - INFO - MessageProcessor main loop stopped.
2025-06-01 15:51:56,172 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 15:51:56,172 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 15:51:56,172 - INFO - MessageProcessor shutdown complete.
2025-06-01 15:51:56,172 - INFO - Stopping QueueForwarder...
2025-06-01 15:51:56,172 - INFO - QueueForwarder task cancelled.
2025-06-01 15:51:56,172 - INFO - QueueForwarder stopped
2025-06-01 15:51:56,172 - INFO - Calling SimulationManager instance stop method...
2025-06-01 15:51:56,172 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 15:51:56,172 - INFO - Simulation is not running. No action needed.
2025-06-01 15:51:56,172 - INFO - Shutting down WebSocketManager...
2025-06-01 15:51:56,172 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 15:51:56,172 - INFO - WebSocketManager shutdown complete.
2025-06-01 15:51:56,172 - INFO - WebSocketManager shutdown complete.
2025-06-01 15:51:56,172 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 15:51:56,172 - INFO - Application shutdown complete.
2025-06-01 15:51:56,173 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 15:51:56,173 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 16:45:50,841 - INFO - Application startup event triggered.
2025-06-01 16:45:50,841 - INFO - Initializing all queues...
2025-06-01 16:45:50,841 - INFO - All queues initialized on loop 492290256
2025-06-01 16:45:50,841 - INFO - Shared queues initialized.
2025-06-01 16:45:50,841 - INFO - Retrieved queue instances. Event loop ID: 492290256
2025-06-01 16:45:50,841 - INFO - WebSocketManager initialized.
2025-06-01 16:45:50,841 - INFO - SimulationManager ready state changed from False to True
2025-06-01 16:45:50,841 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 16:45:50,841 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 16:45:50,842 - INFO - Starting MessageProcessor task.
2025-06-01 16:45:50,842 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 16:45:50,842 - INFO - MessageProcessor task started.
2025-06-01 16:45:50,842 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 16:45:50,842 - INFO - QueueForwarder queues already initialized
2025-06-01 16:45:50,842 - INFO - QueueForwarder task started.
2025-06-01 16:45:50,842 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 16:45:50,842 - INFO - MessageProcessor main loop started.
2025-06-01 16:45:50,842 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 16:45:50,842 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 16:45:50,842 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 16:47:05,573 - INFO - Application shutdown event triggered.
2025-06-01 16:47:05,573 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 16:47:05,573 - INFO - Simulation is not running. No action needed.
2025-06-01 16:47:05,573 - INFO - SimulationManager stop method called.
2025-06-01 16:47:05,573 - INFO - Stopping MessageProcessor...
2025-06-01 16:47:05,573 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 16:47:05,574 - INFO - MessageProcessor main loop stopped.
2025-06-01 16:47:05,574 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 16:47:05,574 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 16:47:05,574 - INFO - MessageProcessor shutdown complete.
2025-06-01 16:47:05,574 - INFO - Stopping QueueForwarder...
2025-06-01 16:47:05,574 - INFO - QueueForwarder task cancelled.
2025-06-01 16:47:05,574 - INFO - QueueForwarder stopped
2025-06-01 16:47:05,574 - INFO - Calling SimulationManager instance stop method...
2025-06-01 16:47:05,574 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 16:47:05,574 - INFO - Simulation is not running. No action needed.
2025-06-01 16:47:05,574 - INFO - Shutting down WebSocketManager...
2025-06-01 16:47:05,574 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 16:47:05,575 - INFO - WebSocketManager shutdown complete.
2025-06-01 16:47:05,575 - INFO - WebSocketManager shutdown complete.
2025-06-01 16:47:05,575 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 16:47:05,575 - INFO - Application shutdown complete.
2025-06-01 16:47:05,575 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 16:47:05,575 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 16:47:06,138 - INFO - Application startup event triggered.
2025-06-01 16:47:06,138 - INFO - Initializing all queues...
2025-06-01 16:47:06,138 - INFO - All queues initialized on loop 678150352
2025-06-01 16:47:06,138 - INFO - Shared queues initialized.
2025-06-01 16:47:06,138 - INFO - Retrieved queue instances. Event loop ID: 678150352
2025-06-01 16:47:06,138 - INFO - WebSocketManager initialized.
2025-06-01 16:47:06,138 - INFO - SimulationManager ready state changed from False to True
2025-06-01 16:47:06,138 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 16:47:06,138 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 16:47:06,138 - INFO - Starting MessageProcessor task.
2025-06-01 16:47:06,138 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 16:47:06,138 - INFO - MessageProcessor task started.
2025-06-01 16:47:06,138 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 16:47:06,139 - INFO - QueueForwarder queues already initialized
2025-06-01 16:47:06,139 - INFO - QueueForwarder task started.
2025-06-01 16:47:06,139 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 16:47:06,139 - INFO - MessageProcessor main loop started.
2025-06-01 16:47:06,139 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 16:47:06,139 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 16:47:06,139 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 16:55:07,760 - INFO - Application shutdown event triggered.
2025-06-01 16:55:07,760 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 16:55:07,760 - INFO - Simulation is not running. No action needed.
2025-06-01 16:55:07,760 - INFO - SimulationManager stop method called.
2025-06-01 16:55:07,760 - INFO - Stopping MessageProcessor...
2025-06-01 16:55:07,760 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 16:55:07,760 - INFO - MessageProcessor main loop stopped.
2025-06-01 16:55:07,761 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 16:55:07,761 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 16:55:07,761 - INFO - MessageProcessor shutdown complete.
2025-06-01 16:55:07,761 - INFO - Stopping QueueForwarder...
2025-06-01 16:55:07,761 - INFO - QueueForwarder task cancelled.
2025-06-01 16:55:07,761 - INFO - QueueForwarder stopped
2025-06-01 16:55:07,761 - INFO - Calling SimulationManager instance stop method...
2025-06-01 16:55:07,761 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 16:55:07,761 - INFO - Simulation is not running. No action needed.
2025-06-01 16:55:07,762 - INFO - Shutting down WebSocketManager...
2025-06-01 16:55:07,762 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 16:55:07,762 - INFO - WebSocketManager shutdown complete.
2025-06-01 16:55:07,762 - INFO - WebSocketManager shutdown complete.
2025-06-01 16:55:07,762 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 16:55:07,762 - INFO - Application shutdown complete.
2025-06-01 16:55:07,762 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 16:55:07,762 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 16:55:08,330 - INFO - Application startup event triggered.
2025-06-01 16:55:08,330 - INFO - Initializing all queues...
2025-06-01 16:55:08,331 - INFO - All queues initialized on loop 173916368
2025-06-01 16:55:08,331 - INFO - Shared queues initialized.
2025-06-01 16:55:08,331 - INFO - Retrieved queue instances. Event loop ID: 173916368
2025-06-01 16:55:08,331 - INFO - WebSocketManager initialized.
2025-06-01 16:55:08,331 - INFO - SimulationManager ready state changed from False to True
2025-06-01 16:55:08,331 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 16:55:08,331 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 16:55:08,331 - INFO - Starting MessageProcessor task.
2025-06-01 16:55:08,331 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 16:55:08,331 - INFO - MessageProcessor task started.
2025-06-01 16:55:08,331 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 16:55:08,331 - INFO - QueueForwarder queues already initialized
2025-06-01 16:55:08,331 - INFO - QueueForwarder task started.
2025-06-01 16:55:08,331 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 16:55:08,331 - INFO - MessageProcessor main loop started.
2025-06-01 16:55:08,332 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 16:55:08,332 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 16:55:08,332 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 16:55:14,350 - INFO - Application shutdown event triggered.
2025-06-01 16:55:14,350 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 16:55:14,350 - INFO - Simulation is not running. No action needed.
2025-06-01 16:55:14,350 - INFO - SimulationManager stop method called.
2025-06-01 16:55:14,351 - INFO - Stopping MessageProcessor...
2025-06-01 16:55:14,351 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 16:55:14,351 - INFO - MessageProcessor main loop stopped.
2025-06-01 16:55:14,351 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 16:55:14,351 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 16:55:14,351 - INFO - MessageProcessor shutdown complete.
2025-06-01 16:55:14,351 - INFO - Stopping QueueForwarder...
2025-06-01 16:55:14,351 - INFO - QueueForwarder task cancelled.
2025-06-01 16:55:14,351 - INFO - QueueForwarder stopped
2025-06-01 16:55:14,351 - INFO - Calling SimulationManager instance stop method...
2025-06-01 16:55:14,351 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 16:55:14,351 - INFO - Simulation is not running. No action needed.
2025-06-01 16:55:14,351 - INFO - Shutting down WebSocketManager...
2025-06-01 16:55:14,351 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 16:55:14,352 - INFO - WebSocketManager shutdown complete.
2025-06-01 16:55:14,352 - INFO - WebSocketManager shutdown complete.
2025-06-01 16:55:14,352 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 16:55:14,352 - INFO - Application shutdown complete.
2025-06-01 16:55:14,352 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 16:55:14,352 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 16:55:16,993 - INFO - Application startup event triggered.
2025-06-01 16:55:16,993 - INFO - Initializing all queues...
2025-06-01 16:55:16,993 - INFO - All queues initialized on loop 508014112
2025-06-01 16:55:16,993 - INFO - Shared queues initialized.
2025-06-01 16:55:16,993 - INFO - Retrieved queue instances. Event loop ID: 508014112
2025-06-01 16:55:16,993 - INFO - WebSocketManager initialized.
2025-06-01 16:55:16,993 - INFO - SimulationManager ready state changed from False to True
2025-06-01 16:55:16,993 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 16:55:16,993 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 16:55:16,993 - INFO - Starting MessageProcessor task.
2025-06-01 16:55:16,993 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 16:55:16,993 - INFO - MessageProcessor task started.
2025-06-01 16:55:16,993 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 16:55:16,993 - INFO - QueueForwarder queues already initialized
2025-06-01 16:55:16,993 - INFO - QueueForwarder task started.
2025-06-01 16:55:16,993 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 16:55:16,993 - INFO - MessageProcessor main loop started.
2025-06-01 16:55:16,993 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 16:55:16,993 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 16:55:16,993 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 16:58:16,183 - INFO - Application shutdown event triggered.
2025-06-01 16:58:16,183 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 16:58:16,183 - INFO - Simulation is not running. No action needed.
2025-06-01 16:58:16,183 - INFO - SimulationManager stop method called.
2025-06-01 16:58:16,183 - INFO - Stopping MessageProcessor...
2025-06-01 16:58:16,183 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 16:58:16,183 - INFO - MessageProcessor main loop stopped.
2025-06-01 16:58:16,183 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 16:58:16,184 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 16:58:16,184 - INFO - MessageProcessor shutdown complete.
2025-06-01 16:58:16,184 - INFO - Stopping QueueForwarder...
2025-06-01 16:58:16,184 - INFO - QueueForwarder task cancelled.
2025-06-01 16:58:16,184 - INFO - QueueForwarder stopped
2025-06-01 16:58:16,184 - INFO - Calling SimulationManager instance stop method...
2025-06-01 16:58:16,184 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 16:58:16,184 - INFO - Simulation is not running. No action needed.
2025-06-01 16:58:16,184 - INFO - Shutting down WebSocketManager...
2025-06-01 16:58:16,184 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 16:58:16,184 - INFO - WebSocketManager shutdown complete.
2025-06-01 16:58:16,184 - INFO - WebSocketManager shutdown complete.
2025-06-01 16:58:16,184 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 16:58:16,184 - INFO - Application shutdown complete.
2025-06-01 16:58:16,184 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 16:58:16,184 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 16:58:16,782 - INFO - Application startup event triggered.
2025-06-01 16:58:16,782 - INFO - Initializing all queues...
2025-06-01 16:58:16,782 - INFO - All queues initialized on loop 459608272
2025-06-01 16:58:16,782 - INFO - Shared queues initialized.
2025-06-01 16:58:16,782 - INFO - Retrieved queue instances. Event loop ID: 459608272
2025-06-01 17:05:05,758 - INFO - Application startup event triggered.
2025-06-01 17:05:05,758 - INFO - Initializing all queues...
2025-06-01 17:05:05,759 - INFO - All queues initialized on loop 475545120
2025-06-01 17:05:05,759 - INFO - Shared queues initialized.
2025-06-01 17:05:05,759 - INFO - Retrieved queue instances. Event loop ID: 475545120
2025-06-01 17:07:01,900 - INFO - Application startup event triggered.
2025-06-01 17:07:01,900 - INFO - Initializing all queues...
2025-06-01 17:07:01,900 - INFO - All queues initialized on loop 429408464
2025-06-01 17:07:01,900 - INFO - Shared queues initialized.
2025-06-01 17:07:01,900 - INFO - Retrieved queue instances. Event loop ID: 429408464
2025-06-01 17:07:01,900 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 17:07:01,901 - INFO - SimulationManager ready state changed from False to True
2025-06-01 17:07:01,901 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 17:07:01,901 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 17:07:01,901 - INFO - Starting MessageProcessor task.
2025-06-01 17:07:01,901 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 17:07:01,901 - INFO - MessageProcessor task started.
2025-06-01 17:07:01,901 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 17:07:01,901 - INFO - QueueForwarder queues already initialized
2025-06-01 17:07:01,901 - INFO - QueueForwarder task started.
2025-06-01 17:07:01,901 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 17:07:01,901 - INFO - MessageProcessor main loop started.
2025-06-01 17:07:01,901 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:07:01,901 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 17:07:01,901 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:07:21,467 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:07:21,467 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:07:21,467 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 17:07:21,467 - INFO - MessageProcessor main loop stopped.
2025-06-01 17:07:21,467 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:07:21,467 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:07:21,467 - INFO - Application shutdown event triggered.
2025-06-01 17:07:21,467 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:07:21,467 - INFO - Simulation is not running. No action needed.
2025-06-01 17:07:21,467 - INFO - SimulationManager stop method called.
2025-06-01 17:07:21,468 - INFO - Stopping MessageProcessor...
2025-06-01 17:07:21,468 - INFO - MessageProcessor shutdown complete.
2025-06-01 17:07:21,468 - INFO - Stopping QueueForwarder...
2025-06-01 17:07:21,468 - INFO - QueueForwarder task cancelled.
2025-06-01 17:07:21,468 - INFO - QueueForwarder stopped
2025-06-01 17:07:21,468 - INFO - Calling SimulationManager instance stop method...
2025-06-01 17:07:21,468 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:07:21,468 - INFO - Simulation is not running. No action needed.
2025-06-01 17:07:21,468 - INFO - Shutting down WebSocketManager...
2025-06-01 17:07:21,468 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 17:07:21,468 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:07:21,468 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:07:21,468 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 17:07:21,468 - INFO - Application shutdown complete.
2025-06-01 17:07:25,173 - INFO - Application startup event triggered.
2025-06-01 17:07:25,174 - INFO - Initializing all queues...
2025-06-01 17:07:25,174 - INFO - All queues initialized on loop 1056706080
2025-06-01 17:07:25,174 - INFO - Shared queues initialized.
2025-06-01 17:07:25,174 - INFO - Retrieved queue instances. Event loop ID: 1056706080
2025-06-01 17:07:25,174 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 17:07:25,174 - INFO - SimulationManager ready state changed from False to True
2025-06-01 17:07:25,174 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 17:07:25,174 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 17:07:25,174 - INFO - Starting MessageProcessor task.
2025-06-01 17:07:25,174 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 17:07:25,174 - INFO - MessageProcessor task started.
2025-06-01 17:07:25,174 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 17:07:25,174 - INFO - QueueForwarder queues already initialized
2025-06-01 17:07:25,174 - INFO - QueueForwarder task started.
2025-06-01 17:07:25,174 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 17:07:25,175 - INFO - MessageProcessor main loop started.
2025-06-01 17:07:25,175 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:07:25,175 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 17:07:25,175 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:09:33,749 - INFO - Application shutdown event triggered.
2025-06-01 17:09:33,749 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:09:33,749 - INFO - Simulation is not running. No action needed.
2025-06-01 17:09:33,749 - INFO - SimulationManager stop method called.
2025-06-01 17:09:33,750 - INFO - Stopping MessageProcessor...
2025-06-01 17:09:33,750 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 17:09:33,750 - INFO - MessageProcessor main loop stopped.
2025-06-01 17:09:33,750 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:09:33,750 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:09:33,750 - INFO - MessageProcessor shutdown complete.
2025-06-01 17:09:33,750 - INFO - Stopping QueueForwarder...
2025-06-01 17:09:33,750 - INFO - QueueForwarder task cancelled.
2025-06-01 17:09:33,750 - INFO - QueueForwarder stopped
2025-06-01 17:09:33,751 - INFO - Calling SimulationManager instance stop method...
2025-06-01 17:09:33,751 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:09:33,751 - INFO - Simulation is not running. No action needed.
2025-06-01 17:09:33,751 - INFO - Shutting down WebSocketManager...
2025-06-01 17:09:33,751 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 17:09:33,751 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:09:33,751 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:09:33,751 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 17:09:33,751 - INFO - Application shutdown complete.
2025-06-01 17:09:33,752 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:09:33,752 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:09:36,450 - INFO - Application startup event triggered.
2025-06-01 17:09:36,450 - INFO - Initializing all queues...
2025-06-01 17:09:36,450 - INFO - All queues initialized on loop 576171552
2025-06-01 17:09:36,450 - INFO - Shared queues initialized.
2025-06-01 17:09:36,451 - INFO - Retrieved queue instances. Event loop ID: 576171552
2025-06-01 17:09:36,451 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 17:09:36,451 - INFO - SimulationManager ready state changed from False to True
2025-06-01 17:09:36,451 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 17:09:36,451 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 17:09:36,451 - INFO - Starting MessageProcessor task.
2025-06-01 17:09:36,451 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 17:09:36,451 - INFO - MessageProcessor task started.
2025-06-01 17:09:36,451 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 17:09:36,451 - INFO - QueueForwarder queues already initialized
2025-06-01 17:09:36,451 - INFO - QueueForwarder task started.
2025-06-01 17:09:36,451 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 17:09:36,451 - INFO - MessageProcessor main loop started.
2025-06-01 17:09:36,451 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:09:36,451 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 17:09:36,451 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:10:16,855 - INFO - Application shutdown event triggered.
2025-06-01 17:10:16,855 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:10:16,855 - INFO - Simulation is not running. No action needed.
2025-06-01 17:10:16,855 - INFO - SimulationManager stop method called.
2025-06-01 17:10:16,855 - INFO - Stopping MessageProcessor...
2025-06-01 17:10:16,855 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 17:10:16,855 - INFO - MessageProcessor main loop stopped.
2025-06-01 17:10:16,855 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:10:16,855 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:10:16,855 - INFO - MessageProcessor shutdown complete.
2025-06-01 17:10:16,855 - INFO - Stopping QueueForwarder...
2025-06-01 17:10:16,856 - INFO - QueueForwarder task cancelled.
2025-06-01 17:10:16,856 - INFO - QueueForwarder stopped
2025-06-01 17:10:16,856 - INFO - Calling SimulationManager instance stop method...
2025-06-01 17:10:16,856 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:10:16,856 - INFO - Simulation is not running. No action needed.
2025-06-01 17:10:16,856 - INFO - Shutting down WebSocketManager...
2025-06-01 17:10:16,856 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 17:10:16,856 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:10:16,856 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:10:16,856 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 17:10:16,856 - INFO - Application shutdown complete.
2025-06-01 17:10:16,856 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:10:16,856 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:12:03,492 - INFO - Application startup event triggered.
2025-06-01 17:12:03,492 - INFO - Initializing all queues...
2025-06-01 17:12:03,492 - INFO - All queues initialized on loop 328314400
2025-06-01 17:12:03,492 - INFO - Shared queues initialized.
2025-06-01 17:12:03,493 - INFO - Retrieved queue instances. Event loop ID: 328314400
2025-06-01 17:12:03,493 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 17:12:03,493 - INFO - SimulationManager ready state changed from False to True
2025-06-01 17:12:03,493 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 17:12:03,493 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 17:12:03,493 - INFO - Starting MessageProcessor task.
2025-06-01 17:12:03,493 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 17:12:03,493 - INFO - MessageProcessor task started.
2025-06-01 17:12:03,493 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 17:12:03,493 - INFO - QueueForwarder queues already initialized
2025-06-01 17:12:03,493 - INFO - QueueForwarder task started.
2025-06-01 17:12:03,493 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 17:12:03,493 - INFO - MessageProcessor main loop started.
2025-06-01 17:12:03,493 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:12:03,493 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 17:12:03,494 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:13:21,495 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:13:21,495 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:13:21,495 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 17:13:21,495 - INFO - MessageProcessor main loop stopped.
2025-06-01 17:13:21,495 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:13:21,495 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:13:21,496 - INFO - Application shutdown event triggered.
2025-06-01 17:13:21,496 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:13:21,496 - INFO - Simulation is not running. No action needed.
2025-06-01 17:13:21,496 - INFO - SimulationManager stop method called.
2025-06-01 17:13:21,496 - INFO - Stopping MessageProcessor...
2025-06-01 17:13:21,496 - INFO - MessageProcessor shutdown complete.
2025-06-01 17:13:21,496 - INFO - Stopping QueueForwarder...
2025-06-01 17:13:21,496 - INFO - QueueForwarder task cancelled.
2025-06-01 17:13:21,496 - INFO - QueueForwarder stopped
2025-06-01 17:13:21,496 - INFO - Calling SimulationManager instance stop method...
2025-06-01 17:13:21,496 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:13:21,496 - INFO - Simulation is not running. No action needed.
2025-06-01 17:13:21,496 - INFO - Shutting down WebSocketManager...
2025-06-01 17:13:21,496 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 17:13:21,497 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:13:21,497 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:13:21,497 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 17:13:21,497 - INFO - Application shutdown complete.
2025-06-01 17:13:23,744 - INFO - Application startup event triggered.
2025-06-01 17:13:23,745 - INFO - Initializing all queues...
2025-06-01 17:13:23,745 - INFO - All queues initialized on loop 906669600
2025-06-01 17:13:23,745 - INFO - Shared queues initialized.
2025-06-01 17:13:23,745 - INFO - Retrieved queue instances. Event loop ID: 906669600
2025-06-01 17:13:23,745 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 17:13:23,745 - INFO - SimulationManager ready state changed from False to True
2025-06-01 17:13:23,745 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 17:13:23,745 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 17:13:23,745 - INFO - Starting MessageProcessor task.
2025-06-01 17:13:23,745 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 17:13:23,745 - INFO - MessageProcessor task started.
2025-06-01 17:13:23,745 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 17:13:23,745 - INFO - QueueForwarder queues already initialized
2025-06-01 17:13:23,745 - INFO - QueueForwarder task started.
2025-06-01 17:13:23,745 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 17:13:23,745 - INFO - MessageProcessor main loop started.
2025-06-01 17:13:23,745 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:13:23,746 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 17:13:23,746 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:15:31,855 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:15:31,855 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:15:31,855 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 17:15:31,855 - INFO - MessageProcessor main loop stopped.
2025-06-01 17:15:31,856 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:15:31,856 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:15:31,856 - INFO - Application shutdown event triggered.
2025-06-01 17:15:31,856 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:15:31,856 - INFO - Simulation is not running. No action needed.
2025-06-01 17:15:31,856 - INFO - SimulationManager stop method called.
2025-06-01 17:15:31,856 - INFO - Stopping MessageProcessor...
2025-06-01 17:15:31,856 - INFO - MessageProcessor shutdown complete.
2025-06-01 17:15:31,856 - INFO - Stopping QueueForwarder...
2025-06-01 17:15:31,856 - INFO - QueueForwarder task cancelled.
2025-06-01 17:15:31,856 - INFO - QueueForwarder stopped
2025-06-01 17:15:31,856 - INFO - Calling SimulationManager instance stop method...
2025-06-01 17:15:31,856 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:15:31,856 - INFO - Simulation is not running. No action needed.
2025-06-01 17:15:31,856 - INFO - Shutting down WebSocketManager...
2025-06-01 17:15:31,857 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 17:15:31,857 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:15:31,857 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:15:31,857 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 17:15:31,857 - INFO - Application shutdown complete.
2025-06-01 17:15:34,181 - INFO - Application startup event triggered.
2025-06-01 17:15:34,181 - INFO - Initializing all queues...
2025-06-01 17:15:34,181 - INFO - All queues initialized on loop 134471200
2025-06-01 17:15:34,181 - INFO - Shared queues initialized.
2025-06-01 17:15:34,181 - INFO - Retrieved queue instances. Event loop ID: 134471200
2025-06-01 17:15:34,181 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 17:15:34,181 - INFO - SimulationManager ready state changed from False to True
2025-06-01 17:15:34,181 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 17:15:34,182 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 17:15:34,182 - INFO - Starting MessageProcessor task.
2025-06-01 17:15:34,182 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 17:15:34,182 - INFO - MessageProcessor task started.
2025-06-01 17:15:34,182 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 17:15:34,182 - INFO - QueueForwarder queues already initialized
2025-06-01 17:15:34,182 - INFO - QueueForwarder task started.
2025-06-01 17:15:34,182 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 17:15:34,182 - INFO - MessageProcessor main loop started.
2025-06-01 17:15:34,182 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:15:34,182 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 17:15:34,182 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:15:35,945 - INFO - Adding connection: 127.0.0.1:52396. Total connections: 1
2025-06-01 17:15:35,946 - WARNING - Failed to send connection_ack to 127.0.0.1:52396, client already disconnected: Expected ASGI message "websocket.accept", "websocket.close" or "websocket.http.response.start", but got 'websocket.send'
2025-06-01 17:15:35,946 - INFO - Sender task started for 127.0.0.1:52396
2025-06-01 17:15:35,946 - INFO - Starting receiver for 127.0.0.1:52396 with message tracing
2025-06-01 17:15:35,946 - ERROR - Receive error for 127.0.0.1:52396: WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 202, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 117, in receive_text
    raise RuntimeError('WebSocket is not connected. Need to call "accept" first.')
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-06-01 17:15:35,947 - INFO - Receiver task for 127.0.0.1:52396 finished.
2025-06-01 17:15:48,422 - INFO - Adding connection: 127.0.0.1:47360. Total connections: 2
2025-06-01 17:15:48,423 - WARNING - Failed to send connection_ack to 127.0.0.1:47360, client already disconnected: Expected ASGI message "websocket.accept", "websocket.close" or "websocket.http.response.start", but got 'websocket.send'
2025-06-01 17:15:48,423 - INFO - Sender task started for 127.0.0.1:47360
2025-06-01 17:15:48,423 - INFO - Starting receiver for 127.0.0.1:47360 with message tracing
2025-06-01 17:15:48,424 - ERROR - Receive error for 127.0.0.1:47360: WebSocket is not connected. Need to call "accept" first.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 202, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 117, in receive_text
    raise RuntimeError('WebSocket is not connected. Need to call "accept" first.')
RuntimeError: WebSocket is not connected. Need to call "accept" first.
2025-06-01 17:15:48,424 - INFO - Receiver task for 127.0.0.1:47360 finished.
2025-06-01 17:15:56,037 - INFO - Sender task for 127.0.0.1:52396 was cancelled normally.
2025-06-01 17:15:56,037 - INFO - Sender task for 127.0.0.1:52396 finished.
2025-06-01 17:15:56,038 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:15:56,038 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:15:56,038 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 17:15:56,038 - INFO - MessageProcessor main loop stopped.
2025-06-01 17:15:56,038 - INFO - Sender task for 127.0.0.1:47360 was cancelled normally.
2025-06-01 17:15:56,038 - INFO - Sender task for 127.0.0.1:47360 finished.
2025-06-01 17:15:56,039 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:15:56,039 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:15:56,039 - INFO - Application shutdown event triggered.
2025-06-01 17:15:56,039 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:15:56,039 - INFO - Simulation is not running. No action needed.
2025-06-01 17:15:56,039 - INFO - SimulationManager stop method called.
2025-06-01 17:15:56,039 - INFO - Stopping MessageProcessor...
2025-06-01 17:15:56,039 - INFO - MessageProcessor shutdown complete.
2025-06-01 17:15:56,039 - INFO - Stopping QueueForwarder...
2025-06-01 17:15:56,040 - INFO - QueueForwarder task cancelled.
2025-06-01 17:15:56,040 - INFO - QueueForwarder stopped
2025-06-01 17:15:56,040 - INFO - Calling SimulationManager instance stop method...
2025-06-01 17:15:56,040 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:15:56,040 - INFO - Simulation is not running. No action needed.
2025-06-01 17:15:56,040 - INFO - Shutting down WebSocketManager...
2025-06-01 17:15:56,040 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 17:15:56,040 - INFO - Starting cleanup for 127.0.0.1:47360
2025-06-01 17:15:56,040 - ERROR - Unexpected error closing WebSocket for 127.0.0.1:47360: 'WebSocketProtocol' object has no attribute 'transfer_data_task'
Traceback (most recent call last):
  File "/home/Leo/.local/lib/python3.12/site-packages/fastapi/routing.py", line 136, in merged_lifespan
    yield None  # old ASGI compatibility
    ^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 139, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 340, in cleanup_connection
    await websocket.close(code=1000)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 180, in close
    await self.send({"type": "websocket.close", "code": code, "reason": reason or ""})
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 75, in send
    await self._send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/_exception_handler.py", line 39, in sender
    await send(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py", line 333, in asgi_send
    await self.close(code, reason)
  File "/home/Leo/.local/lib/python3.12/site-packages/websockets/legacy/protocol.py", line 784, in close
    await self.transfer_data_task
          ^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'WebSocketProtocol' object has no attribute 'transfer_data_task'. Did you mean: 'transfer_data_exc'?
2025-06-01 17:15:56,048 - INFO - Connection cleanup completed for 127.0.0.1:47360. Remaining connections: 1
2025-06-01 17:15:56,048 - INFO - Starting cleanup for 127.0.0.1:52396
2025-06-01 17:15:56,048 - INFO - Closed WebSocket connection for 127.0.0.1:52396
2025-06-01 17:15:56,048 - INFO - Connection cleanup completed for 127.0.0.1:52396. Remaining connections: 0
2025-06-01 17:15:56,048 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:15:56,048 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:15:56,049 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 17:15:56,049 - INFO - Application shutdown complete.
2025-06-01 17:15:56,049 - INFO - Initiating cleanup for connection: 127.0.0.1:52396
2025-06-01 17:15:56,049 - INFO - Starting cleanup for 127.0.0.1:52396
2025-06-01 17:15:56,049 - INFO - Connection cleanup completed for 127.0.0.1:52396. Remaining connections: 0
2025-06-01 17:15:56,049 - INFO - Cleanup finished for connection: 127.0.0.1:52396. Total connections: 0
2025-06-01 17:15:56,049 - INFO - Cleanup finished for client_17487909359315he0mk at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:15:56,053 - INFO - Initiating cleanup for connection: 127.0.0.1:47360
2025-06-01 17:15:56,053 - INFO - Starting cleanup for 127.0.0.1:47360
2025-06-01 17:15:56,053 - INFO - Connection cleanup completed for 127.0.0.1:47360. Remaining connections: 0
2025-06-01 17:15:56,053 - INFO - Cleanup finished for connection: 127.0.0.1:47360. Total connections: 0
2025-06-01 17:15:56,053 - INFO - Cleanup finished for client_17487909359315he0mk at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:17:17,864 - INFO - Application startup event triggered.
2025-06-01 17:17:17,864 - INFO - Initializing all queues...
2025-06-01 17:17:17,864 - INFO - All queues initialized on loop 346369568
2025-06-01 17:17:17,864 - INFO - Shared queues initialized.
2025-06-01 17:17:17,864 - INFO - Retrieved queue instances. Event loop ID: 346369568
2025-06-01 17:17:17,864 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 17:17:17,864 - INFO - SimulationManager ready state changed from False to True
2025-06-01 17:17:17,864 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 17:17:17,865 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 17:17:17,865 - INFO - Starting MessageProcessor task.
2025-06-01 17:17:17,865 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 17:17:17,865 - INFO - MessageProcessor task started.
2025-06-01 17:17:17,865 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 17:17:17,865 - INFO - QueueForwarder queues already initialized
2025-06-01 17:17:17,865 - INFO - QueueForwarder task started.
2025-06-01 17:17:17,865 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 17:17:17,865 - INFO - MessageProcessor main loop started.
2025-06-01 17:17:17,865 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:17:17,865 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 17:17:17,865 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:17:19,623 - INFO - WebSocket connection accepted for 127.0.0.1:47512
2025-06-01 17:17:19,623 - INFO - Adding connection: 127.0.0.1:47512. Total connections: 1
2025-06-01 17:17:19,625 - INFO - Sent connection_ack to 127.0.0.1:47512
2025-06-01 17:17:19,625 - INFO - Sender task started for 127.0.0.1:47512
2025-06-01 17:17:19,625 - INFO - Starting receiver for 127.0.0.1:47512 with message tracing
2025-06-01 17:17:19,643 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:47512
2025-06-01 17:17:20,643 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:47512. Status: Frontend ready to receive
2025-06-01 17:17:22,143 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:47512
2025-06-01 17:17:23,143 - INFO - MessageProcessor: Received ping from 127.0.0.1:47512. Responding with pong.
2025-06-01 17:17:23,143 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:47512.
2025-06-01 17:17:23,144 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 17:17:23,154 - INFO - Attempting to send personal message to client: 127.0.0.1:47512
2025-06-01 17:17:23,154 - INFO - Successfully sent personal message to 127.0.0.1:47512 (type: pong)
2025-06-01 17:17:23,154 - WARNING - QueueForwarder: Failed to send message type 'pong' to client 127.0.0.1:47512. Sending to DLQ.
2025-06-01 17:17:23,155 - WARNING - Enqueue failed: Invalid message format for queue dead_letter
2025-06-01 17:17:23,155 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 0, Input Q (to_frontend): 0
2025-06-01 17:17:24,642 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:47512
2025-06-01 17:17:25,643 - INFO - MessageProcessor: Received ping from 127.0.0.1:47512. Responding with pong.
2025-06-01 17:17:25,643 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:47512.
2025-06-01 17:17:25,654 - INFO - Attempting to send personal message to client: 127.0.0.1:47512
2025-06-01 17:17:25,655 - INFO - Successfully sent personal message to 127.0.0.1:47512 (type: pong)
2025-06-01 17:17:25,655 - WARNING - QueueForwarder: Failed to send message type 'pong' to client 127.0.0.1:47512. Sending to DLQ.
2025-06-01 17:17:25,655 - WARNING - Enqueue failed: Invalid message format for queue dead_letter
2025-06-01 17:17:27,143 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:47512
2025-06-01 17:17:28,143 - INFO - MessageProcessor: Received ping from 127.0.0.1:47512. Responding with pong.
2025-06-01 17:17:28,144 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:47512.
2025-06-01 17:17:28,144 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 17:17:28,155 - INFO - Attempting to send personal message to client: 127.0.0.1:47512
2025-06-01 17:17:28,155 - INFO - Successfully sent personal message to 127.0.0.1:47512 (type: pong)
2025-06-01 17:17:28,155 - WARNING - QueueForwarder: Failed to send message type 'pong' to client 127.0.0.1:47512. Sending to DLQ.
2025-06-01 17:17:28,156 - WARNING - Enqueue failed: Invalid message format for queue dead_letter
2025-06-01 17:17:28,156 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 0, Input Q (to_frontend): 0
2025-06-01 17:17:29,643 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:47512
2025-06-01 17:17:30,644 - INFO - MessageProcessor: Received ping from 127.0.0.1:47512. Responding with pong.
2025-06-01 17:17:30,644 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:47512.
2025-06-01 17:17:30,654 - INFO - Attempting to send personal message to client: 127.0.0.1:47512
2025-06-01 17:17:30,655 - INFO - Successfully sent personal message to 127.0.0.1:47512 (type: pong)
2025-06-01 17:17:30,655 - WARNING - QueueForwarder: Failed to send message type 'pong' to client 127.0.0.1:47512. Sending to DLQ.
2025-06-01 17:17:30,655 - WARNING - Enqueue failed: Invalid message format for queue dead_letter
2025-06-01 17:17:32,143 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:47512
2025-06-01 17:17:33,144 - INFO - MessageProcessor: Received ping from 127.0.0.1:47512. Responding with pong.
2025-06-01 17:17:33,144 - INFO - Enqueued response type 'pong' to to_frontend_queue for client 127.0.0.1:47512.
2025-06-01 17:17:33,154 - INFO - Attempting to send personal message to client: 127.0.0.1:47512
2025-06-01 17:17:33,154 - INFO - Successfully sent personal message to 127.0.0.1:47512 (type: pong)
2025-06-01 17:17:33,155 - WARNING - QueueForwarder: Failed to send message type 'pong' to client 127.0.0.1:47512. Sending to DLQ.
2025-06-01 17:17:33,155 - WARNING - Enqueue failed: Invalid message format for queue dead_letter
2025-06-01 17:17:34,610 - INFO - WebSocket disconnected from 127.0.0.1:47512 while receiving: Code 1012
2025-06-01 17:17:34,610 - INFO - Receiver task for 127.0.0.1:47512 finished.
2025-06-01 17:17:34,811 - INFO - QueueForwarder task cancelled.
2025-06-01 17:17:34,811 - INFO - QueueForwarder stopped
2025-06-01 17:17:34,812 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:17:34,812 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:17:34,812 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 17:17:34,812 - INFO - MessageProcessor main loop stopped.
2025-06-01 17:17:34,812 - INFO - Sender task for 127.0.0.1:47512 was cancelled normally.
2025-06-01 17:17:34,812 - INFO - Sender task for 127.0.0.1:47512 finished.
2025-06-01 17:17:34,812 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:17:34,812 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:17:34,812 - INFO - Application shutdown event triggered.
2025-06-01 17:17:34,813 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:17:34,813 - INFO - Simulation is not running. No action needed.
2025-06-01 17:17:34,813 - INFO - SimulationManager stop method called.
2025-06-01 17:17:34,813 - INFO - Stopping MessageProcessor...
2025-06-01 17:17:34,813 - INFO - MessageProcessor shutdown complete.
2025-06-01 17:17:34,813 - INFO - Stopping QueueForwarder...
2025-06-01 17:17:34,813 - INFO - Calling SimulationManager instance stop method...
2025-06-01 17:17:34,813 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:17:34,813 - INFO - Simulation is not running. No action needed.
2025-06-01 17:17:34,813 - INFO - Shutting down WebSocketManager...
2025-06-01 17:17:34,813 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 17:17:34,813 - INFO - Starting cleanup for 127.0.0.1:47512
2025-06-01 17:17:34,813 - INFO - Connection cleanup completed for 127.0.0.1:47512. Remaining connections: 0
2025-06-01 17:17:34,813 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:17:34,813 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:17:34,814 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 17:17:34,814 - INFO - Application shutdown complete.
2025-06-01 17:17:34,815 - INFO - Initiating cleanup for connection: 127.0.0.1:47512
2025-06-01 17:17:34,815 - INFO - Starting cleanup for 127.0.0.1:47512
2025-06-01 17:17:34,815 - INFO - Connection cleanup completed for 127.0.0.1:47512. Remaining connections: 0
2025-06-01 17:17:34,815 - INFO - Cleanup finished for connection: 127.0.0.1:47512. Total connections: 0
2025-06-01 17:17:34,815 - INFO - Cleanup finished for client_1748791039610ubgjd1 at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:27:52,756 - INFO - Application startup event triggered.
2025-06-01 17:27:52,756 - INFO - Initializing all queues...
2025-06-01 17:27:52,756 - INFO - All queues initialized on loop 512904736
2025-06-01 17:27:52,756 - INFO - Shared queues initialized.
2025-06-01 17:27:52,756 - INFO - Retrieved queue instances. Event loop ID: 512904736
2025-06-01 17:27:52,756 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 17:27:52,756 - INFO - SimulationManager ready state changed from False to True
2025-06-01 17:27:52,756 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 17:27:52,756 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 17:27:52,756 - INFO - Starting MessageProcessor task.
2025-06-01 17:27:52,756 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 17:27:52,756 - INFO - MessageProcessor task started.
2025-06-01 17:27:52,757 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 17:27:52,757 - INFO - QueueForwarder queues already initialized
2025-06-01 17:27:52,757 - INFO - QueueForwarder task started.
2025-06-01 17:27:52,757 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 17:27:52,757 - INFO - MessageProcessor main loop started.
2025-06-01 17:27:52,757 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:27:52,757 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 17:27:52,757 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:27:54,509 - INFO - WebSocket connection accepted for 127.0.0.1:34724
2025-06-01 17:27:54,509 - INFO - Adding connection: 127.0.0.1:34724. Total connections: 1
2025-06-01 17:27:54,509 - INFO - Sent connection_ack to 127.0.0.1:34724
2025-06-01 17:27:54,510 - INFO - Sender task started for 127.0.0.1:34724
2025-06-01 17:27:54,510 - INFO - Starting receiver for 127.0.0.1:34724 with message tracing
2025-06-01 17:27:54,527 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:34724
2025-06-01 17:27:55,528 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:34724. Status: Frontend ready to receive
2025-06-01 17:27:57,028 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:34724
2025-06-01 17:27:58,028 - INFO - MessageProcessor: Received ping from 127.0.0.1:34724. (Pong response handled by WebSocketManager)
2025-06-01 17:27:58,028 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 17:27:59,528 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:34724
2025-06-01 17:28:00,528 - INFO - MessageProcessor: Received ping from 127.0.0.1:34724. (Pong response handled by WebSocketManager)
2025-06-01 17:28:02,028 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:34724
2025-06-01 17:28:02,029 - INFO - WebSocket disconnected from 127.0.0.1:34724 while receiving: Code 1005
2025-06-01 17:28:02,029 - INFO - Receiver task for 127.0.0.1:34724 finished.
2025-06-01 17:28:02,030 - INFO - WebSocket connection accepted for 127.0.0.1:34728
2025-06-01 17:28:02,030 - INFO - Adding connection: 127.0.0.1:34728. Total connections: 2
2025-06-01 17:28:02,031 - INFO - Sent connection_ack to 127.0.0.1:34728
2025-06-01 17:28:02,031 - INFO - Sender task started for 127.0.0.1:34728
2025-06-01 17:28:02,031 - INFO - Starting receiver for 127.0.0.1:34728 with message tracing
2025-06-01 17:28:02,034 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:34728
2025-06-01 17:28:03,028 - INFO - MessageProcessor: Received ping from 127.0.0.1:34724. (Pong response handled by WebSocketManager)
2025-06-01 17:28:03,029 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 17:28:04,029 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:34728. Status: Frontend ready to receive
2025-06-01 17:28:04,534 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:34728
2025-06-01 17:28:05,535 - INFO - MessageProcessor: Received ping from 127.0.0.1:34728. (Pong response handled by WebSocketManager)
2025-06-01 17:28:07,035 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:34728
2025-06-01 17:28:08,035 - INFO - MessageProcessor: Received ping from 127.0.0.1:34728. (Pong response handled by WebSocketManager)
2025-06-01 17:28:08,035 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:28:09,535 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:34728
2025-06-01 17:28:09,537 - INFO - WebSocket disconnected from 127.0.0.1:34728 while receiving: Code 1005
2025-06-01 17:28:09,537 - INFO - Receiver task for 127.0.0.1:34728 finished.
2025-06-01 17:28:09,538 - INFO - WebSocket connection accepted for 127.0.0.1:53726
2025-06-01 17:28:09,538 - INFO - Adding connection: 127.0.0.1:53726. Total connections: 3
2025-06-01 17:28:09,539 - INFO - Sent connection_ack to 127.0.0.1:53726
2025-06-01 17:28:09,539 - INFO - Sender task started for 127.0.0.1:53726
2025-06-01 17:28:09,539 - INFO - Starting receiver for 127.0.0.1:53726 with message tracing
2025-06-01 17:28:09,541 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:53726
2025-06-01 17:28:10,536 - INFO - MessageProcessor: Received ping from 127.0.0.1:34728. (Pong response handled by WebSocketManager)
2025-06-01 17:28:11,537 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:53726. Status: Frontend ready to receive
2025-06-01 17:28:12,043 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53726
2025-06-01 17:28:13,043 - INFO - MessageProcessor: Received ping from 127.0.0.1:53726. (Pong response handled by WebSocketManager)
2025-06-01 17:28:13,043 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:28:14,542 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53726
2025-06-01 17:28:15,543 - INFO - MessageProcessor: Received ping from 127.0.0.1:53726. (Pong response handled by WebSocketManager)
2025-06-01 17:28:17,042 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53726
2025-06-01 17:28:17,043 - INFO - WebSocket disconnected from 127.0.0.1:53726 while receiving: Code 1005
2025-06-01 17:28:17,043 - INFO - Receiver task for 127.0.0.1:53726 finished.
2025-06-01 17:28:17,044 - INFO - WebSocket connection accepted for 127.0.0.1:55162
2025-06-01 17:28:17,044 - INFO - Adding connection: 127.0.0.1:55162. Total connections: 4
2025-06-01 17:28:17,045 - INFO - Sent connection_ack to 127.0.0.1:55162
2025-06-01 17:28:17,045 - INFO - Sender task started for 127.0.0.1:55162
2025-06-01 17:28:17,045 - INFO - Starting receiver for 127.0.0.1:55162 with message tracing
2025-06-01 17:28:17,048 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:55162
2025-06-01 17:28:18,042 - INFO - MessageProcessor: Received ping from 127.0.0.1:53726. (Pong response handled by WebSocketManager)
2025-06-01 17:28:19,042 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:55162. Status: Frontend ready to receive
2025-06-01 17:28:19,042 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:28:19,549 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:55162
2025-06-01 17:28:20,549 - INFO - MessageProcessor: Received ping from 127.0.0.1:55162. (Pong response handled by WebSocketManager)
2025-06-01 17:28:22,049 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:55162
2025-06-01 17:28:23,050 - INFO - MessageProcessor: Received ping from 127.0.0.1:55162. (Pong response handled by WebSocketManager)
2025-06-01 17:28:24,549 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:55162
2025-06-01 17:28:24,550 - INFO - WebSocket disconnected from 127.0.0.1:55162 while receiving: Code 1005
2025-06-01 17:28:24,550 - INFO - Receiver task for 127.0.0.1:55162 finished.
2025-06-01 17:28:24,552 - INFO - WebSocket connection accepted for 127.0.0.1:56826
2025-06-01 17:28:24,552 - INFO - Adding connection: 127.0.0.1:56826. Total connections: 5
2025-06-01 17:28:24,553 - INFO - Sent connection_ack to 127.0.0.1:56826
2025-06-01 17:28:24,553 - INFO - Sender task started for 127.0.0.1:56826
2025-06-01 17:28:24,553 - INFO - Starting receiver for 127.0.0.1:56826 with message tracing
2025-06-01 17:28:24,557 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:56826
2025-06-01 17:28:25,550 - INFO - MessageProcessor: Received ping from 127.0.0.1:55162. (Pong response handled by WebSocketManager)
2025-06-01 17:28:25,551 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:28:26,551 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:56826. Status: Frontend ready to receive
2025-06-01 17:28:27,057 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:56826
2025-06-01 17:28:27,179 - INFO - WebSocket disconnected from 127.0.0.1:56826 while receiving: Code 1001
2025-06-01 17:28:27,179 - INFO - Receiver task for 127.0.0.1:56826 finished.
2025-06-01 17:28:28,057 - INFO - MessageProcessor: Received ping from 127.0.0.1:56826. (Pong response handled by WebSocketManager)
2025-06-01 17:28:28,152 - INFO - Sender task for 127.0.0.1:55162 was cancelled normally.
2025-06-01 17:28:28,152 - INFO - Sender task for 127.0.0.1:55162 finished.
2025-06-01 17:28:28,152 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:28:28,152 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:28:28,153 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 17:28:28,153 - INFO - MessageProcessor main loop stopped.
2025-06-01 17:28:28,153 - INFO - Sender task for 127.0.0.1:34724 was cancelled normally.
2025-06-01 17:28:28,153 - INFO - Sender task for 127.0.0.1:34724 finished.
2025-06-01 17:28:28,153 - INFO - Sender task for 127.0.0.1:53726 was cancelled normally.
2025-06-01 17:28:28,153 - INFO - Sender task for 127.0.0.1:53726 finished.
2025-06-01 17:28:28,153 - INFO - Sender task for 127.0.0.1:56826 was cancelled normally.
2025-06-01 17:28:28,153 - INFO - Sender task for 127.0.0.1:56826 finished.
2025-06-01 17:28:28,153 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:28:28,153 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:28:28,153 - INFO - Application shutdown event triggered.
2025-06-01 17:28:28,153 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:28:28,153 - INFO - Simulation is not running. No action needed.
2025-06-01 17:28:28,153 - INFO - SimulationManager stop method called.
2025-06-01 17:28:28,154 - INFO - Stopping MessageProcessor...
2025-06-01 17:28:28,154 - INFO - MessageProcessor shutdown complete.
2025-06-01 17:28:28,154 - INFO - Stopping QueueForwarder...
2025-06-01 17:28:28,154 - INFO - Sender task for 127.0.0.1:34728 was cancelled normally.
2025-06-01 17:28:28,154 - INFO - Sender task for 127.0.0.1:34728 finished.
2025-06-01 17:28:28,154 - INFO - QueueForwarder task cancelled.
2025-06-01 17:28:28,154 - INFO - QueueForwarder stopped
2025-06-01 17:28:28,154 - INFO - Calling SimulationManager instance stop method...
2025-06-01 17:28:28,154 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:28:28,154 - INFO - Simulation is not running. No action needed.
2025-06-01 17:28:28,154 - INFO - Shutting down WebSocketManager...
2025-06-01 17:28:28,154 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 17:28:28,154 - INFO - Starting cleanup for 127.0.0.1:55162
2025-06-01 17:28:28,154 - INFO - Connection cleanup completed for 127.0.0.1:55162. Remaining connections: 4
2025-06-01 17:28:28,155 - INFO - Starting cleanup for 127.0.0.1:34724
2025-06-01 17:28:28,155 - INFO - Connection cleanup completed for 127.0.0.1:34724. Remaining connections: 3
2025-06-01 17:28:28,155 - INFO - Starting cleanup for 127.0.0.1:56826
2025-06-01 17:28:28,155 - INFO - Connection cleanup completed for 127.0.0.1:56826. Remaining connections: 2
2025-06-01 17:28:28,155 - INFO - Starting cleanup for 127.0.0.1:53726
2025-06-01 17:28:28,155 - INFO - Connection cleanup completed for 127.0.0.1:53726. Remaining connections: 1
2025-06-01 17:28:28,155 - INFO - Starting cleanup for 127.0.0.1:34728
2025-06-01 17:28:28,155 - INFO - Connection cleanup completed for 127.0.0.1:34728. Remaining connections: 0
2025-06-01 17:28:28,155 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:28:28,155 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:28:28,155 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 17:28:28,155 - INFO - Application shutdown complete.
2025-06-01 17:28:28,156 - INFO - Initiating cleanup for connection: 127.0.0.1:55162
2025-06-01 17:28:28,156 - INFO - Starting cleanup for 127.0.0.1:55162
2025-06-01 17:28:28,156 - INFO - Connection cleanup completed for 127.0.0.1:55162. Remaining connections: 0
2025-06-01 17:28:28,157 - INFO - Cleanup finished for connection: 127.0.0.1:55162. Total connections: 0
2025-06-01 17:28:28,157 - INFO - Cleanup finished for client_1748791674497mqadyn at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:28:28,160 - INFO - Initiating cleanup for connection: 127.0.0.1:34724
2025-06-01 17:28:28,161 - INFO - Starting cleanup for 127.0.0.1:34724
2025-06-01 17:28:28,161 - INFO - Connection cleanup completed for 127.0.0.1:34724. Remaining connections: 0
2025-06-01 17:28:28,161 - INFO - Cleanup finished for connection: 127.0.0.1:34724. Total connections: 0
2025-06-01 17:28:28,161 - INFO - Cleanup finished for client_1748791674497mqadyn at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:28:28,162 - INFO - Initiating cleanup for connection: 127.0.0.1:53726
2025-06-01 17:28:28,162 - INFO - Starting cleanup for 127.0.0.1:53726
2025-06-01 17:28:28,162 - INFO - Connection cleanup completed for 127.0.0.1:53726. Remaining connections: 0
2025-06-01 17:28:28,162 - INFO - Cleanup finished for connection: 127.0.0.1:53726. Total connections: 0
2025-06-01 17:28:28,162 - INFO - Cleanup finished for client_1748791674497mqadyn at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:28:28,163 - INFO - Initiating cleanup for connection: 127.0.0.1:56826
2025-06-01 17:28:28,163 - INFO - Starting cleanup for 127.0.0.1:56826
2025-06-01 17:28:28,163 - INFO - Connection cleanup completed for 127.0.0.1:56826. Remaining connections: 0
2025-06-01 17:28:28,163 - INFO - Cleanup finished for connection: 127.0.0.1:56826. Total connections: 0
2025-06-01 17:28:28,163 - INFO - Cleanup finished for client_1748791674497mqadyn at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:28:28,164 - INFO - Initiating cleanup for connection: 127.0.0.1:34728
2025-06-01 17:28:28,164 - INFO - Starting cleanup for 127.0.0.1:34728
2025-06-01 17:28:28,164 - INFO - Connection cleanup completed for 127.0.0.1:34728. Remaining connections: 0
2025-06-01 17:28:28,164 - INFO - Cleanup finished for connection: 127.0.0.1:34728. Total connections: 0
2025-06-01 17:28:28,164 - INFO - Cleanup finished for client_1748791674497mqadyn at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:36:12,733 - INFO - Application startup event triggered.
2025-06-01 17:36:12,733 - INFO - Initializing all queues...
2025-06-01 17:36:12,733 - INFO - All queues initialized on loop 768613920
2025-06-01 17:36:12,733 - INFO - Shared queues initialized.
2025-06-01 17:36:12,733 - INFO - Retrieved queue instances. Event loop ID: 768613920
2025-06-01 17:36:12,733 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 17:36:12,733 - INFO - SimulationManager ready state changed from False to True
2025-06-01 17:36:12,733 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 17:36:12,733 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 17:36:12,733 - INFO - Starting MessageProcessor task.
2025-06-01 17:36:12,733 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 17:36:12,733 - INFO - MessageProcessor task started.
2025-06-01 17:36:12,733 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 17:36:12,733 - INFO - QueueForwarder queues already initialized
2025-06-01 17:36:12,733 - INFO - QueueForwarder task started.
2025-06-01 17:36:12,733 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 17:36:12,734 - INFO - MessageProcessor main loop started.
2025-06-01 17:36:12,734 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:36:12,734 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 17:36:12,734 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:36:14,451 - INFO - WebSocket connection accepted for 127.0.0.1:38636
2025-06-01 17:36:14,451 - INFO - Adding connection: 127.0.0.1:38636. Total connections: 1
2025-06-01 17:36:14,452 - INFO - Sent connection_ack to 127.0.0.1:38636
2025-06-01 17:36:14,452 - INFO - Sender task started for 127.0.0.1:38636
2025-06-01 17:36:14,452 - INFO - Starting receiver for 127.0.0.1:38636 with message tracing
2025-06-01 17:36:14,471 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:38636
2025-06-01 17:36:15,471 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:38636. Status: Frontend ready to receive
2025-06-01 17:36:16,971 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:38636
2025-06-01 17:36:17,971 - INFO - MessageProcessor: Received ping from 127.0.0.1:38636. (Pong handled by WebSocketManager)
2025-06-01 17:36:17,972 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 17:36:19,471 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:38636
2025-06-01 17:36:20,471 - INFO - MessageProcessor: Received ping from 127.0.0.1:38636. (Pong handled by WebSocketManager)
2025-06-01 17:36:21,971 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:38636
2025-06-01 17:36:21,972 - INFO - WebSocket disconnected from 127.0.0.1:38636 while receiving: Code 1005
2025-06-01 17:36:21,972 - INFO - Receiver task for 127.0.0.1:38636 finished.
2025-06-01 17:36:21,974 - INFO - WebSocket connection accepted for 127.0.0.1:38648
2025-06-01 17:36:21,974 - INFO - Adding connection: 127.0.0.1:38648. Total connections: 2
2025-06-01 17:36:21,974 - INFO - Sent connection_ack to 127.0.0.1:38648
2025-06-01 17:36:21,974 - INFO - Sender task started for 127.0.0.1:38648
2025-06-01 17:36:21,975 - INFO - Starting receiver for 127.0.0.1:38648 with message tracing
2025-06-01 17:36:21,976 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:38648
2025-06-01 17:36:22,972 - INFO - MessageProcessor: Received ping from 127.0.0.1:38636. (Pong handled by WebSocketManager)
2025-06-01 17:36:22,972 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 17:36:23,973 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:38648. Status: Frontend ready to receive
2025-06-01 17:36:24,477 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:38648
2025-06-01 17:36:25,478 - INFO - MessageProcessor: Received ping from 127.0.0.1:38648. (Pong handled by WebSocketManager)
2025-06-01 17:36:26,977 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:38648
2025-06-01 17:36:27,978 - INFO - MessageProcessor: Received ping from 127.0.0.1:38648. (Pong handled by WebSocketManager)
2025-06-01 17:36:27,979 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:36:29,477 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:38648
2025-06-01 17:36:29,479 - INFO - WebSocket disconnected from 127.0.0.1:38648 while receiving: Code 1005
2025-06-01 17:36:29,479 - INFO - Receiver task for 127.0.0.1:38648 finished.
2025-06-01 17:36:29,480 - INFO - WebSocket connection accepted for 127.0.0.1:36350
2025-06-01 17:36:29,480 - INFO - Adding connection: 127.0.0.1:36350. Total connections: 3
2025-06-01 17:36:29,481 - INFO - Sent connection_ack to 127.0.0.1:36350
2025-06-01 17:36:29,481 - INFO - Sender task started for 127.0.0.1:36350
2025-06-01 17:36:29,481 - INFO - Starting receiver for 127.0.0.1:36350 with message tracing
2025-06-01 17:36:29,483 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:36350
2025-06-01 17:36:30,479 - INFO - MessageProcessor: Received ping from 127.0.0.1:38648. (Pong handled by WebSocketManager)
2025-06-01 17:36:31,479 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:36350. Status: Frontend ready to receive
2025-06-01 17:36:31,984 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:36350
2025-06-01 17:36:32,985 - INFO - MessageProcessor: Received ping from 127.0.0.1:36350. (Pong handled by WebSocketManager)
2025-06-01 17:36:32,986 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:36:34,484 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:36350
2025-06-01 17:36:35,486 - INFO - MessageProcessor: Received ping from 127.0.0.1:36350. (Pong handled by WebSocketManager)
2025-06-01 17:36:36,984 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:36350
2025-06-01 17:36:36,985 - INFO - WebSocket disconnected from 127.0.0.1:36350 while receiving: Code 1005
2025-06-01 17:36:36,985 - INFO - Receiver task for 127.0.0.1:36350 finished.
2025-06-01 17:36:36,985 - INFO - WebSocket connection accepted for 127.0.0.1:39432
2025-06-01 17:36:36,985 - INFO - Adding connection: 127.0.0.1:39432. Total connections: 4
2025-06-01 17:36:36,986 - INFO - Sent connection_ack to 127.0.0.1:39432
2025-06-01 17:36:36,986 - INFO - Sender task started for 127.0.0.1:39432
2025-06-01 17:36:36,986 - INFO - Starting receiver for 127.0.0.1:39432 with message tracing
2025-06-01 17:36:36,989 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:39432
2025-06-01 17:36:37,985 - INFO - MessageProcessor: Received ping from 127.0.0.1:36350. (Pong handled by WebSocketManager)
2025-06-01 17:36:38,986 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:39432. Status: Frontend ready to receive
2025-06-01 17:36:38,986 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:36:39,489 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:39432
2025-06-01 17:36:40,490 - INFO - MessageProcessor: Received ping from 127.0.0.1:39432. (Pong handled by WebSocketManager)
2025-06-01 17:36:41,989 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:39432
2025-06-01 17:36:42,989 - INFO - MessageProcessor: Received ping from 127.0.0.1:39432. (Pong handled by WebSocketManager)
2025-06-01 17:36:44,489 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:39432
2025-06-01 17:36:44,490 - INFO - WebSocket disconnected from 127.0.0.1:39432 while receiving: Code 1005
2025-06-01 17:36:44,491 - INFO - Receiver task for 127.0.0.1:39432 finished.
2025-06-01 17:36:44,493 - INFO - WebSocket connection accepted for 127.0.0.1:53318
2025-06-01 17:36:44,493 - INFO - Adding connection: 127.0.0.1:53318. Total connections: 5
2025-06-01 17:36:44,494 - INFO - Sent connection_ack to 127.0.0.1:53318
2025-06-01 17:36:44,494 - INFO - Sender task started for 127.0.0.1:53318
2025-06-01 17:36:44,495 - INFO - Starting receiver for 127.0.0.1:53318 with message tracing
2025-06-01 17:36:44,497 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:53318
2025-06-01 17:36:45,490 - INFO - MessageProcessor: Received ping from 127.0.0.1:39432. (Pong handled by WebSocketManager)
2025-06-01 17:36:45,491 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:36:46,491 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:53318. Status: Frontend ready to receive
2025-06-01 17:36:46,998 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53318
2025-06-01 17:36:48,000 - INFO - MessageProcessor: Received ping from 127.0.0.1:53318. (Pong handled by WebSocketManager)
2025-06-01 17:36:49,498 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53318
2025-06-01 17:36:50,499 - INFO - MessageProcessor: Received ping from 127.0.0.1:53318. (Pong handled by WebSocketManager)
2025-06-01 17:36:50,499 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:36:51,998 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53318
2025-06-01 17:36:51,999 - INFO - WebSocket disconnected from 127.0.0.1:53318 while receiving: Code 1005
2025-06-01 17:36:51,999 - INFO - Receiver task for 127.0.0.1:53318 finished.
2025-06-01 17:36:52,000 - INFO - WebSocket connection accepted for 127.0.0.1:53332
2025-06-01 17:36:52,000 - INFO - Adding connection: 127.0.0.1:53332. Total connections: 6
2025-06-01 17:36:52,001 - INFO - Sent connection_ack to 127.0.0.1:53332
2025-06-01 17:36:52,001 - INFO - Sender task started for 127.0.0.1:53332
2025-06-01 17:36:52,002 - INFO - Starting receiver for 127.0.0.1:53332 with message tracing
2025-06-01 17:36:52,005 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:53332
2025-06-01 17:36:52,999 - INFO - MessageProcessor: Received ping from 127.0.0.1:53318. (Pong handled by WebSocketManager)
2025-06-01 17:36:53,999 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:53332. Status: Frontend ready to receive
2025-06-01 17:36:54,506 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53332
2025-06-01 17:36:55,506 - INFO - MessageProcessor: Received ping from 127.0.0.1:53332. (Pong handled by WebSocketManager)
2025-06-01 17:36:55,506 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:36:57,006 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53332
2025-06-01 17:36:58,006 - INFO - MessageProcessor: Received ping from 127.0.0.1:53332. (Pong handled by WebSocketManager)
2025-06-01 17:36:59,506 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:53332
2025-06-01 17:36:59,507 - INFO - WebSocket disconnected from 127.0.0.1:53332 while receiving: Code 1005
2025-06-01 17:36:59,507 - INFO - Receiver task for 127.0.0.1:53332 finished.
2025-06-01 17:36:59,508 - INFO - WebSocket connection accepted for 127.0.0.1:42544
2025-06-01 17:36:59,508 - INFO - Adding connection: 127.0.0.1:42544. Total connections: 7
2025-06-01 17:36:59,509 - INFO - Sent connection_ack to 127.0.0.1:42544
2025-06-01 17:36:59,509 - INFO - Sender task started for 127.0.0.1:42544
2025-06-01 17:36:59,509 - INFO - Starting receiver for 127.0.0.1:42544 with message tracing
2025-06-01 17:36:59,512 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:42544
2025-06-01 17:37:00,506 - INFO - MessageProcessor: Received ping from 127.0.0.1:53332. (Pong handled by WebSocketManager)
2025-06-01 17:37:01,507 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:42544. Status: Frontend ready to receive
2025-06-01 17:37:01,507 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:37:02,012 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:42544
2025-06-01 17:37:03,012 - INFO - MessageProcessor: Received ping from 127.0.0.1:42544. (Pong handled by WebSocketManager)
2025-06-01 17:37:04,512 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:42544
2025-06-01 17:37:05,512 - INFO - MessageProcessor: Received ping from 127.0.0.1:42544. (Pong handled by WebSocketManager)
2025-06-01 17:37:07,012 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:42544
2025-06-01 17:37:07,013 - INFO - WebSocket disconnected from 127.0.0.1:42544 while receiving: Code 1005
2025-06-01 17:37:07,013 - INFO - Receiver task for 127.0.0.1:42544 finished.
2025-06-01 17:37:07,014 - INFO - WebSocket connection accepted for 127.0.0.1:50468
2025-06-01 17:37:07,014 - INFO - Adding connection: 127.0.0.1:50468. Total connections: 8
2025-06-01 17:37:07,015 - INFO - Sent connection_ack to 127.0.0.1:50468
2025-06-01 17:37:07,015 - INFO - Sender task started for 127.0.0.1:50468
2025-06-01 17:37:07,015 - INFO - Starting receiver for 127.0.0.1:50468 with message tracing
2025-06-01 17:37:07,017 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:50468
2025-06-01 17:37:08,013 - INFO - MessageProcessor: Received ping from 127.0.0.1:42544. (Pong handled by WebSocketManager)
2025-06-01 17:37:08,013 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:37:09,013 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:50468. Status: Frontend ready to receive
2025-06-01 17:37:09,518 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:50468
2025-06-01 17:37:10,518 - INFO - MessageProcessor: Received ping from 127.0.0.1:50468. (Pong handled by WebSocketManager)
2025-06-01 17:37:12,018 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:50468
2025-06-01 17:37:13,019 - INFO - MessageProcessor: Received ping from 127.0.0.1:50468. (Pong handled by WebSocketManager)
2025-06-01 17:37:13,019 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:37:14,518 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:50468
2025-06-01 17:37:14,519 - INFO - WebSocket disconnected from 127.0.0.1:50468 while receiving: Code 1005
2025-06-01 17:37:14,519 - INFO - Receiver task for 127.0.0.1:50468 finished.
2025-06-01 17:37:14,521 - INFO - WebSocket connection accepted for 127.0.0.1:35722
2025-06-01 17:37:14,521 - INFO - Adding connection: 127.0.0.1:35722. Total connections: 9
2025-06-01 17:37:14,521 - INFO - Sent connection_ack to 127.0.0.1:35722
2025-06-01 17:37:14,522 - INFO - Sender task started for 127.0.0.1:35722
2025-06-01 17:37:14,522 - INFO - Starting receiver for 127.0.0.1:35722 with message tracing
2025-06-01 17:37:14,524 - INFO - Enqueuing valid message of type 'frontend_ready_ack' from 127.0.0.1:35722
2025-06-01 17:37:15,519 - INFO - MessageProcessor: Received ping from 127.0.0.1:50468. (Pong handled by WebSocketManager)
2025-06-01 17:37:16,519 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:35722. Status: Frontend ready to receive
2025-06-01 17:37:17,025 - INFO - Enqueuing valid message of type 'ping' from 127.0.0.1:35722
2025-06-01 17:37:17,625 - INFO - WebSocket disconnected from 127.0.0.1:35722 while receiving: Code 1012
2025-06-01 17:37:17,626 - INFO - Receiver task for 127.0.0.1:35722 finished.
2025-06-01 17:37:17,827 - INFO - Sender task for 127.0.0.1:53332 was cancelled normally.
2025-06-01 17:37:17,827 - INFO - Sender task for 127.0.0.1:53332 finished.
2025-06-01 17:37:17,827 - INFO - Sender task for 127.0.0.1:38636 was cancelled normally.
2025-06-01 17:37:17,827 - INFO - Sender task for 127.0.0.1:38636 finished.
2025-06-01 17:37:17,827 - INFO - Sender task for 127.0.0.1:36350 was cancelled normally.
2025-06-01 17:37:17,827 - INFO - Sender task for 127.0.0.1:36350 finished.
2025-06-01 17:37:17,828 - INFO - Application shutdown event triggered.
2025-06-01 17:37:17,828 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:37:17,828 - INFO - Simulation is not running. No action needed.
2025-06-01 17:37:17,828 - INFO - SimulationManager stop method called.
2025-06-01 17:37:17,828 - INFO - Stopping MessageProcessor...
2025-06-01 17:37:17,828 - INFO - Sender task for 127.0.0.1:42544 was cancelled normally.
2025-06-01 17:37:17,828 - INFO - Sender task for 127.0.0.1:42544 finished.
2025-06-01 17:37:17,828 - INFO - Sender task for 127.0.0.1:53318 was cancelled normally.
2025-06-01 17:37:17,828 - INFO - Sender task for 127.0.0.1:53318 finished.
2025-06-01 17:37:17,828 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 17:37:17,828 - INFO - MessageProcessor main loop stopped.
2025-06-01 17:37:17,828 - INFO - Sender task for 127.0.0.1:38648 was cancelled normally.
2025-06-01 17:37:17,828 - INFO - Sender task for 127.0.0.1:38648 finished.
2025-06-01 17:37:17,829 - INFO - Sender task for 127.0.0.1:35722 was cancelled normally.
2025-06-01 17:37:17,829 - INFO - Sender task for 127.0.0.1:35722 finished.
2025-06-01 17:37:17,829 - INFO - Sender task for 127.0.0.1:39432 was cancelled normally.
2025-06-01 17:37:17,829 - INFO - Sender task for 127.0.0.1:39432 finished.
2025-06-01 17:37:17,829 - INFO - Sender task for 127.0.0.1:50468 was cancelled normally.
2025-06-01 17:37:17,829 - INFO - Sender task for 127.0.0.1:50468 finished.
2025-06-01 17:37:17,829 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:37:17,829 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:37:17,829 - INFO - QueueForwarder task cancelled.
2025-06-01 17:37:17,829 - INFO - QueueForwarder stopped
2025-06-01 17:37:17,829 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:37:17,829 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:37:17,829 - INFO - MessageProcessor shutdown complete.
2025-06-01 17:37:17,830 - INFO - Stopping QueueForwarder...
2025-06-01 17:37:17,830 - INFO - Calling SimulationManager instance stop method...
2025-06-01 17:37:17,830 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:37:17,830 - INFO - Simulation is not running. No action needed.
2025-06-01 17:37:17,830 - INFO - Shutting down WebSocketManager...
2025-06-01 17:37:17,830 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 17:37:17,830 - INFO - Starting cleanup for 127.0.0.1:35722
2025-06-01 17:37:17,830 - INFO - Connection cleanup completed for 127.0.0.1:35722. Remaining connections: 8
2025-06-01 17:37:17,830 - INFO - Starting cleanup for 127.0.0.1:53332
2025-06-01 17:37:17,830 - INFO - Connection cleanup completed for 127.0.0.1:53332. Remaining connections: 7
2025-06-01 17:37:17,830 - INFO - Starting cleanup for 127.0.0.1:38648
2025-06-01 17:37:17,830 - INFO - Connection cleanup completed for 127.0.0.1:38648. Remaining connections: 6
2025-06-01 17:37:17,830 - INFO - Starting cleanup for 127.0.0.1:38636
2025-06-01 17:37:17,830 - INFO - Connection cleanup completed for 127.0.0.1:38636. Remaining connections: 5
2025-06-01 17:37:17,830 - INFO - Starting cleanup for 127.0.0.1:42544
2025-06-01 17:37:17,831 - INFO - Connection cleanup completed for 127.0.0.1:42544. Remaining connections: 4
2025-06-01 17:37:17,831 - INFO - Starting cleanup for 127.0.0.1:39432
2025-06-01 17:37:17,831 - INFO - Connection cleanup completed for 127.0.0.1:39432. Remaining connections: 3
2025-06-01 17:37:17,831 - INFO - Starting cleanup for 127.0.0.1:50468
2025-06-01 17:37:17,831 - INFO - Connection cleanup completed for 127.0.0.1:50468. Remaining connections: 2
2025-06-01 17:37:17,831 - INFO - Starting cleanup for 127.0.0.1:36350
2025-06-01 17:37:17,831 - INFO - Connection cleanup completed for 127.0.0.1:36350. Remaining connections: 1
2025-06-01 17:37:17,831 - INFO - Starting cleanup for 127.0.0.1:53318
2025-06-01 17:37:17,831 - INFO - Connection cleanup completed for 127.0.0.1:53318. Remaining connections: 0
2025-06-01 17:37:17,831 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:37:17,831 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:37:17,831 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 17:37:17,831 - INFO - Application shutdown complete.
2025-06-01 17:37:17,832 - INFO - Initiating cleanup for connection: 127.0.0.1:53332
2025-06-01 17:37:17,832 - INFO - Starting cleanup for 127.0.0.1:53332
2025-06-01 17:37:17,832 - INFO - Connection cleanup completed for 127.0.0.1:53332. Remaining connections: 0
2025-06-01 17:37:17,833 - INFO - Cleanup finished for connection: 127.0.0.1:53332. Total connections: 0
2025-06-01 17:37:17,833 - INFO - Cleanup finished for client_1748792174437e6smgf at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:37:17,836 - INFO - Initiating cleanup for connection: 127.0.0.1:38636
2025-06-01 17:37:17,837 - INFO - Starting cleanup for 127.0.0.1:38636
2025-06-01 17:37:17,837 - INFO - Connection cleanup completed for 127.0.0.1:38636. Remaining connections: 0
2025-06-01 17:37:17,837 - INFO - Cleanup finished for connection: 127.0.0.1:38636. Total connections: 0
2025-06-01 17:37:17,837 - INFO - Cleanup finished for client_1748792174437e6smgf at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:37:17,838 - INFO - Initiating cleanup for connection: 127.0.0.1:36350
2025-06-01 17:37:17,838 - INFO - Starting cleanup for 127.0.0.1:36350
2025-06-01 17:37:17,838 - INFO - Connection cleanup completed for 127.0.0.1:36350. Remaining connections: 0
2025-06-01 17:37:17,838 - INFO - Cleanup finished for connection: 127.0.0.1:36350. Total connections: 0
2025-06-01 17:37:17,838 - INFO - Cleanup finished for client_1748792174437e6smgf at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:37:17,839 - INFO - Initiating cleanup for connection: 127.0.0.1:42544
2025-06-01 17:37:17,839 - INFO - Starting cleanup for 127.0.0.1:42544
2025-06-01 17:37:17,839 - INFO - Connection cleanup completed for 127.0.0.1:42544. Remaining connections: 0
2025-06-01 17:37:17,839 - INFO - Cleanup finished for connection: 127.0.0.1:42544. Total connections: 0
2025-06-01 17:37:17,839 - INFO - Cleanup finished for client_1748792174437e6smgf at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:37:17,840 - INFO - Initiating cleanup for connection: 127.0.0.1:53318
2025-06-01 17:37:17,840 - INFO - Starting cleanup for 127.0.0.1:53318
2025-06-01 17:37:17,840 - INFO - Connection cleanup completed for 127.0.0.1:53318. Remaining connections: 0
2025-06-01 17:37:17,840 - INFO - Cleanup finished for connection: 127.0.0.1:53318. Total connections: 0
2025-06-01 17:37:17,840 - INFO - Cleanup finished for client_1748792174437e6smgf at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:37:17,841 - INFO - Initiating cleanup for connection: 127.0.0.1:38648
2025-06-01 17:37:17,841 - INFO - Starting cleanup for 127.0.0.1:38648
2025-06-01 17:37:17,841 - INFO - Connection cleanup completed for 127.0.0.1:38648. Remaining connections: 0
2025-06-01 17:37:17,841 - INFO - Cleanup finished for connection: 127.0.0.1:38648. Total connections: 0
2025-06-01 17:37:17,841 - INFO - Cleanup finished for client_1748792174437e6smgf at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:37:17,841 - INFO - Initiating cleanup for connection: 127.0.0.1:35722
2025-06-01 17:37:17,841 - INFO - Starting cleanup for 127.0.0.1:35722
2025-06-01 17:37:17,842 - INFO - Connection cleanup completed for 127.0.0.1:35722. Remaining connections: 0
2025-06-01 17:37:17,842 - INFO - Cleanup finished for connection: 127.0.0.1:35722. Total connections: 0
2025-06-01 17:37:17,842 - INFO - Cleanup finished for client_1748792174437e6smgf at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:37:17,842 - INFO - Initiating cleanup for connection: 127.0.0.1:39432
2025-06-01 17:37:17,842 - INFO - Starting cleanup for 127.0.0.1:39432
2025-06-01 17:37:17,842 - INFO - Connection cleanup completed for 127.0.0.1:39432. Remaining connections: 0
2025-06-01 17:37:17,842 - INFO - Cleanup finished for connection: 127.0.0.1:39432. Total connections: 0
2025-06-01 17:37:17,842 - INFO - Cleanup finished for client_1748792174437e6smgf at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:37:17,843 - INFO - Initiating cleanup for connection: 127.0.0.1:50468
2025-06-01 17:37:17,843 - INFO - Starting cleanup for 127.0.0.1:50468
2025-06-01 17:37:17,843 - INFO - Connection cleanup completed for 127.0.0.1:50468. Remaining connections: 0
2025-06-01 17:37:17,843 - INFO - Cleanup finished for connection: 127.0.0.1:50468. Total connections: 0
2025-06-01 17:37:17,843 - INFO - Cleanup finished for client_1748792174437e6smgf at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:43:32,163 - INFO - Application startup event triggered.
2025-06-01 17:43:32,163 - INFO - Initializing all queues...
2025-06-01 17:43:32,163 - INFO - All queues initialized on loop 53915168
2025-06-01 17:43:32,163 - INFO - Shared queues initialized.
2025-06-01 17:43:32,163 - INFO - Retrieved queue instances. Event loop ID: 53915168
2025-06-01 17:43:32,163 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 17:43:32,163 - INFO - SimulationManager ready state changed from False to True
2025-06-01 17:43:32,163 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 17:43:32,163 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 17:43:32,163 - INFO - Starting MessageProcessor task.
2025-06-01 17:43:32,163 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 17:43:32,163 - INFO - MessageProcessor task started.
2025-06-01 17:43:32,163 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 17:43:32,163 - INFO - QueueForwarder queues already initialized
2025-06-01 17:43:32,163 - INFO - QueueForwarder task started.
2025-06-01 17:43:32,163 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 17:43:32,163 - INFO - MessageProcessor main loop started.
2025-06-01 17:43:32,163 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:43:32,163 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 17:43:32,163 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:43:33,933 - INFO - WebSocket connection accepted for 127.0.0.1:36328
2025-06-01 17:43:33,933 - INFO - Adding connection: 127.0.0.1:36328. Total connections: 1
2025-06-01 17:43:33,934 - INFO - Sent connection_ack to 127.0.0.1:36328
2025-06-01 17:43:33,934 - INFO - Sender task started for 127.0.0.1:36328
2025-06-01 17:43:33,934 - INFO - Starting receiver for 127.0.0.1:36328 with enhanced message tracing
2025-06-01 17:43:33,953 - INFO - [Receiver 1] Valid message type 'frontend_ready_ack' from 127.0.0.1:36328
2025-06-01 17:43:34,954 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:36328. Status: Frontend ready to receive
2025-06-01 17:43:36,453 - INFO - [Receiver 2] Valid message type 'ping' from 127.0.0.1:36328
2025-06-01 17:43:37,453 - INFO - MessageProcessor: Received ping from 127.0.0.1:36328. (Pong handled by WebSocketManager)
2025-06-01 17:43:37,453 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 17:43:38,953 - INFO - [Receiver 3] Valid message type 'ping' from 127.0.0.1:36328
2025-06-01 17:43:39,954 - INFO - MessageProcessor: Received ping from 127.0.0.1:36328. (Pong handled by WebSocketManager)
2025-06-01 17:43:41,453 - INFO - [Receiver 4] Valid message type 'ping' from 127.0.0.1:36328
2025-06-01 17:43:41,456 - ERROR - Error receiving message from 127.0.0.1:36328: (1005, None)
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 212, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 119, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1005, None)
2025-06-01 17:43:41,458 - INFO - WebSocket connection accepted for 127.0.0.1:54488
2025-06-01 17:43:41,458 - INFO - Adding connection: 127.0.0.1:54488. Total connections: 2
2025-06-01 17:43:41,459 - INFO - Sent connection_ack to 127.0.0.1:54488
2025-06-01 17:43:41,459 - INFO - Sender task started for 127.0.0.1:54488
2025-06-01 17:43:41,459 - INFO - Starting receiver for 127.0.0.1:54488 with enhanced message tracing
2025-06-01 17:43:41,461 - INFO - [Receiver 1] Valid message type 'frontend_ready_ack' from 127.0.0.1:54488
2025-06-01 17:43:42,454 - INFO - MessageProcessor: Received ping from 127.0.0.1:36328. (Pong handled by WebSocketManager)
2025-06-01 17:43:42,454 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 17:43:42,457 - ERROR - Error receiving message from 127.0.0.1:36328: Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 212, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 118, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError('Cannot call "receive" once a disconnect message has been received.')
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-06-01 17:43:43,455 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:54488. Status: Frontend ready to receive
2025-06-01 17:43:43,458 - ERROR - Error receiving message from 127.0.0.1:36328: Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 212, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 118, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError('Cannot call "receive" once a disconnect message has been received.')
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-06-01 17:43:43,962 - INFO - [Receiver 2] Valid message type 'ping' from 127.0.0.1:54488
2025-06-01 17:43:44,459 - ERROR - Error receiving message from 127.0.0.1:36328: Cannot call "receive" once a disconnect message has been received.
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 212, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 118, in receive_text
    message = await self.receive()
              ^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 56, in receive
    raise RuntimeError('Cannot call "receive" once a disconnect message has been received.')
RuntimeError: Cannot call "receive" once a disconnect message has been received.
2025-06-01 17:43:44,962 - INFO - MessageProcessor: Received ping from 127.0.0.1:54488. (Pong handled by WebSocketManager)
2025-06-01 17:43:45,004 - ERROR - Error receiving message from 127.0.0.1:54488: (1012, None)
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 212, in _receiver
    data = await websocket.receive_text()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 119, in receive_text
    self._raise_on_disconnect(message)
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/websockets.py", line 113, in _raise_on_disconnect
    raise WebSocketDisconnect(message["code"], message.get("reason"))
starlette.websockets.WebSocketDisconnect: (1012, None)
2025-06-01 17:43:45,206 - INFO - Receiver task for 127.0.0.1:36328 cancelled normally
2025-06-01 17:43:45,206 - INFO - Receiver task ended for 127.0.0.1:36328. Processed 4 messages
2025-06-01 17:43:45,206 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:43:45,206 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:43:45,206 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 17:43:45,207 - INFO - MessageProcessor main loop stopped.
2025-06-01 17:43:45,207 - INFO - Sender task for 127.0.0.1:36328 was cancelled normally.
2025-06-01 17:43:45,207 - INFO - Sender task for 127.0.0.1:36328 finished.
2025-06-01 17:43:45,207 - INFO - Sender task for 127.0.0.1:54488 was cancelled normally.
2025-06-01 17:43:45,207 - INFO - Sender task for 127.0.0.1:54488 finished.
2025-06-01 17:43:45,207 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:43:45,207 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:43:45,207 - INFO - Application shutdown event triggered.
2025-06-01 17:43:45,207 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:43:45,207 - INFO - Simulation is not running. No action needed.
2025-06-01 17:43:45,207 - INFO - SimulationManager stop method called.
2025-06-01 17:43:45,207 - INFO - Stopping MessageProcessor...
2025-06-01 17:43:45,207 - INFO - MessageProcessor shutdown complete.
2025-06-01 17:43:45,207 - INFO - Stopping QueueForwarder...
2025-06-01 17:43:45,208 - INFO - Receiver task for 127.0.0.1:54488 cancelled normally
2025-06-01 17:43:45,208 - INFO - Receiver task ended for 127.0.0.1:54488. Processed 2 messages
2025-06-01 17:43:45,208 - INFO - QueueForwarder task cancelled.
2025-06-01 17:43:45,208 - INFO - QueueForwarder stopped
2025-06-01 17:43:45,208 - INFO - Calling SimulationManager instance stop method...
2025-06-01 17:43:45,208 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:43:45,208 - INFO - Simulation is not running. No action needed.
2025-06-01 17:43:45,208 - INFO - Shutting down WebSocketManager...
2025-06-01 17:43:45,208 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 17:43:45,208 - INFO - Starting cleanup for 127.0.0.1:54488
2025-06-01 17:43:45,208 - INFO - Connection cleanup completed for 127.0.0.1:54488. Remaining connections: 1
2025-06-01 17:43:45,208 - INFO - Starting cleanup for 127.0.0.1:36328
2025-06-01 17:43:45,208 - INFO - Connection cleanup completed for 127.0.0.1:36328. Remaining connections: 0
2025-06-01 17:43:45,208 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:43:45,209 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:43:45,209 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 17:43:45,209 - INFO - Application shutdown complete.
2025-06-01 17:43:45,210 - INFO - Initiating cleanup for connection: 127.0.0.1:36328
2025-06-01 17:43:45,210 - INFO - Starting cleanup for 127.0.0.1:36328
2025-06-01 17:43:45,210 - INFO - Connection cleanup completed for 127.0.0.1:36328. Remaining connections: 0
2025-06-01 17:43:45,210 - INFO - Cleanup finished for connection: 127.0.0.1:36328. Total connections: 0
2025-06-01 17:43:45,210 - INFO - Cleanup finished for client_1748792613919hkwktf at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:43:45,213 - INFO - Initiating cleanup for connection: 127.0.0.1:54488
2025-06-01 17:43:45,213 - INFO - Starting cleanup for 127.0.0.1:54488
2025-06-01 17:43:45,213 - INFO - Connection cleanup completed for 127.0.0.1:54488. Remaining connections: 0
2025-06-01 17:43:45,213 - INFO - Cleanup finished for connection: 127.0.0.1:54488. Total connections: 0
2025-06-01 17:43:45,213 - INFO - Cleanup finished for client_1748792613919hkwktf at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:54:17,052 - INFO - Application startup event triggered.
2025-06-01 17:54:17,052 - INFO - Initializing all queues...
2025-06-01 17:54:17,052 - INFO - All queues initialized on loop 324779552
2025-06-01 17:54:17,052 - INFO - Shared queues initialized.
2025-06-01 17:54:17,052 - INFO - Retrieved queue instances. Event loop ID: 324779552
2025-06-01 17:54:17,052 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 17:54:17,052 - INFO - SimulationManager ready state changed from False to True
2025-06-01 17:54:17,052 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 17:54:17,053 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 17:54:17,053 - INFO - Starting MessageProcessor task.
2025-06-01 17:54:17,053 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 17:54:17,053 - INFO - MessageProcessor task started.
2025-06-01 17:54:17,053 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 17:54:17,053 - INFO - QueueForwarder queues already initialized
2025-06-01 17:54:17,053 - INFO - QueueForwarder task started.
2025-06-01 17:54:17,053 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 17:54:17,053 - INFO - MessageProcessor main loop started.
2025-06-01 17:54:17,053 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:54:17,053 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 17:54:17,053 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 17:54:18,810 - INFO - Attempting to handle connection for 127.0.0.1:56114 (ID: client_1748793258797yz6ozq)
2025-06-01 17:54:18,811 - INFO - WebSocket connection accepted for 127.0.0.1:56114 (ID: client_1748793258797yz6ozq)
2025-06-01 17:54:18,811 - INFO - Adding connection: 127.0.0.1:56114. Total connections: 1
2025-06-01 17:54:18,812 - INFO - [127.0.0.1:56114] Sent connection_ack.
2025-06-01 17:54:18,812 - INFO - Sender task started for 127.0.0.1:56114
2025-06-01 17:54:18,813 - INFO - Starting receiver for 127.0.0.1:56114 with enhanced message tracing
2025-06-01 17:54:18,830 - INFO - [127.0.0.1:56114] [Receiver 1] Valid message type 'frontend_ready_ack' (ID: frontend-init-1748793258829) from 127.0.0.1:56114
2025-06-01 17:54:19,831 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:56114. Status: Frontend ready to receive
2025-06-01 17:54:21,330 - INFO - [127.0.0.1:56114] [Receiver 2] Valid message type 'ping' (ID: ping-1748793261329) from 127.0.0.1:56114
2025-06-01 17:54:22,330 - INFO - MessageProcessor: Received ping from 127.0.0.1:56114. (Pong handled by WebSocketManager)
2025-06-01 17:54:22,331 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 17:54:23,830 - INFO - [127.0.0.1:56114] [Receiver 3] Valid message type 'ping' (ID: ping-1748793263829) from 127.0.0.1:56114
2025-06-01 17:54:24,831 - INFO - MessageProcessor: Received ping from 127.0.0.1:56114. (Pong handled by WebSocketManager)
2025-06-01 17:54:26,331 - INFO - [127.0.0.1:56114] [Receiver 4] Valid message type 'ping' (ID: ping-1748793266329) from 127.0.0.1:56114
2025-06-01 17:54:26,332 - INFO - [127.0.0.1:56114] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 17:54:26,332 - INFO - [127.0.0.1:56114] Receiver task finished. Processed 4 messages.
2025-06-01 17:54:26,333 - INFO - Cancelling pending task sender_127.0.0.1:56114 for 127.0.0.1:56114.
2025-06-01 17:54:26,333 - INFO - Attempting to handle connection for 127.0.0.1:45000 (ID: client_1748793258797yz6ozq)
2025-06-01 17:54:26,334 - INFO - WebSocket connection accepted for 127.0.0.1:45000 (ID: client_1748793258797yz6ozq)
2025-06-01 17:54:26,334 - INFO - Adding connection: 127.0.0.1:45000. Total connections: 2
2025-06-01 17:54:26,334 - INFO - [127.0.0.1:56114] Sender task was cancelled normally.
2025-06-01 17:54:26,334 - INFO - [127.0.0.1:56114] Sender task finished.
2025-06-01 17:54:26,335 - INFO - Finalizing connection handling for 127.0.0.1:56114. Ensuring cleanup.
2025-06-01 17:54:26,335 - INFO - Starting cleanup for 127.0.0.1:56114
2025-06-01 17:54:26,335 - INFO - Connection cleanup completed for 127.0.0.1:56114. Remaining active connections: 1
2025-06-01 17:54:26,335 - INFO - Connection handling for 127.0.0.1:56114 finished.
2025-06-01 17:54:26,335 - INFO - Cleanup finished for client_1748793258797yz6ozq at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:54:26,336 - INFO - [127.0.0.1:45000] Sent connection_ack.
2025-06-01 17:54:26,336 - INFO - Sender task started for 127.0.0.1:45000
2025-06-01 17:54:26,336 - INFO - Starting receiver for 127.0.0.1:45000 with enhanced message tracing
2025-06-01 17:54:26,338 - INFO - [127.0.0.1:45000] [Receiver 1] Valid message type 'frontend_ready_ack' (ID: frontend-init-1748793266337) from 127.0.0.1:45000
2025-06-01 17:54:27,331 - INFO - MessageProcessor: Received ping from 127.0.0.1:56114. (Pong handled by WebSocketManager)
2025-06-01 17:54:27,332 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 17:54:28,333 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:45000. Status: Frontend ready to receive
2025-06-01 17:54:28,838 - INFO - [127.0.0.1:45000] [Receiver 2] Valid message type 'ping' (ID: ping-1748793268837) from 127.0.0.1:45000
2025-06-01 17:54:29,838 - INFO - MessageProcessor: Received ping from 127.0.0.1:45000. (Pong handled by WebSocketManager)
2025-06-01 17:54:31,339 - INFO - [127.0.0.1:45000] [Receiver 3] Valid message type 'ping' (ID: ping-1748793271337) from 127.0.0.1:45000
2025-06-01 17:54:32,339 - INFO - MessageProcessor: Received ping from 127.0.0.1:45000. (Pong handled by WebSocketManager)
2025-06-01 17:54:32,339 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:54:33,839 - INFO - [127.0.0.1:45000] [Receiver 4] Valid message type 'ping' (ID: ping-1748793273837) from 127.0.0.1:45000
2025-06-01 17:54:33,840 - INFO - [127.0.0.1:45000] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 17:54:33,840 - INFO - [127.0.0.1:45000] Receiver task finished. Processed 4 messages.
2025-06-01 17:54:33,841 - INFO - Cancelling pending task sender_127.0.0.1:45000 for 127.0.0.1:45000.
2025-06-01 17:54:33,841 - INFO - Attempting to handle connection for 127.0.0.1:45010 (ID: client_1748793258797yz6ozq)
2025-06-01 17:54:33,841 - INFO - WebSocket connection accepted for 127.0.0.1:45010 (ID: client_1748793258797yz6ozq)
2025-06-01 17:54:33,841 - INFO - Adding connection: 127.0.0.1:45010. Total connections: 2
2025-06-01 17:54:33,842 - INFO - [127.0.0.1:45000] Sender task was cancelled normally.
2025-06-01 17:54:33,842 - INFO - [127.0.0.1:45000] Sender task finished.
2025-06-01 17:54:33,842 - INFO - Finalizing connection handling for 127.0.0.1:45000. Ensuring cleanup.
2025-06-01 17:54:33,843 - INFO - Starting cleanup for 127.0.0.1:45000
2025-06-01 17:54:33,843 - INFO - Connection cleanup completed for 127.0.0.1:45000. Remaining active connections: 1
2025-06-01 17:54:33,843 - INFO - Connection handling for 127.0.0.1:45000 finished.
2025-06-01 17:54:33,843 - INFO - Cleanup finished for client_1748793258797yz6ozq at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:54:33,843 - INFO - [127.0.0.1:45010] Sent connection_ack.
2025-06-01 17:54:33,843 - INFO - Sender task started for 127.0.0.1:45010
2025-06-01 17:54:33,843 - INFO - Starting receiver for 127.0.0.1:45010 with enhanced message tracing
2025-06-01 17:54:33,847 - INFO - [127.0.0.1:45010] [Receiver 1] Valid message type 'frontend_ready_ack' (ID: frontend-init-1748793273846) from 127.0.0.1:45010
2025-06-01 17:54:34,839 - INFO - MessageProcessor: Received ping from 127.0.0.1:45000. (Pong handled by WebSocketManager)
2025-06-01 17:54:35,840 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:45010. Status: Frontend ready to receive
2025-06-01 17:54:36,348 - INFO - [127.0.0.1:45010] [Receiver 2] Valid message type 'ping' (ID: ping-1748793276346) from 127.0.0.1:45010
2025-06-01 17:54:37,348 - INFO - MessageProcessor: Received ping from 127.0.0.1:45010. (Pong handled by WebSocketManager)
2025-06-01 17:54:37,348 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 17:54:38,847 - INFO - [127.0.0.1:45010] [Receiver 3] Valid message type 'ping' (ID: ping-1748793278846) from 127.0.0.1:45010
2025-06-01 17:54:39,848 - INFO - MessageProcessor: Received ping from 127.0.0.1:45010. (Pong handled by WebSocketManager)
2025-06-01 17:54:41,348 - INFO - [127.0.0.1:45010] [Receiver 4] Valid message type 'ping' (ID: ping-1748793281346) from 127.0.0.1:45010
2025-06-01 17:54:41,352 - INFO - Attempting to handle connection for 127.0.0.1:51134 (ID: client_1748793258797yz6ozq)
2025-06-01 17:54:41,352 - INFO - WebSocket connection accepted for 127.0.0.1:51134 (ID: client_1748793258797yz6ozq)
2025-06-01 17:54:41,352 - INFO - Adding connection: 127.0.0.1:51134. Total connections: 2
2025-06-01 17:54:41,353 - INFO - [127.0.0.1:51134] Sent connection_ack.
2025-06-01 17:54:41,353 - INFO - [127.0.0.1:45010] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 17:54:41,353 - INFO - [127.0.0.1:45010] Receiver task finished. Processed 4 messages.
2025-06-01 17:54:41,353 - INFO - Sender task started for 127.0.0.1:51134
2025-06-01 17:54:41,353 - INFO - Starting receiver for 127.0.0.1:51134 with enhanced message tracing
2025-06-01 17:54:41,353 - INFO - Cancelling pending task sender_127.0.0.1:45010 for 127.0.0.1:45010.
2025-06-01 17:54:41,353 - INFO - [127.0.0.1:45010] Sender task was cancelled normally.
2025-06-01 17:54:41,354 - INFO - [127.0.0.1:45010] Sender task finished.
2025-06-01 17:54:41,354 - INFO - Finalizing connection handling for 127.0.0.1:45010. Ensuring cleanup.
2025-06-01 17:54:41,354 - INFO - Starting cleanup for 127.0.0.1:45010
2025-06-01 17:54:41,354 - INFO - Connection cleanup completed for 127.0.0.1:45010. Remaining active connections: 1
2025-06-01 17:54:41,354 - INFO - Connection handling for 127.0.0.1:45010 finished.
2025-06-01 17:54:41,354 - INFO - Cleanup finished for client_1748793258797yz6ozq at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:54:41,355 - INFO - [127.0.0.1:51134] [Receiver 1] Valid message type 'frontend_ready_ack' (ID: frontend-init-1748793281354) from 127.0.0.1:51134
2025-06-01 17:54:42,349 - INFO - MessageProcessor: Received ping from 127.0.0.1:45010. (Pong handled by WebSocketManager)
2025-06-01 17:54:42,350 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 17:54:43,227 - INFO - [127.0.0.1:51134] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 17:54:43,227 - INFO - [127.0.0.1:51134] Receiver task finished. Processed 1 messages.
2025-06-01 17:54:43,227 - INFO - Cancelling pending task sender_127.0.0.1:51134 for 127.0.0.1:51134.
2025-06-01 17:54:43,227 - INFO - [127.0.0.1:51134] Sender task was cancelled normally.
2025-06-01 17:54:43,227 - INFO - [127.0.0.1:51134] Sender task finished.
2025-06-01 17:54:43,227 - INFO - Finalizing connection handling for 127.0.0.1:51134. Ensuring cleanup.
2025-06-01 17:54:43,227 - INFO - Starting cleanup for 127.0.0.1:51134
2025-06-01 17:54:43,227 - INFO - Connection cleanup completed for 127.0.0.1:51134. Remaining active connections: 0
2025-06-01 17:54:43,227 - INFO - Connection handling for 127.0.0.1:51134 finished.
2025-06-01 17:54:43,227 - INFO - Cleanup finished for client_1748793258797yz6ozq at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 17:54:43,327 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:54:43,327 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:54:43,327 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 17:54:43,327 - INFO - MessageProcessor main loop stopped.
2025-06-01 17:54:43,327 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 17:54:43,327 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 17:54:43,327 - INFO - Application shutdown event triggered.
2025-06-01 17:54:43,328 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:54:43,328 - INFO - Simulation is not running. No action needed.
2025-06-01 17:54:43,328 - INFO - SimulationManager stop method called.
2025-06-01 17:54:43,328 - INFO - Stopping MessageProcessor...
2025-06-01 17:54:43,328 - INFO - MessageProcessor shutdown complete.
2025-06-01 17:54:43,328 - INFO - Stopping QueueForwarder...
2025-06-01 17:54:43,328 - INFO - QueueForwarder task cancelled.
2025-06-01 17:54:43,328 - INFO - QueueForwarder stopped
2025-06-01 17:54:43,328 - INFO - Calling SimulationManager instance stop method...
2025-06-01 17:54:43,328 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 17:54:43,328 - INFO - Simulation is not running. No action needed.
2025-06-01 17:54:43,328 - INFO - Shutting down WebSocketManager...
2025-06-01 17:54:43,328 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 17:54:43,328 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:54:43,329 - INFO - WebSocketManager shutdown complete.
2025-06-01 17:54:43,329 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 17:54:43,329 - INFO - Application shutdown complete.
2025-06-01 18:00:10,591 - INFO - Application startup event triggered.
2025-06-01 18:00:10,591 - INFO - Initializing all queues...
2025-06-01 18:00:10,591 - INFO - All queues initialized on loop 949431840
2025-06-01 18:00:10,591 - INFO - Shared queues initialized.
2025-06-01 18:00:10,591 - INFO - Retrieved queue instances. Event loop ID: 949431840
2025-06-01 18:00:10,591 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 18:00:10,591 - INFO - SimulationManager ready state changed from False to True
2025-06-01 18:00:10,591 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 18:00:10,591 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 18:00:10,592 - INFO - Starting MessageProcessor task.
2025-06-01 18:00:10,592 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 18:00:10,592 - INFO - MessageProcessor task started.
2025-06-01 18:00:10,592 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 18:00:10,592 - INFO - QueueForwarder queues already initialized
2025-06-01 18:00:10,592 - INFO - QueueForwarder task started.
2025-06-01 18:00:10,592 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 18:00:10,592 - INFO - MessageProcessor main loop started.
2025-06-01 18:00:10,592 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:00:10,592 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 18:00:10,592 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:00:12,370 - INFO - Attempting to handle connection for 127.0.0.1:39454 (ID: client_174879361235529okep)
2025-06-01 18:00:12,370 - INFO - WebSocket connection accepted for 127.0.0.1:39454 (ID: client_174879361235529okep)
2025-06-01 18:00:12,370 - INFO - Adding connection: 127.0.0.1:39454. Total connections: 1
2025-06-01 18:00:12,370 - INFO - [127.0.0.1:39454] Sent connection_ack.
2025-06-01 18:00:12,371 - INFO - Sender task started for 127.0.0.1:39454
2025-06-01 18:00:12,371 - INFO - Starting receiver for 127.0.0.1:39454 with enhanced message tracing
2025-06-01 18:00:12,392 - INFO - [127.0.0.1:39454] [Receiver 1] Valid message type 'frontend_ready_ack' (ID: frontend-init-1748793612391) from 127.0.0.1:39454
2025-06-01 18:00:13,393 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:39454. Status: Frontend ready to receive
2025-06-01 18:00:14,894 - INFO - [127.0.0.1:39454] [Receiver 2] Valid message type 'ping' (ID: ping-1748793614892) from 127.0.0.1:39454
2025-06-01 18:00:15,894 - INFO - MessageProcessor: Received ping from 127.0.0.1:39454
2025-06-01 18:00:15,895 - INFO - Enqueued pong response for ping from 127.0.0.1:39454
2025-06-01 18:00:15,895 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:00:15,905 - INFO - Attempting to send direct message to client: 127.0.0.1:39454 (type: pong)
2025-06-01 18:00:15,906 - INFO - [127.0.0.1:39454] Successfully sent direct message (type: pong, ID: 2fa28fe9-2393-4b16-9116-ba529f89f3f8).
2025-06-01 18:00:15,906 - WARNING - QueueForwarder: Failed to send message type 'pong' to client 127.0.0.1:39454. Sending to DLQ.
2025-06-01 18:00:15,906 - WARNING - Enqueue failed: Invalid message format for queue dead_letter
2025-06-01 18:00:15,906 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 0, Input Q (to_frontend): 0
2025-06-01 18:00:17,393 - INFO - [127.0.0.1:39454] [Receiver 3] Valid message type 'ping' (ID: ping-1748793617392) from 127.0.0.1:39454
2025-06-01 18:00:18,394 - INFO - MessageProcessor: Received ping from 127.0.0.1:39454
2025-06-01 18:00:18,395 - INFO - Enqueued pong response for ping from 127.0.0.1:39454
2025-06-01 18:00:18,405 - INFO - Attempting to send direct message to client: 127.0.0.1:39454 (type: pong)
2025-06-01 18:00:18,406 - INFO - [127.0.0.1:39454] Successfully sent direct message (type: pong, ID: bc5f9574-d678-4ee6-9882-b20562d121b0).
2025-06-01 18:00:18,406 - WARNING - QueueForwarder: Failed to send message type 'pong' to client 127.0.0.1:39454. Sending to DLQ.
2025-06-01 18:00:18,406 - WARNING - Enqueue failed: Invalid message format for queue dead_letter
2025-06-01 18:00:19,894 - INFO - [127.0.0.1:39454] [Receiver 4] Valid message type 'ping' (ID: ping-1748793619892) from 127.0.0.1:39454
2025-06-01 18:00:20,894 - INFO - MessageProcessor: Received ping from 127.0.0.1:39454
2025-06-01 18:00:20,894 - INFO - Enqueued pong response for ping from 127.0.0.1:39454
2025-06-01 18:00:20,905 - INFO - Attempting to send direct message to client: 127.0.0.1:39454 (type: pong)
2025-06-01 18:00:20,905 - INFO - [127.0.0.1:39454] Successfully sent direct message (type: pong, ID: ec7948e0-a356-4e29-bdc0-46c7593a09ef).
2025-06-01 18:00:20,905 - WARNING - QueueForwarder: Failed to send message type 'pong' to client 127.0.0.1:39454. Sending to DLQ.
2025-06-01 18:00:20,905 - WARNING - Enqueue failed: Invalid message format for queue dead_letter
2025-06-01 18:00:22,392 - INFO - [127.0.0.1:39454] [Receiver 5] Valid message type 'ping' (ID: ping-1748793622391) from 127.0.0.1:39454
2025-06-01 18:00:23,393 - INFO - MessageProcessor: Received ping from 127.0.0.1:39454
2025-06-01 18:00:23,394 - INFO - Enqueued pong response for ping from 127.0.0.1:39454
2025-06-01 18:00:23,394 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 18:00:23,404 - INFO - Attempting to send direct message to client: 127.0.0.1:39454 (type: pong)
2025-06-01 18:00:23,404 - INFO - [127.0.0.1:39454] Successfully sent direct message (type: pong, ID: f2038f69-e2fa-4c93-8c8e-3d385b31dfcd).
2025-06-01 18:00:23,405 - WARNING - QueueForwarder: Failed to send message type 'pong' to client 127.0.0.1:39454. Sending to DLQ.
2025-06-01 18:00:23,405 - WARNING - Enqueue failed: Invalid message format for queue dead_letter
2025-06-01 18:00:23,405 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 0, Input Q (to_frontend): 0
2025-06-01 18:00:23,836 - INFO - [127.0.0.1:39454] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 18:00:23,836 - INFO - [127.0.0.1:39454] Receiver task finished. Processed 5 messages.
2025-06-01 18:00:23,836 - INFO - Cancelling pending task sender_127.0.0.1:39454 for 127.0.0.1:39454.
2025-06-01 18:00:23,836 - INFO - [127.0.0.1:39454] Sender task was cancelled normally.
2025-06-01 18:00:23,836 - INFO - [127.0.0.1:39454] Sender task finished.
2025-06-01 18:00:23,836 - INFO - Finalizing connection handling for 127.0.0.1:39454. Ensuring cleanup.
2025-06-01 18:00:23,836 - INFO - Starting cleanup for 127.0.0.1:39454
2025-06-01 18:00:23,836 - INFO - Connection cleanup completed for 127.0.0.1:39454. Remaining active connections: 0
2025-06-01 18:00:23,836 - INFO - Connection handling for 127.0.0.1:39454 finished.
2025-06-01 18:00:23,836 - INFO - Cleanup finished for client_174879361235529okep at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 18:00:23,935 - INFO - Application shutdown event triggered.
2025-06-01 18:00:23,935 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:00:23,935 - INFO - Simulation is not running. No action needed.
2025-06-01 18:00:23,935 - INFO - SimulationManager stop method called.
2025-06-01 18:00:23,936 - INFO - Stopping MessageProcessor...
2025-06-01 18:00:23,936 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 18:00:23,936 - INFO - MessageProcessor main loop stopped.
2025-06-01 18:00:23,936 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:00:23,936 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:00:23,936 - INFO - MessageProcessor shutdown complete.
2025-06-01 18:00:23,936 - INFO - Stopping QueueForwarder...
2025-06-01 18:00:23,936 - INFO - QueueForwarder task cancelled.
2025-06-01 18:00:23,936 - INFO - QueueForwarder stopped
2025-06-01 18:00:23,936 - INFO - Calling SimulationManager instance stop method...
2025-06-01 18:00:23,936 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:00:23,937 - INFO - Simulation is not running. No action needed.
2025-06-01 18:00:23,937 - INFO - Shutting down WebSocketManager...
2025-06-01 18:00:23,937 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 18:00:23,937 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:00:23,937 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:00:23,937 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 18:00:23,937 - INFO - Application shutdown complete.
2025-06-01 18:00:23,937 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:00:23,938 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:07:51,683 - INFO - Application startup event triggered.
2025-06-01 18:07:51,683 - INFO - Initializing all queues...
2025-06-01 18:07:51,683 - INFO - All queues initialized on loop 225902112
2025-06-01 18:07:51,683 - INFO - Shared queues initialized.
2025-06-01 18:07:51,683 - INFO - Retrieved queue instances. Event loop ID: 225902112
2025-06-01 18:07:51,683 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 18:07:51,683 - INFO - SimulationManager ready state changed from False to True
2025-06-01 18:07:51,683 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 18:07:51,683 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 18:07:51,683 - INFO - Starting MessageProcessor task.
2025-06-01 18:07:51,683 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 18:07:51,683 - INFO - MessageProcessor task started.
2025-06-01 18:07:51,683 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 18:07:51,683 - INFO - QueueForwarder queues already initialized
2025-06-01 18:07:51,683 - INFO - QueueForwarder task started.
2025-06-01 18:07:51,683 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 18:07:51,683 - INFO - MessageProcessor main loop started.
2025-06-01 18:07:51,683 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:07:51,683 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 18:07:51,684 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:07:53,425 - INFO - Attempting to handle connection for 127.0.0.1:47154 (ID: client_17487940734128xrq20)
2025-06-01 18:07:53,426 - INFO - WebSocket connection accepted for 127.0.0.1:47154 (ID: client_17487940734128xrq20)
2025-06-01 18:07:53,426 - INFO - Adding connection: 127.0.0.1:47154. Total connections: 1
2025-06-01 18:07:53,426 - INFO - [127.0.0.1:47154] Sent connection_ack.
2025-06-01 18:07:53,427 - INFO - Sender task started for 127.0.0.1:47154
2025-06-01 18:07:53,427 - INFO - Starting receiver for 127.0.0.1:47154 with enhanced message tracing
2025-06-01 18:07:53,450 - INFO - [127.0.0.1:47154] [Receiver 1] Valid message type 'frontend_ready_ack' (ID: frontend-init-1748794073448) from 127.0.0.1:47154
2025-06-01 18:07:54,450 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:47154. Status: Frontend ready to receive
2025-06-01 18:07:55,950 - INFO - [127.0.0.1:47154] [Receiver 2] Valid message type 'ping' (ID: ping-1748794075948) from 127.0.0.1:47154
2025-06-01 18:07:56,950 - INFO - MessageProcessor: Received ping from 127.0.0.1:47154
2025-06-01 18:07:56,950 - INFO - Enqueued pong response for ping from 127.0.0.1:47154
2025-06-01 18:07:56,950 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:07:56,961 - INFO - Attempting to send direct message to client: 127.0.0.1:47154 (type: pong)
2025-06-01 18:07:56,961 - INFO - [127.0.0.1:47154] Successfully sent direct message (type: pong, ID: 447c9c40-779d-4b23-8759-2a045b340b30).
2025-06-01 18:07:56,961 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 1, Input Q (to_frontend): 0
2025-06-01 18:07:58,450 - INFO - [127.0.0.1:47154] [Receiver 3] Valid message type 'ping' (ID: ping-1748794078449) from 127.0.0.1:47154
2025-06-01 18:07:59,451 - INFO - MessageProcessor: Received ping from 127.0.0.1:47154
2025-06-01 18:07:59,452 - INFO - Enqueued pong response for ping from 127.0.0.1:47154
2025-06-01 18:07:59,462 - INFO - Attempting to send direct message to client: 127.0.0.1:47154 (type: pong)
2025-06-01 18:07:59,463 - INFO - [127.0.0.1:47154] Successfully sent direct message (type: pong, ID: e487aca7-67ba-4749-a04e-fa964f2c0cbf).
2025-06-01 18:08:00,950 - INFO - [127.0.0.1:47154] [Receiver 4] Valid message type 'ping' (ID: ping-1748794080948) from 127.0.0.1:47154
2025-06-01 18:08:01,950 - INFO - MessageProcessor: Received ping from 127.0.0.1:47154
2025-06-01 18:08:01,950 - INFO - Enqueued pong response for ping from 127.0.0.1:47154
2025-06-01 18:08:01,951 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:08:01,961 - INFO - Attempting to send direct message to client: 127.0.0.1:47154 (type: pong)
2025-06-01 18:08:01,961 - INFO - [127.0.0.1:47154] Successfully sent direct message (type: pong, ID: d682362b-c020-4e9a-adb0-1a85f393c624).
2025-06-01 18:08:03,450 - INFO - [127.0.0.1:47154] [Receiver 5] Valid message type 'ping' (ID: ping-1748794083448) from 127.0.0.1:47154
2025-06-01 18:08:04,451 - INFO - MessageProcessor: Received ping from 127.0.0.1:47154
2025-06-01 18:08:04,451 - INFO - Enqueued pong response for ping from 127.0.0.1:47154
2025-06-01 18:08:04,462 - INFO - Attempting to send direct message to client: 127.0.0.1:47154 (type: pong)
2025-06-01 18:08:04,462 - INFO - [127.0.0.1:47154] Successfully sent direct message (type: pong, ID: 4ffa568d-94d4-40aa-979e-4948bf1d7437).
2025-06-01 18:08:04,462 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 3, Input Q (to_frontend): 0
2025-06-01 18:08:04,823 - INFO - [127.0.0.1:47154] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 18:08:04,823 - INFO - [127.0.0.1:47154] Receiver task finished. Processed 5 messages.
2025-06-01 18:08:04,823 - INFO - Cancelling pending task sender_127.0.0.1:47154 for 127.0.0.1:47154.
2025-06-01 18:08:04,823 - INFO - [127.0.0.1:47154] Sender task was cancelled normally.
2025-06-01 18:08:04,823 - INFO - [127.0.0.1:47154] Sender task finished.
2025-06-01 18:08:04,823 - INFO - Finalizing connection handling for 127.0.0.1:47154. Ensuring cleanup.
2025-06-01 18:08:04,823 - INFO - Starting cleanup for 127.0.0.1:47154
2025-06-01 18:08:04,823 - INFO - Connection cleanup completed for 127.0.0.1:47154. Remaining active connections: 0
2025-06-01 18:08:04,823 - INFO - Connection handling for 127.0.0.1:47154 finished.
2025-06-01 18:08:04,824 - INFO - Cleanup finished for client_17487940734128xrq20 at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 18:08:04,923 - INFO - Application shutdown event triggered.
2025-06-01 18:08:04,923 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:08:04,923 - INFO - Simulation is not running. No action needed.
2025-06-01 18:08:04,923 - INFO - SimulationManager stop method called.
2025-06-01 18:08:04,924 - INFO - Stopping MessageProcessor...
2025-06-01 18:08:04,924 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 18:08:04,924 - INFO - MessageProcessor main loop stopped.
2025-06-01 18:08:04,924 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:08:04,924 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:08:04,924 - INFO - MessageProcessor shutdown complete.
2025-06-01 18:08:04,924 - INFO - Stopping QueueForwarder...
2025-06-01 18:08:04,924 - INFO - QueueForwarder task cancelled.
2025-06-01 18:08:04,924 - INFO - QueueForwarder stopped
2025-06-01 18:08:04,924 - INFO - Calling SimulationManager instance stop method...
2025-06-01 18:08:04,925 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:08:04,925 - INFO - Simulation is not running. No action needed.
2025-06-01 18:08:04,925 - INFO - Shutting down WebSocketManager...
2025-06-01 18:08:04,925 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 18:08:04,925 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:08:04,925 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:08:04,925 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 18:08:04,925 - INFO - Application shutdown complete.
2025-06-01 18:08:04,925 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:08:04,926 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:09:40,833 - INFO - Application startup event triggered.
2025-06-01 18:09:40,833 - INFO - Initializing all queues...
2025-06-01 18:09:40,833 - INFO - All queues initialized on loop 109047328
2025-06-01 18:09:40,833 - INFO - Shared queues initialized.
2025-06-01 18:09:40,833 - INFO - Retrieved queue instances. Event loop ID: 109047328
2025-06-01 18:09:40,833 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 18:09:40,833 - INFO - SimulationManager ready state changed from False to True
2025-06-01 18:09:40,833 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 18:09:40,833 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 18:09:40,833 - INFO - Starting MessageProcessor task.
2025-06-01 18:09:40,833 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 18:09:40,834 - INFO - MessageProcessor task started.
2025-06-01 18:09:40,834 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 18:09:40,834 - INFO - QueueForwarder queues already initialized
2025-06-01 18:09:40,834 - INFO - QueueForwarder task started.
2025-06-01 18:09:40,834 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 18:09:40,834 - INFO - MessageProcessor main loop started.
2025-06-01 18:09:40,834 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:09:40,834 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 18:09:40,834 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:09:42,584 - INFO - Attempting to handle connection for 127.0.0.1:46206 (ID: client_1748794182572vugsq8)
2025-06-01 18:09:42,584 - INFO - WebSocket connection accepted for 127.0.0.1:46206 (ID: client_1748794182572vugsq8)
2025-06-01 18:09:42,584 - INFO - Adding connection: 127.0.0.1:46206. Total connections: 1
2025-06-01 18:09:42,584 - INFO - [127.0.0.1:46206] Sent connection_ack.
2025-06-01 18:09:42,585 - INFO - Sender task started for 127.0.0.1:46206
2025-06-01 18:09:42,585 - INFO - Starting receiver for 127.0.0.1:46206 with enhanced message tracing
2025-06-01 18:09:42,602 - INFO - [127.0.0.1:46206] [Receiver 1] Valid message type 'frontend_ready_ack' (ID: frontend-init-1748794182601) from 127.0.0.1:46206
2025-06-01 18:09:43,603 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:46206. Status: Frontend ready to receive
2025-06-01 18:09:45,103 - INFO - [127.0.0.1:46206] [Receiver 2] Valid message type 'ping' (ID: ping-1748794185102) from 127.0.0.1:46206
2025-06-01 18:09:46,103 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:09:46,104 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:09:46,104 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:09:46,114 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:09:46,115 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: eb234350-f4a1-42a4-b843-67fa25934cec).
2025-06-01 18:09:46,115 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 1, Input Q (to_frontend): 0
2025-06-01 18:09:47,603 - INFO - [127.0.0.1:46206] [Receiver 3] Valid message type 'ping' (ID: ping-1748794187602) from 127.0.0.1:46206
2025-06-01 18:09:48,604 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:09:48,605 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:09:48,615 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:09:48,616 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: 497ef0f3-b365-41bb-af62-7ee02eb381b4).
2025-06-01 18:09:50,103 - INFO - [127.0.0.1:46206] [Receiver 4] Valid message type 'ping' (ID: ping-1748794190102) from 127.0.0.1:46206
2025-06-01 18:09:51,105 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:09:51,105 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:09:51,105 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:09:51,116 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:09:51,116 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: 5108765a-af40-426e-9869-4eb8a97cd9ee).
2025-06-01 18:09:51,116 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 2, Input Q (to_frontend): 0
2025-06-01 18:09:52,604 - INFO - [127.0.0.1:46206] [Receiver 5] Valid message type 'ping' (ID: ping-1748794192602) from 127.0.0.1:46206
2025-06-01 18:09:53,604 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:09:53,604 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:09:53,614 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:09:53,615 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: 4c10a463-66d4-4b40-bb42-a2f03827bd0e).
2025-06-01 18:09:55,104 - INFO - [127.0.0.1:46206] [Receiver 6] Valid message type 'ping' (ID: ping-1748794195102) from 127.0.0.1:46206
2025-06-01 18:09:56,104 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:09:56,105 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:09:56,115 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:09:56,116 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: 461a77ca-a4a9-4143-8c53-e783b60c5f57).
2025-06-01 18:09:57,603 - INFO - [127.0.0.1:46206] [Receiver 7] Valid message type 'ping' (ID: ping-1748794197602) from 127.0.0.1:46206
2025-06-01 18:09:58,604 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:09:58,605 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:09:58,605 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 18:09:58,615 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:09:58,616 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: dce6fcbc-5bd0-417e-80aa-7209e9842400).
2025-06-01 18:09:58,616 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 3, Input Q (to_frontend): 0
2025-06-01 18:10:00,103 - INFO - [127.0.0.1:46206] [Receiver 8] Valid message type 'ping' (ID: ping-1748794200101) from 127.0.0.1:46206
2025-06-01 18:10:01,104 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:01,104 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:01,115 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:01,116 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: 486aa873-67f8-4bc1-ae64-4f65d023ea22).
2025-06-01 18:10:02,603 - INFO - [127.0.0.1:46206] [Receiver 9] Valid message type 'ping' (ID: ping-1748794202602) from 127.0.0.1:46206
2025-06-01 18:10:03,604 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:03,605 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:03,605 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:10:03,615 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:03,616 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: 52522add-2d3a-4ebc-987e-bfdbc4ff0447).
2025-06-01 18:10:05,103 - INFO - [127.0.0.1:46206] [Receiver 10] Valid message type 'ping' (ID: ping-1748794205102) from 127.0.0.1:46206
2025-06-01 18:10:06,105 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:06,105 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:06,115 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:06,116 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: 2f56fd4f-1e5c-4926-a3a0-73d100e44727).
2025-06-01 18:10:06,116 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 3, Input Q (to_frontend): 0
2025-06-01 18:10:07,603 - INFO - [127.0.0.1:46206] [Receiver 11] Valid message type 'ping' (ID: ping-1748794207602) from 127.0.0.1:46206
2025-06-01 18:10:08,605 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:08,606 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:08,606 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:10:08,617 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:08,617 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: cb3b52d4-9e61-4296-8c5c-75deb3ae5f73).
2025-06-01 18:10:10,103 - INFO - [127.0.0.1:46206] [Receiver 12] Valid message type 'ping' (ID: ping-1748794210102) from 127.0.0.1:46206
2025-06-01 18:10:11,104 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:11,104 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:11,115 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:11,115 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: 1ccaba24-dea4-4d8a-b2ba-c1a6b93106f3).
2025-06-01 18:10:12,603 - INFO - [127.0.0.1:46206] [Receiver 13] Valid message type 'ping' (ID: ping-1748794212601) from 127.0.0.1:46206
2025-06-01 18:10:13,603 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:13,604 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:13,614 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:13,615 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: aa05ac7d-7538-434d-8605-b3c1884f9d37).
2025-06-01 18:10:13,615 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 3, Input Q (to_frontend): 0
2025-06-01 18:10:15,104 - INFO - [127.0.0.1:46206] [Receiver 14] Valid message type 'ping' (ID: ping-1748794215102) from 127.0.0.1:46206
2025-06-01 18:10:16,104 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:16,104 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:16,105 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 18:10:16,115 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:16,115 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: 76ebfa85-dd6a-46c9-a4d3-614192ff46e9).
2025-06-01 18:10:17,603 - INFO - [127.0.0.1:46206] [Receiver 15] Valid message type 'ping' (ID: ping-1748794217602) from 127.0.0.1:46206
2025-06-01 18:10:18,604 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:18,604 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:18,614 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:18,615 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: e34d0420-05af-4a93-b87a-d98a76286bef).
2025-06-01 18:10:18,615 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 2, Input Q (to_frontend): 0
2025-06-01 18:10:20,103 - INFO - [127.0.0.1:46206] [Receiver 16] Valid message type 'ping' (ID: ping-1748794220102) from 127.0.0.1:46206
2025-06-01 18:10:21,104 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:21,104 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:21,115 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:21,115 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: ea3b9cfa-4d15-4d2c-94d1-6ef690c57b65).
2025-06-01 18:10:22,603 - INFO - [127.0.0.1:46206] [Receiver 17] Valid message type 'ping' (ID: ping-1748794222602) from 127.0.0.1:46206
2025-06-01 18:10:23,604 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:23,604 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:23,604 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 18:10:23,615 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:23,615 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: ec8ab19a-56b8-4588-96d5-2f0431ee3fc3).
2025-06-01 18:10:23,616 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 2, Input Q (to_frontend): 0
2025-06-01 18:10:25,103 - INFO - [127.0.0.1:46206] [Receiver 18] Valid message type 'ping' (ID: ping-1748794225102) from 127.0.0.1:46206
2025-06-01 18:10:26,105 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:26,105 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:26,115 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:26,116 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: 4e5314b6-dc66-404f-b7b4-03d3d29d0d02).
2025-06-01 18:10:27,605 - INFO - [127.0.0.1:46206] [Receiver 19] Valid message type 'ping' (ID: ping-1748794227602) from 127.0.0.1:46206
2025-06-01 18:10:28,605 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:28,606 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:28,606 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:10:30,103 - INFO - [127.0.0.1:46206] [Receiver 20] Valid message type 'ping' (ID: ping-1748794230101) from 127.0.0.1:46206
2025-06-01 18:10:31,105 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:31,105 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:31,115 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:31,116 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: 24ebdb8c-908d-4f81-b6c0-9d1c9083c340).
2025-06-01 18:10:31,116 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 2, Input Q (to_frontend): 0
2025-06-01 18:10:32,603 - INFO - [127.0.0.1:46206] [Receiver 21] Valid message type 'ping' (ID: ping-1748794232601) from 127.0.0.1:46206
2025-06-01 18:10:33,604 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:33,604 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:33,614 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:33,614 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: be41dab6-f1be-40fa-8e14-426d4f6cc7a9).
2025-06-01 18:10:35,103 - INFO - [127.0.0.1:46206] [Receiver 22] Valid message type 'ping' (ID: ping-1748794235101) from 127.0.0.1:46206
2025-06-01 18:10:36,104 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:36,104 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:36,104 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 18:10:36,115 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:36,115 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: 9c5ec71d-3715-4436-89cc-f38a43ac714d).
2025-06-01 18:10:37,603 - INFO - [127.0.0.1:46206] [Receiver 23] Valid message type 'ping' (ID: ping-1748794237602) from 127.0.0.1:46206
2025-06-01 18:10:38,604 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:38,605 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:38,616 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:38,616 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: e62f1329-0fa7-468c-b43a-b83ddfd52cc8).
2025-06-01 18:10:38,616 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 3, Input Q (to_frontend): 0
2025-06-01 18:10:40,104 - INFO - [127.0.0.1:46206] [Receiver 24] Valid message type 'ping' (ID: ping-1748794240102) from 127.0.0.1:46206
2025-06-01 18:10:41,104 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:41,105 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:41,105 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:10:41,115 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:41,116 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: e0596b8d-962b-4de7-9882-6a5638f6b1a2).
2025-06-01 18:10:42,603 - INFO - [127.0.0.1:46206] [Receiver 25] Valid message type 'ping' (ID: ping-1748794242601) from 127.0.0.1:46206
2025-06-01 18:10:43,603 - INFO - MessageProcessor: Received ping from 127.0.0.1:46206
2025-06-01 18:10:43,604 - INFO - Enqueued pong response for ping from 127.0.0.1:46206
2025-06-01 18:10:43,614 - INFO - Attempting to send direct message to client: 127.0.0.1:46206 (type: pong)
2025-06-01 18:10:43,615 - INFO - [127.0.0.1:46206] Successfully sent direct message (type: pong, ID: 73443802-da6b-4109-9730-954d992ebd4f).
2025-06-01 18:10:43,833 - INFO - [127.0.0.1:46206] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 18:10:43,833 - INFO - [127.0.0.1:46206] Receiver task finished. Processed 25 messages.
2025-06-01 18:10:43,834 - INFO - Cancelling pending task sender_127.0.0.1:46206 for 127.0.0.1:46206.
2025-06-01 18:10:43,834 - INFO - [127.0.0.1:46206] Sender task was cancelled normally.
2025-06-01 18:10:43,834 - INFO - [127.0.0.1:46206] Sender task finished.
2025-06-01 18:10:43,834 - INFO - Finalizing connection handling for 127.0.0.1:46206. Ensuring cleanup.
2025-06-01 18:10:43,834 - INFO - Starting cleanup for 127.0.0.1:46206
2025-06-01 18:10:43,835 - INFO - Connection cleanup completed for 127.0.0.1:46206. Remaining active connections: 0
2025-06-01 18:10:43,835 - INFO - Connection handling for 127.0.0.1:46206 finished.
2025-06-01 18:10:43,835 - INFO - Cleanup finished for client_1748794182572vugsq8 at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 18:10:43,933 - INFO - Application shutdown event triggered.
2025-06-01 18:10:43,934 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:10:43,934 - INFO - Simulation is not running. No action needed.
2025-06-01 18:10:43,934 - INFO - SimulationManager stop method called.
2025-06-01 18:10:43,934 - INFO - Stopping MessageProcessor...
2025-06-01 18:10:43,934 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 18:10:43,934 - INFO - MessageProcessor main loop stopped.
2025-06-01 18:10:43,934 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:10:43,935 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:10:43,935 - INFO - MessageProcessor shutdown complete.
2025-06-01 18:10:43,935 - INFO - Stopping QueueForwarder...
2025-06-01 18:10:43,935 - INFO - QueueForwarder task cancelled.
2025-06-01 18:10:43,935 - INFO - QueueForwarder stopped
2025-06-01 18:10:43,935 - INFO - Calling SimulationManager instance stop method...
2025-06-01 18:10:43,935 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:10:43,935 - INFO - Simulation is not running. No action needed.
2025-06-01 18:10:43,935 - INFO - Shutting down WebSocketManager...
2025-06-01 18:10:43,936 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 18:10:43,936 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:10:43,936 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:10:43,936 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 18:10:43,936 - INFO - Application shutdown complete.
2025-06-01 18:10:43,937 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:10:43,937 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:18:57,612 - INFO - Application startup event triggered.
2025-06-01 18:18:57,612 - INFO - Initializing all queues...
2025-06-01 18:18:57,612 - INFO - All queues initialized on loop 308956704
2025-06-01 18:18:57,612 - INFO - Shared queues initialized.
2025-06-01 18:18:57,612 - INFO - Retrieved queue instances. Event loop ID: 308956704
2025-06-01 18:18:57,612 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 18:18:57,612 - INFO - SimulationManager ready state changed from False to True
2025-06-01 18:18:57,612 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 18:18:57,612 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 18:18:57,612 - INFO - Starting MessageProcessor task.
2025-06-01 18:18:57,612 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 18:18:57,612 - INFO - MessageProcessor task started.
2025-06-01 18:18:57,612 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 18:18:57,612 - INFO - QueueForwarder queues already initialized
2025-06-01 18:18:57,612 - INFO - QueueForwarder task started.
2025-06-01 18:18:57,612 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 18:18:57,613 - INFO - MessageProcessor main loop started.
2025-06-01 18:18:57,613 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:18:57,613 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 18:18:57,613 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:18:59,369 - INFO - Attempting to handle connection for 127.0.0.1:44388 (ID: client_1748794739357csvs8c)
2025-06-01 18:18:59,369 - INFO - WebSocket connection accepted for 127.0.0.1:44388 (ID: client_1748794739357csvs8c)
2025-06-01 18:18:59,369 - INFO - Adding connection: 127.0.0.1:44388. Total connections: 1
2025-06-01 18:18:59,370 - INFO - [127.0.0.1:44388] Sent connection_ack.
2025-06-01 18:18:59,370 - INFO - Sender task started for 127.0.0.1:44388
2025-06-01 18:18:59,370 - INFO - Starting receiver for 127.0.0.1:44388 with enhanced message tracing
2025-06-01 18:18:59,387 - INFO - [127.0.0.1:44388] [Receiver 1] Valid message type 'frontend_ready_ack' (ID: frontend-init-1748794739386) from 127.0.0.1:44388
2025-06-01 18:19:00,388 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:44388. Status: Frontend ready to receive
2025-06-01 18:19:01,888 - INFO - [127.0.0.1:44388] [Receiver 2] Valid message type 'ping' (ID: ping-1748794741887) from 127.0.0.1:44388
2025-06-01 18:19:02,888 - INFO - MessageProcessor: Received ping from 127.0.0.1:44388
2025-06-01 18:19:02,888 - INFO - Enqueued pong response for ping from 127.0.0.1:44388
2025-06-01 18:19:02,888 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:19:02,899 - INFO - Attempting to send direct message to client: 127.0.0.1:44388 (type: pong)
2025-06-01 18:19:02,899 - INFO - [127.0.0.1:44388] Successfully sent direct message (type: pong, ID: 72f85392-de05-4af7-b8c5-11d10de93358).
2025-06-01 18:19:02,899 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 1, Input Q (to_frontend): 0
2025-06-01 18:19:04,388 - INFO - [127.0.0.1:44388] [Receiver 3] Valid message type 'ping' (ID: ping-1748794744386) from 127.0.0.1:44388
2025-06-01 18:19:05,388 - INFO - MessageProcessor: Received ping from 127.0.0.1:44388
2025-06-01 18:19:05,388 - INFO - Enqueued pong response for ping from 127.0.0.1:44388
2025-06-01 18:19:05,398 - INFO - Attempting to send direct message to client: 127.0.0.1:44388 (type: pong)
2025-06-01 18:19:05,399 - INFO - [127.0.0.1:44388] Successfully sent direct message (type: pong, ID: 28159664-7651-49dc-b2dc-0af7b9a61801).
2025-06-01 18:19:06,888 - INFO - [127.0.0.1:44388] [Receiver 4] Valid message type 'ping' (ID: ping-1748794746886) from 127.0.0.1:44388
2025-06-01 18:19:07,888 - INFO - MessageProcessor: Received ping from 127.0.0.1:44388
2025-06-01 18:19:07,888 - INFO - Enqueued pong response for ping from 127.0.0.1:44388
2025-06-01 18:19:07,898 - INFO - Attempting to send direct message to client: 127.0.0.1:44388 (type: pong)
2025-06-01 18:19:07,899 - INFO - [127.0.0.1:44388] Successfully sent direct message (type: pong, ID: 7b5268b9-31c7-49f9-b5d5-9c9a052985a1).
2025-06-01 18:19:09,388 - INFO - [127.0.0.1:44388] [Receiver 5] Valid message type 'ping' (ID: ping-1748794749386) from 127.0.0.1:44388
2025-06-01 18:19:10,388 - INFO - MessageProcessor: Received ping from 127.0.0.1:44388
2025-06-01 18:19:10,388 - INFO - Enqueued pong response for ping from 127.0.0.1:44388
2025-06-01 18:19:10,388 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 18:19:10,399 - INFO - Attempting to send direct message to client: 127.0.0.1:44388 (type: pong)
2025-06-01 18:19:10,399 - INFO - [127.0.0.1:44388] Successfully sent direct message (type: pong, ID: ee5b2c70-b2ec-44b3-ad89-972fe3595b1c).
2025-06-01 18:19:10,399 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 3, Input Q (to_frontend): 0
2025-06-01 18:19:11,888 - INFO - [127.0.0.1:44388] [Receiver 6] Valid message type 'ping' (ID: ping-1748794751886) from 127.0.0.1:44388
2025-06-01 18:19:12,888 - INFO - MessageProcessor: Received ping from 127.0.0.1:44388
2025-06-01 18:19:12,888 - INFO - Enqueued pong response for ping from 127.0.0.1:44388
2025-06-01 18:19:12,899 - INFO - Attempting to send direct message to client: 127.0.0.1:44388 (type: pong)
2025-06-01 18:19:12,899 - INFO - [127.0.0.1:44388] Successfully sent direct message (type: pong, ID: 81450b0f-f470-481a-93d2-065a6adfce28).
2025-06-01 18:19:14,389 - INFO - [127.0.0.1:44388] [Receiver 7] Valid message type 'ping' (ID: ping-1748794754386) from 127.0.0.1:44388
2025-06-01 18:19:15,389 - INFO - MessageProcessor: Received ping from 127.0.0.1:44388
2025-06-01 18:19:15,390 - INFO - Enqueued pong response for ping from 127.0.0.1:44388
2025-06-01 18:19:15,390 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:19:15,400 - INFO - Attempting to send direct message to client: 127.0.0.1:44388 (type: pong)
2025-06-01 18:19:15,401 - INFO - [127.0.0.1:44388] Successfully sent direct message (type: pong, ID: 80228850-110e-47e6-a714-ed479d6ffa77).
2025-06-01 18:19:15,401 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 2, Input Q (to_frontend): 0
2025-06-01 18:19:16,889 - INFO - [127.0.0.1:44388] [Receiver 8] Valid message type 'ping' (ID: ping-1748794756887) from 127.0.0.1:44388
2025-06-01 18:19:17,889 - INFO - MessageProcessor: Received ping from 127.0.0.1:44388
2025-06-01 18:19:17,889 - INFO - Enqueued pong response for ping from 127.0.0.1:44388
2025-06-01 18:19:17,899 - INFO - Attempting to send direct message to client: 127.0.0.1:44388 (type: pong)
2025-06-01 18:19:17,900 - INFO - [127.0.0.1:44388] Successfully sent direct message (type: pong, ID: 23934ddc-fbd7-4f3c-9c07-4180dd519cf0).
2025-06-01 18:19:19,388 - INFO - [127.0.0.1:44388] [Receiver 9] Valid message type 'ping' (ID: ping-1748794759386) from 127.0.0.1:44388
2025-06-01 18:19:20,389 - INFO - MessageProcessor: Received ping from 127.0.0.1:44388
2025-06-01 18:19:20,390 - INFO - Enqueued pong response for ping from 127.0.0.1:44388
2025-06-01 18:19:20,400 - INFO - Attempting to send direct message to client: 127.0.0.1:44388 (type: pong)
2025-06-01 18:19:20,400 - INFO - [127.0.0.1:44388] Successfully sent direct message (type: pong, ID: aeeb17b4-56b0-470f-8895-69de4f2280d2).
2025-06-01 18:19:21,889 - INFO - [127.0.0.1:44388] [Receiver 10] Valid message type 'ping' (ID: ping-1748794761886) from 127.0.0.1:44388
2025-06-01 18:19:22,890 - INFO - MessageProcessor: Received ping from 127.0.0.1:44388
2025-06-01 18:19:22,891 - INFO - Enqueued pong response for ping from 127.0.0.1:44388
2025-06-01 18:19:22,891 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 18:19:22,901 - INFO - Attempting to send direct message to client: 127.0.0.1:44388 (type: pong)
2025-06-01 18:19:22,901 - INFO - [127.0.0.1:44388] Successfully sent direct message (type: pong, ID: c2a388f2-f5a5-471b-893f-b2f76ca3fd53).
2025-06-01 18:19:22,902 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 3, Input Q (to_frontend): 0
2025-06-01 18:19:24,388 - INFO - [127.0.0.1:44388] [Receiver 11] Valid message type 'ping' (ID: ping-1748794764386) from 127.0.0.1:44388
2025-06-01 18:19:25,388 - INFO - MessageProcessor: Received ping from 127.0.0.1:44388
2025-06-01 18:19:25,388 - INFO - Enqueued pong response for ping from 127.0.0.1:44388
2025-06-01 18:19:25,398 - INFO - Attempting to send direct message to client: 127.0.0.1:44388 (type: pong)
2025-06-01 18:19:25,399 - INFO - [127.0.0.1:44388] Successfully sent direct message (type: pong, ID: 199fddcc-6af7-4a83-ba43-fdaaa9ba31e1).
2025-06-01 18:19:26,888 - INFO - [127.0.0.1:44388] [Receiver 12] Valid message type 'ping' (ID: ping-1748794766886) from 127.0.0.1:44388
2025-06-01 18:19:27,888 - INFO - MessageProcessor: Received ping from 127.0.0.1:44388
2025-06-01 18:19:27,889 - INFO - Enqueued pong response for ping from 127.0.0.1:44388
2025-06-01 18:19:27,899 - INFO - Attempting to send direct message to client: 127.0.0.1:44388 (type: pong)
2025-06-01 18:19:27,899 - INFO - [127.0.0.1:44388] Successfully sent direct message (type: pong, ID: 52f060f8-9581-490e-9f54-97afad4058ce).
2025-06-01 18:19:28,855 - INFO - [127.0.0.1:44388] WebSocket cleanly disconnected: Code 1001, Reason: ''
2025-06-01 18:19:28,855 - INFO - [127.0.0.1:44388] Receiver task finished. Processed 12 messages.
2025-06-01 18:19:28,855 - INFO - Cancelling pending task sender_127.0.0.1:44388 for 127.0.0.1:44388.
2025-06-01 18:19:28,855 - INFO - [127.0.0.1:44388] Sender task was cancelled normally.
2025-06-01 18:19:28,855 - INFO - [127.0.0.1:44388] Sender task finished.
2025-06-01 18:19:28,855 - INFO - Finalizing connection handling for 127.0.0.1:44388. Ensuring cleanup.
2025-06-01 18:19:28,855 - INFO - Starting cleanup for 127.0.0.1:44388
2025-06-01 18:19:28,855 - INFO - Connection cleanup completed for 127.0.0.1:44388. Remaining active connections: 0
2025-06-01 18:19:28,855 - INFO - Connection handling for 127.0.0.1:44388 finished.
2025-06-01 18:19:28,855 - INFO - Cleanup finished for client_1748794739357csvs8c at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 18:19:30,097 - INFO - Application shutdown event triggered.
2025-06-01 18:19:30,097 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:19:30,097 - INFO - Simulation is not running. No action needed.
2025-06-01 18:19:30,097 - INFO - SimulationManager stop method called.
2025-06-01 18:19:30,097 - INFO - Stopping MessageProcessor...
2025-06-01 18:19:30,098 - INFO - QueueForwarder task cancelled.
2025-06-01 18:19:30,098 - INFO - QueueForwarder stopped
2025-06-01 18:19:30,098 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:19:30,098 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:19:30,098 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 18:19:30,098 - INFO - MessageProcessor main loop stopped.
2025-06-01 18:19:30,098 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:19:30,098 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:19:30,098 - INFO - MessageProcessor shutdown complete.
2025-06-01 18:19:30,098 - INFO - Stopping QueueForwarder...
2025-06-01 18:19:30,098 - INFO - Calling SimulationManager instance stop method...
2025-06-01 18:19:30,098 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:19:30,098 - INFO - Simulation is not running. No action needed.
2025-06-01 18:19:30,098 - INFO - Shutting down WebSocketManager...
2025-06-01 18:19:30,099 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 18:19:30,099 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:19:30,099 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:19:30,099 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 18:19:30,099 - INFO - Application shutdown complete.
2025-06-01 18:24:07,703 - INFO - Application startup event triggered.
2025-06-01 18:24:07,703 - INFO - Initializing all queues...
2025-06-01 18:24:07,703 - INFO - All queues initialized on loop 978214432
2025-06-01 18:24:07,703 - INFO - Shared queues initialized.
2025-06-01 18:24:07,703 - INFO - Retrieved queue instances. Event loop ID: 978214432
2025-06-01 18:24:07,704 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 18:24:07,704 - INFO - SimulationManager ready state changed from False to True
2025-06-01 18:24:07,704 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 18:24:07,704 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 18:24:07,704 - INFO - Starting MessageProcessor task.
2025-06-01 18:24:07,704 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 18:24:07,704 - INFO - MessageProcessor task started.
2025-06-01 18:24:07,704 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 18:24:07,704 - INFO - QueueForwarder queues already initialized
2025-06-01 18:24:07,704 - INFO - QueueForwarder task started.
2025-06-01 18:24:07,704 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 18:24:07,704 - INFO - MessageProcessor main loop started.
2025-06-01 18:24:07,704 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:24:07,704 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 18:24:07,704 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:24:09,454 - INFO - Attempting to handle connection for 127.0.0.1:52100 (ID: client_1748795049443gt96p4)
2025-06-01 18:24:09,454 - INFO - WebSocket connection accepted for 127.0.0.1:52100 (ID: client_1748795049443gt96p4)
2025-06-01 18:24:09,454 - INFO - Adding connection: 127.0.0.1:52100. Total connections: 1
2025-06-01 18:24:09,455 - INFO - [127.0.0.1:52100] Sent connection_ack.
2025-06-01 18:24:09,455 - INFO - Sender task started for 127.0.0.1:52100
2025-06-01 18:24:09,456 - INFO - Starting receiver for 127.0.0.1:52100 with enhanced message tracing
2025-06-01 18:24:09,475 - INFO - [127.0.0.1:52100] [Receiver 1] Valid message type 'frontend_ready_ack' (ID: frontend-init-1748795049474) from 127.0.0.1:52100
2025-06-01 18:24:10,475 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:52100. Status: Frontend ready to receive
2025-06-01 18:24:11,975 - INFO - [127.0.0.1:52100] [Receiver 2] Valid message type 'ping' (ID: ping-1748795051974) from 127.0.0.1:52100
2025-06-01 18:24:12,976 - INFO - MessageProcessor: Received ping from 127.0.0.1:52100
2025-06-01 18:24:12,977 - INFO - Enqueued pong response for ping from 127.0.0.1:52100
2025-06-01 18:24:12,977 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:24:12,988 - INFO - Attempting to send direct message to client: 127.0.0.1:52100 (type: pong)
2025-06-01 18:24:12,988 - INFO - [127.0.0.1:52100] Successfully sent direct message (type: pong, ID: cb3a8af0-a2c5-4739-b24d-d44b9f0941f5).
2025-06-01 18:24:12,989 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 1, Input Q (to_frontend): 0
2025-06-01 18:24:14,475 - INFO - [127.0.0.1:52100] [Receiver 3] Valid message type 'ping' (ID: ping-1748795054474) from 127.0.0.1:52100
2025-06-01 18:24:15,477 - INFO - MessageProcessor: Received ping from 127.0.0.1:52100
2025-06-01 18:24:15,478 - INFO - Enqueued pong response for ping from 127.0.0.1:52100
2025-06-01 18:24:15,488 - INFO - Attempting to send direct message to client: 127.0.0.1:52100 (type: pong)
2025-06-01 18:24:15,489 - INFO - [127.0.0.1:52100] Successfully sent direct message (type: pong, ID: 75c46f03-212d-46a7-8663-5dbe5c8b0015).
2025-06-01 18:24:16,975 - INFO - [127.0.0.1:52100] [Receiver 4] Valid message type 'ping' (ID: ping-1748795056974) from 127.0.0.1:52100
2025-06-01 18:24:17,976 - INFO - MessageProcessor: Received ping from 127.0.0.1:52100
2025-06-01 18:24:17,976 - INFO - Enqueued pong response for ping from 127.0.0.1:52100
2025-06-01 18:24:17,987 - INFO - Attempting to send direct message to client: 127.0.0.1:52100 (type: pong)
2025-06-01 18:24:17,987 - INFO - [127.0.0.1:52100] Successfully sent direct message (type: pong, ID: bbb4cdfc-e91f-467d-b22c-a2bbafcaf192).
2025-06-01 18:24:19,475 - INFO - [127.0.0.1:52100] [Receiver 5] Valid message type 'ping' (ID: ping-1748795059474) from 127.0.0.1:52100
2025-06-01 18:24:20,476 - INFO - MessageProcessor: Received ping from 127.0.0.1:52100
2025-06-01 18:24:20,477 - INFO - Enqueued pong response for ping from 127.0.0.1:52100
2025-06-01 18:24:20,477 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 18:24:20,488 - INFO - Attempting to send direct message to client: 127.0.0.1:52100 (type: pong)
2025-06-01 18:24:20,489 - INFO - [127.0.0.1:52100] Successfully sent direct message (type: pong, ID: 13dbb310-e986-4820-9ecb-cfcc5cefc241).
2025-06-01 18:24:20,489 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 3, Input Q (to_frontend): 0
2025-06-01 18:24:21,975 - INFO - [127.0.0.1:52100] [Receiver 6] Valid message type 'ping' (ID: ping-1748795061974) from 127.0.0.1:52100
2025-06-01 18:24:22,977 - INFO - MessageProcessor: Received ping from 127.0.0.1:52100
2025-06-01 18:24:22,977 - INFO - Enqueued pong response for ping from 127.0.0.1:52100
2025-06-01 18:24:22,987 - INFO - Attempting to send direct message to client: 127.0.0.1:52100 (type: pong)
2025-06-01 18:24:22,988 - INFO - [127.0.0.1:52100] Successfully sent direct message (type: pong, ID: ac1d4b00-04b7-4a4c-8a57-2b07c6b63f94).
2025-06-01 18:24:23,051 - INFO - [127.0.0.1:52100] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 18:24:23,051 - INFO - [127.0.0.1:52100] Receiver task finished. Processed 6 messages.
2025-06-01 18:24:23,052 - INFO - Cancelling pending task sender_127.0.0.1:52100 for 127.0.0.1:52100.
2025-06-01 18:24:23,052 - INFO - [127.0.0.1:52100] Sender task was cancelled normally.
2025-06-01 18:24:23,052 - INFO - [127.0.0.1:52100] Sender task finished.
2025-06-01 18:24:23,052 - INFO - Finalizing connection handling for 127.0.0.1:52100. Ensuring cleanup.
2025-06-01 18:24:23,052 - INFO - Starting cleanup for 127.0.0.1:52100
2025-06-01 18:24:23,052 - INFO - Connection cleanup completed for 127.0.0.1:52100. Remaining active connections: 0
2025-06-01 18:24:23,052 - INFO - Connection handling for 127.0.0.1:52100 finished.
2025-06-01 18:24:23,052 - INFO - Cleanup finished for client_1748795049443gt96p4 at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 18:24:23,152 - INFO - Application shutdown event triggered.
2025-06-01 18:24:23,152 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:24:23,152 - INFO - Simulation is not running. No action needed.
2025-06-01 18:24:23,152 - INFO - SimulationManager stop method called.
2025-06-01 18:24:23,152 - INFO - Stopping MessageProcessor...
2025-06-01 18:24:23,152 - INFO - QueueForwarder task cancelled.
2025-06-01 18:24:23,152 - INFO - QueueForwarder stopped
2025-06-01 18:24:23,152 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:24:23,153 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:24:23,153 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 18:24:23,153 - INFO - MessageProcessor main loop stopped.
2025-06-01 18:24:23,153 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:24:23,153 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:24:23,153 - INFO - MessageProcessor shutdown complete.
2025-06-01 18:24:23,153 - INFO - Stopping QueueForwarder...
2025-06-01 18:24:23,153 - INFO - Calling SimulationManager instance stop method...
2025-06-01 18:24:23,153 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:24:23,153 - INFO - Simulation is not running. No action needed.
2025-06-01 18:24:23,153 - INFO - Shutting down WebSocketManager...
2025-06-01 18:24:23,154 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 18:24:23,154 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:24:23,154 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:24:23,154 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 18:24:23,154 - INFO - Application shutdown complete.
2025-06-01 18:28:56,537 - INFO - Application startup event triggered.
2025-06-01 18:28:56,537 - INFO - Initializing all queues...
2025-06-01 18:28:56,537 - INFO - All queues initialized on loop 105438752
2025-06-01 18:28:56,537 - INFO - Shared queues initialized.
2025-06-01 18:28:56,537 - INFO - Retrieved queue instances. Event loop ID: 105438752
2025-06-01 18:28:56,538 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 18:28:56,538 - INFO - SimulationManager ready state changed from False to True
2025-06-01 18:28:56,538 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 18:28:56,538 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 18:28:56,538 - INFO - Starting MessageProcessor task.
2025-06-01 18:28:56,538 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 18:28:56,538 - INFO - MessageProcessor task started.
2025-06-01 18:28:56,538 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 18:28:56,538 - INFO - QueueForwarder queues already initialized
2025-06-01 18:28:56,538 - INFO - QueueForwarder task started.
2025-06-01 18:28:56,538 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 18:28:56,538 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 18:28:56,538 - INFO - MessageProcessor main loop started.
2025-06-01 18:28:56,538 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:28:56,538 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 18:28:56,538 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:28:58,392 - INFO - Attempting to handle connection for 127.0.0.1:56198 (ID: client_1748795338380qqa9e4)
2025-06-01 18:28:58,393 - INFO - WebSocket connection accepted for 127.0.0.1:56198 (ID: client_1748795338380qqa9e4)
2025-06-01 18:28:58,393 - INFO - Adding connection: 127.0.0.1:56198. Total connections: 1
2025-06-01 18:28:58,394 - INFO - [127.0.0.1:56198] Sent connection_ack.
2025-06-01 18:28:58,394 - INFO - Sender task started for 127.0.0.1:56198
2025-06-01 18:28:58,394 - INFO - Starting receiver for 127.0.0.1:56198 with enhanced message tracing
2025-06-01 18:28:58,415 - INFO - [127.0.0.1:56198] [Receiver 1] Valid message type 'frontend_ready_ack' (ID: frontend-init-1748795338414) from 127.0.0.1:56198
2025-06-01 18:28:59,416 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:56198. Status: Frontend ready to receive
2025-06-01 18:29:00,916 - INFO - [127.0.0.1:56198] [Receiver 2] Valid message type 'ping' (ID: ping-1748795340914) from 127.0.0.1:56198
2025-06-01 18:29:01,538 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> (type: queue_status)
2025-06-01 18:29:01,538 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> not found in active connections for direct message. Message not sent.
2025-06-01 18:29:01,539 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fb7ce27fb00>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': 'b16a00c2-2618-448f-ab99-01390537e8c9', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795341.5384722, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:29:01,540 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:29:01,917 - INFO - MessageProcessor: Received ping from 127.0.0.1:56198
2025-06-01 18:29:01,917 - INFO - Enqueued pong response for ping from 127.0.0.1:56198
2025-06-01 18:29:01,918 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:29:01,928 - INFO - Attempting to send direct message to client: 127.0.0.1:56198 (type: pong)
2025-06-01 18:29:01,929 - INFO - [127.0.0.1:56198] Successfully sent direct message (type: pong, ID: 67a529f7-ed02-46c8-bd44-79d5620be090).
2025-06-01 18:29:01,929 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 1, Input Q (to_frontend): 0
2025-06-01 18:29:02,541 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> (type: queue_status)
2025-06-01 18:29:02,541 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> not found in active connections for direct message. Message not sent.
2025-06-01 18:29:02,541 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fb7ce27fb00>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '1c6a0e2a-6402-45cf-8ae7-57b3af1b1618', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795342.5410469, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:29:02,542 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:29:03,415 - INFO - [127.0.0.1:56198] [Receiver 3] Valid message type 'ping' (ID: ping-1748795343414) from 127.0.0.1:56198
2025-06-01 18:29:03,542 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> (type: queue_status)
2025-06-01 18:29:03,543 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> not found in active connections for direct message. Message not sent.
2025-06-01 18:29:03,543 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fb7ce27fb00>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '622bcd2c-aed1-4fd8-9eb9-6c14d41725de', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795343.542807, 'client_id
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:29:03,543 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:29:04,416 - INFO - MessageProcessor: Received ping from 127.0.0.1:56198
2025-06-01 18:29:04,417 - INFO - Enqueued pong response for ping from 127.0.0.1:56198
2025-06-01 18:29:04,427 - INFO - Attempting to send direct message to client: 127.0.0.1:56198 (type: pong)
2025-06-01 18:29:04,428 - INFO - [127.0.0.1:56198] Successfully sent direct message (type: pong, ID: 155872ff-434b-46c6-9ce6-020c14935193).
2025-06-01 18:29:04,545 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> (type: queue_status)
2025-06-01 18:29:04,545 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> not found in active connections for direct message. Message not sent.
2025-06-01 18:29:04,545 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fb7ce27fb00>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '35b52225-fbd1-447b-8ff5-5b14904a2e54', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795344.5450788, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:29:04,546 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:29:05,546 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> (type: queue_status)
2025-06-01 18:29:05,546 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> not found in active connections for direct message. Message not sent.
2025-06-01 18:29:05,546 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fb7ce27fb00>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': 'fe7dd0d7-7c8e-4b26-8715-b6bf49a56a53', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795345.5464904, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:29:05,547 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:29:05,915 - INFO - [127.0.0.1:56198] [Receiver 4] Valid message type 'ping' (ID: ping-1748795345914) from 127.0.0.1:56198
2025-06-01 18:29:06,547 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> (type: queue_status)
2025-06-01 18:29:06,548 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> not found in active connections for direct message. Message not sent.
2025-06-01 18:29:06,548 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fb7ce27fb00>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '4ce0b953-3de2-429b-902a-d68eef8bc86d', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795346.5479288, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:29:06,548 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:29:06,916 - INFO - MessageProcessor: Received ping from 127.0.0.1:56198
2025-06-01 18:29:06,917 - INFO - Enqueued pong response for ping from 127.0.0.1:56198
2025-06-01 18:29:06,927 - INFO - Attempting to send direct message to client: 127.0.0.1:56198 (type: pong)
2025-06-01 18:29:06,928 - INFO - [127.0.0.1:56198] Successfully sent direct message (type: pong, ID: 39578679-b38a-49ef-967c-aa6cf79e7db0).
2025-06-01 18:29:07,549 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> (type: queue_status)
2025-06-01 18:29:07,549 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> not found in active connections for direct message. Message not sent.
2025-06-01 18:29:07,549 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fb7ce27fb00>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '5ad35e8e-4c87-4dcf-8129-5d7636960ff8', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795347.5492802, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:29:07,550 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:29:08,415 - INFO - [127.0.0.1:56198] [Receiver 5] Valid message type 'ping' (ID: ping-1748795348414) from 127.0.0.1:56198
2025-06-01 18:29:08,550 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> (type: queue_status)
2025-06-01 18:29:08,550 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> not found in active connections for direct message. Message not sent.
2025-06-01 18:29:08,550 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fb7ce27fb00>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '417dc586-3dac-4646-9577-8224425b6b05', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795348.5502312, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:29:08,551 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:29:09,415 - INFO - MessageProcessor: Received ping from 127.0.0.1:56198
2025-06-01 18:29:09,415 - INFO - Enqueued pong response for ping from 127.0.0.1:56198
2025-06-01 18:29:09,415 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 18:29:09,425 - INFO - Attempting to send direct message to client: 127.0.0.1:56198 (type: pong)
2025-06-01 18:29:09,425 - INFO - [127.0.0.1:56198] Successfully sent direct message (type: pong, ID: 87029e15-c5a5-48a2-a674-de51dc4931ba).
2025-06-01 18:29:09,425 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 3, Input Q (to_frontend): 0
2025-06-01 18:29:09,551 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> (type: queue_status)
2025-06-01 18:29:09,551 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> not found in active connections for direct message. Message not sent.
2025-06-01 18:29:09,551 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fb7ce27fb00>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '27c3381f-623e-4b49-a13c-709269990d52', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795349.5513935, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:29:09,552 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:29:10,552 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> (type: queue_status)
2025-06-01 18:29:10,552 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> not found in active connections for direct message. Message not sent.
2025-06-01 18:29:10,552 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fb7ce27fb00>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': 'aa1dce80-0d4e-4012-929b-365dd368eea0', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795350.5524044, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:29:10,553 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:29:10,915 - INFO - [127.0.0.1:56198] [Receiver 6] Valid message type 'ping' (ID: ping-1748795350914) from 127.0.0.1:56198
2025-06-01 18:29:11,553 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> (type: queue_status)
2025-06-01 18:29:11,554 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00> not found in active connections for direct message. Message not sent.
2025-06-01 18:29:11,554 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fb7ce27fb00>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '20a2e2d2-874e-4551-93d8-73a8d23f9478', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795351.553885, 'client_id
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:29:11,555 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fb7ce27fb00>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:29:11,583 - INFO - [127.0.0.1:56198] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 18:29:11,583 - INFO - [127.0.0.1:56198] Receiver task finished. Processed 6 messages.
2025-06-01 18:29:11,583 - INFO - Cancelling pending task sender_127.0.0.1:56198 for 127.0.0.1:56198.
2025-06-01 18:29:11,583 - INFO - [127.0.0.1:56198] Sender task was cancelled normally.
2025-06-01 18:29:11,583 - INFO - [127.0.0.1:56198] Sender task finished.
2025-06-01 18:29:11,584 - INFO - Finalizing connection handling for 127.0.0.1:56198. Ensuring cleanup.
2025-06-01 18:29:11,584 - INFO - Starting cleanup for 127.0.0.1:56198
2025-06-01 18:29:11,584 - INFO - Connection cleanup completed for 127.0.0.1:56198. Remaining active connections: 0
2025-06-01 18:29:11,584 - INFO - Connection handling for 127.0.0.1:56198 finished.
2025-06-01 18:29:11,584 - INFO - Cleanup finished for client_1748795338380qqa9e4 at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 18:29:11,684 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:29:11,684 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:29:11,684 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 18:29:11,684 - INFO - MessageProcessor main loop stopped.
2025-06-01 18:29:11,684 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:29:11,684 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:29:11,684 - INFO - Application shutdown event triggered.
2025-06-01 18:29:11,684 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:29:11,685 - INFO - Simulation is not running. No action needed.
2025-06-01 18:29:11,685 - INFO - SimulationManager stop method called.
2025-06-01 18:29:11,685 - INFO - Stopping MessageProcessor...
2025-06-01 18:29:11,685 - INFO - MessageProcessor shutdown complete.
2025-06-01 18:29:11,685 - INFO - Stopping QueueForwarder...
2025-06-01 18:29:11,685 - INFO - QueueForwarder task cancelled.
2025-06-01 18:29:11,685 - INFO - QueueForwarder stopped
2025-06-01 18:29:11,685 - INFO - Calling SimulationManager instance stop method...
2025-06-01 18:29:11,685 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:29:11,685 - INFO - Simulation is not running. No action needed.
2025-06-01 18:29:11,685 - INFO - Shutting down WebSocketManager...
2025-06-01 18:29:11,685 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 18:29:11,685 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:29:11,686 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:29:11,686 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 18:29:11,686 - INFO - Application shutdown complete.
2025-06-01 18:31:53,855 - INFO - Application startup event triggered.
2025-06-01 18:31:53,855 - INFO - Initializing all queues...
2025-06-01 18:31:53,855 - INFO - All queues initialized on loop 37449248
2025-06-01 18:31:53,855 - INFO - Shared queues initialized.
2025-06-01 18:31:53,856 - INFO - Retrieved queue instances. Event loop ID: 37449248
2025-06-01 18:31:53,856 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 18:31:53,856 - INFO - SimulationManager ready state changed from False to True
2025-06-01 18:31:53,856 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 18:31:53,856 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 18:31:53,856 - INFO - Starting MessageProcessor task.
2025-06-01 18:31:53,856 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 18:31:53,856 - INFO - MessageProcessor task started.
2025-06-01 18:31:53,856 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 18:31:53,856 - INFO - QueueForwarder queues already initialized
2025-06-01 18:31:53,856 - INFO - QueueForwarder task started.
2025-06-01 18:31:53,856 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 18:31:53,856 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 18:31:53,856 - INFO - MessageProcessor main loop started.
2025-06-01 18:31:53,856 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:31:53,856 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 18:31:53,856 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:31:55,561 - INFO - Attempting to handle connection for 127.0.0.1:37466 (ID: client_1748795515549z3vcob)
2025-06-01 18:31:55,561 - INFO - WebSocket connection accepted for 127.0.0.1:37466 (ID: client_1748795515549z3vcob)
2025-06-01 18:31:55,562 - INFO - Adding connection: 127.0.0.1:37466. Total connections: 1
2025-06-01 18:31:55,562 - INFO - [127.0.0.1:37466] Sent connection_ack.
2025-06-01 18:31:55,562 - INFO - Sender task started for 127.0.0.1:37466
2025-06-01 18:31:55,563 - INFO - Starting receiver for 127.0.0.1:37466 with enhanced message tracing
2025-06-01 18:31:55,579 - INFO - [127.0.0.1:37466] [Receiver 1] Valid message type 'frontend_ready_ack' (ID: frontend-init-1748795515579) from 127.0.0.1:37466
2025-06-01 18:31:56,580 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:37466. Status: Frontend ready to receive
2025-06-01 18:31:58,080 - INFO - [127.0.0.1:37466] [Receiver 2] Valid message type 'ping' (ID: ping-1748795518079) from 127.0.0.1:37466
2025-06-01 18:31:58,858 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7f11cf59bb60> (type: queue_status)
2025-06-01 18:31:58,858 - WARNING - Client <starlette.websockets.WebSocket object at 0x7f11cf59bb60> not found in active connections for direct message. Message not sent.
2025-06-01 18:31:58,858 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7f11cf59bb60>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '62ffed29-b6fe-4d08-b020-b5011bb9bbd0', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795518.8578813, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:31:58,859 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7f11cf59bb60>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:31:59,081 - INFO - MessageProcessor: Received ping from 127.0.0.1:37466
2025-06-01 18:31:59,082 - INFO - Enqueued pong response for ping from 127.0.0.1:37466
2025-06-01 18:31:59,082 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:31:59,092 - INFO - Attempting to send direct message to client: 127.0.0.1:37466 (type: pong)
2025-06-01 18:31:59,093 - INFO - [127.0.0.1:37466] Successfully sent direct message (type: pong, ID: 3b2ca4da-810d-4bc6-9540-257afe11e770).
2025-06-01 18:31:59,093 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 1, Input Q (to_frontend): 0
2025-06-01 18:31:59,859 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7f11cf59bb60> (type: queue_status)
2025-06-01 18:31:59,859 - WARNING - Client <starlette.websockets.WebSocket object at 0x7f11cf59bb60> not found in active connections for direct message. Message not sent.
2025-06-01 18:31:59,860 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7f11cf59bb60>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '57777759-dea4-4df2-8ce2-83f025fe9629', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795519.8598015, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:31:59,860 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7f11cf59bb60>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:32:00,580 - INFO - [127.0.0.1:37466] [Receiver 3] Valid message type 'ping' (ID: ping-1748795520579) from 127.0.0.1:37466
2025-06-01 18:32:00,861 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7f11cf59bb60> (type: queue_status)
2025-06-01 18:32:00,861 - WARNING - Client <starlette.websockets.WebSocket object at 0x7f11cf59bb60> not found in active connections for direct message. Message not sent.
2025-06-01 18:32:00,861 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7f11cf59bb60>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '8713188b-d6a6-48ad-999d-3fcc28cd6d75', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795520.8610163, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:32:00,861 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7f11cf59bb60>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:32:01,581 - INFO - MessageProcessor: Received ping from 127.0.0.1:37466
2025-06-01 18:32:01,581 - INFO - Enqueued pong response for ping from 127.0.0.1:37466
2025-06-01 18:32:01,591 - INFO - Attempting to send direct message to client: 127.0.0.1:37466 (type: pong)
2025-06-01 18:32:01,591 - INFO - [127.0.0.1:37466] Successfully sent direct message (type: pong, ID: a80725a1-4924-4b6c-b8c5-744256e069b6).
2025-06-01 18:32:01,862 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7f11cf59bb60> (type: queue_status)
2025-06-01 18:32:01,862 - WARNING - Client <starlette.websockets.WebSocket object at 0x7f11cf59bb60> not found in active connections for direct message. Message not sent.
2025-06-01 18:32:01,863 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7f11cf59bb60>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '4a96f493-1523-4303-b840-32441abaa041', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795521.8626614, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:32:01,863 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7f11cf59bb60>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:32:02,863 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7f11cf59bb60> (type: queue_status)
2025-06-01 18:32:02,863 - WARNING - Client <starlette.websockets.WebSocket object at 0x7f11cf59bb60> not found in active connections for direct message. Message not sent.
2025-06-01 18:32:02,864 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7f11cf59bb60>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '5b6e864d-29cd-48ef-ab7d-5e10f336081c', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748795522.8636239, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:32:02,864 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7f11cf59bb60>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:32:03,078 - INFO - [127.0.0.1:37466] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 18:32:03,078 - INFO - [127.0.0.1:37466] Receiver task finished. Processed 3 messages.
2025-06-01 18:32:03,079 - INFO - Cancelling pending task sender_127.0.0.1:37466 for 127.0.0.1:37466.
2025-06-01 18:32:03,079 - INFO - [127.0.0.1:37466] Sender task was cancelled normally.
2025-06-01 18:32:03,079 - INFO - [127.0.0.1:37466] Sender task finished.
2025-06-01 18:32:03,079 - INFO - Finalizing connection handling for 127.0.0.1:37466. Ensuring cleanup.
2025-06-01 18:32:03,079 - INFO - Starting cleanup for 127.0.0.1:37466
2025-06-01 18:32:03,079 - INFO - Connection cleanup completed for 127.0.0.1:37466. Remaining active connections: 0
2025-06-01 18:32:03,079 - INFO - Connection handling for 127.0.0.1:37466 finished.
2025-06-01 18:32:03,079 - INFO - Cleanup finished for client_1748795515549z3vcob at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 18:32:03,179 - INFO - Application shutdown event triggered.
2025-06-01 18:32:03,179 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:32:03,179 - INFO - Simulation is not running. No action needed.
2025-06-01 18:32:03,179 - INFO - SimulationManager stop method called.
2025-06-01 18:32:03,179 - INFO - Stopping MessageProcessor...
2025-06-01 18:32:03,180 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 18:32:03,180 - INFO - MessageProcessor main loop stopped.
2025-06-01 18:32:03,180 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:32:03,180 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:32:03,180 - INFO - MessageProcessor shutdown complete.
2025-06-01 18:32:03,180 - INFO - Stopping QueueForwarder...
2025-06-01 18:32:03,181 - INFO - QueueForwarder task cancelled.
2025-06-01 18:32:03,181 - INFO - QueueForwarder stopped
2025-06-01 18:32:03,181 - INFO - Calling SimulationManager instance stop method...
2025-06-01 18:32:03,181 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:32:03,181 - INFO - Simulation is not running. No action needed.
2025-06-01 18:32:03,181 - INFO - Shutting down WebSocketManager...
2025-06-01 18:32:03,181 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 18:32:03,181 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:32:03,182 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:32:03,182 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 18:32:03,182 - INFO - Application shutdown complete.
2025-06-01 18:32:03,182 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:32:03,182 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:51:00,714 - INFO - Application startup event triggered.
2025-06-01 18:51:00,714 - INFO - Initializing all queues...
2025-06-01 18:51:00,714 - INFO - All queues initialized on loop 106495520
2025-06-01 18:51:00,714 - INFO - Shared queues initialized.
2025-06-01 18:51:00,714 - INFO - Retrieved queue instances. Event loop ID: 106495520
2025-06-01 18:51:00,714 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 18:51:00,714 - INFO - SimulationManager ready state changed from False to True
2025-06-01 18:51:00,714 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 18:51:00,714 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 18:51:00,714 - INFO - Starting MessageProcessor task.
2025-06-01 18:51:00,714 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 18:51:00,714 - INFO - MessageProcessor task started.
2025-06-01 18:51:00,714 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 18:51:00,715 - INFO - QueueForwarder queues already initialized
2025-06-01 18:51:00,715 - INFO - QueueForwarder task started.
2025-06-01 18:51:00,715 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 18:51:00,715 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 18:51:00,715 - INFO - MessageProcessor main loop started.
2025-06-01 18:51:00,715 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:51:00,715 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 18:51:00,715 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:51:02,492 - INFO - Attempting to handle connection for 127.0.0.1:43230 (ID: client_1748796662480t8nk5o)
2025-06-01 18:51:02,493 - INFO - WebSocket connection accepted for 127.0.0.1:43230 (ID: client_1748796662480t8nk5o)
2025-06-01 18:51:02,493 - INFO - Adding connection: 127.0.0.1:43230. Total connections: 1
2025-06-01 18:51:02,494 - INFO - [127.0.0.1:43230] Sent connection_ack.
2025-06-01 18:51:02,494 - INFO - Sender task started for 127.0.0.1:43230
2025-06-01 18:51:02,495 - INFO - Starting receiver for 127.0.0.1:43230 with enhanced message tracing
2025-06-01 18:51:02,513 - INFO - [127.0.0.1:43230] [Receiver 1] Valid message type 'frontend_ready_ack' (ID: frontend-init-1748796662512) from 127.0.0.1:43230
2025-06-01 18:51:03,513 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:43230. Status: Frontend ready to receive
2025-06-01 18:51:05,013 - INFO - [127.0.0.1:43230] [Receiver 2] Valid message type 'ping' (ID: ping-1748796665012) from 127.0.0.1:43230
2025-06-01 18:51:05,715 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7f2525b8b6e0> (type: queue_status)
2025-06-01 18:51:05,716 - WARNING - Client <starlette.websockets.WebSocket object at 0x7f2525b8b6e0> not found in active connections for direct message. Message not sent.
2025-06-01 18:51:05,716 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7f2525b8b6e0>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': 'a4e2e75a-c946-4996-a6e1-feb4020b9bff', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748796665.7159004, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:51:05,717 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7f2525b8b6e0>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:51:06,014 - INFO - MessageProcessor: Received ping from 127.0.0.1:43230
2025-06-01 18:51:06,015 - INFO - Enqueued pong response for ping from 127.0.0.1:43230
2025-06-01 18:51:06,015 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:51:06,025 - INFO - Attempting to send direct message to client: 127.0.0.1:43230 (type: pong)
2025-06-01 18:51:06,026 - INFO - [127.0.0.1:43230] Successfully sent direct message (type: pong, ID: 815718ea-5a0b-431e-91a3-d743a55c2ecb).
2025-06-01 18:51:06,026 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 1, Input Q (to_frontend): 0
2025-06-01 18:51:06,717 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7f2525b8b6e0> (type: queue_status)
2025-06-01 18:51:06,718 - WARNING - Client <starlette.websockets.WebSocket object at 0x7f2525b8b6e0> not found in active connections for direct message. Message not sent.
2025-06-01 18:51:06,718 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7f2525b8b6e0>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '866537aa-0fe1-46a3-8695-9c6befd84364', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748796666.7178652, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:51:06,719 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7f2525b8b6e0>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:51:07,514 - INFO - [127.0.0.1:43230] [Receiver 3] Valid message type 'ping' (ID: ping-1748796667512) from 127.0.0.1:43230
2025-06-01 18:51:07,720 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7f2525b8b6e0> (type: queue_status)
2025-06-01 18:51:07,720 - WARNING - Client <starlette.websockets.WebSocket object at 0x7f2525b8b6e0> not found in active connections for direct message. Message not sent.
2025-06-01 18:51:07,720 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7f2525b8b6e0>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '55e3fe51-bd1e-46cc-ac5e-691676c61e10', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748796667.7200851, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:51:07,721 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7f2525b8b6e0>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:51:08,515 - INFO - MessageProcessor: Received ping from 127.0.0.1:43230
2025-06-01 18:51:08,515 - INFO - Enqueued pong response for ping from 127.0.0.1:43230
2025-06-01 18:51:08,525 - INFO - Attempting to send direct message to client: 127.0.0.1:43230 (type: pong)
2025-06-01 18:51:08,526 - INFO - [127.0.0.1:43230] Successfully sent direct message (type: pong, ID: 6465f312-10ad-43b5-a7f8-89d8acdcdc2c).
2025-06-01 18:51:08,721 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7f2525b8b6e0> (type: queue_status)
2025-06-01 18:51:08,721 - WARNING - Client <starlette.websockets.WebSocket object at 0x7f2525b8b6e0> not found in active connections for direct message. Message not sent.
2025-06-01 18:51:08,721 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7f2525b8b6e0>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '645d3667-4f4b-4b0c-a06c-04273be5236b', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748796668.7210984, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:51:08,721 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7f2525b8b6e0>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:51:09,721 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7f2525b8b6e0> (type: queue_status)
2025-06-01 18:51:09,721 - WARNING - Client <starlette.websockets.WebSocket object at 0x7f2525b8b6e0> not found in active connections for direct message. Message not sent.
2025-06-01 18:51:09,721 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7f2525b8b6e0>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '05317105-8dda-42e8-934f-fe3e31bf415c', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748796669.7212882, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 358, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:51:09,722 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7f2525b8b6e0>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:51:09,838 - INFO - [127.0.0.1:43230] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 18:51:09,838 - INFO - [127.0.0.1:43230] Receiver task finished. Processed 3 messages.
2025-06-01 18:51:09,839 - INFO - Cancelling pending task sender_127.0.0.1:43230 for 127.0.0.1:43230.
2025-06-01 18:51:09,839 - INFO - [127.0.0.1:43230] Sender task was cancelled normally.
2025-06-01 18:51:09,839 - INFO - [127.0.0.1:43230] Sender task finished.
2025-06-01 18:51:09,839 - INFO - Finalizing connection handling for 127.0.0.1:43230. Ensuring cleanup.
2025-06-01 18:51:09,839 - INFO - Starting cleanup for 127.0.0.1:43230
2025-06-01 18:51:09,839 - INFO - Connection cleanup completed for 127.0.0.1:43230. Remaining active connections: 0
2025-06-01 18:51:09,839 - INFO - Connection handling for 127.0.0.1:43230 finished.
2025-06-01 18:51:09,839 - INFO - Cleanup finished for client_1748796662480t8nk5o at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 18:51:09,939 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:51:09,939 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:51:09,939 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 18:51:09,939 - INFO - MessageProcessor main loop stopped.
2025-06-01 18:51:09,939 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:51:09,940 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:51:09,940 - INFO - Application shutdown event triggered.
2025-06-01 18:51:09,940 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:51:09,940 - INFO - Simulation is not running. No action needed.
2025-06-01 18:51:09,940 - INFO - SimulationManager stop method called.
2025-06-01 18:51:09,940 - INFO - Stopping MessageProcessor...
2025-06-01 18:51:09,940 - INFO - MessageProcessor shutdown complete.
2025-06-01 18:51:09,940 - INFO - Stopping QueueForwarder...
2025-06-01 18:51:09,940 - INFO - QueueForwarder task cancelled.
2025-06-01 18:51:09,940 - INFO - QueueForwarder stopped
2025-06-01 18:51:09,941 - INFO - Calling SimulationManager instance stop method...
2025-06-01 18:51:09,941 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:51:09,941 - INFO - Simulation is not running. No action needed.
2025-06-01 18:51:09,941 - INFO - Shutting down WebSocketManager...
2025-06-01 18:51:09,941 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 18:51:09,941 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:51:09,941 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:51:09,941 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 18:51:09,941 - INFO - Application shutdown complete.
2025-06-01 18:54:56,978 - INFO - Application startup event triggered.
2025-06-01 18:54:56,978 - INFO - Initializing all queues...
2025-06-01 18:54:56,978 - INFO - All queues initialized on loop 1034272288
2025-06-01 18:54:56,978 - INFO - Shared queues initialized.
2025-06-01 18:54:56,978 - INFO - Retrieved queue instances. Event loop ID: 1034272288
2025-06-01 18:54:56,978 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 18:54:56,978 - INFO - SimulationManager ready state changed from False to True
2025-06-01 18:54:56,978 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 18:54:56,979 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 18:54:56,979 - INFO - Starting MessageProcessor task.
2025-06-01 18:54:56,979 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 18:54:56,979 - INFO - MessageProcessor task started.
2025-06-01 18:54:56,979 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 18:54:56,979 - INFO - QueueForwarder queues already initialized
2025-06-01 18:54:56,979 - INFO - QueueForwarder task started.
2025-06-01 18:54:56,979 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 18:54:56,979 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 18:54:56,979 - INFO - MessageProcessor main loop started.
2025-06-01 18:54:56,979 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:54:56,979 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input=to_frontend (to WebSocket).
2025-06-01 18:54:56,979 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 18:54:58,678 - INFO - Attempting to handle connection for 127.0.0.1:56310 (ID: client_1748796898667le6ulq)
2025-06-01 18:54:58,679 - INFO - WebSocket connection accepted for 127.0.0.1:56310 (ID: client_1748796898667le6ulq)
2025-06-01 18:54:58,679 - INFO - Adding connection: 127.0.0.1:56310. Total connections: 1
2025-06-01 18:54:58,680 - INFO - [127.0.0.1:56310] Sent connection_ack.
2025-06-01 18:54:58,680 - INFO - Sender task started for 127.0.0.1:56310
2025-06-01 18:54:58,680 - INFO - Starting receiver for 127.0.0.1:56310 with enhanced message tracing
2025-06-01 18:54:58,697 - INFO - [127.0.0.1:56310] [Receiver 1] Valid message type 'frontend_ready_ack' (ID: frontend-init-1748796898696) from 127.0.0.1:56310
2025-06-01 18:54:59,698 - INFO - MessageProcessor: Frontend ready ACK received from 127.0.0.1:56310. Status: Frontend ready to receive
2025-06-01 18:55:01,197 - INFO - [127.0.0.1:56310] [Receiver 2] Valid message type 'ping' (ID: ping-1748796901197) from 127.0.0.1:56310
2025-06-01 18:55:01,979 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fa85007ef30> (type: queue_status)
2025-06-01 18:55:01,979 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fa85007ef30> not found in active connections for direct message. Message not sent.
2025-06-01 18:55:01,979 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fa85007ef30>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '387745d5-b0ac-4789-ac70-d32fac5da625', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748796901.979553, 'client_id
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 359, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:55:01,980 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fa85007ef30>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:55:02,198 - INFO - MessageProcessor: Received ping from 127.0.0.1:56310
2025-06-01 18:55:02,198 - INFO - Enqueued pong response for ping from 127.0.0.1:56310
2025-06-01 18:55:02,199 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 18:55:02,209 - INFO - Attempting to send direct message to client: 127.0.0.1:56310 (type: pong)
2025-06-01 18:55:02,209 - INFO - [127.0.0.1:56310] Successfully sent direct message (type: pong, ID: dda126de-c800-4dcb-adec-20ed50cab8d8).
2025-06-01 18:55:02,209 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 1, Input Q (to_frontend): 0
2025-06-01 18:55:02,980 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fa85007ef30> (type: queue_status)
2025-06-01 18:55:02,980 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fa85007ef30> not found in active connections for direct message. Message not sent.
2025-06-01 18:55:02,980 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fa85007ef30>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '09ac1f38-4700-4b4a-81fc-e53470b4178b', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748796902.9802408, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 359, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:55:02,981 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fa85007ef30>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:55:03,698 - INFO - [127.0.0.1:56310] [Receiver 3] Valid message type 'ping' (ID: ping-1748796903697) from 127.0.0.1:56310
2025-06-01 18:55:03,982 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fa85007ef30> (type: queue_status)
2025-06-01 18:55:03,982 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fa85007ef30> not found in active connections for direct message. Message not sent.
2025-06-01 18:55:03,982 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fa85007ef30>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '35ac4030-2146-4556-9cc0-86e27f3d9c10', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748796903.9820032, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 359, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:55:03,982 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fa85007ef30>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:55:04,699 - INFO - MessageProcessor: Received ping from 127.0.0.1:56310
2025-06-01 18:55:04,699 - INFO - Enqueued pong response for ping from 127.0.0.1:56310
2025-06-01 18:55:04,709 - INFO - Attempting to send direct message to client: 127.0.0.1:56310 (type: pong)
2025-06-01 18:55:04,710 - INFO - [127.0.0.1:56310] Successfully sent direct message (type: pong, ID: ef77450e-d1a4-4040-a55d-57dbbd2a6375).
2025-06-01 18:55:04,983 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fa85007ef30> (type: queue_status)
2025-06-01 18:55:04,983 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fa85007ef30> not found in active connections for direct message. Message not sent.
2025-06-01 18:55:04,983 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fa85007ef30>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '2fa89061-dd40-4653-83d0-75b496184bcd', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748796904.9832225, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 359, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:55:04,983 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fa85007ef30>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:55:05,984 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fa85007ef30> (type: queue_status)
2025-06-01 18:55:05,984 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fa85007ef30> not found in active connections for direct message. Message not sent.
2025-06-01 18:55:05,984 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fa85007ef30>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': 'ad555326-83db-43de-ae66-3285dbc9c32b', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748796905.9841015, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 359, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:55:05,984 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fa85007ef30>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:55:06,198 - INFO - [127.0.0.1:56310] [Receiver 4] Valid message type 'ping' (ID: ping-1748796906197) from 127.0.0.1:56310
2025-06-01 18:55:06,985 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fa85007ef30> (type: queue_status)
2025-06-01 18:55:06,986 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fa85007ef30> not found in active connections for direct message. Message not sent.
2025-06-01 18:55:06,986 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fa85007ef30>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': 'd800ac8a-816b-415b-91fa-836103bb8645', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748796906.9859376, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 359, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:55:06,986 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fa85007ef30>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:55:07,198 - INFO - MessageProcessor: Received ping from 127.0.0.1:56310
2025-06-01 18:55:07,198 - INFO - Enqueued pong response for ping from 127.0.0.1:56310
2025-06-01 18:55:07,209 - INFO - Attempting to send direct message to client: 127.0.0.1:56310 (type: pong)
2025-06-01 18:55:07,209 - INFO - [127.0.0.1:56310] Successfully sent direct message (type: pong, ID: 770d0814-ba38-4565-a360-ee9a9d6d1110).
2025-06-01 18:55:07,987 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fa85007ef30> (type: queue_status)
2025-06-01 18:55:07,988 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fa85007ef30> not found in active connections for direct message. Message not sent.
2025-06-01 18:55:07,988 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fa85007ef30>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': 'f6e1c08f-9561-41a5-957a-dd736e6ad31f', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748796907.9878802, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 359, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:55:07,988 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fa85007ef30>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:55:08,699 - INFO - [127.0.0.1:56310] [Receiver 5] Valid message type 'ping' (ID: ping-1748796908697) from 127.0.0.1:56310
2025-06-01 18:55:08,989 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fa85007ef30> (type: queue_status)
2025-06-01 18:55:08,989 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fa85007ef30> not found in active connections for direct message. Message not sent.
2025-06-01 18:55:08,990 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fa85007ef30>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': '620dea4a-8fa0-42f6-8a4d-9fd64c99ffd8', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748796908.9895318, 'client_i
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 359, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:55:08,990 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fa85007ef30>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:55:09,699 - INFO - MessageProcessor: Received ping from 127.0.0.1:56310
2025-06-01 18:55:09,700 - INFO - Enqueued pong response for ping from 127.0.0.1:56310
2025-06-01 18:55:09,700 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 18:55:09,710 - INFO - Attempting to send direct message to client: 127.0.0.1:56310 (type: pong)
2025-06-01 18:55:09,711 - INFO - [127.0.0.1:56310] Successfully sent direct message (type: pong, ID: 919e074c-b0f3-4b00-ad6e-b63d7dd215b1).
2025-06-01 18:55:09,711 - INFO - QueueForwarder WebSocketResponseForwarder stats - Forwarded: 3, Input Q (to_frontend): 0
2025-06-01 18:55:09,990 - INFO - Attempting to send direct message to client: <starlette.websockets.WebSocket object at 0x7fa85007ef30> (type: queue_status)
2025-06-01 18:55:09,990 - WARNING - Client <starlette.websockets.WebSocket object at 0x7fa85007ef30> not found in active connections for direct message. Message not sent.
2025-06-01 18:55:09,991 - CRITICAL - [<starlette.websockets.WebSocket object at 0x7fa85007ef30>] CRITICAL ERROR: Failed to enqueue to dead_letter_queue: Invalid message format for queue dead_letter. Original msg (type: <class 'dict'>): {'id': 'f93a24e6-5994-4496-b000-feee873de59e', 'type': 'queue_status', 'data': {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}, 'timestamp': 1748796909.990747, 'client_id
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/services/websocket_manager.py", line 359, in _send_to_dead_letter_queue
    await self.dead_letter_queue.enqueue(dlq_entry)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/queues/shared_queue.py", line 33, in enqueue
    raise ValueError(f"Invalid message format for queue {self._name}")
ValueError: Invalid message format for queue dead_letter
2025-06-01 18:55:09,991 - INFO - Sent queue_status to client <starlette.websockets.WebSocket object at 0x7fa85007ef30>: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 18:55:10,210 - INFO - [127.0.0.1:56310] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 18:55:10,210 - INFO - [127.0.0.1:56310] Receiver task finished. Processed 5 messages.
2025-06-01 18:55:10,210 - INFO - Cancelling pending task sender_127.0.0.1:56310 for 127.0.0.1:56310.
2025-06-01 18:55:10,210 - INFO - [127.0.0.1:56310] Sender task was cancelled normally.
2025-06-01 18:55:10,211 - INFO - [127.0.0.1:56310] Sender task finished.
2025-06-01 18:55:10,211 - INFO - Finalizing connection handling for 127.0.0.1:56310. Ensuring cleanup.
2025-06-01 18:55:10,211 - INFO - Starting cleanup for 127.0.0.1:56310
2025-06-01 18:55:10,211 - INFO - Connection cleanup completed for 127.0.0.1:56310. Remaining active connections: 0
2025-06-01 18:55:10,211 - INFO - Connection handling for 127.0.0.1:56310 finished.
2025-06-01 18:55:10,211 - INFO - Cleanup finished for client_1748796898667le6ulq at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 18:55:10,310 - INFO - Application shutdown event triggered.
2025-06-01 18:55:10,310 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:55:10,311 - INFO - Simulation is not running. No action needed.
2025-06-01 18:55:10,311 - INFO - SimulationManager stop method called.
2025-06-01 18:55:10,311 - INFO - Stopping MessageProcessor...
2025-06-01 18:55:10,311 - INFO - QueueForwarder task cancelled.
2025-06-01 18:55:10,311 - INFO - QueueForwarder stopped
2025-06-01 18:55:10,311 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:55:10,311 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:55:10,312 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 18:55:10,312 - INFO - MessageProcessor main loop stopped.
2025-06-01 18:55:10,312 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 18:55:10,312 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 18:55:10,312 - INFO - MessageProcessor shutdown complete.
2025-06-01 18:55:10,312 - INFO - Stopping QueueForwarder...
2025-06-01 18:55:10,312 - INFO - Calling SimulationManager instance stop method...
2025-06-01 18:55:10,312 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 18:55:10,312 - INFO - Simulation is not running. No action needed.
2025-06-01 18:55:10,312 - INFO - Shutting down WebSocketManager...
2025-06-01 18:55:10,313 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 18:55:10,313 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:55:10,313 - INFO - WebSocketManager shutdown complete.
2025-06-01 18:55:10,313 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 18:55:10,313 - INFO - Application shutdown complete.
2025-06-01 22:56:33,646 - INFO - Application startup event triggered.
2025-06-01 22:56:33,646 - INFO - Initializing all queues on event loop 1085144608...
2025-06-01 22:56:33,647 - INFO - All queues initialized: ['to_frontend', 'from_frontend', 'to_backend', 'from_backend', 'dead_letter']
2025-06-01 22:56:33,647 - INFO - Shared queues initialized.
2025-06-01 22:56:33,647 - INFO - Retrieved queue instances. Event loop ID: 1085144608
2025-06-01 22:56:33,647 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 22:56:33,647 - INFO - SimulationManager ready state changed from False to True
2025-06-01 22:56:33,647 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 22:56:33,647 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 22:56:33,647 - INFO - Starting MessageProcessor task.
2025-06-01 22:56:33,647 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 22:56:33,647 - INFO - MessageProcessor task started.
2025-06-01 22:56:33,648 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 22:56:33,648 - INFO - QueueForwarder queues already initialized
2025-06-01 22:56:33,648 - INFO - QueueForwarder task started.
2025-06-01 22:56:33,648 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 22:56:33,648 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 22:56:33,648 - INFO - MessageProcessor main loop started.
2025-06-01 22:56:33,648 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 22:56:33,648 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input='to_frontend' (to WebSocket).
2025-06-01 22:56:33,648 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 22:56:35,139 - INFO - Attempting to handle connection for 127.0.0.1:33470 (ID: client_1748811395117n87jgo)
2025-06-01 22:56:35,139 - INFO - WebSocket connection accepted for 127.0.0.1:33470 (ID: client_1748811395117n87jgo)
2025-06-01 22:56:35,139 - INFO - Adding connection: client_1748811395117n87jgo. Total connections: 1
2025-06-01 22:56:35,141 - INFO - Sender task started for client client_1748811395117n87jgo
2025-06-01 22:56:35,141 - INFO - Starting receiver for client client_1748811395117n87jgo with enhanced message tracing
2025-06-01 22:56:35,184 - ERROR - Validation error during single message processing for message frontend-init-1748811395171: 1 validation error for WebSocketMessage
type
  Field required [type=missing, input_value={'message': 'Frontend rea...nt_1748811395117n87jgo'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 165, in _process_single_message
    msg = WebSocketMessage.model_validate(message.data)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for WebSocketMessage
type
  Field required [type=missing, input_value={'message': 'Frontend rea...nt_1748811395117n87jgo'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 22:56:35,186 - ERROR - Error during MessageProcessor main loop: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811395117n87jgo'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811395117n87jgo'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 87, in _process_messages
    await self._process_single_message(message)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 357, in _process_single_message
    await self.safe_enqueue(self._dead_letter_queue, DeadLetterMessage(
                                                     ^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/models/message_types.py", line 77, in __init__
    super().__init__(
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811395117n87jgo'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811395117n87jgo'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 22:56:38,650 - ERROR - Error in send_queue_status_to_frontend task: 'MessageQueue' object has no attribute 'size'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/backend.py", line 101, in send_queue_status_to_frontend
    from_frontend_q_size = from_frontend_q.size() if from_frontend_q else 0
                           ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'MessageQueue' object has no attribute 'size'. Did you mean: 'qsize'?
2025-06-01 22:56:39,652 - ERROR - Error in send_queue_status_to_frontend task: 'MessageQueue' object has no attribute 'size'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/backend.py", line 101, in send_queue_status_to_frontend
    from_frontend_q_size = from_frontend_q.size() if from_frontend_q else 0
                           ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'MessageQueue' object has no attribute 'size'. Did you mean: 'qsize'?
2025-06-01 22:56:40,653 - ERROR - Error in send_queue_status_to_frontend task: 'MessageQueue' object has no attribute 'size'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/backend.py", line 101, in send_queue_status_to_frontend
    from_frontend_q_size = from_frontend_q.size() if from_frontend_q else 0
                           ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'MessageQueue' object has no attribute 'size'. Did you mean: 'qsize'?
2025-06-01 22:56:41,655 - ERROR - Error in send_queue_status_to_frontend task: 'MessageQueue' object has no attribute 'size'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/backend.py", line 101, in send_queue_status_to_frontend
    from_frontend_q_size = from_frontend_q.size() if from_frontend_q else 0
                           ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'MessageQueue' object has no attribute 'size'. Did you mean: 'qsize'?
2025-06-01 22:56:42,584 - INFO - [client_1748811395117n87jgo] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 22:56:42,584 - INFO - [client_1748811395117n87jgo] Receiver task finished.
2025-06-01 22:56:42,585 - INFO - Cancelling pending task sender_client_1748811395117n87jgo for client_1748811395117n87jgo.
2025-06-01 22:56:42,585 - INFO - [client_1748811395117n87jgo] Sender task was cancelled normally.
2025-06-01 22:56:42,585 - INFO - [client_1748811395117n87jgo] Sender task finished.
2025-06-01 22:56:42,585 - INFO - Finalizing connection handling for 127.0.0.1:33470. Ensuring cleanup.
2025-06-01 22:56:42,585 - INFO - Removed connection for client client_1748811395117n87jgo. Total connections: 0
2025-06-01 22:56:42,585 - INFO - Connection handling for 127.0.0.1:33470 finished.
2025-06-01 22:56:42,585 - INFO - Cleanup finished for client_1748811395117n87jgo at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 22:56:42,657 - ERROR - Error in send_queue_status_to_frontend task: 'MessageQueue' object has no attribute 'size'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/backend.py", line 101, in send_queue_status_to_frontend
    from_frontend_q_size = from_frontend_q.size() if from_frontend_q else 0
                           ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'MessageQueue' object has no attribute 'size'. Did you mean: 'qsize'?
2025-06-01 22:56:42,685 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 22:56:42,685 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 22:56:42,686 - INFO - Application shutdown event triggered.
2025-06-01 22:56:42,686 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 22:56:42,686 - INFO - Simulation is not running. No action needed.
2025-06-01 22:56:42,686 - INFO - SimulationManager stop method called.
2025-06-01 22:56:42,686 - INFO - Stopping MessageProcessor...
2025-06-01 22:56:42,686 - ERROR - Error stopping MessageProcessor: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811395117n87jgo'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811395117n87jgo'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/.local/lib/python3.12/site-packages/fastapi/routing.py", line 136, in merged_lifespan
    yield None  # old ASGI compatibility
    ^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 139, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/backend.py", line 230, in shutdown_event
    await message_processor_instance.stop()
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 405, in stop
    await self._processing_task
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 103, in _process_messages
    await self.safe_enqueue(self._dead_letter_queue, DeadLetterMessage( # Instantiate DeadLetterMessage
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/models/message_types.py", line 77, in __init__
    super().__init__(
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811395117n87jgo'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811395117n87jgo'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 22:56:42,690 - INFO - Stopping QueueForwarder...
2025-06-01 22:56:42,690 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 22:56:42,690 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 22:56:42,691 - INFO - QueueForwarder task cancelled.
2025-06-01 22:56:42,691 - INFO - QueueForwarder stopped
2025-06-01 22:56:42,691 - INFO - Calling SimulationManager instance stop method...
2025-06-01 22:56:42,691 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 22:56:42,691 - INFO - Simulation is not running. No action needed.
2025-06-01 22:56:42,691 - INFO - Shutting down WebSocketManager...
2025-06-01 22:56:42,691 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 22:56:42,691 - INFO - WebSocketManager shutdown complete.
2025-06-01 22:56:42,692 - INFO - WebSocketManager shutdown complete.
2025-06-01 22:56:42,692 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 22:56:42,692 - INFO - Application shutdown complete.
2025-06-01 23:00:55,983 - INFO - Application startup event triggered.
2025-06-01 23:00:55,983 - INFO - Initializing all queues on event loop 390446624...
2025-06-01 23:00:55,983 - INFO - All queues initialized: ['to_frontend', 'from_frontend', 'to_backend', 'from_backend', 'dead_letter']
2025-06-01 23:00:55,983 - INFO - Shared queues initialized.
2025-06-01 23:00:55,984 - INFO - Retrieved queue instances. Event loop ID: 390446624
2025-06-01 23:00:55,984 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 23:00:55,984 - INFO - SimulationManager ready state changed from False to True
2025-06-01 23:00:55,984 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 23:00:55,984 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 23:00:55,984 - INFO - Starting MessageProcessor task.
2025-06-01 23:00:55,985 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 23:00:55,985 - INFO - MessageProcessor task started.
2025-06-01 23:00:55,985 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 23:00:55,985 - INFO - QueueForwarder queues already initialized
2025-06-01 23:00:55,985 - INFO - QueueForwarder task started.
2025-06-01 23:00:55,985 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 23:00:55,985 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 23:00:55,986 - INFO - MessageProcessor main loop started.
2025-06-01 23:00:55,986 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:00:55,986 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input='to_frontend' (to WebSocket).
2025-06-01 23:00:55,986 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:00:57,487 - INFO - Attempting to handle connection for 127.0.0.1:46874 (ID: client_1748811657467anf2vh)
2025-06-01 23:00:57,487 - INFO - WebSocket connection accepted for 127.0.0.1:46874 (ID: client_1748811657467anf2vh)
2025-06-01 23:00:57,487 - INFO - Adding connection: client_1748811657467anf2vh. Total connections: 1
2025-06-01 23:00:57,489 - INFO - Sender task started for client client_1748811657467anf2vh
2025-06-01 23:00:57,489 - INFO - Starting receiver for client client_1748811657467anf2vh with enhanced message tracing
2025-06-01 23:00:57,530 - ERROR - Critical error during single message processing for message frontend-init-1748811657518: 'QueueMessage' object has no attribute 'payload'
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 165, in _process_single_message
    msg = WebSocketMessage.model_validate(message.payload)
                                          ^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'QueueMessage' object has no attribute 'payload'
2025-06-01 23:00:57,533 - ERROR - Error during MessageProcessor main loop: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811657467anf2vh'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811657467anf2vh'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 87, in _process_messages
    await self._process_single_message(message)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 369, in _process_single_message
    await self.safe_enqueue(self._dead_letter_queue, DeadLetterMessage(
                                                     ^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/models/message_types.py", line 77, in __init__
    super().__init__(
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811657467anf2vh'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811657467anf2vh'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:01:00,986 - INFO - Attempting to send direct message to client: client_1748811657467anf2vh (type: queue_status)
2025-06-01 23:01:00,987 - INFO - [client_1748811657467anf2vh] Successfully sent direct message (type: queue_status, ID: 5cbabac6-4380-4ecb-b46d-6511afaf900a).
2025-06-01 23:01:00,987 - INFO - Sent queue_status to client client_1748811657467anf2vh: {'from_frontend_q_size': 1, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:01:01,987 - INFO - Attempting to send direct message to client: client_1748811657467anf2vh (type: queue_status)
2025-06-01 23:01:01,988 - INFO - [client_1748811657467anf2vh] Successfully sent direct message (type: queue_status, ID: 45092bd1-5434-48f0-a7c4-7aff4df12c10).
2025-06-01 23:01:01,988 - INFO - Sent queue_status to client client_1748811657467anf2vh: {'from_frontend_q_size': 1, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:01:02,988 - INFO - Attempting to send direct message to client: client_1748811657467anf2vh (type: queue_status)
2025-06-01 23:01:02,989 - INFO - [client_1748811657467anf2vh] Successfully sent direct message (type: queue_status, ID: a1c7cbbc-64f6-4ac2-90fd-1c64a98bc827).
2025-06-01 23:01:02,989 - INFO - Sent queue_status to client client_1748811657467anf2vh: {'from_frontend_q_size': 2, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:01:03,990 - INFO - Attempting to send direct message to client: client_1748811657467anf2vh (type: queue_status)
2025-06-01 23:01:03,991 - INFO - [client_1748811657467anf2vh] Successfully sent direct message (type: queue_status, ID: 7821049b-87f7-4709-b0d6-e947839cf482).
2025-06-01 23:01:03,991 - INFO - Sent queue_status to client client_1748811657467anf2vh: {'from_frontend_q_size': 2, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:01:04,014 - INFO - [client_1748811657467anf2vh] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 23:01:04,015 - INFO - [client_1748811657467anf2vh] Receiver task finished.
2025-06-01 23:01:04,015 - INFO - Cancelling pending task sender_client_1748811657467anf2vh for client_1748811657467anf2vh.
2025-06-01 23:01:04,015 - INFO - [client_1748811657467anf2vh] Sender task was cancelled normally.
2025-06-01 23:01:04,015 - INFO - [client_1748811657467anf2vh] Sender task finished.
2025-06-01 23:01:04,015 - INFO - Finalizing connection handling for 127.0.0.1:46874. Ensuring cleanup.
2025-06-01 23:01:04,015 - INFO - Removed connection for client client_1748811657467anf2vh. Total connections: 0
2025-06-01 23:01:04,015 - INFO - Connection handling for 127.0.0.1:46874 finished.
2025-06-01 23:01:04,015 - INFO - Cleanup finished for client_1748811657467anf2vh at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:01:04,114 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:01:04,115 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:01:04,115 - INFO - QueueForwarder task cancelled.
2025-06-01 23:01:04,115 - INFO - QueueForwarder stopped
2025-06-01 23:01:04,115 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:01:04,115 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:01:04,115 - INFO - Application shutdown event triggered.
2025-06-01 23:01:04,115 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:01:04,115 - INFO - Simulation is not running. No action needed.
2025-06-01 23:01:04,115 - INFO - SimulationManager stop method called.
2025-06-01 23:01:04,115 - INFO - Stopping MessageProcessor...
2025-06-01 23:01:04,116 - ERROR - Error stopping MessageProcessor: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811657467anf2vh'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811657467anf2vh'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/.local/lib/python3.12/site-packages/fastapi/routing.py", line 136, in merged_lifespan
    yield None  # old ASGI compatibility
    ^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 139, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/backend.py", line 230, in shutdown_event
    await message_processor_instance.stop()
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 405, in stop
    await self._processing_task
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 103, in _process_messages
    await self.safe_enqueue(self._dead_letter_queue, DeadLetterMessage( # Instantiate DeadLetterMessage
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/models/message_types.py", line 77, in __init__
    super().__init__(
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811657467anf2vh'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811657467anf2vh'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:01:04,118 - INFO - Stopping QueueForwarder...
2025-06-01 23:01:04,118 - INFO - Calling SimulationManager instance stop method...
2025-06-01 23:01:04,118 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:01:04,118 - INFO - Simulation is not running. No action needed.
2025-06-01 23:01:04,118 - INFO - Shutting down WebSocketManager...
2025-06-01 23:01:04,118 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 23:01:04,118 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:01:04,118 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:01:04,118 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 23:01:04,118 - INFO - Application shutdown complete.
2025-06-01 23:02:11,243 - INFO - Application startup event triggered.
2025-06-01 23:02:11,243 - INFO - Initializing all queues on event loop 406818336...
2025-06-01 23:02:11,244 - INFO - All queues initialized: ['to_frontend', 'from_frontend', 'to_backend', 'from_backend', 'dead_letter']
2025-06-01 23:02:11,244 - INFO - Shared queues initialized.
2025-06-01 23:02:11,244 - INFO - Retrieved queue instances. Event loop ID: 406818336
2025-06-01 23:02:11,244 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 23:02:11,244 - INFO - SimulationManager ready state changed from False to True
2025-06-01 23:02:11,244 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 23:02:11,244 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 23:02:11,244 - INFO - Starting MessageProcessor task.
2025-06-01 23:02:11,244 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 23:02:11,244 - INFO - MessageProcessor task started.
2025-06-01 23:02:11,245 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 23:02:11,245 - INFO - QueueForwarder queues already initialized
2025-06-01 23:02:11,245 - INFO - QueueForwarder task started.
2025-06-01 23:02:11,245 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 23:02:11,245 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 23:02:11,245 - INFO - MessageProcessor main loop started.
2025-06-01 23:02:11,245 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:02:11,245 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input='to_frontend' (to WebSocket).
2025-06-01 23:02:11,245 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:02:12,761 - INFO - Attempting to handle connection for 127.0.0.1:46180 (ID: client_1748811732737i951ar)
2025-06-01 23:02:12,762 - INFO - WebSocket connection accepted for 127.0.0.1:46180 (ID: client_1748811732737i951ar)
2025-06-01 23:02:12,762 - INFO - Adding connection: client_1748811732737i951ar. Total connections: 1
2025-06-01 23:02:12,764 - INFO - Sender task started for client client_1748811732737i951ar
2025-06-01 23:02:12,764 - INFO - Starting receiver for client client_1748811732737i951ar with enhanced message tracing
2025-06-01 23:02:12,812 - ERROR - Validation error during single message processing for message frontend-init-1748811732799: 1 validation error for WebSocketMessage
type
  Field required [type=missing, input_value={'message': 'Frontend rea...nt_1748811732737i951ar'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 165, in _process_single_message
    msg = WebSocketMessage.model_validate(message.data)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for WebSocketMessage
type
  Field required [type=missing, input_value={'message': 'Frontend rea...nt_1748811732737i951ar'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:02:12,814 - ERROR - Error during MessageProcessor main loop: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811732737i951ar'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811732737i951ar'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 87, in _process_messages
    await self._process_single_message(message)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 357, in _process_single_message
    await self.safe_enqueue(self._dead_letter_queue, DeadLetterMessage(
                                                     ^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/models/message_types.py", line 77, in __init__
    super().__init__(
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811732737i951ar'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811732737i951ar'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:02:16,245 - INFO - Attempting to send direct message to client: client_1748811732737i951ar (type: queue_status)
2025-06-01 23:02:16,246 - INFO - [client_1748811732737i951ar] Successfully sent direct message (type: queue_status, ID: 37aa190a-2228-463e-a911-fc5ed67d862e).
2025-06-01 23:02:16,246 - INFO - Sent queue_status to client client_1748811732737i951ar: {'from_frontend_q_size': 1, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:02:17,246 - INFO - Attempting to send direct message to client: client_1748811732737i951ar (type: queue_status)
2025-06-01 23:02:17,247 - INFO - [client_1748811732737i951ar] Successfully sent direct message (type: queue_status, ID: 4b21bb1f-e4a4-4039-b5d7-ac7711779129).
2025-06-01 23:02:17,247 - INFO - Sent queue_status to client client_1748811732737i951ar: {'from_frontend_q_size': 1, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:02:18,247 - INFO - Attempting to send direct message to client: client_1748811732737i951ar (type: queue_status)
2025-06-01 23:02:18,248 - INFO - [client_1748811732737i951ar] Successfully sent direct message (type: queue_status, ID: b3965da7-3d08-4ef6-ab29-e36be00498e1).
2025-06-01 23:02:18,248 - INFO - Sent queue_status to client client_1748811732737i951ar: {'from_frontend_q_size': 2, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:02:19,249 - INFO - Attempting to send direct message to client: client_1748811732737i951ar (type: queue_status)
2025-06-01 23:02:19,249 - INFO - [client_1748811732737i951ar] Successfully sent direct message (type: queue_status, ID: 5a63f7e6-db18-4d46-bc6d-41ed71edcf3f).
2025-06-01 23:02:19,250 - INFO - Sent queue_status to client client_1748811732737i951ar: {'from_frontend_q_size': 2, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:02:20,251 - INFO - Attempting to send direct message to client: client_1748811732737i951ar (type: queue_status)
2025-06-01 23:02:20,251 - INFO - [client_1748811732737i951ar] Successfully sent direct message (type: queue_status, ID: f1f8073d-ee4e-4de3-b43e-49da6492497c).
2025-06-01 23:02:20,251 - INFO - Sent queue_status to client client_1748811732737i951ar: {'from_frontend_q_size': 2, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:02:20,301 - INFO - [client_1748811732737i951ar] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 23:02:20,301 - INFO - [client_1748811732737i951ar] Receiver task finished.
2025-06-01 23:02:20,302 - INFO - Cancelling pending task sender_client_1748811732737i951ar for client_1748811732737i951ar.
2025-06-01 23:02:20,302 - INFO - [client_1748811732737i951ar] Sender task was cancelled normally.
2025-06-01 23:02:20,302 - INFO - [client_1748811732737i951ar] Sender task finished.
2025-06-01 23:02:20,302 - INFO - Finalizing connection handling for 127.0.0.1:46180. Ensuring cleanup.
2025-06-01 23:02:20,302 - INFO - Removed connection for client client_1748811732737i951ar. Total connections: 0
2025-06-01 23:02:20,303 - INFO - Connection handling for 127.0.0.1:46180 finished.
2025-06-01 23:02:20,303 - INFO - Cleanup finished for client_1748811732737i951ar at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:02:20,304 - INFO - Attempting to handle connection for 127.0.0.1:46184 (ID: client_1748811732737i951ar)
2025-06-01 23:02:20,304 - INFO - WebSocket connection accepted for 127.0.0.1:46184 (ID: client_1748811732737i951ar)
2025-06-01 23:02:20,304 - INFO - Adding connection: client_1748811732737i951ar. Total connections: 1
2025-06-01 23:02:20,305 - INFO - Sender task started for client client_1748811732737i951ar
2025-06-01 23:02:20,305 - INFO - Starting receiver for client client_1748811732737i951ar with enhanced message tracing
2025-06-01 23:02:21,252 - INFO - Attempting to send direct message to client: client_1748811732737i951ar (type: queue_status)
2025-06-01 23:02:21,253 - INFO - [client_1748811732737i951ar] Successfully sent direct message (type: queue_status, ID: 4fbf8e59-e34a-4161-b186-143b54c6fc95).
2025-06-01 23:02:21,253 - INFO - Sent queue_status to client client_1748811732737i951ar: {'from_frontend_q_size': 4, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:02:22,253 - INFO - Attempting to send direct message to client: client_1748811732737i951ar (type: queue_status)
2025-06-01 23:02:22,254 - INFO - [client_1748811732737i951ar] Successfully sent direct message (type: queue_status, ID: e9b1903a-ef4d-4d9e-92d7-5889bec24bdb).
2025-06-01 23:02:22,254 - INFO - Sent queue_status to client client_1748811732737i951ar: {'from_frontend_q_size': 4, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:02:23,255 - INFO - Attempting to send direct message to client: client_1748811732737i951ar (type: queue_status)
2025-06-01 23:02:23,256 - INFO - [client_1748811732737i951ar] Successfully sent direct message (type: queue_status, ID: f550ea6e-e21a-427a-a05a-bce807e1439f).
2025-06-01 23:02:23,256 - INFO - Sent queue_status to client client_1748811732737i951ar: {'from_frontend_q_size': 5, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:02:24,256 - INFO - Attempting to send direct message to client: client_1748811732737i951ar (type: queue_status)
2025-06-01 23:02:24,257 - INFO - [client_1748811732737i951ar] Successfully sent direct message (type: queue_status, ID: 2c8f1ffd-09f3-469f-b98f-59833aed1836).
2025-06-01 23:02:24,257 - INFO - Sent queue_status to client client_1748811732737i951ar: {'from_frontend_q_size': 5, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:02:25,257 - INFO - Attempting to send direct message to client: client_1748811732737i951ar (type: queue_status)
2025-06-01 23:02:25,257 - INFO - [client_1748811732737i951ar] Successfully sent direct message (type: queue_status, ID: ef19e003-738e-4426-b37a-79e7099bf92d).
2025-06-01 23:02:25,258 - INFO - Sent queue_status to client client_1748811732737i951ar: {'from_frontend_q_size': 5, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:02:26,258 - INFO - Attempting to send direct message to client: client_1748811732737i951ar (type: queue_status)
2025-06-01 23:02:26,259 - INFO - [client_1748811732737i951ar] Successfully sent direct message (type: queue_status, ID: 8824b1bf-9a32-44f2-ade8-d49ce32e97cc).
2025-06-01 23:02:26,259 - INFO - Sent queue_status to client client_1748811732737i951ar: {'from_frontend_q_size': 6, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:02:27,260 - INFO - Attempting to send direct message to client: client_1748811732737i951ar (type: queue_status)
2025-06-01 23:02:27,261 - INFO - [client_1748811732737i951ar] Successfully sent direct message (type: queue_status, ID: 18bae05a-790c-45df-a045-3da2b47c7519).
2025-06-01 23:02:27,261 - INFO - Sent queue_status to client client_1748811732737i951ar: {'from_frontend_q_size': 6, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:02:27,811 - INFO - [client_1748811732737i951ar] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 23:02:27,811 - INFO - [client_1748811732737i951ar] Receiver task finished.
2025-06-01 23:02:27,812 - INFO - Cancelling pending task sender_client_1748811732737i951ar for client_1748811732737i951ar.
2025-06-01 23:02:27,813 - INFO - Attempting to handle connection for 127.0.0.1:50208 (ID: client_1748811732737i951ar)
2025-06-01 23:02:27,816 - INFO - WebSocket connection accepted for 127.0.0.1:50208 (ID: client_1748811732737i951ar)
2025-06-01 23:02:27,816 - INFO - Adding connection: client_1748811732737i951ar. Total connections: 1
2025-06-01 23:02:27,816 - INFO - [client_1748811732737i951ar] Sender task was cancelled normally.
2025-06-01 23:02:27,816 - INFO - [client_1748811732737i951ar] Sender task finished.
2025-06-01 23:02:27,817 - INFO - Finalizing connection handling for 127.0.0.1:46184. Ensuring cleanup.
2025-06-01 23:02:27,817 - INFO - Removed connection for client client_1748811732737i951ar. Total connections: 0
2025-06-01 23:02:27,817 - INFO - Connection handling for 127.0.0.1:46184 finished.
2025-06-01 23:02:27,818 - INFO - Cleanup finished for client_1748811732737i951ar at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:02:27,818 - INFO - Sender task started for client client_1748811732737i951ar
2025-06-01 23:02:27,818 - INFO - Starting receiver for client client_1748811732737i951ar with enhanced message tracing
2025-06-01 23:02:32,427 - INFO - [client_1748811732737i951ar] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 23:02:32,427 - INFO - [client_1748811732737i951ar] Receiver task finished.
2025-06-01 23:02:32,427 - INFO - Cancelling pending task sender_client_1748811732737i951ar for client_1748811732737i951ar.
2025-06-01 23:02:32,428 - INFO - [client_1748811732737i951ar] Sender task was cancelled normally.
2025-06-01 23:02:32,428 - INFO - [client_1748811732737i951ar] Sender task finished.
2025-06-01 23:02:32,428 - INFO - Finalizing connection handling for 127.0.0.1:50208. Ensuring cleanup.
2025-06-01 23:02:32,428 - INFO - Connection handling for 127.0.0.1:50208 finished.
2025-06-01 23:02:32,428 - INFO - Cleanup finished for client_1748811732737i951ar at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:02:32,527 - INFO - Application shutdown event triggered.
2025-06-01 23:02:32,527 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:02:32,527 - INFO - Simulation is not running. No action needed.
2025-06-01 23:02:32,527 - INFO - SimulationManager stop method called.
2025-06-01 23:02:32,527 - INFO - Stopping MessageProcessor...
2025-06-01 23:02:32,528 - ERROR - Error stopping MessageProcessor: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811732737i951ar'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811732737i951ar'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/backend.py", line 230, in shutdown_event
    await message_processor_instance.stop()
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 405, in stop
    await self._processing_task
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 103, in _process_messages
    await self.safe_enqueue(self._dead_letter_queue, DeadLetterMessage( # Instantiate DeadLetterMessage
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/models/message_types.py", line 77, in __init__
    super().__init__(
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811732737i951ar'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748811732737i951ar'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:02:32,529 - INFO - Stopping QueueForwarder...
2025-06-01 23:02:32,529 - INFO - QueueForwarder task cancelled.
2025-06-01 23:02:32,529 - INFO - QueueForwarder stopped
2025-06-01 23:02:32,529 - INFO - Calling SimulationManager instance stop method...
2025-06-01 23:02:32,529 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:02:32,529 - INFO - Simulation is not running. No action needed.
2025-06-01 23:02:32,529 - INFO - Shutting down WebSocketManager...
2025-06-01 23:02:32,529 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 23:02:32,529 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:02:32,529 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:02:32,530 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 23:02:32,530 - INFO - Application shutdown complete.
2025-06-01 23:02:32,530 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:02:32,530 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:02:32,530 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:02:32,530 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:11:18,585 - INFO - Application startup event triggered.
2025-06-01 23:11:18,585 - INFO - Initializing all queues on event loop 266100256...
2025-06-01 23:11:18,586 - INFO - All queues initialized: ['to_frontend', 'from_frontend', 'to_backend', 'from_backend', 'dead_letter']
2025-06-01 23:11:18,586 - INFO - Shared queues initialized.
2025-06-01 23:11:18,586 - INFO - Retrieved queue instances. Event loop ID: 266100256
2025-06-01 23:11:18,586 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 23:11:18,586 - INFO - SimulationManager ready state changed from False to True
2025-06-01 23:11:18,586 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 23:11:18,587 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 23:11:18,587 - INFO - Starting MessageProcessor task.
2025-06-01 23:11:18,587 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 23:11:18,587 - INFO - MessageProcessor task started.
2025-06-01 23:11:18,587 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 23:11:18,587 - INFO - QueueForwarder queues already initialized
2025-06-01 23:11:18,587 - INFO - QueueForwarder task started.
2025-06-01 23:11:18,587 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 23:11:18,587 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 23:11:18,588 - INFO - MessageProcessor main loop started.
2025-06-01 23:11:18,588 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:11:18,588 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input='to_frontend' (to WebSocket).
2025-06-01 23:11:18,588 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:11:20,119 - INFO - Attempting to handle connection for 127.0.0.1:39922 (ID: client_17488122800935i7anb)
2025-06-01 23:11:20,120 - INFO - WebSocket connection accepted for 127.0.0.1:39922 (ID: client_17488122800935i7anb)
2025-06-01 23:11:20,120 - INFO - Adding connection: client_17488122800935i7anb. Total connections: 1
2025-06-01 23:11:20,122 - INFO - Sender task started for client client_17488122800935i7anb
2025-06-01 23:11:20,122 - INFO - Starting receiver for client client_17488122800935i7anb with enhanced message tracing
2025-06-01 23:11:20,158 - ERROR - Validation error during single message processing for message unknown: 1 validation error for WebSocketMessage
type
  Field required [type=missing, input_value={'message': 'Frontend rea...nt_17488122800935i7anb'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:11:20,159 - ERROR - Error during MessageProcessor main loop: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 87, in _process_messages
    await self._process_single_message(message)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 196, in _process_single_message
    await self.safe_enqueue(self._dead_letter_queue, DeadLetterMessage(
                                                     ^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/models/message_types.py", line 77, in __init__
    super().__init__(
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:11:23,590 - INFO - Attempting to send direct message to client: client_17488122800935i7anb (type: queue_status)
2025-06-01 23:11:23,591 - INFO - [client_17488122800935i7anb] Successfully sent direct message (type: queue_status, ID: a6a9a5d5-c23e-4446-a759-aa67cde8a9f2).
2025-06-01 23:11:23,591 - INFO - Sent queue_status to client client_17488122800935i7anb: {'from_frontend_q_size': 1, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:11:24,591 - INFO - Attempting to send direct message to client: client_17488122800935i7anb (type: queue_status)
2025-06-01 23:11:24,592 - INFO - [client_17488122800935i7anb] Successfully sent direct message (type: queue_status, ID: fa676a5e-25f8-420e-beb4-56ce7e2800c0).
2025-06-01 23:11:24,592 - INFO - Sent queue_status to client client_17488122800935i7anb: {'from_frontend_q_size': 1, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:11:25,594 - INFO - Attempting to send direct message to client: client_17488122800935i7anb (type: queue_status)
2025-06-01 23:11:25,594 - INFO - [client_17488122800935i7anb] Successfully sent direct message (type: queue_status, ID: 4d27be29-128e-41af-9272-d908c2c64175).
2025-06-01 23:11:25,595 - INFO - Sent queue_status to client client_17488122800935i7anb: {'from_frontend_q_size': 2, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:11:26,595 - INFO - Attempting to send direct message to client: client_17488122800935i7anb (type: queue_status)
2025-06-01 23:11:26,596 - INFO - [client_17488122800935i7anb] Successfully sent direct message (type: queue_status, ID: 0eb796f9-a66c-4622-b638-293836c3a64f).
2025-06-01 23:11:26,596 - INFO - Sent queue_status to client client_17488122800935i7anb: {'from_frontend_q_size': 2, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:11:27,596 - INFO - Attempting to send direct message to client: client_17488122800935i7anb (type: queue_status)
2025-06-01 23:11:27,597 - INFO - [client_17488122800935i7anb] Successfully sent direct message (type: queue_status, ID: d4bb8d35-f8c4-4f14-bfe1-c0767b0ab736).
2025-06-01 23:11:27,598 - INFO - Sent queue_status to client client_17488122800935i7anb: {'from_frontend_q_size': 2, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:11:27,659 - INFO - [client_17488122800935i7anb] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 23:11:27,659 - INFO - [client_17488122800935i7anb] Receiver task finished.
2025-06-01 23:11:27,660 - INFO - Cancelling pending task sender_client_17488122800935i7anb for client_17488122800935i7anb.
2025-06-01 23:11:27,660 - INFO - [client_17488122800935i7anb] Sender task was cancelled normally.
2025-06-01 23:11:27,660 - INFO - [client_17488122800935i7anb] Sender task finished.
2025-06-01 23:11:27,660 - INFO - Finalizing connection handling for 127.0.0.1:39922. Ensuring cleanup.
2025-06-01 23:11:27,660 - INFO - Removed connection for client client_17488122800935i7anb. Total connections: 0
2025-06-01 23:11:27,660 - INFO - Connection handling for 127.0.0.1:39922 finished.
2025-06-01 23:11:27,661 - INFO - Cleanup finished for client_17488122800935i7anb at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:11:27,662 - INFO - Attempting to handle connection for 127.0.0.1:51464 (ID: client_17488122800935i7anb)
2025-06-01 23:11:27,662 - INFO - WebSocket connection accepted for 127.0.0.1:51464 (ID: client_17488122800935i7anb)
2025-06-01 23:11:27,662 - INFO - Adding connection: client_17488122800935i7anb. Total connections: 1
2025-06-01 23:11:27,663 - INFO - Sender task started for client client_17488122800935i7anb
2025-06-01 23:11:27,663 - INFO - Starting receiver for client client_17488122800935i7anb with enhanced message tracing
2025-06-01 23:11:28,598 - INFO - Attempting to send direct message to client: client_17488122800935i7anb (type: queue_status)
2025-06-01 23:11:28,599 - INFO - [client_17488122800935i7anb] Successfully sent direct message (type: queue_status, ID: 026d0d92-890a-498c-b245-396e72c49a21).
2025-06-01 23:11:28,599 - INFO - Sent queue_status to client client_17488122800935i7anb: {'from_frontend_q_size': 4, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:11:29,600 - INFO - Attempting to send direct message to client: client_17488122800935i7anb (type: queue_status)
2025-06-01 23:11:29,601 - INFO - [client_17488122800935i7anb] Successfully sent direct message (type: queue_status, ID: 2e435069-b9ec-4745-979c-64de82c25732).
2025-06-01 23:11:29,601 - INFO - Sent queue_status to client client_17488122800935i7anb: {'from_frontend_q_size': 4, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:11:30,602 - INFO - Attempting to send direct message to client: client_17488122800935i7anb (type: queue_status)
2025-06-01 23:11:30,602 - INFO - [client_17488122800935i7anb] Successfully sent direct message (type: queue_status, ID: 56dc48cb-ccd6-4600-9774-855f26d9bdce).
2025-06-01 23:11:30,603 - INFO - Sent queue_status to client client_17488122800935i7anb: {'from_frontend_q_size': 5, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:11:31,603 - INFO - Attempting to send direct message to client: client_17488122800935i7anb (type: queue_status)
2025-06-01 23:11:31,604 - INFO - [client_17488122800935i7anb] Successfully sent direct message (type: queue_status, ID: 21f3b2ef-3a10-489f-bc05-3a9190fd13b2).
2025-06-01 23:11:31,604 - INFO - Sent queue_status to client client_17488122800935i7anb: {'from_frontend_q_size': 5, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:11:32,605 - INFO - Attempting to send direct message to client: client_17488122800935i7anb (type: queue_status)
2025-06-01 23:11:32,606 - INFO - [client_17488122800935i7anb] Successfully sent direct message (type: queue_status, ID: bbb99f8b-02cc-48ac-a8b4-a6981078ab16).
2025-06-01 23:11:32,606 - INFO - Sent queue_status to client client_17488122800935i7anb: {'from_frontend_q_size': 5, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:11:33,607 - INFO - Attempting to send direct message to client: client_17488122800935i7anb (type: queue_status)
2025-06-01 23:11:33,608 - INFO - [client_17488122800935i7anb] Successfully sent direct message (type: queue_status, ID: 33ff45d8-06dd-4253-b106-455f86882c14).
2025-06-01 23:11:33,608 - INFO - Sent queue_status to client client_17488122800935i7anb: {'from_frontend_q_size': 6, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:11:34,608 - INFO - Attempting to send direct message to client: client_17488122800935i7anb (type: queue_status)
2025-06-01 23:11:34,609 - INFO - [client_17488122800935i7anb] Successfully sent direct message (type: queue_status, ID: d7103f84-593b-4505-913f-e426f3ee4257).
2025-06-01 23:11:34,609 - INFO - Sent queue_status to client client_17488122800935i7anb: {'from_frontend_q_size': 6, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:11:35,169 - INFO - [client_17488122800935i7anb] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 23:11:35,169 - INFO - [client_17488122800935i7anb] Receiver task finished.
2025-06-01 23:11:35,170 - INFO - Cancelling pending task sender_client_17488122800935i7anb for client_17488122800935i7anb.
2025-06-01 23:11:35,171 - INFO - Attempting to handle connection for 127.0.0.1:45596 (ID: client_17488122800935i7anb)
2025-06-01 23:11:35,173 - INFO - WebSocket connection accepted for 127.0.0.1:45596 (ID: client_17488122800935i7anb)
2025-06-01 23:11:35,174 - INFO - Adding connection: client_17488122800935i7anb. Total connections: 1
2025-06-01 23:11:35,174 - INFO - [client_17488122800935i7anb] Sender task was cancelled normally.
2025-06-01 23:11:35,174 - INFO - [client_17488122800935i7anb] Sender task finished.
2025-06-01 23:11:35,174 - INFO - Finalizing connection handling for 127.0.0.1:51464. Ensuring cleanup.
2025-06-01 23:11:35,175 - INFO - Removed connection for client client_17488122800935i7anb. Total connections: 0
2025-06-01 23:11:35,175 - INFO - Connection handling for 127.0.0.1:51464 finished.
2025-06-01 23:11:35,175 - INFO - Cleanup finished for client_17488122800935i7anb at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:11:35,175 - INFO - Sender task started for client client_17488122800935i7anb
2025-06-01 23:11:35,175 - INFO - Starting receiver for client client_17488122800935i7anb with enhanced message tracing
2025-06-01 23:11:38,369 - INFO - [client_17488122800935i7anb] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 23:11:38,369 - INFO - [client_17488122800935i7anb] Receiver task finished.
2025-06-01 23:11:38,370 - INFO - Cancelling pending task sender_client_17488122800935i7anb for client_17488122800935i7anb.
2025-06-01 23:11:38,370 - INFO - [client_17488122800935i7anb] Sender task was cancelled normally.
2025-06-01 23:11:38,370 - INFO - [client_17488122800935i7anb] Sender task finished.
2025-06-01 23:11:38,370 - INFO - Finalizing connection handling for 127.0.0.1:45596. Ensuring cleanup.
2025-06-01 23:11:38,370 - INFO - Connection handling for 127.0.0.1:45596 finished.
2025-06-01 23:11:38,371 - INFO - Cleanup finished for client_17488122800935i7anb at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:11:38,470 - INFO - Application shutdown event triggered.
2025-06-01 23:11:38,470 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:11:38,470 - INFO - Simulation is not running. No action needed.
2025-06-01 23:11:38,470 - INFO - SimulationManager stop method called.
2025-06-01 23:11:38,470 - INFO - Stopping MessageProcessor...
2025-06-01 23:11:38,470 - ERROR - Error stopping MessageProcessor: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_17488122800935i7anb'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_17488122800935i7anb'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/backend.py", line 230, in shutdown_event
    await message_processor_instance.stop()
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 244, in stop
    await self._processing_task
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 103, in _process_messages
    await self.safe_enqueue(self._dead_letter_queue, DeadLetterMessage( # Instantiate DeadLetterMessage
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/models/message_types.py", line 77, in __init__
    super().__init__(
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_17488122800935i7anb'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_17488122800935i7anb'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:11:38,472 - INFO - Stopping QueueForwarder...
2025-06-01 23:11:38,472 - INFO - QueueForwarder task cancelled.
2025-06-01 23:11:38,472 - INFO - QueueForwarder stopped
2025-06-01 23:11:38,472 - INFO - Calling SimulationManager instance stop method...
2025-06-01 23:11:38,472 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:11:38,472 - INFO - Simulation is not running. No action needed.
2025-06-01 23:11:38,472 - INFO - Shutting down WebSocketManager...
2025-06-01 23:11:38,472 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 23:11:38,472 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:11:38,472 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:11:38,472 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 23:11:38,472 - INFO - Application shutdown complete.
2025-06-01 23:11:38,473 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:11:38,473 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:11:38,473 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:11:38,473 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:16:17,849 - INFO - Application startup event triggered.
2025-06-01 23:16:17,849 - INFO - Initializing all queues on event loop 159174176...
2025-06-01 23:16:17,849 - INFO - All queues initialized: ['to_frontend', 'from_frontend', 'to_backend', 'from_backend', 'dead_letter']
2025-06-01 23:16:17,850 - INFO - Shared queues initialized.
2025-06-01 23:16:17,850 - INFO - Retrieved queue instances. Event loop ID: 159174176
2025-06-01 23:16:17,850 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 23:16:17,850 - INFO - SimulationManager ready state changed from False to True
2025-06-01 23:16:17,850 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 23:16:17,850 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 23:16:17,851 - INFO - Starting MessageProcessor task.
2025-06-01 23:16:17,851 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 23:16:17,851 - INFO - MessageProcessor task started.
2025-06-01 23:16:17,851 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 23:16:17,851 - INFO - QueueForwarder queues already initialized
2025-06-01 23:16:17,851 - INFO - QueueForwarder task started.
2025-06-01 23:16:17,851 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 23:16:17,851 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 23:16:17,851 - INFO - MessageProcessor main loop started.
2025-06-01 23:16:17,851 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:16:17,852 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input='to_frontend' (to WebSocket).
2025-06-01 23:16:17,852 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:16:19,392 - INFO - Attempting to handle connection for 127.0.0.1:35756 (ID: client_17488125793684yemyk)
2025-06-01 23:16:19,392 - INFO - WebSocket connection accepted for 127.0.0.1:35756 (ID: client_17488125793684yemyk)
2025-06-01 23:16:19,393 - INFO - Adding connection: client_17488125793684yemyk. Total connections: 1
2025-06-01 23:16:19,394 - INFO - Sender task started for client client_17488125793684yemyk
2025-06-01 23:16:19,395 - INFO - Starting receiver for client client_17488125793684yemyk with enhanced message tracing
2025-06-01 23:16:19,429 - ERROR - Validation error during single message processing for message unknown: 1 validation error for WebSocketMessage
type
  Field required [type=missing, input_value={'message': 'Frontend rea...nt_17488125793684yemyk'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:16:19,430 - ERROR - Error during MessageProcessor main loop: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 87, in _process_messages
    await self._process_single_message(message)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 196, in _process_single_message
    await self.safe_enqueue(self._dead_letter_queue, DeadLetterMessage(
                                                     ^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/models/message_types.py", line 77, in __init__
    super().__init__(
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:16:22,852 - INFO - Attempting to send direct message to client: client_17488125793684yemyk (type: queue_status)
2025-06-01 23:16:22,852 - INFO - [client_17488125793684yemyk] Successfully sent direct message (type: queue_status, ID: b8f2156e-cd48-4eba-a99e-90e853c52ab2).
2025-06-01 23:16:22,853 - INFO - Sent queue_status to client client_17488125793684yemyk: {'from_frontend_q_size': 1, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:16:23,853 - INFO - Attempting to send direct message to client: client_17488125793684yemyk (type: queue_status)
2025-06-01 23:16:23,854 - INFO - [client_17488125793684yemyk] Successfully sent direct message (type: queue_status, ID: d9f206d8-dbda-4274-8fcf-7cd59d49eebd).
2025-06-01 23:16:23,854 - INFO - Sent queue_status to client client_17488125793684yemyk: {'from_frontend_q_size': 1, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:16:24,854 - INFO - Attempting to send direct message to client: client_17488125793684yemyk (type: queue_status)
2025-06-01 23:16:24,855 - INFO - [client_17488125793684yemyk] Successfully sent direct message (type: queue_status, ID: 40caa072-5cf8-4a0a-96ab-ef73d257bdc8).
2025-06-01 23:16:24,856 - INFO - Sent queue_status to client client_17488125793684yemyk: {'from_frontend_q_size': 2, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:16:25,685 - INFO - [client_17488125793684yemyk] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 23:16:25,685 - INFO - [client_17488125793684yemyk] Receiver task finished.
2025-06-01 23:16:25,685 - INFO - Cancelling pending task sender_client_17488125793684yemyk for client_17488125793684yemyk.
2025-06-01 23:16:25,685 - INFO - [client_17488125793684yemyk] Sender task was cancelled normally.
2025-06-01 23:16:25,686 - INFO - [client_17488125793684yemyk] Sender task finished.
2025-06-01 23:16:25,686 - INFO - Finalizing connection handling for 127.0.0.1:35756. Ensuring cleanup.
2025-06-01 23:16:25,686 - INFO - Removed connection for client client_17488125793684yemyk. Total connections: 0
2025-06-01 23:16:25,686 - INFO - Connection handling for 127.0.0.1:35756 finished.
2025-06-01 23:16:25,686 - INFO - Cleanup finished for client_17488125793684yemyk at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:16:25,786 - INFO - Application shutdown event triggered.
2025-06-01 23:16:25,786 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:16:25,786 - INFO - Simulation is not running. No action needed.
2025-06-01 23:16:25,786 - INFO - SimulationManager stop method called.
2025-06-01 23:16:25,786 - INFO - Stopping MessageProcessor...
2025-06-01 23:16:25,786 - ERROR - Error stopping MessageProcessor: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_17488125793684yemyk'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_17488125793684yemyk'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/backend.py", line 230, in shutdown_event
    await message_processor_instance.stop()
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 244, in stop
    await self._processing_task
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 103, in _process_messages
    await self.safe_enqueue(self._dead_letter_queue, DeadLetterMessage( # Instantiate DeadLetterMessage
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/models/message_types.py", line 77, in __init__
    super().__init__(
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_17488125793684yemyk'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_17488125793684yemyk'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:16:25,787 - INFO - Stopping QueueForwarder...
2025-06-01 23:16:25,788 - INFO - QueueForwarder task cancelled.
2025-06-01 23:16:25,788 - INFO - QueueForwarder stopped
2025-06-01 23:16:25,788 - INFO - Calling SimulationManager instance stop method...
2025-06-01 23:16:25,788 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:16:25,788 - INFO - Simulation is not running. No action needed.
2025-06-01 23:16:25,788 - INFO - Shutting down WebSocketManager...
2025-06-01 23:16:25,788 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 23:16:25,788 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:16:25,788 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:16:25,788 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 23:16:25,788 - INFO - Application shutdown complete.
2025-06-01 23:16:25,789 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:16:25,789 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:16:25,789 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:16:25,789 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:18:47,483 - INFO - Application startup event triggered.
2025-06-01 23:18:47,483 - INFO - Initializing all queues on event loop 67005984...
2025-06-01 23:18:47,483 - INFO - All queues initialized: ['to_frontend', 'from_frontend', 'to_backend', 'from_backend', 'dead_letter']
2025-06-01 23:18:47,483 - INFO - Shared queues initialized.
2025-06-01 23:18:47,483 - INFO - Retrieved queue instances. Event loop ID: 67005984
2025-06-01 23:18:47,484 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 23:18:47,484 - INFO - SimulationManager ready state changed from False to True
2025-06-01 23:18:47,484 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 23:18:47,484 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 23:18:47,484 - INFO - Starting MessageProcessor task.
2025-06-01 23:18:47,484 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 23:18:47,484 - INFO - MessageProcessor task started.
2025-06-01 23:18:47,484 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 23:18:47,484 - INFO - QueueForwarder queues already initialized
2025-06-01 23:18:47,484 - INFO - QueueForwarder task started.
2025-06-01 23:18:47,485 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 23:18:47,485 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 23:18:47,485 - INFO - MessageProcessor main loop started.
2025-06-01 23:18:47,485 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:18:47,485 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input='to_frontend' (to WebSocket).
2025-06-01 23:18:47,485 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:18:49,010 - INFO - Attempting to handle connection for 127.0.0.1:36670 (ID: client_1748812728989fdp2ki)
2025-06-01 23:18:49,011 - INFO - WebSocket connection accepted for 127.0.0.1:36670 (ID: client_1748812728989fdp2ki)
2025-06-01 23:18:49,011 - INFO - Adding connection: client_1748812728989fdp2ki. Total connections: 1
2025-06-01 23:18:49,013 - INFO - Sender task started for client client_1748812728989fdp2ki
2025-06-01 23:18:49,013 - INFO - Starting receiver for client client_1748812728989fdp2ki with enhanced message tracing
2025-06-01 23:18:49,050 - ERROR - Validation error during single message processing for message unknown: 1 validation error for WebSocketMessage
type
  Field required [type=missing, input_value={'message': 'Frontend rea...nt_1748812728989fdp2ki'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:18:49,050 - ERROR - Error during MessageProcessor main loop: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 87, in _process_messages
    await self._process_single_message(message)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 196, in _process_single_message
    await self.safe_enqueue(self._dead_letter_queue, DeadLetterMessage(
                                                     ^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/models/message_types.py", line 77, in __init__
    super().__init__(
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:18:52,486 - INFO - Attempting to send direct message to client: client_1748812728989fdp2ki (type: queue_status)
2025-06-01 23:18:52,487 - INFO - [client_1748812728989fdp2ki] Successfully sent direct message (type: queue_status, ID: 6c3fa298-8fca-4025-87a3-234fd36a404c).
2025-06-01 23:18:52,487 - INFO - Sent queue_status to client client_1748812728989fdp2ki: {'from_frontend_q_size': 1, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:18:53,488 - INFO - Attempting to send direct message to client: client_1748812728989fdp2ki (type: queue_status)
2025-06-01 23:18:53,489 - INFO - [client_1748812728989fdp2ki] Successfully sent direct message (type: queue_status, ID: afe2f655-95f6-4f61-97df-ff3a25cf8800).
2025-06-01 23:18:53,489 - INFO - Sent queue_status to client client_1748812728989fdp2ki: {'from_frontend_q_size': 1, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:18:54,489 - INFO - Attempting to send direct message to client: client_1748812728989fdp2ki (type: queue_status)
2025-06-01 23:18:54,490 - INFO - [client_1748812728989fdp2ki] Successfully sent direct message (type: queue_status, ID: dd5bed17-c600-481c-aac4-74f5a258aead).
2025-06-01 23:18:54,490 - INFO - Sent queue_status to client client_1748812728989fdp2ki: {'from_frontend_q_size': 2, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:18:55,491 - INFO - Attempting to send direct message to client: client_1748812728989fdp2ki (type: queue_status)
2025-06-01 23:18:55,492 - INFO - [client_1748812728989fdp2ki] Successfully sent direct message (type: queue_status, ID: 4b8a37f9-3ace-4d9e-b76a-7bc1e851eb5d).
2025-06-01 23:18:55,492 - INFO - Sent queue_status to client client_1748812728989fdp2ki: {'from_frontend_q_size': 2, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:18:56,493 - INFO - Attempting to send direct message to client: client_1748812728989fdp2ki (type: queue_status)
2025-06-01 23:18:56,493 - INFO - [client_1748812728989fdp2ki] Successfully sent direct message (type: queue_status, ID: 044fcaee-4b88-4a0c-aec3-dec7c1006b33).
2025-06-01 23:18:56,493 - INFO - Sent queue_status to client client_1748812728989fdp2ki: {'from_frontend_q_size': 2, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:18:56,550 - INFO - [client_1748812728989fdp2ki] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 23:18:56,551 - INFO - [client_1748812728989fdp2ki] Receiver task finished.
2025-06-01 23:18:56,552 - INFO - Cancelling pending task sender_client_1748812728989fdp2ki for client_1748812728989fdp2ki.
2025-06-01 23:18:56,552 - INFO - Attempting to handle connection for 127.0.0.1:55194 (ID: client_1748812728989fdp2ki)
2025-06-01 23:18:56,553 - INFO - WebSocket connection accepted for 127.0.0.1:55194 (ID: client_1748812728989fdp2ki)
2025-06-01 23:18:56,553 - INFO - Adding connection: client_1748812728989fdp2ki. Total connections: 1
2025-06-01 23:18:56,553 - INFO - [client_1748812728989fdp2ki] Sender task was cancelled normally.
2025-06-01 23:18:56,553 - INFO - [client_1748812728989fdp2ki] Sender task finished.
2025-06-01 23:18:56,554 - INFO - Finalizing connection handling for 127.0.0.1:36670. Ensuring cleanup.
2025-06-01 23:18:56,554 - INFO - Removed connection for client client_1748812728989fdp2ki. Total connections: 0
2025-06-01 23:18:56,554 - INFO - Connection handling for 127.0.0.1:36670 finished.
2025-06-01 23:18:56,554 - INFO - Cleanup finished for client_1748812728989fdp2ki at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:18:56,554 - INFO - Sender task started for client client_1748812728989fdp2ki
2025-06-01 23:18:56,555 - INFO - Starting receiver for client client_1748812728989fdp2ki with enhanced message tracing
2025-06-01 23:18:57,228 - INFO - [client_1748812728989fdp2ki] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 23:18:57,228 - INFO - [client_1748812728989fdp2ki] Receiver task finished.
2025-06-01 23:18:57,229 - INFO - Cancelling pending task sender_client_1748812728989fdp2ki for client_1748812728989fdp2ki.
2025-06-01 23:18:57,229 - INFO - [client_1748812728989fdp2ki] Sender task was cancelled normally.
2025-06-01 23:18:57,229 - INFO - [client_1748812728989fdp2ki] Sender task finished.
2025-06-01 23:18:57,229 - INFO - Finalizing connection handling for 127.0.0.1:55194. Ensuring cleanup.
2025-06-01 23:18:57,229 - INFO - Connection handling for 127.0.0.1:55194 finished.
2025-06-01 23:18:57,229 - INFO - Cleanup finished for client_1748812728989fdp2ki at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:18:57,329 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:18:57,329 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:18:57,329 - INFO - QueueForwarder task cancelled.
2025-06-01 23:18:57,330 - INFO - QueueForwarder stopped
2025-06-01 23:18:57,330 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:18:57,330 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:18:57,330 - INFO - Application shutdown event triggered.
2025-06-01 23:18:57,330 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:18:57,330 - INFO - Simulation is not running. No action needed.
2025-06-01 23:18:57,330 - INFO - SimulationManager stop method called.
2025-06-01 23:18:57,330 - INFO - Stopping MessageProcessor...
2025-06-01 23:18:57,331 - ERROR - Error stopping MessageProcessor: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748812728989fdp2ki'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748812728989fdp2ki'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/.local/lib/python3.12/site-packages/fastapi/routing.py", line 136, in merged_lifespan
    yield None  # old ASGI compatibility
    ^^^^^^^^^^
  File "/home/Leo/.local/lib/python3.12/site-packages/starlette/routing.py", line 699, in lifespan
    await receive()
  File "/home/Leo/.local/lib/python3.12/site-packages/uvicorn/lifespan/on.py", line 139, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/backend.py", line 230, in shutdown_event
    await message_processor_instance.stop()
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 244, in stop
    await self._processing_task
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 103, in _process_messages
    await self.safe_enqueue(self._dead_letter_queue, DeadLetterMessage( # Instantiate DeadLetterMessage
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/models/message_types.py", line 77, in __init__
    super().__init__(
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748812728989fdp2ki'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748812728989fdp2ki'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:18:57,333 - INFO - Stopping QueueForwarder...
2025-06-01 23:18:57,333 - INFO - Calling SimulationManager instance stop method...
2025-06-01 23:18:57,333 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:18:57,333 - INFO - Simulation is not running. No action needed.
2025-06-01 23:18:57,333 - INFO - Shutting down WebSocketManager...
2025-06-01 23:18:57,333 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 23:18:57,333 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:18:57,334 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:18:57,334 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 23:18:57,334 - INFO - Application shutdown complete.
2025-06-01 23:21:30,678 - INFO - Application startup event triggered.
2025-06-01 23:21:30,678 - INFO - Initializing all queues on event loop 663584288...
2025-06-01 23:21:30,678 - INFO - All queues initialized: ['to_frontend', 'from_frontend', 'to_backend', 'from_backend', 'dead_letter']
2025-06-01 23:21:30,679 - INFO - Shared queues initialized.
2025-06-01 23:21:30,679 - INFO - Retrieved queue instances. Event loop ID: 663584288
2025-06-01 23:21:30,679 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 23:21:30,679 - INFO - SimulationManager ready state changed from False to True
2025-06-01 23:21:30,679 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 23:21:30,679 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 23:21:30,679 - INFO - Starting MessageProcessor task.
2025-06-01 23:21:30,679 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 23:21:30,679 - INFO - MessageProcessor task started.
2025-06-01 23:21:30,679 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 23:21:30,679 - INFO - QueueForwarder queues already initialized
2025-06-01 23:21:30,679 - INFO - QueueForwarder task started.
2025-06-01 23:21:30,680 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 23:21:30,680 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 23:21:30,680 - INFO - MessageProcessor main loop started.
2025-06-01 23:21:30,680 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:21:30,680 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input='to_frontend' (to WebSocket).
2025-06-01 23:21:30,680 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:21:32,220 - INFO - Attempting to handle connection for 127.0.0.1:48214 (ID: client_1748812892196oujp0p)
2025-06-01 23:21:32,220 - INFO - WebSocket connection accepted for 127.0.0.1:48214 (ID: client_1748812892196oujp0p)
2025-06-01 23:21:32,220 - INFO - Adding connection: client_1748812892196oujp0p. Total connections: 1
2025-06-01 23:21:32,223 - INFO - Sender task started for client client_1748812892196oujp0p
2025-06-01 23:21:32,223 - INFO - Starting receiver for client client_1748812892196oujp0p with enhanced message tracing
2025-06-01 23:21:32,259 - ERROR - Validation error during single message processing for message unknown: 1 validation error for WebSocketMessage
type
  Field required [type=missing, input_value={'message': 'Frontend rea...nt_1748812892196oujp0p'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:21:32,259 - ERROR - Error during MessageProcessor main loop: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 87, in _process_messages
    await self._process_single_message(message)
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 196, in _process_single_message
    await self.safe_enqueue(self._dead_letter_queue, DeadLetterMessage(
                                                     ^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/models/message_types.py", line 77, in __init__
    super().__init__(
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent... 'unknown_client_error'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:21:35,680 - INFO - Attempting to send direct message to client: client_1748812892196oujp0p (type: queue_status)
2025-06-01 23:21:35,681 - INFO - [client_1748812892196oujp0p] Successfully sent direct message (type: queue_status, ID: 36cf0213-e783-47ac-9a58-aa35c0796704).
2025-06-01 23:21:35,681 - INFO - Sent queue_status to client client_1748812892196oujp0p: {'from_frontend_q_size': 1, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:21:36,681 - INFO - Attempting to send direct message to client: client_1748812892196oujp0p (type: queue_status)
2025-06-01 23:21:36,682 - INFO - [client_1748812892196oujp0p] Successfully sent direct message (type: queue_status, ID: 2589fda7-5c88-40f8-a37f-e605d81afead).
2025-06-01 23:21:36,682 - INFO - Sent queue_status to client client_1748812892196oujp0p: {'from_frontend_q_size': 1, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:21:37,506 - INFO - [client_1748812892196oujp0p] WebSocket cleanly disconnected: Code 1012, Reason: ''
2025-06-01 23:21:37,506 - INFO - [client_1748812892196oujp0p] Receiver task finished.
2025-06-01 23:21:37,506 - INFO - Cancelling pending task sender_client_1748812892196oujp0p for client_1748812892196oujp0p.
2025-06-01 23:21:37,506 - INFO - [client_1748812892196oujp0p] Sender task was cancelled normally.
2025-06-01 23:21:37,506 - INFO - [client_1748812892196oujp0p] Sender task finished.
2025-06-01 23:21:37,507 - INFO - Finalizing connection handling for 127.0.0.1:48214. Ensuring cleanup.
2025-06-01 23:21:37,507 - INFO - Removed connection for client client_1748812892196oujp0p. Total connections: 0
2025-06-01 23:21:37,507 - INFO - Connection handling for 127.0.0.1:48214 finished.
2025-06-01 23:21:37,507 - INFO - Cleanup finished for client_1748812892196oujp0p at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:21:37,606 - INFO - Application shutdown event triggered.
2025-06-01 23:21:37,606 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:21:37,606 - INFO - Simulation is not running. No action needed.
2025-06-01 23:21:37,607 - INFO - SimulationManager stop method called.
2025-06-01 23:21:37,607 - INFO - Stopping MessageProcessor...
2025-06-01 23:21:37,607 - ERROR - Error stopping MessageProcessor: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748812892196oujp0p'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748812892196oujp0p'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/backend.py", line 230, in shutdown_event
    await message_processor_instance.stop()
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 244, in stop
    await self._processing_task
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/core/message_processor.py", line 103, in _process_messages
    await self.safe_enqueue(self._dead_letter_queue, DeadLetterMessage( # Instantiate DeadLetterMessage
                                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/Leo/Documents/Coding/Teamprojekt Context Translator/Backend/models/message_types.py", line 77, in __init__
    super().__init__(
  File "/home/Leo/.local/lib/python3.12/site-packages/pydantic/main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for DeadLetterMessage
original_message
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748812892196oujp0p'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
reason
  Field required [type=missing, input_value={'type': 'dead_letter_ent...nt_1748812892196oujp0p'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-01 23:21:37,608 - INFO - Stopping QueueForwarder...
2025-06-01 23:21:37,608 - INFO - QueueForwarder task cancelled.
2025-06-01 23:21:37,608 - INFO - QueueForwarder stopped
2025-06-01 23:21:37,608 - INFO - Calling SimulationManager instance stop method...
2025-06-01 23:21:37,608 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:21:37,608 - INFO - Simulation is not running. No action needed.
2025-06-01 23:21:37,608 - INFO - Shutting down WebSocketManager...
2025-06-01 23:21:37,609 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 23:21:37,609 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:21:37,609 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:21:37,609 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 23:21:37,609 - INFO - Application shutdown complete.
2025-06-01 23:21:37,610 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:21:37,610 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:21:37,610 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:21:37,610 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:31:52,538 - INFO - Application startup event triggered.
2025-06-01 23:31:52,538 - INFO - Initializing all queues on event loop 203300384...
2025-06-01 23:31:52,538 - INFO - All queues initialized: ['to_frontend', 'from_frontend', 'to_backend', 'from_backend', 'dead_letter']
2025-06-01 23:31:52,538 - INFO - Shared queues initialized.
2025-06-01 23:31:52,538 - INFO - Retrieved queue instances. Event loop ID: 203300384
2025-06-01 23:31:52,539 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 23:31:52,539 - INFO - SimulationManager ready state changed from False to True
2025-06-01 23:31:52,539 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 23:31:52,539 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 23:31:52,539 - INFO - Starting MessageProcessor task.
2025-06-01 23:31:52,539 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 23:31:52,539 - INFO - MessageProcessor task started.
2025-06-01 23:31:52,539 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 23:31:52,539 - INFO - QueueForwarder queues already initialized
2025-06-01 23:31:52,539 - INFO - QueueForwarder task started.
2025-06-01 23:31:52,539 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 23:31:52,539 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 23:31:52,539 - INFO - MessageProcessor main loop started.
2025-06-01 23:31:52,540 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:31:52,540 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input='to_frontend' (to WebSocket).
2025-06-01 23:31:52,540 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:31:54,091 - INFO - Attempting to handle connection for 127.0.0.1:45456 (ID: client_1748813514069ryldzr)
2025-06-01 23:31:54,091 - INFO - WebSocket connection accepted for 127.0.0.1:45456 (ID: client_1748813514069ryldzr)
2025-06-01 23:31:54,091 - INFO - Adding connection: client_1748813514069ryldzr. Total connections: 1
2025-06-01 23:31:54,093 - INFO - Sender task started for client client_1748813514069ryldzr
2025-06-01 23:31:54,093 - INFO - Starting receiver for client client_1748813514069ryldzr with enhanced message tracing
2025-06-01 23:31:54,125 - INFO - Processing message ID: frontend-init-1748813514123, Type: frontend_ready_ack, Client ID: client_1748813514069ryldzr
2025-06-01 23:31:54,126 - WARNING - Unknown WebSocket message type: frontend_ready_ack from client client_1748813514069ryldzr
2025-06-01 23:31:56,626 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:31:56,626 - INFO - Processing message ID: ping-1748813516624, Type: ping, Client ID: None
2025-06-01 23:31:56,627 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:31:57,540 - INFO - Attempting to send direct message to client: client_1748813514069ryldzr (type: N/A)
2025-06-01 23:31:57,541 - INFO - [client_1748813514069ryldzr] Successfully sent direct message (type: queue_status, ID: f162e812-a979-44cd-82a5-1223c7b06902).
2025-06-01 23:31:57,541 - INFO - Sent queue_status to client client_1748813514069ryldzr: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:31:58,542 - INFO - Attempting to send direct message to client: client_1748813514069ryldzr (type: N/A)
2025-06-01 23:31:58,543 - INFO - [client_1748813514069ryldzr] Successfully sent direct message (type: queue_status, ID: 60e6e9e5-8cfe-4a29-b623-33318465296e).
2025-06-01 23:31:58,543 - INFO - Sent queue_status to client client_1748813514069ryldzr: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:31:59,125 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:31:59,126 - INFO - Processing message ID: ping-1748813519123, Type: ping, Client ID: None
2025-06-01 23:31:59,126 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:31:59,126 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 23:31:59,543 - INFO - Attempting to send direct message to client: client_1748813514069ryldzr (type: N/A)
2025-06-01 23:31:59,544 - INFO - [client_1748813514069ryldzr] Successfully sent direct message (type: queue_status, ID: a331bf54-7873-4866-a355-59d7a2edd2cd).
2025-06-01 23:31:59,544 - INFO - Sent queue_status to client client_1748813514069ryldzr: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:32:00,544 - INFO - Attempting to send direct message to client: client_1748813514069ryldzr (type: N/A)
2025-06-01 23:32:00,544 - INFO - [client_1748813514069ryldzr] Successfully sent direct message (type: queue_status, ID: d0353bfa-d0a9-4f80-b9bc-9a074ece9ba5).
2025-06-01 23:32:00,544 - INFO - Sent queue_status to client client_1748813514069ryldzr: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:32:01,545 - INFO - Attempting to send direct message to client: client_1748813514069ryldzr (type: N/A)
2025-06-01 23:32:01,546 - INFO - [client_1748813514069ryldzr] Successfully sent direct message (type: queue_status, ID: ec921286-a616-47a9-af8d-f01cd2748371).
2025-06-01 23:32:01,546 - INFO - Sent queue_status to client client_1748813514069ryldzr: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:32:01,625 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:01,626 - INFO - Processing message ID: ping-1748813521623, Type: ping, Client ID: None
2025-06-01 23:32:01,626 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:01,627 - INFO - [client_1748813514069ryldzr] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 23:32:01,627 - INFO - [client_1748813514069ryldzr] Receiver task finished.
2025-06-01 23:32:01,628 - INFO - Cancelling pending task sender_client_1748813514069ryldzr for client_1748813514069ryldzr.
2025-06-01 23:32:01,629 - INFO - Attempting to handle connection for 127.0.0.1:36056 (ID: client_1748813514069ryldzr)
2025-06-01 23:32:01,629 - INFO - WebSocket connection accepted for 127.0.0.1:36056 (ID: client_1748813514069ryldzr)
2025-06-01 23:32:01,629 - INFO - Adding connection: client_1748813514069ryldzr. Total connections: 1
2025-06-01 23:32:01,629 - INFO - [client_1748813514069ryldzr] Sender task was cancelled normally.
2025-06-01 23:32:01,629 - INFO - [client_1748813514069ryldzr] Sender task finished.
2025-06-01 23:32:01,630 - INFO - Finalizing connection handling for 127.0.0.1:45456. Ensuring cleanup.
2025-06-01 23:32:01,630 - INFO - Removed connection for client client_1748813514069ryldzr. Total connections: 0
2025-06-01 23:32:01,630 - INFO - Connection handling for 127.0.0.1:45456 finished.
2025-06-01 23:32:01,631 - INFO - Cleanup finished for client_1748813514069ryldzr at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:32:01,631 - INFO - Sender task started for client client_1748813514069ryldzr
2025-06-01 23:32:01,631 - INFO - Starting receiver for client client_1748813514069ryldzr with enhanced message tracing
2025-06-01 23:32:01,636 - INFO - Processing message ID: frontend-init-1748813521634, Type: frontend_ready_ack, Client ID: client_1748813514069ryldzr
2025-06-01 23:32:01,636 - WARNING - Unknown WebSocket message type: frontend_ready_ack from client client_1748813514069ryldzr
2025-06-01 23:32:04,137 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:04,137 - INFO - Processing message ID: ping-1748813524135, Type: ping, Client ID: None
2025-06-01 23:32:04,137 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:04,137 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 23:32:06,636 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:06,637 - INFO - Processing message ID: ping-1748813526634, Type: ping, Client ID: None
2025-06-01 23:32:06,637 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:09,137 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:09,137 - INFO - Processing message ID: ping-1748813529134, Type: ping, Client ID: None
2025-06-01 23:32:09,137 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:09,138 - INFO - [client_1748813514069ryldzr] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 23:32:09,138 - INFO - [client_1748813514069ryldzr] Receiver task finished.
2025-06-01 23:32:09,139 - INFO - Cancelling pending task sender_client_1748813514069ryldzr for client_1748813514069ryldzr.
2025-06-01 23:32:09,139 - INFO - Attempting to handle connection for 127.0.0.1:36064 (ID: client_1748813514069ryldzr)
2025-06-01 23:32:09,140 - INFO - WebSocket connection accepted for 127.0.0.1:36064 (ID: client_1748813514069ryldzr)
2025-06-01 23:32:09,140 - INFO - Adding connection: client_1748813514069ryldzr. Total connections: 1
2025-06-01 23:32:09,140 - INFO - [client_1748813514069ryldzr] Sender task was cancelled normally.
2025-06-01 23:32:09,140 - INFO - [client_1748813514069ryldzr] Sender task finished.
2025-06-01 23:32:09,140 - INFO - Finalizing connection handling for 127.0.0.1:36056. Ensuring cleanup.
2025-06-01 23:32:09,141 - INFO - Removed connection for client client_1748813514069ryldzr. Total connections: 0
2025-06-01 23:32:09,141 - INFO - Connection handling for 127.0.0.1:36056 finished.
2025-06-01 23:32:09,141 - INFO - Cleanup finished for client_1748813514069ryldzr at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:32:09,141 - INFO - Sender task started for client client_1748813514069ryldzr
2025-06-01 23:32:09,141 - INFO - Starting receiver for client client_1748813514069ryldzr with enhanced message tracing
2025-06-01 23:32:09,145 - INFO - Processing message ID: frontend-init-1748813529143, Type: frontend_ready_ack, Client ID: client_1748813514069ryldzr
2025-06-01 23:32:09,145 - WARNING - Unknown WebSocket message type: frontend_ready_ack from client client_1748813514069ryldzr
2025-06-01 23:32:09,145 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 23:32:11,646 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:11,646 - INFO - Processing message ID: ping-1748813531643, Type: ping, Client ID: None
2025-06-01 23:32:11,646 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:14,145 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:14,148 - INFO - Processing message ID: ping-1748813534143, Type: ping, Client ID: None
2025-06-01 23:32:14,149 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:14,149 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 23:32:16,646 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:16,646 - INFO - Processing message ID: ping-1748813536643, Type: ping, Client ID: None
2025-06-01 23:32:16,646 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:16,647 - INFO - [client_1748813514069ryldzr] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 23:32:16,647 - INFO - [client_1748813514069ryldzr] Receiver task finished.
2025-06-01 23:32:16,648 - INFO - Cancelling pending task sender_client_1748813514069ryldzr for client_1748813514069ryldzr.
2025-06-01 23:32:16,648 - INFO - [client_1748813514069ryldzr] Sender task was cancelled normally.
2025-06-01 23:32:16,648 - INFO - [client_1748813514069ryldzr] Sender task finished.
2025-06-01 23:32:16,649 - INFO - Attempting to handle connection for 127.0.0.1:44242 (ID: client_1748813514069ryldzr)
2025-06-01 23:32:16,649 - INFO - WebSocket connection accepted for 127.0.0.1:44242 (ID: client_1748813514069ryldzr)
2025-06-01 23:32:16,649 - INFO - Adding connection: client_1748813514069ryldzr. Total connections: 1
2025-06-01 23:32:16,649 - INFO - Finalizing connection handling for 127.0.0.1:36064. Ensuring cleanup.
2025-06-01 23:32:16,649 - INFO - Removed connection for client client_1748813514069ryldzr. Total connections: 0
2025-06-01 23:32:16,649 - INFO - Connection handling for 127.0.0.1:36064 finished.
2025-06-01 23:32:16,649 - INFO - Cleanup finished for client_1748813514069ryldzr at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:32:16,650 - INFO - Sender task started for client client_1748813514069ryldzr
2025-06-01 23:32:16,650 - INFO - Starting receiver for client client_1748813514069ryldzr with enhanced message tracing
2025-06-01 23:32:16,655 - INFO - Processing message ID: frontend-init-1748813536653, Type: frontend_ready_ack, Client ID: client_1748813514069ryldzr
2025-06-01 23:32:16,655 - WARNING - Unknown WebSocket message type: frontend_ready_ack from client client_1748813514069ryldzr
2025-06-01 23:32:19,155 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:19,155 - INFO - Processing message ID: ping-1748813539153, Type: ping, Client ID: None
2025-06-01 23:32:19,156 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:19,156 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 23:32:21,655 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:21,655 - INFO - Processing message ID: ping-1748813541653, Type: ping, Client ID: None
2025-06-01 23:32:21,656 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:24,156 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:24,156 - INFO - Processing message ID: ping-1748813544153, Type: ping, Client ID: None
2025-06-01 23:32:24,157 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:24,157 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 23:32:24,157 - INFO - [client_1748813514069ryldzr] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 23:32:24,157 - INFO - [client_1748813514069ryldzr] Receiver task finished.
2025-06-01 23:32:24,158 - INFO - Cancelling pending task sender_client_1748813514069ryldzr for client_1748813514069ryldzr.
2025-06-01 23:32:24,159 - INFO - Attempting to handle connection for 127.0.0.1:51654 (ID: client_1748813514069ryldzr)
2025-06-01 23:32:24,159 - INFO - WebSocket connection accepted for 127.0.0.1:51654 (ID: client_1748813514069ryldzr)
2025-06-01 23:32:24,159 - INFO - Adding connection: client_1748813514069ryldzr. Total connections: 1
2025-06-01 23:32:24,159 - INFO - [client_1748813514069ryldzr] Sender task was cancelled normally.
2025-06-01 23:32:24,159 - INFO - [client_1748813514069ryldzr] Sender task finished.
2025-06-01 23:32:24,160 - INFO - Finalizing connection handling for 127.0.0.1:44242. Ensuring cleanup.
2025-06-01 23:32:24,160 - INFO - Removed connection for client client_1748813514069ryldzr. Total connections: 0
2025-06-01 23:32:24,160 - INFO - Connection handling for 127.0.0.1:44242 finished.
2025-06-01 23:32:24,160 - INFO - Cleanup finished for client_1748813514069ryldzr at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:32:24,160 - INFO - Sender task started for client client_1748813514069ryldzr
2025-06-01 23:32:24,160 - INFO - Starting receiver for client client_1748813514069ryldzr with enhanced message tracing
2025-06-01 23:32:24,163 - INFO - Processing message ID: frontend-init-1748813544162, Type: frontend_ready_ack, Client ID: client_1748813514069ryldzr
2025-06-01 23:32:24,163 - WARNING - Unknown WebSocket message type: frontend_ready_ack from client client_1748813514069ryldzr
2025-06-01 23:32:26,664 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:26,664 - INFO - Processing message ID: ping-1748813546662, Type: ping, Client ID: None
2025-06-01 23:32:26,665 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:29,165 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:29,165 - INFO - Processing message ID: ping-1748813549162, Type: ping, Client ID: None
2025-06-01 23:32:29,165 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:29,165 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 23:32:31,664 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:31,665 - INFO - Processing message ID: ping-1748813551662, Type: ping, Client ID: None
2025-06-01 23:32:31,665 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:31,666 - INFO - [client_1748813514069ryldzr] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 23:32:31,666 - INFO - [client_1748813514069ryldzr] Receiver task finished.
2025-06-01 23:32:31,667 - INFO - Cancelling pending task sender_client_1748813514069ryldzr for client_1748813514069ryldzr.
2025-06-01 23:32:31,667 - INFO - Attempting to handle connection for 127.0.0.1:57492 (ID: client_1748813514069ryldzr)
2025-06-01 23:32:31,667 - INFO - WebSocket connection accepted for 127.0.0.1:57492 (ID: client_1748813514069ryldzr)
2025-06-01 23:32:31,668 - INFO - Adding connection: client_1748813514069ryldzr. Total connections: 1
2025-06-01 23:32:31,668 - INFO - [client_1748813514069ryldzr] Sender task was cancelled normally.
2025-06-01 23:32:31,668 - INFO - [client_1748813514069ryldzr] Sender task finished.
2025-06-01 23:32:31,669 - INFO - Finalizing connection handling for 127.0.0.1:51654. Ensuring cleanup.
2025-06-01 23:32:31,669 - INFO - Removed connection for client client_1748813514069ryldzr. Total connections: 0
2025-06-01 23:32:31,669 - INFO - Connection handling for 127.0.0.1:51654 finished.
2025-06-01 23:32:31,669 - INFO - Cleanup finished for client_1748813514069ryldzr at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:32:31,669 - INFO - Sender task started for client client_1748813514069ryldzr
2025-06-01 23:32:31,670 - INFO - Starting receiver for client client_1748813514069ryldzr with enhanced message tracing
2025-06-01 23:32:31,672 - INFO - Processing message ID: frontend-init-1748813551671, Type: frontend_ready_ack, Client ID: client_1748813514069ryldzr
2025-06-01 23:32:31,672 - WARNING - Unknown WebSocket message type: frontend_ready_ack from client client_1748813514069ryldzr
2025-06-01 23:32:34,173 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:34,174 - INFO - Processing message ID: ping-1748813554171, Type: ping, Client ID: None
2025-06-01 23:32:34,174 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:34,174 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 23:32:36,673 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:36,674 - INFO - Processing message ID: ping-1748813556671, Type: ping, Client ID: None
2025-06-01 23:32:36,674 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:39,173 - WARNING - [client_1748813514069ryldzr] Incoming message client_id (None) does not match connection ID (client_1748813514069ryldzr). Overriding in QueueMessage.
2025-06-01 23:32:39,174 - INFO - Processing message ID: ping-1748813559171, Type: ping, Client ID: None
2025-06-01 23:32:39,174 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:32:39,176 - INFO - Attempting to handle connection for 127.0.0.1:57508 (ID: client_1748813514069ryldzr)
2025-06-01 23:32:39,176 - INFO - WebSocket connection accepted for 127.0.0.1:57508 (ID: client_1748813514069ryldzr)
2025-06-01 23:32:39,176 - INFO - Adding connection: client_1748813514069ryldzr. Total connections: 1
2025-06-01 23:32:39,177 - INFO - [client_1748813514069ryldzr] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 23:32:39,177 - INFO - [client_1748813514069ryldzr] Receiver task finished.
2025-06-01 23:32:39,177 - INFO - Sender task started for client client_1748813514069ryldzr
2025-06-01 23:32:39,177 - INFO - Starting receiver for client client_1748813514069ryldzr with enhanced message tracing
2025-06-01 23:32:39,177 - INFO - Cancelling pending task sender_client_1748813514069ryldzr for client_1748813514069ryldzr.
2025-06-01 23:32:39,177 - INFO - [client_1748813514069ryldzr] Sender task was cancelled normally.
2025-06-01 23:32:39,177 - INFO - [client_1748813514069ryldzr] Sender task finished.
2025-06-01 23:32:39,178 - INFO - Finalizing connection handling for 127.0.0.1:57492. Ensuring cleanup.
2025-06-01 23:32:39,178 - INFO - Removed connection for client client_1748813514069ryldzr. Total connections: 0
2025-06-01 23:32:39,178 - INFO - [client_1748813514069ryldzr] Sender task was cancelled normally.
2025-06-01 23:32:39,178 - INFO - [client_1748813514069ryldzr] Sender task finished.
2025-06-01 23:32:39,178 - INFO - Cancelling pending task receiver_client_1748813514069ryldzr for client_1748813514069ryldzr.
2025-06-01 23:32:39,178 - INFO - [client_1748813514069ryldzr] Receiver task cancelled.
2025-06-01 23:32:39,178 - INFO - [client_1748813514069ryldzr] Receiver task finished.
2025-06-01 23:32:39,178 - INFO - Connection handling for 127.0.0.1:57492 finished.
2025-06-01 23:32:39,178 - INFO - Cleanup finished for client_1748813514069ryldzr at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:32:39,178 - INFO - Finalizing connection handling for 127.0.0.1:57508. Ensuring cleanup.
2025-06-01 23:32:39,179 - INFO - Closed WebSocket for client client_1748813514069ryldzr.
2025-06-01 23:32:39,179 - INFO - Connection handling for 127.0.0.1:57508 finished.
2025-06-01 23:32:39,179 - INFO - Cleanup finished for client_1748813514069ryldzr at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:32:43,148 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 23:32:43,148 - INFO - MessageProcessor main loop stopped.
2025-06-01 23:32:43,148 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:32:43,149 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:32:43,149 - INFO - Application shutdown event triggered.
2025-06-01 23:32:43,149 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:32:43,149 - INFO - Simulation is not running. No action needed.
2025-06-01 23:32:43,149 - INFO - SimulationManager stop method called.
2025-06-01 23:32:43,149 - INFO - Stopping MessageProcessor...
2025-06-01 23:32:43,149 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:32:43,149 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:32:43,150 - INFO - QueueForwarder task cancelled.
2025-06-01 23:32:43,150 - INFO - QueueForwarder stopped
2025-06-01 23:32:43,150 - INFO - MessageProcessor shutdown complete.
2025-06-01 23:32:43,150 - INFO - Stopping QueueForwarder...
2025-06-01 23:32:43,150 - INFO - Calling SimulationManager instance stop method...
2025-06-01 23:32:43,150 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:32:43,150 - INFO - Simulation is not running. No action needed.
2025-06-01 23:32:43,150 - INFO - Shutting down WebSocketManager...
2025-06-01 23:32:43,151 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 23:32:43,151 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:32:43,151 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:32:43,151 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 23:32:43,151 - INFO - Application shutdown complete.
2025-06-01 23:36:08,043 - INFO - Application startup event triggered.
2025-06-01 23:36:08,043 - INFO - Initializing all queues on event loop 40754720...
2025-06-01 23:36:08,043 - INFO - All queues initialized: ['to_frontend', 'from_frontend', 'to_backend', 'from_backend', 'dead_letter']
2025-06-01 23:36:08,043 - INFO - Shared queues initialized.
2025-06-01 23:36:08,044 - INFO - Retrieved queue instances. Event loop ID: 40754720
2025-06-01 23:36:08,044 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 23:36:08,044 - INFO - SimulationManager ready state changed from False to True
2025-06-01 23:36:08,044 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 23:36:08,044 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 23:36:08,044 - INFO - Starting MessageProcessor task.
2025-06-01 23:36:08,044 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 23:36:08,044 - INFO - MessageProcessor task started.
2025-06-01 23:36:08,044 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 23:36:08,044 - INFO - QueueForwarder queues already initialized
2025-06-01 23:36:08,044 - INFO - QueueForwarder task started.
2025-06-01 23:36:08,044 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 23:36:08,044 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 23:36:08,044 - INFO - MessageProcessor main loop started.
2025-06-01 23:36:08,045 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:36:08,045 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input='to_frontend' (to WebSocket).
2025-06-01 23:36:08,045 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:36:09,561 - INFO - Attempting to handle connection for 127.0.0.1:57584 (ID: client_1748813769535f5tjmf)
2025-06-01 23:36:09,562 - INFO - WebSocket connection accepted for 127.0.0.1:57584 (ID: client_1748813769535f5tjmf)
2025-06-01 23:36:09,562 - INFO - Adding connection: client_1748813769535f5tjmf. Total connections: 1
2025-06-01 23:36:09,564 - INFO - Sender task started for client client_1748813769535f5tjmf
2025-06-01 23:36:09,565 - INFO - Starting receiver for client client_1748813769535f5tjmf with enhanced message tracing
2025-06-01 23:36:09,604 - INFO - Processing message ID: frontend-init-1748813769602, Type: frontend_ready_ack, Client ID: client_1748813769535f5tjmf
2025-06-01 23:36:09,604 - WARNING - Unknown WebSocket message type: frontend_ready_ack from client client_1748813769535f5tjmf
2025-06-01 23:36:10,504 - INFO - [client_1748813769535f5tjmf] WebSocket cleanly disconnected: Code 1001, Reason: ''
2025-06-01 23:36:10,505 - INFO - [client_1748813769535f5tjmf] Receiver task finished.
2025-06-01 23:36:10,505 - INFO - Cancelling pending task sender_client_1748813769535f5tjmf for client_1748813769535f5tjmf.
2025-06-01 23:36:10,505 - INFO - [client_1748813769535f5tjmf] Sender task was cancelled normally.
2025-06-01 23:36:10,505 - INFO - [client_1748813769535f5tjmf] Sender task finished.
2025-06-01 23:36:10,505 - INFO - Finalizing connection handling for 127.0.0.1:57584. Ensuring cleanup.
2025-06-01 23:36:10,505 - INFO - Removed connection for client client_1748813769535f5tjmf. Total connections: 0
2025-06-01 23:36:10,505 - INFO - Connection handling for 127.0.0.1:57584 finished.
2025-06-01 23:36:10,506 - INFO - Cleanup finished for client_1748813769535f5tjmf at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:36:10,831 - INFO - Attempting to handle connection for 127.0.0.1:57600 (ID: client_1748813770826dyr3t8)
2025-06-01 23:36:10,831 - INFO - WebSocket connection accepted for 127.0.0.1:57600 (ID: client_1748813770826dyr3t8)
2025-06-01 23:36:10,831 - INFO - Adding connection: client_1748813770826dyr3t8. Total connections: 1
2025-06-01 23:36:10,832 - INFO - Sender task started for client client_1748813770826dyr3t8
2025-06-01 23:36:10,833 - INFO - Starting receiver for client client_1748813770826dyr3t8 with enhanced message tracing
2025-06-01 23:36:10,854 - INFO - Processing message ID: frontend-init-1748813770853, Type: frontend_ready_ack, Client ID: client_1748813770826dyr3t8
2025-06-01 23:36:10,855 - WARNING - Unknown WebSocket message type: frontend_ready_ack from client client_1748813770826dyr3t8
2025-06-01 23:36:11,278 - INFO - [client_1748813770826dyr3t8] WebSocket cleanly disconnected: Code 1001, Reason: ''
2025-06-01 23:36:11,278 - INFO - [client_1748813770826dyr3t8] Receiver task finished.
2025-06-01 23:36:11,278 - INFO - Cancelling pending task sender_client_1748813770826dyr3t8 for client_1748813770826dyr3t8.
2025-06-01 23:36:11,278 - INFO - [client_1748813770826dyr3t8] Sender task was cancelled normally.
2025-06-01 23:36:11,278 - INFO - [client_1748813770826dyr3t8] Sender task finished.
2025-06-01 23:36:11,279 - INFO - Finalizing connection handling for 127.0.0.1:57600. Ensuring cleanup.
2025-06-01 23:36:11,279 - INFO - Removed connection for client client_1748813770826dyr3t8. Total connections: 0
2025-06-01 23:36:11,279 - INFO - Connection handling for 127.0.0.1:57600 finished.
2025-06-01 23:36:11,279 - INFO - Cleanup finished for client_1748813770826dyr3t8 at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:36:11,740 - INFO - Attempting to handle connection for 127.0.0.1:40056 (ID: client_17488137717366fs54d)
2025-06-01 23:36:11,741 - INFO - WebSocket connection accepted for 127.0.0.1:40056 (ID: client_17488137717366fs54d)
2025-06-01 23:36:11,741 - INFO - Adding connection: client_17488137717366fs54d. Total connections: 1
2025-06-01 23:36:11,742 - INFO - Sender task started for client client_17488137717366fs54d
2025-06-01 23:36:11,742 - INFO - Starting receiver for client client_17488137717366fs54d with enhanced message tracing
2025-06-01 23:36:11,768 - INFO - Processing message ID: frontend-init-1748813771767, Type: frontend_ready_ack, Client ID: client_17488137717366fs54d
2025-06-01 23:36:11,769 - WARNING - Unknown WebSocket message type: frontend_ready_ack from client client_17488137717366fs54d
2025-06-01 23:36:13,045 - INFO - Attempting to send direct message to client: client_17488137717366fs54d (type: N/A)
2025-06-01 23:36:13,046 - INFO - [client_17488137717366fs54d] Successfully sent direct message (type: queue_status, ID: 48d4a337-1711-4019-95ea-25514ea90538).
2025-06-01 23:36:13,046 - INFO - Sent queue_status to client client_17488137717366fs54d: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:36:14,047 - INFO - Attempting to send direct message to client: client_17488137717366fs54d (type: N/A)
2025-06-01 23:36:14,048 - INFO - [client_17488137717366fs54d] Successfully sent direct message (type: queue_status, ID: e1884807-7035-49c0-a2a2-4113cca091df).
2025-06-01 23:36:14,048 - INFO - Sent queue_status to client client_17488137717366fs54d: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:36:14,270 - WARNING - [client_17488137717366fs54d] Incoming message client_id (None) does not match connection ID (client_17488137717366fs54d). Overriding in QueueMessage.
2025-06-01 23:36:14,270 - INFO - Processing message ID: ping-1748813774268, Type: ping, Client ID: None
2025-06-01 23:36:14,271 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:36:14,271 - INFO - Processed 4 messages in the last 5 seconds.
2025-06-01 23:36:15,049 - INFO - Attempting to send direct message to client: client_17488137717366fs54d (type: N/A)
2025-06-01 23:36:15,050 - INFO - [client_17488137717366fs54d] Successfully sent direct message (type: queue_status, ID: c8010827-ccec-41ef-91d6-e7aa144c4761).
2025-06-01 23:36:15,050 - INFO - Sent queue_status to client client_17488137717366fs54d: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:36:16,051 - INFO - Attempting to send direct message to client: client_17488137717366fs54d (type: N/A)
2025-06-01 23:36:16,052 - INFO - [client_17488137717366fs54d] Successfully sent direct message (type: queue_status, ID: e667a8ab-f962-438e-86aa-0e7fdeee6f34).
2025-06-01 23:36:16,052 - INFO - Sent queue_status to client client_17488137717366fs54d: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:36:16,769 - WARNING - [client_17488137717366fs54d] Incoming message client_id (None) does not match connection ID (client_17488137717366fs54d). Overriding in QueueMessage.
2025-06-01 23:36:16,769 - INFO - Processing message ID: ping-1748813776767, Type: ping, Client ID: None
2025-06-01 23:36:16,769 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:36:17,052 - INFO - Attempting to send direct message to client: client_17488137717366fs54d (type: N/A)
2025-06-01 23:36:17,053 - INFO - [client_17488137717366fs54d] Successfully sent direct message (type: queue_status, ID: 3b8b9f44-5517-4ba3-a3a9-4b08c1187830).
2025-06-01 23:36:17,053 - INFO - Sent queue_status to client client_17488137717366fs54d: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:36:18,053 - INFO - Attempting to send direct message to client: client_17488137717366fs54d (type: N/A)
2025-06-01 23:36:18,053 - INFO - [client_17488137717366fs54d] Successfully sent direct message (type: queue_status, ID: 71d7114d-6ea2-45e4-9d52-8def7707a6a5).
2025-06-01 23:36:18,053 - INFO - Sent queue_status to client client_17488137717366fs54d: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:36:19,054 - INFO - Attempting to send direct message to client: client_17488137717366fs54d (type: N/A)
2025-06-01 23:36:19,055 - INFO - [client_17488137717366fs54d] Successfully sent direct message (type: queue_status, ID: c75571ad-4fa6-495b-8482-5ed6a8c8d4f3).
2025-06-01 23:36:19,055 - INFO - Sent queue_status to client client_17488137717366fs54d: {'from_frontend_q_size': 0, 'to_frontend_q_size': 0, 'dead_letter_q_size': 0}
2025-06-01 23:36:19,269 - WARNING - [client_17488137717366fs54d] Incoming message client_id (None) does not match connection ID (client_17488137717366fs54d). Overriding in QueueMessage.
2025-06-01 23:36:19,270 - INFO - Processing message ID: ping-1748813779267, Type: ping, Client ID: None
2025-06-01 23:36:19,270 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:36:19,271 - INFO - [client_17488137717366fs54d] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 23:36:19,271 - INFO - [client_17488137717366fs54d] Receiver task finished.
2025-06-01 23:36:19,272 - INFO - Cancelling pending task sender_client_17488137717366fs54d for client_17488137717366fs54d.
2025-06-01 23:36:19,272 - INFO - Attempting to handle connection for 127.0.0.1:40068 (ID: client_17488137717366fs54d)
2025-06-01 23:36:19,272 - INFO - WebSocket connection accepted for 127.0.0.1:40068 (ID: client_17488137717366fs54d)
2025-06-01 23:36:19,273 - INFO - Adding connection: client_17488137717366fs54d. Total connections: 1
2025-06-01 23:36:19,273 - INFO - [client_17488137717366fs54d] Sender task was cancelled normally.
2025-06-01 23:36:19,273 - INFO - [client_17488137717366fs54d] Sender task finished.
2025-06-01 23:36:19,273 - INFO - Finalizing connection handling for 127.0.0.1:40056. Ensuring cleanup.
2025-06-01 23:36:19,273 - INFO - Removed connection for client client_17488137717366fs54d. Total connections: 0
2025-06-01 23:36:19,274 - INFO - Connection handling for 127.0.0.1:40056 finished.
2025-06-01 23:36:19,274 - INFO - Cleanup finished for client_17488137717366fs54d at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:36:19,274 - INFO - Sender task started for client client_17488137717366fs54d
2025-06-01 23:36:19,274 - INFO - Starting receiver for client client_17488137717366fs54d with enhanced message tracing
2025-06-01 23:36:19,281 - INFO - Processing message ID: frontend-init-1748813779279, Type: frontend_ready_ack, Client ID: client_17488137717366fs54d
2025-06-01 23:36:19,281 - WARNING - Unknown WebSocket message type: frontend_ready_ack from client client_17488137717366fs54d
2025-06-01 23:36:19,282 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 23:36:21,781 - WARNING - [client_17488137717366fs54d] Incoming message client_id (None) does not match connection ID (client_17488137717366fs54d). Overriding in QueueMessage.
2025-06-01 23:36:21,784 - INFO - Processing message ID: ping-1748813781779, Type: ping, Client ID: None
2025-06-01 23:36:21,784 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:36:24,282 - WARNING - [client_17488137717366fs54d] Incoming message client_id (None) does not match connection ID (client_17488137717366fs54d). Overriding in QueueMessage.
2025-06-01 23:36:24,282 - INFO - Processing message ID: ping-1748813784279, Type: ping, Client ID: None
2025-06-01 23:36:24,282 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:36:24,282 - INFO - Processed 2 messages in the last 5 seconds.
2025-06-01 23:36:26,782 - WARNING - [client_17488137717366fs54d] Incoming message client_id (None) does not match connection ID (client_17488137717366fs54d). Overriding in QueueMessage.
2025-06-01 23:36:26,783 - INFO - Processing message ID: ping-1748813786779, Type: ping, Client ID: None
2025-06-01 23:36:26,783 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:36:26,784 - INFO - [client_17488137717366fs54d] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 23:36:26,784 - INFO - [client_17488137717366fs54d] Receiver task finished.
2025-06-01 23:36:26,785 - INFO - Cancelling pending task sender_client_17488137717366fs54d for client_17488137717366fs54d.
2025-06-01 23:36:26,785 - INFO - Attempting to handle connection for 127.0.0.1:33982 (ID: client_17488137717366fs54d)
2025-06-01 23:36:26,786 - INFO - WebSocket connection accepted for 127.0.0.1:33982 (ID: client_17488137717366fs54d)
2025-06-01 23:36:26,786 - INFO - Adding connection: client_17488137717366fs54d. Total connections: 1
2025-06-01 23:36:26,786 - INFO - [client_17488137717366fs54d] Sender task was cancelled normally.
2025-06-01 23:36:26,786 - INFO - [client_17488137717366fs54d] Sender task finished.
2025-06-01 23:36:26,787 - INFO - Finalizing connection handling for 127.0.0.1:40068. Ensuring cleanup.
2025-06-01 23:36:26,787 - INFO - Removed connection for client client_17488137717366fs54d. Total connections: 0
2025-06-01 23:36:26,787 - INFO - Connection handling for 127.0.0.1:40068 finished.
2025-06-01 23:36:26,787 - INFO - Cleanup finished for client_17488137717366fs54d at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:36:26,787 - INFO - Sender task started for client client_17488137717366fs54d
2025-06-01 23:36:26,788 - INFO - Starting receiver for client client_17488137717366fs54d with enhanced message tracing
2025-06-01 23:36:26,795 - INFO - Processing message ID: frontend-init-1748813786792, Type: frontend_ready_ack, Client ID: client_17488137717366fs54d
2025-06-01 23:36:26,795 - WARNING - Unknown WebSocket message type: frontend_ready_ack from client client_17488137717366fs54d
2025-06-01 23:36:29,296 - WARNING - [client_17488137717366fs54d] Incoming message client_id (None) does not match connection ID (client_17488137717366fs54d). Overriding in QueueMessage.
2025-06-01 23:36:29,296 - INFO - Processing message ID: ping-1748813789293, Type: ping, Client ID: None
2025-06-01 23:36:29,296 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:36:29,296 - INFO - Processed 3 messages in the last 5 seconds.
2025-06-01 23:36:31,796 - WARNING - [client_17488137717366fs54d] Incoming message client_id (None) does not match connection ID (client_17488137717366fs54d). Overriding in QueueMessage.
2025-06-01 23:36:31,796 - INFO - Processing message ID: ping-1748813791793, Type: ping, Client ID: None
2025-06-01 23:36:31,797 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:36:34,295 - WARNING - [client_17488137717366fs54d] Incoming message client_id (None) does not match connection ID (client_17488137717366fs54d). Overriding in QueueMessage.
2025-06-01 23:36:34,295 - INFO - Processing message ID: ping-1748813794293, Type: ping, Client ID: None
2025-06-01 23:36:34,296 - WARNING - Unknown WebSocket message type: ping from client None
2025-06-01 23:36:34,297 - INFO - Attempting to handle connection for 127.0.0.1:50158 (ID: client_17488137717366fs54d)
2025-06-01 23:36:34,298 - INFO - WebSocket connection accepted for 127.0.0.1:50158 (ID: client_17488137717366fs54d)
2025-06-01 23:36:34,298 - INFO - Adding connection: client_17488137717366fs54d. Total connections: 1
2025-06-01 23:36:34,298 - INFO - [client_17488137717366fs54d] WebSocket cleanly disconnected: Code 1005, Reason: ''
2025-06-01 23:36:34,299 - INFO - [client_17488137717366fs54d] Receiver task finished.
2025-06-01 23:36:34,299 - INFO - Sender task started for client client_17488137717366fs54d
2025-06-01 23:36:34,299 - INFO - Starting receiver for client client_17488137717366fs54d with enhanced message tracing
2025-06-01 23:36:34,299 - INFO - Cancelling pending task sender_client_17488137717366fs54d for client_17488137717366fs54d.
2025-06-01 23:36:34,299 - INFO - [client_17488137717366fs54d] Sender task was cancelled normally.
2025-06-01 23:36:34,299 - INFO - [client_17488137717366fs54d] Sender task finished.
2025-06-01 23:36:34,300 - INFO - Finalizing connection handling for 127.0.0.1:33982. Ensuring cleanup.
2025-06-01 23:36:34,300 - INFO - Removed connection for client client_17488137717366fs54d. Total connections: 0
2025-06-01 23:36:34,300 - INFO - [client_17488137717366fs54d] Sender task was cancelled normally.
2025-06-01 23:36:34,300 - INFO - [client_17488137717366fs54d] Sender task finished.
2025-06-01 23:36:34,300 - INFO - Cancelling pending task receiver_client_17488137717366fs54d for client_17488137717366fs54d.
2025-06-01 23:36:34,300 - INFO - [client_17488137717366fs54d] Receiver task cancelled.
2025-06-01 23:36:34,300 - INFO - [client_17488137717366fs54d] Receiver task finished.
2025-06-01 23:36:34,300 - INFO - Connection handling for 127.0.0.1:33982 finished.
2025-06-01 23:36:34,300 - INFO - Cleanup finished for client_17488137717366fs54d at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:36:34,300 - INFO - Finalizing connection handling for 127.0.0.1:50158. Ensuring cleanup.
2025-06-01 23:36:34,301 - INFO - Closed WebSocket for client client_17488137717366fs54d.
2025-06-01 23:36:34,301 - INFO - Connection handling for 127.0.0.1:50158 finished.
2025-06-01 23:36:34,302 - INFO - Cleanup finished for client_17488137717366fs54d at /ws endpoint's finally block. WebSocketManager handles core connection cleanup.
2025-06-01 23:41:05,134 - INFO - Application shutdown event triggered.
2025-06-01 23:41:05,134 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:41:05,134 - INFO - Simulation is not running. No action needed.
2025-06-01 23:41:05,134 - INFO - SimulationManager stop method called.
2025-06-01 23:41:05,134 - INFO - Stopping MessageProcessor...
2025-06-01 23:41:05,134 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 23:41:05,134 - INFO - MessageProcessor main loop stopped.
2025-06-01 23:41:05,134 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:41:05,135 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:41:05,135 - INFO - MessageProcessor shutdown complete.
2025-06-01 23:41:05,135 - INFO - Stopping QueueForwarder...
2025-06-01 23:41:05,135 - INFO - QueueForwarder task cancelled.
2025-06-01 23:41:05,135 - INFO - QueueForwarder stopped
2025-06-01 23:41:05,135 - INFO - Calling SimulationManager instance stop method...
2025-06-01 23:41:05,135 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:41:05,135 - INFO - Simulation is not running. No action needed.
2025-06-01 23:41:05,136 - INFO - Shutting down WebSocketManager...
2025-06-01 23:41:05,136 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 23:41:05,136 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:41:05,136 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:41:05,136 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 23:41:05,136 - INFO - Application shutdown complete.
2025-06-01 23:41:05,137 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:41:05,137 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:41:06,560 - INFO - Application startup event triggered.
2025-06-01 23:41:06,560 - INFO - Initializing all queues on event loop 190042320...
2025-06-01 23:41:06,561 - INFO - All queues initialized: ['to_frontend', 'from_frontend', 'to_backend', 'from_backend', 'dead_letter']
2025-06-01 23:41:06,561 - INFO - Shared queues initialized.
2025-06-01 23:41:06,561 - INFO - Retrieved queue instances. Event loop ID: 190042320
2025-06-01 23:41:06,561 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 23:41:06,561 - INFO - SimulationManager ready state changed from False to True
2025-06-01 23:41:06,561 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 23:41:06,561 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 23:41:06,562 - INFO - Starting MessageProcessor task.
2025-06-01 23:41:06,562 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 23:41:06,562 - INFO - MessageProcessor task started.
2025-06-01 23:41:06,562 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 23:41:06,562 - INFO - QueueForwarder queues already initialized
2025-06-01 23:41:06,562 - INFO - QueueForwarder task started.
2025-06-01 23:41:06,562 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 23:41:06,563 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 23:41:06,563 - INFO - MessageProcessor main loop started.
2025-06-01 23:41:06,563 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:41:06,563 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input='to_frontend' (to WebSocket).
2025-06-01 23:41:06,563 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:41:11,079 - INFO - Application shutdown event triggered.
2025-06-01 23:41:11,080 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:41:11,080 - INFO - Simulation is not running. No action needed.
2025-06-01 23:41:11,080 - INFO - SimulationManager stop method called.
2025-06-01 23:41:11,080 - INFO - Stopping MessageProcessor...
2025-06-01 23:41:11,080 - INFO - MessageProcessor task was cancelled gracefully.
2025-06-01 23:41:11,080 - INFO - MessageProcessor main loop stopped.
2025-06-01 23:41:11,080 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:41:11,080 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:41:11,080 - INFO - MessageProcessor shutdown complete.
2025-06-01 23:41:11,080 - INFO - Stopping QueueForwarder...
2025-06-01 23:41:11,081 - INFO - QueueForwarder task cancelled.
2025-06-01 23:41:11,081 - INFO - QueueForwarder stopped
2025-06-01 23:41:11,081 - INFO - Calling SimulationManager instance stop method...
2025-06-01 23:41:11,081 - INFO - Attempting to stop simulation for client: N/A
2025-06-01 23:41:11,081 - INFO - Simulation is not running. No action needed.
2025-06-01 23:41:11,081 - INFO - Shutting down WebSocketManager...
2025-06-01 23:41:11,081 - INFO - Initiating WebSocketManager shutdown...
2025-06-01 23:41:11,081 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:41:11,081 - INFO - WebSocketManager shutdown complete.
2025-06-01 23:41:11,081 - INFO - All WebSocket connections attempted to close. Remaining: 0
2025-06-01 23:41:11,081 - INFO - Application shutdown complete.
2025-06-01 23:41:11,082 - INFO - Dead Letter Queue monitor task cancelled.
2025-06-01 23:41:11,082 - INFO - Dead Letter Queue monitor task stopped.
2025-06-01 23:41:12,853 - INFO - Application startup event triggered.
2025-06-01 23:41:12,853 - INFO - Initializing all queues on event loop 73011408...
2025-06-01 23:41:12,854 - INFO - All queues initialized: ['to_frontend', 'from_frontend', 'to_backend', 'from_backend', 'dead_letter']
2025-06-01 23:41:12,854 - INFO - Shared queues initialized.
2025-06-01 23:41:12,854 - INFO - Retrieved queue instances. Event loop ID: 73011408
2025-06-01 23:41:12,854 - INFO - WebSocketManager initialized and stored in dependencies.
2025-06-01 23:41:12,854 - INFO - SimulationManager ready state changed from False to True
2025-06-01 23:41:12,854 - INFO - SimulationManager initialized and stored in dependencies.
2025-06-01 23:41:12,854 - INFO - MessageProcessor queues verified and initialized.
2025-06-01 23:41:12,854 - INFO - Starting MessageProcessor task.
2025-06-01 23:41:12,854 - INFO - MessageProcessor and Dead Letter Queue monitor tasks created and running in background.
2025-06-01 23:41:12,854 - INFO - MessageProcessor task started.
2025-06-01 23:41:12,854 - INFO - QueueForwarder initialized with all queues and WebSocketManager.
2025-06-01 23:41:12,854 - INFO - QueueForwarder queues already initialized
2025-06-01 23:41:12,855 - INFO - QueueForwarder task started.
2025-06-01 23:41:12,855 - INFO - Background task 'monitor_dead_letter_queue_task' launched.
2025-06-01 23:41:12,855 - INFO - Background task 'send_queue_status_to_frontend' launched.
2025-06-01 23:41:12,855 - INFO - MessageProcessor main loop started.
2025-06-01 23:41:12,855 - INFO - Starting Dead Letter Queue monitor task.
2025-06-01 23:41:12,855 - INFO - Starting QueueForwarder WebSocketResponseForwarder with input='to_frontend' (to WebSocket).
2025-06-01 23:41:12,855 - INFO - Starting Dead Letter Queue monitor task.
