<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8">
    <title>Real-time Virtual Meeting Assistant</title>
    <!-- Google Fonts for Material Design 3 -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Icons&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Marked.js für Markdown-Unterstützung -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
      :root {
        --primary: #0026ffc0; /* MD3 Primary */
        --on-primary: #FFFFFF;
        --surface: #FFFFFF;
        --on-surface: #1C1B1F;
        --background: #FFFBFE;
        --shadow: rgba(0, 0, 0, 0.2);
      }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: 'Roboto', sans-serif;
        background: var(--background);
        display: flex;
        flex-direction: column;
        height: 100vh;
      }
      header {
        background-color: var(--primary);
        color: var(--on-primary);
        padding: 16px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 2px 4px var(--shadow);
      }
      header .title {
        font-size: 1.5rem;
        font-weight: 500;
      }
      header nav a {
        color: var(--on-primary);
        text-decoration: none;
        margin-left: 16px;
        font-weight: 500;
        cursor: pointer;
      }
      main {
        flex: 1;
        overflow-y: auto;
        padding: 16px;
      }
      /* Verbundene Views – nur eine sichtbar */
      .view { display: none; }
      .view.active { display: block; }
      /* Card-Style für die einzelnen Listelemente */
      .card {
        background: var(--surface);
        border-radius: 12px;
        box-shadow: 0 2px 4px var(--shadow);
        margin-bottom: 16px;
        overflow: hidden;
      }
      /* Visuelles Highlight, wenn ein Element gepinnt ist */
      .card.pinned {
        border: 2px solid var(--primary);
        background-color: #f0ebff;
      }
      .card summary {
        list-style: none;
        padding: 16px;
        font-size: 1.125rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        outline: none;
      }
      .card details[open] summary {
        border-bottom: 1px solid #eee;
      }
      .card .card-actions button {
        background: transparent;
        border: none;
        color: var(--primary);
        cursor: pointer;
        font-size: 1rem;
        margin-left: 8px;
      }
      .card .card-actions .material-icons {
        vertical-align: middle;
      }
      .card .card-content {
        padding: 16px;
        font-size: 1rem;
        color: var(--on-surface);
      }
      .btn {
        background-color: var(--primary);
        color: var(--on-primary);
        border: none;
        padding: 12px 16px;
        font-size: 1rem;
        border-radius: 8px;
        cursor: pointer;
        box-shadow: 0 2px 4px var(--shadow);
        margin-top: 16px;
      }
      .debug-container { margin-top: 24px; }
      .debug-container textarea {
        width: 100%;
        padding: 8px;
        font-family: 'Roboto', sans-serif;
        font-size: 0.9rem;
        margin-bottom: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }
      footer {
        background-color: var(--primary);
        color: var(--on-primary);
        padding: 12px 16px;
        text-align: center;
      }
      /* Modal Popup Styles */
      .modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.4);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
      }
      .modal.active { display: flex; }
      .modal-content {
        background: var(--surface);
        padding: 24px;
        border-radius: 12px;
        box-shadow: 0 2px 8px var(--shadow);
        max-width: 400px;
        width: 90%;
      }
      .modal-content h3 { margin-top: 0; }
      .modal-content input,
      .modal-content textarea {
        width: 100%;
        padding: 8px;
        margin-bottom: 12px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }
      .modal-content .modal-buttons { text-align: right; }
      .modal-content .modal-buttons button { margin-left: 8px; }
    </style>
  </head>
  <body>
    <header>
      <div class="title">Meeting Assistant</div>
      <nav>
        <a id="nav-meeting">Meeting</a>
        <a id="nav-setup">Setup</a>
        <!-- Settings-Button entfernt -->
      </nav>
    </header>
    <main>
      <!-- Meeting-View -->
      <section id="meeting-view" class="view active">
        <div id="list-container">
          <details class="card">
            <summary>
              <span>Erklärung Titel</span>
              <span class="card-actions">
                <button class="delete-btn" title="Löschen">
                  <span class="material-icons">delete</span>
                </button>
                <button class="pin-btn" title="Pinnen">
                  <span class="material-icons">push_pin</span>
                </button>
              </span>
            </summary>
            <div class="card-content">
              <!-- Hier kann Markdown (z. B. **fett**, _kursiv_) verwendet werden -->
              <p>Volle Erklärung Inhalt</p>
            </div>
          </details>
        </div>
        <div style="text-align: center;">
          <button class="btn" id="add-item">Hinzufügen</button>
        </div>
        <!-- Zusätzliche Debug-Textboxen -->
        <div class="debug-container">
          <textarea id="debug-input" rows="3" placeholder="Debug Input..."></textarea>
          <textarea id="debug-output" rows="3" placeholder="Debug Output..."></textarea>
        </div>
      </section>
      <!-- Setup-Page -->
      <section id="setup-page" class="view">
        <h2>Setup Page</h2>
        <p>Inhalt wird später festgelegt.</p>
      </section>
    </main>
    <footer>
      <p>Impressum & Datenschutz</p>
    </footer>
    <!-- Modal Popup zum Erstellen eines neuen Listenelements -->
    <div id="popup-modal" class="modal">
      <div class="modal-content">
        <h3>Neues Listenelement erstellen</h3>
        <input type="text" id="new-title" placeholder="Titel">
        <textarea id="new-content" rows="4" placeholder="Inhalt (Markdown möglich)"></textarea>
        <div class="modal-buttons">
          <button id="cancel-btn" class="btn">Abbrechen</button>
          <button id="create-btn" class="btn">Erstellen</button>
        </div>
      </div>
    </div>
    <script>
      // Navigation zwischen Views
      const meetingView = document.getElementById('meeting-view');
      const setupPage = document.getElementById('setup-page');
      document.getElementById('nav-meeting').addEventListener('click', function() {
        meetingView.classList.add('active');
        setupPage.classList.remove('active');
      });
      document.getElementById('nav-setup').addEventListener('click', function() {
        setupPage.classList.add('active');
        meetingView.classList.remove('active');
      });
      
      // Öffne das Popup zum Hinzufügen eines neuen Listenelements
      const addItemButton = document.getElementById('add-item');
      const popupModal = document.getElementById('popup-modal');
      addItemButton.addEventListener('click', function() {
        popupModal.classList.add('active');
      });
      
      // Schließe das Popup
      document.getElementById('cancel-btn').addEventListener('click', function() {
        popupModal.classList.remove('active');
      });
      
      // Erstelle ein neues Listenelement basierend auf den Popup-Eingaben
      document.getElementById('create-btn').addEventListener('click', function() {
        const title = document.getElementById('new-title').value.trim();
        const content = document.getElementById('new-content').value.trim();
        if (title && content) {
          const container = document.getElementById('list-container');
          const newCard = document.createElement('details');
          newCard.classList.add('card');
          newCard.innerHTML = `
            <summary>
              <span>${title}</span>
              <span class="card-actions">
                <button class="delete-btn" title="Löschen">
                  <span class="material-icons">delete</span>
                </button>
                <button class="pin-btn" title="Pinnen">
                  <span class="material-icons">push_pin</span>
                </button>
              </span>
            </summary>
            <div class="card-content">
              ${marked.parse(content)}
            </div>
          `;
          container.appendChild(newCard);
          // Eingabefelder leeren und Popup schließen
          document.getElementById('new-title').value = '';
          document.getElementById('new-content').value = '';
          popupModal.classList.remove('active');
        }
      });
      
      // Event-Delegation für Löschen und Pinnen
      document.getElementById('list-container').addEventListener('click', function(e) {
        if (e.target.closest('.delete-btn')) {
          e.target.closest('details').remove();
        }
        if (e.target.closest('.pin-btn')) {
          const card = e.target.closest('details');
          card.classList.toggle('pinned');
        }
      });
    </script>
  </body>
</html>
